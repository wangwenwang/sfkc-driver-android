webpackJsonp([1],{"+JxA":function(t,e){},"/Z2R":function(t,e){},0:function(t,e){},"02OE":function(t,e){},"0YSe":function(t,e){},1:function(t,e){},"1bEl":function(t,e){},2:function(t,e){},"2IDr":function(t,e){},3:function(t,e){},"3q/r":function(t,e){},4:function(t,e){},"4UD6":function(t,e){},"4Vh3":function(t,e){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},"5PmW":function(t,e){},"5XjF":function(t,e){},"6ZSt":function(t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},"6q5P":function(t,e){},"7/HN":function(t,e){},"7ADV":function(t,e,a){t.exports=a.p+"img/defaultHead.fd63503.png"},"82cy":function(t,e){},"84Ns":function(t,e){},"8LW+":function(t,e){},"8YCc":function(t,e){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},"8hiD":function(t,e){},"9cOk":function(t,e){},A5uk:function(t,e){},AbpN:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC3ElEQVRYR8WXXcifcxjHPx9CSlmy1kgOJEnzsvR4aYyMEyXtZJIDy0g7WHKwIifm5UAxsqjJ28HDvJU4kiwvaxgiL0le0mIWRU4Q46tr3Y/+Pfb879/t/y/X4X1fv+v7/V3vP/mfxaH4SdYA1wCHNpz9C9iqbltIdxCBJEcC3wKfAL82ECiV84BT1TrzLxlK4FrgduAY9c8+Ap23ngDOUD+cBoHXgXfVGxvAjwI+Bx5WN04cgiTHAt8AZ6rvNRCYBWaAU9Tfp0HgFmCtekID+KXAi8DZ6q5x+s05kOQr4BG1cmBBSXIE8CUw2xKqJgJJzgLeAo5TKwzjCDwEXAycrPZWSiuBLcDp6ooe8Pr/GrBS3dEXqvrfSyDJIcD3wM3qgwsZTXI48CnwgrqhBbyVwGXAs8AS9acxBO4DCviurkn9ADyq/jJREiZ5BjhMLSIHlCRVbpUj8z26uS8Rx4agy+gfgavUp1vd2oXtDWCvevl/9kCS64C7gcXqbwMIPACsqzmgvj0JgbrFF+raAeBXVg8ArlYf7zu3YAiSHA98DaxSX+kzVP+TLAd2Ao+p17ecGUdgJfAqsKlsjxjbB9yhjn4r8Bo+H3XzYoX6x6QEqv6fBFbPy+7t6kWjxpMcDGwHTgROU6sEm6S3Ec1ZSVK63wG3zm9ISe4B1gPnqO83IXdKQwic34XkaLVKc78kKQ89B1yhPjUEvKkTjgDVPFimVm7MgS8Dqsxq77thKHgzgRH3V/Ld39289sNas3YDF7SsaAci2BSCJBcCVYq1C+5NchDwEnBSNyX/CclQL7QSqClY7t8/jpPcCZTLZ9SPh4KO6vcS6EqsymqTem+SuXVrtfr8JOBNOZBkFfAysBRYBLwDbFFvmhS8lcDWelhUSwY+6NrzJWq9eiaWlhDsATbXmlV7HrBc/Xli5NZGlKQGUt12cfcm+Gxa4K0hOBeoN8Ft6pvTBG8iMG3A+fb+BoQzFDAmauuPAAAAAElFTkSuQmCC"},"B9+k":function(t,e){},BaWC:function(t,e){},"D/do":function(t,e){},Dzky:function(t,e){},Fy65:function(t,e){},GC0Y:function(t,e){},GK9X:function(t,e){},"H5a+":function(t,e){},HWhq:function(t,e){},HqYX:function(t,e){},ItJw:function(t,e){},"J/rV":function(t,e){},JUVm:function(t,e){},K1CS:function(t,e){},KYqO:function(t,e){t.exports={_args:[["elliptic@6.4.0","/Users/89010955/project/CY/TMS/SXJF/SFKC_driver/sfkc-dev/sfkc-driver-app"]],_from:"elliptic@6.4.0",_id:"elliptic@6.4.0",_inBundle:!1,_integrity:"sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.0",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.0",saveSpec:null,fetchSpec:"6.4.0"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",_spec:"6.4.0",_where:"/Users/89010955/project/CY/TMS/SXJF/SFKC_driver/sfkc-dev/sfkc-driver-app",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.0"}},L6wv:function(t,e){},M47N:function(t,e){},MLBd:function(t,e){},N3cg:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADD0lEQVRYR8WXXeiecxjHP58coJQTyciyA0ypWaxp7QSlcCaHlpRRWK1myGQ2a5h5C3mZlCyZA5GX8rIjjdq8JxQpjZADJw6EfHWte7o9//v/3Pf97F+uek6e+/e7r8/vur7X9btu+Z/Nsf6TLAYeAE4YuPc34F713a71swA8D6wGvh0IcCJwnFrgc2wUQJLjgV+Ay9XXhgAkeQM4RV02CCDJB8Au9cnJDUnWA7cBJ6l/9wEkuRJ4FjhfPTAUYBuwCbhW3dXelOQr4HV1wwDnFfqvgcfVW+db35mCJPcBN7UhkqwA9gNnqQUy1ZrQnwaco/4xCqAWT0IkuR5Yqy4f4Pwq4GngPPXTaeunirAD4mz182kvTHIy8CXwoHpnH2xvFXSlowdgb9MjzlX/OmKAiXSsUx+d76VJrgaeaPJeUei1IRE4Fvgd2NEIsxOiFfrvgJdKRsA+9Z2ZNdCc/jpghXpNks1A5XUORJIK/YUTzgqi9n44ugoOb0jyPvCNuqYBqvKsMu1LR5XtPmCNumcmgCRLmp5/sfp2C2oqRJJFQJXfj8BKtVLYaX1leHedADhVrXD+a0k6IZKUZt6rdg0sV3+aWQNJvgd2z9dKuyCSvAJcBKxSP+srg3kjkOQYoO7yyl/19La9rH4yoYmN6s4k1QH3tFN2JBG4vbmYCqZti9WDHZo4BNF36vbz3j4wkfeHm6t15aSTJDcCjwCjIAYDJKm1Jagd6v2t0x8NbFC3zwIxBqCaTDWbyfC/AFwGLFV/GAsxBuApoG7DVa3TbwTuAS5V32z9PzgdgwCSHNXMglvVhxr1XwLUXHhzOyUdEFumXctDASrErwKL1J+TnAnU7FjleKhFd1krHTvVitYcGwrwHLBEXd1Mxh81bfYC9c9pZdcH0QvQNKQaxWsafgx4CzgDWKb+OqTmk6wFSkN3qXeM6gNJrgBerPADt9Rc2FwwXwxx3tLEOuAGdelYgN11GQHPNL//KH4MxEwaSFIA9VVzeqVBre/CBbMhGqgPjBpAPj5cggvmHegFWEhnXe/6B87LbTCgN0JaAAAAAElFTkSuQmCC"},NHJI:function(t,e,a){t.exports=a.p+"img/WePayLogo.ac49e82.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),s=a.n(i),o=a("woOf"),n=a.n(o),r=a("mvHQ"),l=a.n(r),c=a("7+uW"),d=a("zL8q"),u=a.n(d),h=(a("tvR6"),a("/ocq")),p=a("mtWM"),v=a.n(p),m=a("7t+N"),f=a.n(m),_={name:"Login",data:function(){return{userName:"",password:"",tips_Msg:"",ifTips:!1,MinuteNum:60,CountDown:""}},mounted:function(){f()("input").attr("maxlength","50"),window.VersionShow=this.VersionShow,window.Device_Ajax=this.Device_Ajax,this.loginVueMounted(),this.getItem("SXJF_phone")&&this.getItem("SXJF_pwd")&&(this.userName=this.getItem("SXJF_phone"),this.password=this.getItem("SXJF_pwd"),this.login())},created:function(){},beforeDestroy:function(){clearInterval(this.CountDown)},methods:{loginVueMounted:function(){try{CallAndroidOrIOS.callAndroid("登录页面已加载","")}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"登录页面已加载"})}catch(t){}},VersionShow:function(t){this.$store.state.App_Version=t},Device_Ajax:function(t){this.$store.state.Device=t},pluginGetUser:function(t,e){try{CallAndroidOrIOS.callAndroidTrack(t,e)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:t})}catch(t){}},sendIdentifying:function(){var t=this;if(60==t.MinuteNum){var e=t.userName+"";if(e.length<=0)t.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}});else if(11!=e.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else{var a={cellphone:t.userName,next_page:"denglu"};this.httpRequest("sendYzmToCellphone.do",a,function(e){t.ifTips=!0,t.tips_Msg="验证码已发送",f()(".button").css("color","#555").html("重新发送("+t.MinuteNum+")"),t.CountDown=setInterval(function(){t.MinuteNum--,f()(".button").html("重新发送("+t.MinuteNum+")"),t.MinuteNum<0&&(f()(".button").css("color"," #038EEA").html("重新获取验证码"),t.MinuteNum=60,clearInterval(t.CountDown))},1e3),setTimeout(function(){t.ifTips=!1},1500)})}}},sfkcLogin:function(){var t=this;if(this.userName)if(this.password){var e={cellphone:this.userName,verificationCode:this.password};this.httpRequest("sfkcAppLogin.do",e,function(e){t.$store.state.userInfo=e.data,t.$store.state.WaybillData=[],t.$store.state.Waybill_NoSearchFrom=!0,t.$store.state.Waybill_needRefresh=!0,t.pluginGetUser(t.userName+"",""),t.setItem({name:"SXJF_USERDATA",value:e.data,expires:6048e5}),t.setItem({name:"SXJF_phone",value:t.userName}),t.$router.push({name:"Index",query:{}})})}else t.$alert("请输入验证码","提示",{confirmButtonText:"确定",callback:function(t){}});else t.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}})},login:function(){var t=this;if(this.userName)if(this.password){var e={cellphone:this.userName,password:this.password,wxOpenid:""};this.httpRequest("login.do",e,function(e){t.$store.state.userInfo=e.data,t.$store.state.WaybillData=[],t.$store.state.Waybill_NoSearchFrom=!0,t.$store.state.Waybill_needRefresh=!0,t.setItem({name:"SXJF_USERDATA",value:e.data,expires:6048e5}),t.setItem({name:"SXJF_phone",value:t.userName}),t.setItem({name:"SXJF_pwd",value:t.password}),t.pluginGetUser(t.userName+"",""),t.$router.push({name:"Index",query:{}})})}else t.$alert("密码不能为空","提示",{confirmButtonText:"确定",callback:function(t){}});else t.$alert("用户名不能为空","提示",{confirmButtonText:"确定",callback:function(t){}})},constructor:function(t){this.name="storage"},removeItem:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()},repwd:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},reg:function(){this.$router.push({name:"Identifying",query:{page:"Reg"}})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Login"},[a("div",{staticClass:"container"},[t._m(0),t._v(" "),a("div",{staticClass:"identeContainer"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",attrs:{placeholder:"请输入手机号"},domProps:{value:t.userName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("password")},input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{placeholder:"请输入密码",type:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"login",on:{click:t.login}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"repswd"},[a("span",{on:{click:t.repwd}},[t._v("忘记密码")])])]),t._v(" "),a("div",{staticClass:"App_Version"},[a("span",[t._v(t._s(this.$store.state.App_Version))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"LoginLogo"},[e("img",{attrs:{src:a("iQH9"),alt:""}})])}]};var b=a("VU/8")(_,g,!1,function(t){a("02OE")},"data-v-f7214c16",null).exports,y={name:"Reg",data:function(){return{typeMShow:!1,cellphone:"",userName:"",password:"",IDCardNum:"",vicheNo:"",vehicleType:"请选择",vehicleType_code:"",vehicleLength:"",vehicleWide:"",vehicleHeight:"",maxLoadWeight:"",maxLoadVolumn:"",tips_Msg:"",ifTips:!1,typeOfCarList:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{}}},mounted:function(){this.$refs.userName.focus()},created:function(){var t=this;if(this.cellphone=this.$route.query.phoneNum,this.uploadParams.cellphone=this.cellphone,this.$store.state.typeOfCarList.length)this.typeOfCarList=t.$store.state.typeOfCarList;else{this.httpRequest("queryCodeLukupData.do",{listName:"TMS-客户指定车型",tenantCode:"SFKC"},function(e){t.typeOfCarList=e.data,t.$store.state.typeOfCarList=e.data})}},methods:{goPrev:function(){this.$router.push({name:"Identifying",query:{page:"Reg"}})},regBtn:function(){var t=this;if(t.userName&&t.password&&t.IDCardNum&&t.vicheNo&&t.maxLoadWeight&&t.maxLoadVolumn)if(t.vehicleType_code)if(t.password.length<6)t.$alert("密码不能小于六位数","提示",{confirmButtonText:"确定"});else{this.$refs.upload_info1.submit(),this.$refs.upload_info2.submit(),this.$refs.upload_info3.submit(),this.$refs.upload_info4.submit();var e={loginname:"",username:t.userName,idNo:t.IDCardNum,password:t.password,cellphone:t.cellphone,vicheNo:t.vicheNo,vehicleType:t.vehicleType_code,vehicleLength:t.vehicleLength,vehicleWide:t.vehicleWide,vehicleHeight:t.vehicleHeight,maxLoadWeight:t.maxLoadWeight,maxLoadVolumn:t.maxLoadVolumn};t.httpRequest("registerAppUser.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.ifTips=!1,t.toLogin()},1500)})}else t.$alert("请选择车型","提示",{confirmButtonText:"确定"});else t.$alert("请输入必填项","提示",{confirmButtonText:"确定"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},TypeOfCar:function(){this.typeMShow=!0},SelectComit:function(t){this.typeMShow=!1,this.vehicleType=this.typeOfCarList[t].description,this.vehicleType_code=this.typeOfCarList[t].code}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Reg"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("注册")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"regContainer"},[a("div",{staticClass:"regInfo"},[t._m(0),t._v(" "),a("div",[a("span",[t._v("手机号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cellphone,expression:"cellphone"}],attrs:{readonly:""},domProps:{value:t.cellphone},on:{input:function(e){e.target.composing||(t.cellphone=e.target.value)}}})]),t._v(" "),a("div",[a("span",[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",attrs:{placeholder:"必填"},domProps:{value:t.userName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("password")},input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t.userName?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("userName")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{placeholder:"必填"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("IDCardNum")},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.password?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("password")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("身份证号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.IDCardNum,expression:"IDCardNum"}],ref:"IDCardNum",attrs:{placeholder:"必填"},domProps:{value:t.IDCardNum},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vicheNo")},input:function(e){e.target.composing||(t.IDCardNum=e.target.value)}}}),t.IDCardNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("IDCardNum")}}}):t._e()]),t._v(" "),t._m(1),t._v(" "),a("div",[a("span",[t._v("车牌号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vicheNo,expression:"vicheNo"}],ref:"vicheNo",attrs:{placeholder:"必填"},domProps:{value:t.vicheNo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleLength")},input:function(e){e.target.composing||(t.vicheNo=e.target.value)}}}),t.vicheNo?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vicheNo")}}}):t._e()]),t._v(" "),a("div",{on:{click:t.TypeOfCar}},[a("span",[t._v("车型")]),a("div",[a("span",[t._v(t._s(t.vehicleType))]),a("i",{staticClass:"iconfont icon-xiangshang"})])]),t._v(" "),a("div",[a("span",[t._v("车长（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleLength,expression:"vehicleLength"}],ref:"vehicleLength",attrs:{placeholder:"车长",type:"number"},domProps:{value:t.vehicleLength},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleWide")},input:function(e){e.target.composing||(t.vehicleLength=e.target.value)}}}),t.vehicleLength.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleLength")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("车宽（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleWide,expression:"vehicleWide"}],ref:"vehicleWide",attrs:{placeholder:"车宽",type:"number"},domProps:{value:t.vehicleWide},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleHeight")},input:function(e){e.target.composing||(t.vehicleWide=e.target.value)}}}),t.vehicleWide.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleWide")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("车高（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleHeight,expression:"vehicleHeight"}],ref:"vehicleHeight",attrs:{placeholder:"车高",type:"number"},domProps:{value:t.vehicleHeight},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("maxLoadWeight")},input:function(e){e.target.composing||(t.vehicleHeight=e.target.value)}}}),t.vehicleHeight.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleHeight")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("载重（吨）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxLoadWeight,expression:"maxLoadWeight"}],ref:"maxLoadWeight",attrs:{placeholder:"必填",type:"number"},domProps:{value:t.maxLoadWeight},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("maxLoadVolumn")},input:function(e){e.target.composing||(t.maxLoadWeight=e.target.value)}}}),t.maxLoadWeight.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("maxLoadWeight")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("载重体积(方)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxLoadVolumn,expression:"maxLoadVolumn"}],ref:"maxLoadVolumn",attrs:{placeholder:"必填",type:"number"},domProps:{value:t.maxLoadVolumn},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.regBtn(e)},input:function(e){e.target.composing||(t.maxLoadVolumn=e.target.value)}}}),t.maxLoadVolumn?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("maxLoadVolumn")}}}):t._e()]),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("身份证正面照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info1",attrs:{action:t.HOST+"registerUploadPicture.do",limit:2,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("身份证反面照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info2",attrs:{action:t.HOST+"registerUploadPicture.do",limit:2,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("驾驶证照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info3",attrs:{action:t.HOST+"registerUploadPicture.do",limit:3,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("行驶证照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info4",attrs:{action:t.HOST+"registerUploadPicture.do",limit:3,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.regBtn}},[t._v("注册")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.typeMShow?a("div",{staticClass:"SelectMeng"},[a("div",{staticClass:"SelectWarehouses"},[a("div",{staticClass:"SelectTitle"},[t._v("请选择车型")]),t._v(" "),a("div",{staticClass:"SelectItem"},t._l(t.typeOfCarList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.SelectComit(i)}}},[t._v(t._s(e.description))])}),0),t._v(" "),a("div",{staticClass:"cancel",on:{click:function(e){return t.selectCancel("e")}}},[t._v("取消")])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("个人信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("车辆信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("上传资料")])])}]};var C=a("VU/8")(y,L,!1,function(t){a("GK9X")},"data-v-e52cb6ae",null).exports,S={name:"ForgotPwd",data:function(){return{newPassWord:"",rePassWord:"",tips_Msg:"",ifTips:!1}},mounted:function(){this.$refs.newPassWord.focus()},methods:{goPrev:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},submit:function(){var t=this;if(""!=t.newPassWord)if(""!=t.rePassWord)if(t.newPassWord==t.rePassWord)if(t.newPassWord.length<6)t.$alert("密码不能小于六位数","提示",{confirmButtonText:"确定"});else{var e={cellphone:t.$route.query.phoneNum,next_page:"wangjimima",oldPassword:t.newPassWord,password:t.newPassWord};t.httpRequest("updateUserPassword.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.ifTips=!1,t.toLogin()},1500)})}else t.$alert("两次密码输入不一致","提示",{confirmButtonText:"确定"});else t.$alert("请输入确认密码","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码","提示",{confirmButtonText:"确定"})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ForgotPwd"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("忘记密码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"identeContainer"},[a("div",[a("span",[t._v("新密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassWord,expression:"newPassWord"}],ref:"newPassWord",attrs:{placeholder:"请输入新密码"},domProps:{value:t.newPassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("rePassWord")},input:function(e){e.target.composing||(t.newPassWord=e.target.value)}}}),t.newPassWord?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("newPassWord")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("确认密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rePassWord,expression:"rePassWord"}],ref:"rePassWord",attrs:{placeholder:"请确认新密码"},domProps:{value:t.rePassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.rePassWord=e.target.value)}}}),t.rePassWord?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("rePassWord")}}}):t._e()]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("找回密码")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[]};var I=a("VU/8")(S,N,!1,function(t){a("hFOO")},"data-v-6479dec2",null).exports,w={name:"Identifying",data:function(){return{page:"wangjimima",phoneNum:"",identifyingCode:"",tips_Msg:"",ifTips:!1,MinuteNum:60,CountDown:""}},mounted:function(){this.$refs.phoneNum.focus()},created:function(){this.$route.query.page&&("ForgotPwd"==this.$route.query.page?this.page="wangjimima":"Reg"==this.$route.query.page&&(this.page="zhucezhanghao"))},beforeDestroy:function(){clearInterval(this.CountDown)},methods:{sendIdentifying:function(){var t=this;if(60==t.MinuteNum)if(t.phoneNum.length)if(11!=t.phoneNum.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else{var e={cellphone:t.phoneNum,next_page:t.page};this.httpRequest("sendYzmToCellphone.do",e,function(e){t.ifTips=!0,t.tips_Msg="验证码已发送",f()(".button").css("color","#555").html("重新发送("+t.MinuteNum+")"),t.CountDown=setInterval(function(){t.MinuteNum--,f()(".button").html("重新发送("+t.MinuteNum+")"),t.MinuteNum<0&&(f()(".button").css("color"," #038EEA").html("重新获取验证码"),t.MinuteNum=60,clearInterval(t.CountDown))},1e3),setTimeout(function(){t.ifTips=!1},1500)})}else t.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}})},nextTo:function(){var t=this;if(t.phoneNum)if(11!=t.phoneNum.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else if(t.identifyingCode){var e={cellphone:t.phoneNum,verificationCode:t.identifyingCode,next_page:t.page};this.httpRequest("validateVerificationCode.do",e,function(e){t.$route.query.page&&("ForgotPwd"==t.$route.query.page?t.$router.push({name:"ForgotPwd",query:{phoneNum:t.phoneNum}}):"Reg"==t.$route.query.page&&t.$router.push({name:"Reg",query:{phoneNum:t.phoneNum}}))})}else t.$alert("请输入验证码","提示",{confirmButtonText:"确定",callback:function(t){}});else t.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Identifying"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.toLogin}}),a("span",[t._v("验证手机号")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"identeContainer"},[a("div",[t._v("我们将发送验证码到您的手机")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],ref:"phoneNum",attrs:{placeholder:"请输入手机号"},domProps:{value:t.phoneNum},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("identifyingCode")},input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}}),t._v(" "),t.phoneNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("phoneNum")}}}):t._e()]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.identifyingCode,expression:"identifyingCode"}],ref:"identifyingCode",attrs:{placeholder:"请输入验证码"},domProps:{value:t.identifyingCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextTo(e)},input:function(e){e.target.composing||(t.identifyingCode=e.target.value)}}}),t.identifyingCode?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("identifyingCode")}}}):t._e(),t._v(" "),a("div",{staticClass:"button",on:{click:t.sendIdentifying}},[t._v("获取验证码")])]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.nextTo}},[t._v("下一步")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[]};var D=a("VU/8")(w,k,!1,function(t){a("+JxA")},"data-v-44b7ee3e",null).exports,T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",t._l(t.footList,function(e,i){return a("div",{key:i,class:{active:t.active==e.title},attrs:{id:i},on:{click:function(e){return t.toggle(i)}}},[a("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),a("p",[t._v(t._s(e.title))])])}),0)])},staticRenderFns:[]};var x=a("VU/8")({name:"FooterIndex",data:function(){return{footList:[{path:"Index",title:"首页",icon:"icon-shouye-blue"},{path:"Waybill",title:"任务",icon:"icon-woderenwu"},{path:"HomeIndex",title:"我的",icon:"icon-gerenzhongxin"}],active:"首页"}},created:function(){for(var t=0;t<this.footList.length;t++){if("historyList"==this.$route.name)return void(this.active="任务");if(this.$route.name==this.footList[t].path)return void(this.active=this.footList[t].title)}this.$route.query.active&&(this.active=this.$route.query.active)},methods:{toggle:function(t){this.$store.state.Waybill_needRefresh=!1,this.active=this.footList[t].title,this.$router.push({name:this.footList[t].path,query:{active:this.footList[t].title}})}}},T,!1,function(t){a("rGXg")},"data-v-1c0fcfb6",null).exports;a("i5pW");var $={name:"Index",data:function(){return{noticeList:[],numberPerPage:10,loadPage:1,allLoaded:!0,autoFill:!1,is_NoData:!1,LoadingIndex:!1,loadingIndexText:"拼命加载中",AuditWeightLimits:!1,printFlag:"F",AirMasterScanLimits:!1,warehouseManagerFlag:""}},components:{FooterIndex:x},mounted:function(){this.allLoaded=!1},created:function(){this.$store.state.userInfo.reviewWeightFlag&&1==this.$store.state.userInfo.reviewWeightFlag?this.AuditWeightLimits=!0:this.AuditWeightLimits=!1,this.$store.state.userInfo.airlineMasterScanFlag&&1==this.$store.state.userInfo.airlineMasterScanFlag?this.AirMasterScanLimits=!0:this.AirMasterScanLimits=!1,this.$store.state.userInfo.printFlag&&(this.printFlag=this.$store.state.userInfo.printFlag),this.$store.state.userInfo.warehouseManagerFlag&&(this.warehouseManagerFlag=this.$store.state.userInfo.warehouseManagerFlag),this.loadData()},methods:{loadData:function(t){var e=this,a={currentPage:this.loadPage,numberPerPage:this.numberPerPage,cellphone:e.$store.state.userInfo.cellphone,versionNo:e.$store.state.App_Version,type:e.$store.state.Device};this.LoadingIndex=!0,this.httpRequest("forcedUpdatingNewOne",a,function(a){e.LoadingIndex=!1,t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.noticeList=e.noticeList.concat(a.data):(e.noticeList=a.data,a.data.length?e.is_NoData=!1:e.is_NoData=!0),a.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},toWaybillInfo:function(t,e,a){this.$store.state.Waybill.WaybillInfo.clickShipmentId=t;var i="Link_PickUp";"提货"==a?i="Link_PickUp":"中转"==a?i="Link_Transit":"派件"==a?i="Link_ToSend":"目的HUB承运商"==a&&(i="Link_AirportPickUp"),"WEI"==e?(this.$store.state.Waybill.waybillLinkStatus=i,this.$router.push({name:"WaybillInfo",query:{LinkStatus:i}})):(this.$store.state.history_LinkStatus=i,this.$router.push({name:"WaybillDetail",query:{LinkStatus:i}}))},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Index"},[t._m(0),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"swipper"},[i("div",{staticClass:"block"},[i("el-carousel",{attrs:{trigger:"click",height:"150px"}},[i("el-carousel-item",[i("img",{staticStyle:{height:"150px",width:"100%"},attrs:{src:a("l9IN")}})]),t._v(" "),i("el-carousel-item",[i("img",{staticStyle:{height:"150px",width:"100%"},attrs:{src:a("n55d")}})])],1)],1)]),t._v(" "),i("div",{staticClass:"option"},["是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/SweepCodePrinting"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("揽收扫码打印")])]):t._e(),t._v(" "),"是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:{name:"AviationWaybill",query:{pagetype:"air"}}}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("航空出港扫描")])]):t._e(),t._v(" "),"是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/ExceptionList"}},[i("i",{staticClass:"iconfont icon-qianshou"}),t._v(" "),i("span",[t._v("异常单签收")])]):t._e(),t._v(" "),t.AirMasterScanLimits&&"是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/AirMasterScan"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("航空主单扫描")])]):t._e(),t._v(" "),t.AuditWeightLimits?i("router-link",{attrs:{to:"/AuditWeight"}},[i("i",{staticClass:"iconfont icon-accAudit"}),t._v(" "),i("span",[t._v("重量稽核")])]):t._e(),t._v(" "),t.printFlag&&"T"==t.printFlag&&"是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/PrintExpressShein"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("打印顺丰面单")])]):t._e(),t._v(" "),i("router-link",{attrs:{to:"/ReportAbnormal"}},[i("i",{staticClass:"iconfont icon-yichang"}),t._v(" "),i("span",[t._v("异常上报")])]),t._v(" "),t.warehouseManagerFlag&&"是"==t.warehouseManagerFlag?i("router-link",{attrs:{to:"/WarehousingSignScan"}},[i("i",{staticClass:"iconfont icon-qianshou"}),t._v(" "),i("span",[t._v("入仓签收")])]):t._e(),t._v(" "),"是"!=t.warehouseManagerFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/PortScanning"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("进港扫描")])]):t._e(),t._v(" "),t.$store.state.userInfo.receiptFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/UploadReceipt"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("签收单")])]):t._e(),t._v(" "),"是"==t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/LeadWarehouseScan"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("前置仓扫描")])]):t._e(),t._v(" "),t.$store.state.userInfo.airlinePrintFlag&&"是"!=t.$store.state.userInfo.frontWarehouseFlag?i("router-link",{attrs:{to:"/AirLabelPrinting"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("航空标签打印")])]):t._e()],1),t._v(" "),i("div",{staticClass:"noticeHeader"},[t._v("通知：")]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.LoadingIndex,expression:"LoadingIndex",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"noticeContent",staticStyle:{overflow:"scroll",height:"calc(100% - 310px)"},attrs:{"element-loading-text":t.loadingIndexText,"element-loading-background":"rgba(0, 0, 0, 0)"}},[i("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[i("div",[t._l(t.noticeList,function(e,a){return i("div",{key:a,staticClass:"noticeItem",attrs:{id:a},on:{click:function(a){return t.toWaybillInfo(e.shipmentID,e.appointLoadingSite,e.transportLinks)}}},[i("div",["未查看"==e.daoDaPlace?i("i",{staticClass:"iconfont icon-weiduxiaoxi  red"}):i("i",{staticClass:"iconfont icon-yiduxiaoxi-"}),t._v(" "),i("span",[t._v("配载单号：")]),i("span",[t._v(t._s(e.code))]),t._v(" "),i("span",[t._v(t._s(e.addDate))])])])}),t._v(" "),t.allLoaded&&t.noticeList.length?i("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),i("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?i("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?i("div",{staticClass:"NoData"},[t._m(1)]):t._e()],1)]),t._v(" "),i("FooterIndex")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("span",[this._v("首页")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有通知")])])}]};var B=a("VU/8")($,P,!1,function(t){a("7/HN")},"data-v-d460347c",null).exports,A={name:"ExceptionList",data:function(){return{AbnormalListData:[],is_NoData:!1,is_NoData_text:"没有异常订单",numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,tips_Msg:"",ifTips:!1}},mounted:function(){},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={currentPage:e.loadPage,numberPerPage:e.numberPerPage,cellphone:e.$store.state.userInfo.cellphone};this.httpRequest("abnormalOrderSFData.do",a,function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.AbnormalListData=e.AbnormalListData.concat(a.data):(e.AbnormalListData=a.data,a.data.length?e.is_NoData=!1:(e.is_NoData_text="没有异常订单",e.is_NoData=!0)),a.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},abnormalSign:function(t){event.stopPropagation();this.$router.push({name:"AbnormalScan",query:{omsNo:this.AbnormalListData[t].omsNo,actualQty:this.AbnormalListData[t].actualQty,AbHasScanNum:this.AbnormalListData[t].deliveryNumber,orderId:this.AbnormalListData[t].orderId,deliveryId:this.AbnormalListData[t].deliveryId}})},ScanQueryOrderInfo:function(){this.$router.push({name:"ScanQueryOrderInfo"})},goprev:function(){this.$router.push({name:"Index"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ExceptionList"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("异常单列表")]),a("i",{staticClass:"iconfont icon-sousuoxiawu-",on:{click:t.ScanQueryOrderInfo}})]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"AbnormalContainer ",staticStyle:{overflow:"scroll"}},[a("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"AbnormalList"},[t._l(t.AbnormalListData,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n\t\t\t\t      "),e.clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()])]),t._v(" "),a("div",[a("span",[t._v("发起时间：")]),a("span",[t._v(t._s(e.sponsorTime))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(e.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(e.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(e.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("发起人：")]),a("span",[t._v(t._s(e.sponsorName))])]),t._v(" "),a("div",[a("span",[t._v("发起人承运商：")]),a("span",[t._v(t._s(e.operateRdcName))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("异常环节：")]),a("span",[t._v(t._s(e.abnormalLink))])]),t._v(" "),a("div",[a("span",[t._v("异常类型：")]),a("span",[t._v(t._s(e.abnormalType))])])]),t._v(" "),a("div",[a("span",[t._v("责任方：")]),a("span",[t._v(t._s(e.responsibleParty))])]),t._v(" "),a("div",[a("span",[t._v("异常描述：")]),a("span",[t._v(t._s(e.abnormalExplain))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.abnormalSign(i)}}},[t._v("异常单签收")])])])}),t._v(" "),t.allLoaded&&t.AbnormalListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)])],1)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var F=a("VU/8")(A,O,!1,function(t){a("ndWM")},"data-v-3c673520",null).exports,U=new c.default,W={name:"scan",props:["loadingData","switchScan","textre","deliveryNoSF"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){this.textre&&(this.placeholdertext=this.textre),this.deliveryNoSF&&(this.code=this.deliveryNoSF,this.$emit("scanData",this.code))},mounted:function(){this.$refs.code.focus()},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData",this.code)},startRecognize:function(){this.$emit("scanData","")}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"},on:{click:function(e){return t.androidScan("code")}}},[t._m(0)]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("扫描")]),e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var M=a("VU/8")(W,R,!1,function(t){a("m4tS")},"data-v-81a03eda",null).exports,E={name:"ScanQueryOrderInfo",data:function(){return{AbnormalInfoData:[],loadingData:!1,AbnormalInfo_show:!1,scanLabel:"",LocateAbnormalScanLabel:"",tips_Msg:"",ifTips:!1}},components:{"v-scan":M},mounted:function(){},created:function(){this.$route.query.LocateAbnormalScanLabel&&(this.LocateAbnormalScanLabel=this.$route.query.LocateAbnormalScanLabel,this.scanData(this.LocateAbnormalScanLabel))},methods:{scanData:function(t){var e=this;this.scanLabel=t,e.AbnormalInfo_show=!0;var a={scanLabel:t,cellphone:e.$store.state.userInfo.cellphone,currentPage:1,numberPerPage:3};this.httpRequest("abnormalOrderSFData.do",a,function(t){e.AbnormalInfoData=t.data,e.AbnormalInfo_show=!0})},abnormalSign:function(){event.stopPropagation();this.$router.push({name:"AbnormalScan",query:{omsNo:this.AbnormalInfoData[0].omsNo,LocateAbnormalScanLabel:this.scanLabel,actualQty:this.AbnormalInfoData[0].actualQty,AbHasScanNum:this.AbnormalInfoData[0].deliveryNumber,orderId:this.AbnormalInfoData[0].orderId,deliveryId:this.AbnormalInfoData[0].deliveryId}})},goprev:function(){this.$router.push({name:"ExceptionList"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ScanQueryOrderInfo"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("定位异常单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"containerInfo"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.AbnormalInfo_show,expression:"AbnormalInfo_show"}],staticClass:"orderInfo"},[t.AbnormalInfoData.length?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].omsNo,expression:"AbnormalInfoData[0].omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.AbnormalInfoData[0].omsNo)+"\n\t\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].omsNo,expression:"AbnormalInfoData[0].omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].clientOrderNo,expression:"AbnormalInfoData[0].clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.AbnormalInfoData[0].clientOrderNo)+"\n\t\t\t\t\t\t      "),t.AbnormalInfoData[0].clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].clientOrderNo,expression:"AbnormalInfoData[0].clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()])]),t._v(" "),a("div",[a("span",[t._v("发起时间：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].sponsorTime))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.AbnormalInfoData[0].receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("发起人：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].sponsorName))])]),t._v(" "),a("div",[a("span",[t._v("发起人承运商：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].operateRdcName))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("异常环节：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalLink))])]),t._v(" "),a("div",[a("span",[t._v("异常类型：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalType))])])]),t._v(" "),a("div",[a("span",[t._v("责任方：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].responsibleParty))])]),t._v(" "),a("div",[a("span",[t._v("异常描述：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalExplain))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.abnormalSign}},[t._v("异常单签收")])])]):t._e()])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var q=a("VU/8")(E,H,!1,function(t){a("Dzky")},"data-v-79163f30",null).exports,Q={name:"PrintExpress",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1}},components:{"v-scan":M},mounted:function(){},created:function(){},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:t};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"surfacePrint.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),1==t.data.status){for(var a in t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),t.data.data.length?e.is_NoData=!1:e.is_NoData=!0,t.data.data[0].bsOrderWt&&(t.data.data[0].bsOrderWt=parseFloat(t.data.data[0].bsOrderWt/1e3)),t.data.data[0])0==t.data.data[0][a]&&(t.data.data[0][a]="-");e.OrderInfoData=t.data.data[0],e.OrderInfoDataList=t.data.data[1],e.printData=t.data.data,e.OrderInfo_show=!0}else if(301==t.data.status)e.ReturnToLogin();else{var i;e.is_NoData=!0,e.OrderInfoData={},e.OrderInfoDataList=[],e.printData=[],e.OrderInfo_show=!1,i=t.data.Msg?t.data.Msg:"请求失败",e.$alert(i,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},printBtn:function(t,e){var a=this;if("CP"==a.OrderInfoData.reference10){var i={omsNo:[a.OrderInfoData.omsNo]};this.httpRequest("getConfirmFlagFromOrder.do",i,function(i){if(i.data&&"Y"==i.data){var s=[];t&&"item"==t?(s[0]=a.OrderInfoData,s[1]=[a.OrderInfoDataList[e]],s=l()(s)):s=l()(a.printData);try{CallAndroidOrIOS.callAndroid("打印",s)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:s})}catch(t){}}else i.data&&"N"==i.data&&a.$alert("请先在app首页揽收扫码打印页面确定件数重量，再打印面单","提示",{confirmButtonText:"确定",callback:function(t){}})})}else{var s=[];t&&"item"==t?(s[0]=a.OrderInfoData,s[1]=[a.OrderInfoDataList[e]],s=l()(s)):s=l()(a.printData);try{CallAndroidOrIOS.callAndroid("打印",s)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:s})}catch(t){}}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("打印面单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("寄件时间：")]),a("span",[t._v(t._s(t.OrderInfoData.actualPieceTime))])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("费用合计：")]),a("span",[t._v(t._s(t.OrderInfoData.orderAmount))])]),t._v(" "),a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(t.OrderInfoData.transportFee))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计重：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("附加服务：")]),a("span",[t._v(t._s(t.OrderInfoData.insuranceFee))])]),t._v(" "),a("div",[a("span",[t._v("声明价值：")]),a("span",[t._v(t._s(t.OrderInfoData.valuationMoney))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("代收货款：")]),a("span",[t._v(t._s(t.OrderInfoData.collectPayment))])]),t._v(" "),a("div",[a("span",[t._v("签回单：")]),a("span",[t._v(t._s(t.OrderInfoData.returnBillFlag))])])]),t._v(" "),a("div",[a("span",[t._v("尺寸：")]),a("span",[t._v(t._s(t.OrderInfoData.productSize))])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(t.OrderInfoData.remark))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i)}}},[t._v("打印")])])])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var V=a("VU/8")(Q,z,!1,function(t){a("daAn")},"data-v-158f929a",null).exports,J={name:"scan",props:["loadingData","switchScan","textre","deliveryNoSF"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){window.QRScanAjax=this.QRScanAjax,this.$store.state.ScanQRCodeInputName="code",window.TellVue_QRScanResult_Ajax=this.QRScanAjax,this.textre&&(this.placeholdertext=this.textre),this.deliveryNoSF&&(this.code=this.deliveryNoSF,this.$emit("scanData",this.code))},mounted:function(){this.$refs.code.focus()},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData",this.code)}}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"}},[t._m(0)]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.commitInput(e)},input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("扫描")]),e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var j=a("VU/8")(J,X,!1,function(t){a("D/do")},"data-v-ada74ada",null).exports,Y={name:"PrintExpressShein",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1,ifflash:!1}},components:{"v-scan":j},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={clientOrderNo:t};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"getFaceListToScpPrint.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),1==t.data.status)t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),t.data.data.length?e.is_NoData=!1:e.is_NoData=!0,e.OrderInfoData=t.data.data[0][0],e.OrderInfoDataList=t.data.data[0][1],e.printData=t.data.data[1],e.OrderInfo_show=!0;else if(301==t.data.status)e.ReturnToLogin();else{var a;e.is_NoData=!0,e.OrderInfoData={},e.OrderInfoDataList=[],e.printData=[],e.OrderInfo_show=!1,a=t.data.Msg?t.data.Msg:"请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},printBtn:function(t,e){try{CallAndroidOrIOS.callAndroid("shein打印",this.printData)}catch(t){}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpressShein"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("打印顺丰面单")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("寄件时间：")]),a("span",[t._v(t._s(t.OrderInfoData.actualPieceTime))])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("费用合计：")]),a("span",[t._v(t._s(t.OrderInfoData.orderAmount))])]),t._v(" "),a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(t.OrderInfoData.transportFee))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计重：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("附加服务：")]),a("span",[t._v(t._s(t.OrderInfoData.insuranceFee))])]),t._v(" "),a("div",[a("span",[t._v("声明价值：")]),a("span",[t._v(t._s(t.OrderInfoData.valuationMoney))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("代收货款：")]),a("span",[t._v(t._s(t.OrderInfoData.collectPayment))])]),t._v(" "),a("div",[a("span",[t._v("签回单：")]),a("span",[t._v(t._s(t.OrderInfoData.returnBillFlag))])])]),t._v(" "),a("div",[a("span",[t._v("尺寸：")]),a("span",[t._v(t._s(t.OrderInfoData.productSize))])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(t.OrderInfoData.remark))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n\t\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"})])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var K=a("VU/8")(Y,G,!1,function(t){a("OCRG")},"data-v-076658cb",null).exports,Z={name:"AuditWeight",data:function(){return{OrderInfoData:{},is_NoData:!1,loadingData:!1,OrderInfo_show:!1,deliveryNoSF:"",tips_Msg:"",ifTips:!1,ChangeInfo_show:!1,ChangeOrderWt:"",orderId:"",SignBillShow:!1,dialogImageUrl:"",dialogVisible:!1,uploadParamsListAuditWeight:{},uploadSuccessNumSignBill:0,uploadTotalNumSignBill:0,uploadFailNumSignBill:0,WeightList:[],ifflash:!1}},components:{"v-scan":j},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}c.default.set(this.WeightList,this.WeightList.length,{value:""})},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},computed:{WeightSum:function(){for(var t=0,e=0;e<this.WeightList.length;e++)parseFloat(this.WeightList[e].value)&&(t+=parseFloat(this.WeightList[e].value));return parseFloat(t).toFixed(3)}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.deliveryNoSF=t;var a={deliveryNoSF:t};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"selectOrder.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),1==t.data.status)t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),t.data.data.orderWt&&(t.data.data.orderWt=parseFloat(t.data.data.orderWt/1e3)),t.data.data.chargeWeight&&(t.data.data.chargeWeight=parseFloat(t.data.data.chargeWeight/1e3)),e.ChangeOrderWt=parseFloat(t.data.data.checkWt/1e3),e.orderId=t.data.data.orderId,e.OrderInfoData=t.data.data,e.OrderInfo_show=!0;else if(301==t.data.status)e.ReturnToLogin();else{var a;e.is_NoData=!0,e.OrderInfoData={},e.OrderInfo_show=!1,a=t.data.Msg?t.data.Msg:"请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},CheckWeight:function(){this.ChangeInfo_show=!0},ChangeInfoCancel:function(){this.ChangeInfo_show=!1},ChangeInfoConfirm:function(){var t=this;if("NaN"==parseInt(t.WeightSum).toString()||parseInt(t.WeightSum)<=0||t.WeightSum!=parseFloat(t.WeightSum))t.$alert("复核重量请输入正数","提示",{confirmButtonText:"确定"});else if(f()("div.uploadImg ul>li").length){for(var e=!1,a=0;a<t.WeightList.length;a++){if(t.WeightList[a].value)if(f()(".Check_WeightBox .Check_WeightBox_list:eq("+a+") div.uploadImg ul>li").length<=0){e=!0;break}}if(e)t.$alert("填写了复核重量的都要上传照片","提示",{confirmButtonText:"确定"});else{var i={orderId:t.orderId,checkWt:parseFloat(1e3*t.WeightSum)};t.$emit("isLoading",!0,"拼命加载中"),i=t.PublicEncryption(i),v.a.post(t.HOST+"updateCheckWt.do",{params:i}).then(function(e){if(1==e.data.status)f()("div.uploadImg ul>li").length?t.updateSignBill():(t.$emit("isLoading",!1),t.$alert(e.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){t.scanData(t.deliveryNoSF)}}));else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading",!1),a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})}}else t.$alert("请上传照片","提示",{confirmButtonText:"确定"})},updateSignBill:function(){this.uploadTotalNumSignBill=f()("div.uploadImg ul>li").length,this.uploadParamsListAuditWeight={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,driverName:this.$store.state.userInfo.userName,omsNo:this.OrderInfoData.omsNo,fileType:"复核重量",labelNo:"复核环节"};for(var t=0;t<this.WeightList.length;t++)this.$refs.upload_refAuditWeight[t].submit()},AddList:function(){c.default.set(this.WeightList,this.WeightList.length,{value:""})},goPrev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},finishUploadSignBill:function(t){var e=this;e.$emit("isLoading",!1),this.uploadSuccessNumSignBill=0,this.uploadTotalNumSignBill=0,this.uploadFailNumSignBill=0,t=t?","+t:"",this.$alert("复核成功"+t,"提示",{confirmButtonText:"确定",callback:function(){for(var t=0;t<e.WeightList.length;t++)e.$refs.upload_refAuditWeight[t].clearFiles();e.WeightList=[],c.default.set(e.WeightList,e.WeightList.length,{value:""}),e.scanData(e.deliveryNoSF)}})},uploadSuccessfulSignBill:function(t,e,a){1==t.status?this.uploadSuccessNumSignBill++:this.uploadFailNumSignBill++,this.uploadSuccessNumSignBill!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分图片上传失败"):this.finishUploadSignBill("图片上传失败"):this.finishUploadSignBill("")},uploadErrSignBill:function(t,e,a){if(this.uploadFailNumSignBill++,this.uploadFailNumSignBill==parseInt(this.uploadTotalNumSignBill))return this.uploadSuccessNumSignBill=0,this.uploadFailNumSignBill=0,this.uploadTotalNumSignBill=0,this.$emit("isLoading",!1),void this.$alert("图片上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress AuditWeight"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("重量稽核")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData,textre:"手动输入订单号"},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n                "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("包裹重量：")]),a("span",[t._v(t._s(t.OrderInfoData.orderWt))]),t._v("  KG")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计费重量：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight))]),t._v("  KG")]),t._v(" "),t.ChangeOrderWt?a("div",[a("span",[t._v("复核重量：")]),a("span",[t._v(t._s(t.ChangeOrderWt))]),t._v("  KG")]):t._e()])]),t._v(" "),a("div",{staticClass:"CheckWeight"},[a("div",{staticClass:"Check_WeightBox"},[a("div",{staticClass:"Check_WeightBox_head"},[t._v("请填写复核重量：")]),t._v(" "),t._l(t.WeightList,function(e,i){return a("div",{key:i,staticClass:"Check_WeightBox_list",attrs:{id:i}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"itemData.value"}],attrs:{type:"number",placeholder:"复核重量"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),t._v(" "),a("span",[t._v("KG")])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refAuditWeight",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParamsListAuditWeight,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErrSignBill,"on-success":t.uploadSuccessfulSignBill,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])])}),t._v(" "),a("div",{staticClass:"AddList",on:{click:t.AddList}},[a("i",{staticClass:"iconfont icon-jia"})]),t._v(" "),a("div",{staticClass:"WeightSum"},[a("span",[t._v("复核重量合计：")]),t._v(" "),a("span",[t._v(t._s(t.WeightSum))]),t._v(" "),a("span",[t._v("KG")])])],2)]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])]):t._e()]),t._v(" "),t.ChangeInfo_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("复核重量")]),t._v(" "),a("div",{staticClass:"BatchCommit_ChangeInfo"},[a("div",[t._m(0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ChangeOrderWt,expression:"ChangeOrderWt"}],attrs:{type:"number"},domProps:{value:t.ChangeOrderWt},on:{input:function(e){e.target.composing||(t.ChangeOrderWt=e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(2)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var et=a("VU/8")(Z,tt,!1,function(t){a("S2TK")},"data-v-a5c89792",null).exports,at={name:"ScanAirMaster",props:["loadingData","switchScan","textre"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){this.textre&&(this.placeholdertext=this.textre)},mounted:function(){this.$refs.code.focus()},watch:{code:function(t){this.$emit("scanData",t)}},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData_com",this.code)},startRecognize:function(){this.$emit("scanData","")}}},it={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"},on:{click:function(e){return t.androidScan("code")}}},[t._m(0)]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("扫描")]),e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var st=a("VU/8")(at,it,!1,function(t){a("5XjF")},"data-v-23668168",null).exports,ot={name:"AirMasterScan",components:{"v-scan":st},data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadParamsgoods:{},uploadParamsAdded:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,airlineMasterNumber:"",PaperSheetimgDataList:[],GoodsPictures:[],ValueAddedPictures:[],tips_Msg:"",ifTips:!1,failText:"部分图片上传失败"}},mounted:function(){},created:function(){},methods:{goprev:function(){this.$router.push({name:"Index"})},updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.airlineMasterNumber?11==this.airlineMasterNumber.length?f()("div.PaperSheet ul>li").length>0&&this.PaperSheetimgDataList.length+f()("div.PaperSheet ul>li").length>1?this.$alert("纸质单最多上传一张图片，如需更新请先删除","提示",{confirmButtonText:"确定"}):f()("div.GoodsPictures ul>li").length>0&&this.GoodsPictures.length+f()("div.GoodsPictures ul>li").length>6?this.$alert("货物照片最多上传6张，如需更新请先删除","提示",{confirmButtonText:"确定"}):f()("div.ValueAddedPictures ul>li").length>0&&this.ValueAddedPictures.length+f()("div.ValueAddedPictures ul>li").length>3?this.$alert("增值服务照片最多上传3张，如需更新请先删除","提示",{confirmButtonText:"确定"}):f()("div.PaperSheet ul>li").length<=0&&f()("div.GoodsPictures ul>li").length<=0&&f()("div.ValueAddedPictures ul>li").length<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.fileType="纸质单",this.uploadParams.airlineMasterNumber=this.airlineMasterNumber,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParamsgoods.fileType="货物",this.uploadParamsgoods.airlineMasterNumber=this.airlineMasterNumber,this.uploadParamsgoods.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParamsgoods.cellphone=this.$store.state.userInfo.cellphone,this.uploadParamsAdded.fileType="增值服务",this.uploadParamsAdded.airlineMasterNumber=this.airlineMasterNumber,this.uploadParamsAdded.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParamsAdded.cellphone=this.$store.state.userInfo.cellphone,this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refTransit.submit(),this.$refs.upload_refTransitgoods.submit(),this.$refs.upload_refTransitAdded.submit()):this.$alert("航空主单号必须为11位","提示",{confirmButtonText:"确定"}):this.$alert("请输入航空主单号","提示",{confirmButtonText:"确定"})},selectimg:function(){var t=this;if(11==t.airlineMasterNumber.length){var e=[];e[0]=t.airlineMasterNumber;var a={waybillNolist:e};t.$emit("isLoading",!0,"拼命加载中"),a=t.PublicEncryption(a),v.a.post(t.HOST+"airlineMasterNumberGetImageApp.do",{params:a}).then(function(e){if(t.$emit("isLoading",!1),1==e.data.status){try{e.data.data&&(e.data.data=JSON.parse(t.decryption(e.data.data)))}catch(a){e.data.data&&(e.data.data=t.decryption(e.data.data))}e.data.data.length?(t.$previewRefresh(),t.PaperSheetimgDataList=e.data.data[0].mainNoPic,t.GoodsPictures=e.data.data[0].cargoTypePic,t.ValueAddedPictures=e.data.data[0].addedServicesPic):(t.PaperSheetimgDataList=[],t.GoodsPictures=[],t.ValueAddedPictures=[])}else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})}else t.$alert("航空主单号必须为11位","提示",{confirmButtonText:"确定"})},deleteimg:function(t,e){var a=this,i="";this.$confirm("确认要删除图片吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"PaperSheet"==e?i=a.PaperSheetimgDataList[t].split("=")[1]:"Goods"==e?i=a.GoodsPictures[t].split("=")[1]:"ValueAdded"==e&&(i=a.ValueAddedPictures[t].split("=")[1]);var s={imageId:i};a.$emit("isLoading",!0,"拼命加载中"),s=a.PublicEncryption(s),v.a.post(a.HOST+"airlineMasterNumberDeleteImage.do",{params:s}).then(function(t){if(a.$emit("isLoading",!1),1==t.data.status)a.ifTips=!0,a.tips_Msg=t.data.Msg,setTimeout(function(){a.ifTips=!1,a.selectimg()},1500);else if(301==t.data.status)a.ReturnToLogin();else{var e;e=t.data.Msg?t.data.Msg:"请求失败",a.$alert(e,"提示",{confirmButtonText:"确定"})}}).catch(function(t){a.$emit("isLoading",!1),a.$alert("请求失败","提示",{confirmButtonText:"确定"})})}).catch(function(t){})},switchScanFun:function(t){this.switchScan=!!t},scanData:function(t){this.airlineMasterNumber=t},scanData_com:function(t){this.airlineMasterNumber=t,this.selectimg()},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),e.uploadSuccessNum=0,e.uploadFailNum=0,e.uploadTotalNum=0,this.$refs.upload_refTransit.clearFiles(),this.$refs.upload_refTransitgoods.clearFiles(),this.$refs.upload_refTransitAdded.clearFiles(),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.selectimg()}})},uploadSuccessful:function(t,e,a){1==t.status?this.uploadSuccessNum++:(this.failText=t.Msg,this.uploadFailNum++),this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)!=parseInt(this.uploadTotalNum)||this.finishUpload(this.failText):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload(this.failText)},uploadOnChange:function(t){this.switchScanFun(!0)}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AirMasterScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("航空主单扫描")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData,textre:"手动输入航空主单号"},on:{scanData:t.scanData,scanData_com:t.scanData_com}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t.airlineMasterNumber?a("div",{staticClass:"orderinfo"},[a("div",[a("span",[t._v("航空主单号：")]),t._v(" "),a("span",[t._v(t._s(t.airlineMasterNumber))])])]):t._e(),t._v(" "),t.GoodsPictures&&t.GoodsPictures.length||t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length||t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPicture"},[t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("纸质单（已上传照片）： ")]),t._v(" "),t._l(t.PaperSheetimgDataList,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.HOSTimg+e,preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(e){return t.deleteimg(i,"PaperSheet")}}})])})],2):t._e(),t._v(" "),t.GoodsPictures&&t.GoodsPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("货物（已上传照片）： ")]),t._v(" "),t._l(t.GoodsPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.HOSTimg+e,preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(e){return t.deleteimg(i,"Goods")}}})])})],2):t._e(),t._v(" "),t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("增值服务（已上传照片）： ")]),t._v(" "),t._l(t.ValueAddedPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.HOSTimg+e,preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(e){return t.deleteimg(i,"ValueAdded")}}})])})],2):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg PaperSheet"},[a("div",{staticClass:"LoadImg_head"},[t._v("纸质单照片（限1张）")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refTransit",attrs:{action:t.HOST+"airlineMasterNumberUploadImage.do",limit:1,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUploadWithoutCompress,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg GoodsPictures"},[a("div",{staticClass:"LoadImg_head"},[t._v("货物照片（限6张）")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refTransitgoods",attrs:{action:t.HOST+"airlineMasterNumberUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsgoods,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg ValueAddedPictures"},[a("div",{staticClass:"LoadImg_head"},[t._v("增值服务照片（限3张）")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refTransitAdded",attrs:{action:t.HOST+"airlineMasterNumberUploadImage.do",limit:3,multiple:!0,data:t.uploadParamsAdded,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("div",{staticClass:"g_signBtn",on:{click:t.updateimg}},[t._v("上传")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var rt=a("VU/8")(ot,nt,!1,function(t){a("8hiD")},"data-v-c45b74b6",null).exports,lt={name:"SweepCodePrinting",data:function(){return{OrderInfoData:{},printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,clientOrderNo:"",tips_Msg:"",ifTips:!1,ChangeInfo_show:!1,ChangeInfoThreeHigh_show:!1,displayQty:"",displayWt:"",displayLength:"",displayWide:"",displayHigh:"",ThreeHigh:!1,deliveryNoSF:"",LightBehindList:[],textre:"手动输入单号",CastLightWeight:"",LightBeIndex:0,needLoseWt:0,longitude:"",latitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,ValueAddedPictures:[]}},components:{"v-scan":M},mounted:function(){this.onPlusReady("e")},created:function(){this.$route.query.deliveryNoSF&&(this.deliveryNoSF=this.$route.query.deliveryNoSF),this.$route.query.LightBeIndex&&(this.LightBeIndex=this.$route.query.LightBeIndex),this.$route.query.needLoseWt&&(this.needLoseWt=this.$route.query.needLoseWt),this.$route.query.LightBehindList&&(this.LightBehindList=this.$route.query.LightBehindList)},methods:{RefreshPositioning:function(){this.onPlusReady("e")},updatePhoto:function(t){f()("div.uploadImg ul>li").length>0&&this.ValueAddedPictures.length+f()("div.uploadImg ul>li").length>6?this.$alert("照片最多上传6张","提示",{confirmButtonText:"确定"}):f()("div.uploadImg ul>li").length>0&&(this.$emit("isLoading",!0,"拼命加载中"),this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.OrderInfoData[t].orderInfo.omsNo,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.fileType="揽收扫描",this.uploadParams.labelNo="10",this.$refs.upreceived[0].submit())},SetCurrAddress:function(t){this.ReceivingLatitud(t)},QtyFillChange:function(t,e){this.LightBehindList&&this.LightBehindList.length||!this.OrderInfoData[e].orderInfo.qpWt||t.data==this.OrderInfoData[e].orderInfo.orderQty||(this.OrderInfoData[e].orderInfo.qpWtFill=0,this.OrderInfoData[e].orderInfo.displayWtFill=0)},scanData:function(t){this.is_NoData=!1,this.$route.query.deliveryNoSF||this.cleardata(),this.deliveryNoSF=t;var e=this;-1!=t.indexOf("-")?(t=t.split("-")[0],this.clientOrderNo=t):this.clientOrderNo=t;var a={clientOrderNo:this.clientOrderNo};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"selectOrderByClientOrderNo.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),e.$route.query.deliveryNoSF=null,1==t.data.status){t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),t.data.data.length?(e.is_NoData=!1,e.OrderInfo_show=!0):(e.is_NoData=!0,e.OrderInfo_show=!1);for(var a=0;a<t.data.data.length;a++)t.data.data[a].orderInfo.bsOrderWt&&(t.data.data[a].orderInfo.bsOrderWt=parseFloat(t.data.data[a].orderInfo.bsOrderWt/1e3)),t.data.data[a].orderInfo.qpWt&&(t.data.data[a].orderInfo.qpWt=parseFloat(t.data.data[a].orderInfo.qpWt/1e3)),t.data.data[a].orderInfo.qpWtFill=t.data.data[a].orderInfo.qpWt,t.data.data[a].orderInfo.orderQtyFill=t.data.data[a].orderInfo.orderQty,t.data.data[a].orderInfo.displayWtFill=t.data.data[a].orderInfo.displayWt;e.OrderInfoData=t.data.data,(e.$route.query.CastLightWeight||0==e.$route.query.CastLightWeight)&&(e.CastLightWeight=e.$route.query.CastLightWeight,"NaN"==parseFloat(e.CastLightWeight).toString()||parseFloat(e.CastLightWeight)<0||e.CastLightWeight!=parseFloat(e.CastLightWeight)||(e.OrderInfoData[e.LightBeIndex].orderInfo.qpWtFill=e.CastLightWeight)),e.$route.query.displayWtFill&&(e.OrderInfoData[e.LightBeIndex].orderInfo.displayWtFill=e.$route.query.displayWtFill),e.$route.query.LightBehindNum&&(e.OrderInfoData[e.LightBeIndex].orderInfo.orderQtyFill=e.$route.query.LightBehindNum),e.DisplayPhotos(t.data.data[0].orderInfo.omsNo)}else if(301==t.data.status)e.ReturnToLogin();else{var i;e.is_NoData=!0,e.OrderInfo_show=!1,e.OrderInfoData=[],i=t.data.Msg?t.data.Msg:"请求失败",e.$alert(i,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1)})},DisplayPhotos:function(t){var e=this,a=[];a[0]=t;var i={omsNolist:a};i=e.PublicEncryption(i),v.a.post(e.HOST+"lanShouSaoMaGetImageApp.do",{params:i}).then(function(t){if(1==t.data.status){try{t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data)))}catch(a){t.data.data&&(t.data.data=e.decryption(t.data.data))}t.data.data.length?(e.$previewRefresh(),e.ValueAddedPictures=t.data.data[0].lanShouPic):e.ValueAddedPictures=[]}else if(301==t.data.status)e.ReturnToLogin();else{var a;a=t.data.Msg?t.data.Msg:"图片请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){})},reviewBtnThreeHigh:function(t){var e=this;if(this.OrderInfoData[t].orderInfo.orderQtyFill<=0)e.$alert("件数必须是正整数","提示",{confirmButtonText:"确定"});else if(this.OrderInfoData[t].orderInfo.lightFoamCoefficient){e.$emit("isLoading",!0,"拼命加载中");var a={omsNo:e.OrderInfoData[t].orderInfo.omsNo,orderQty:e.OrderInfoData[t].orderInfo.orderQtyFill?e.OrderInfoData[t].orderInfo.orderQtyFill:0,cellphone:e.$store.state.userInfo.cellphone,scanPerson:e.$store.state.userInfo.userName};a=e.PublicEncryption(a),v.a.post(e.HOST+"checkUpdateOrderQP.do",{params:a}).then(function(a){if(e.$emit("isLoading",!1),1==a.data.status){if(a.data.data&&(a.data.data=JSON.parse(e.decryption(a.data.data))),a.data.data.length!=parseInt(e.OrderInfoData[t].orderInfo.orderQtyFill))return void e.$alert("件数与标签数不匹配，请稍后重试","提示",{confirmButtonText:"确定"});var i=[];if(a.data.Msg&&(i=JSON.parse(a.data.Msg)),i.length!=a.data.data.length)return void e.$alert("件数与标签数不匹配，请稍后重试","提示",{confirmButtonText:"确定"});e.$router.push({name:"LightBehind",query:{deliveryNoSF:e.deliveryNoSF,CastLightCoefficient:e.OrderInfoData[t].orderInfo.lightFoamCoefficient,LightBehindNum:parseInt(e.OrderInfoData[t].orderInfo.orderQtyFill),LightBeIndex:t,displayWtFill:e.OrderInfoData[t].orderInfo.displayWtFill,LightBeLabelList:a.data.data,LabelListInfo:i,monthCardNumber:e.OrderInfoData[t].orderInfo.monthCardNumber}})}else if(301==a.data.status)e.ReturnToLogin();else{var s;s=a.data.Msg?a.data.Msg:"请求失败",e.$alert(s,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1)})}else e.$alert("请联系客服在系统维护轻抛系数","提示",{confirmButtonText:"确定"})},modifyLightBe:function(t){var e=this;if(this.OrderInfoData[t].orderInfo.orderQtyFill<=0)e.$alert("件数必须是正整数","提示",{confirmButtonText:"确定"});else if(this.OrderInfoData[t].orderInfo.displayWtFill<=0)e.$alert("请维护轻抛件","提示",{confirmButtonText:"确定"});else if(this.$route.query.LightBehindNum&&this.OrderInfoData[t].orderInfo.orderQtyFill!=this.$route.query.LightBehindNum)e.$alert("维护轻抛件后，不要修改件数","提示",{confirmButtonText:"确定"});else{var a=[],i=0;if(e.LightBehindList&&e.LightBehindList.length){for(var s=0;s<e.LightBehindList.length;s++)for(var o=0;o<e.LightBehindList[s].LB_labelList.length;o++)a[a.length]={labelNo:e.LightBehindList[s].LB_labelList[o],cargoBoxLength:e.LightBehindList[s].LB_len,cargoBoxWidth:e.LightBehindList[s].LB_wide,cargoHeight:e.LightBehindList[s].LB_high,cargoWeight:parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number),issueWt:e.LightBehindList[s].LB_wt,issueVol:e.LightBehindList[s].LB_len*e.LightBehindList[s].LB_wide*e.LightBehindList[s].LB_high,displayWt:parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number)>parseFloat(e.LightBehindList[s].LB_wt)?parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number):parseFloat(e.LightBehindList[s].LB_wt)},i+=parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number)>parseFloat(e.LightBehindList[s].LB_wt)?parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number):parseFloat(e.LightBehindList[s].LB_wt);if(a.length==e.OrderInfoData[t].orderInfo.orderQtyFill||"7576756428"!=e.OrderInfoData[t].orderInfo.monthCardNumber){i<e.OrderInfoData[t].orderInfo.displayWtFill&&(i=e.OrderInfoData[t].orderInfo.displayWtFill),e.$emit("isLoading",!0,"拼命加载中");var n={city:e.CurrentCity,districict:e.CurrentDistrict,address:e.CurrentLocation,longitude:e.longitude,latitude:e.latitude,supplierId:e.$store.state.userInfo.orgnizationId,supplierName:e.$store.state.userInfo.orgnizationName,cellphone:e.$store.state.userInfo.cellphone,scanPerson:e.$store.state.userInfo.userName},r={omsNo:e.OrderInfoData[t].orderInfo.omsNo,orderQty:e.OrderInfoData[t].orderInfo.orderQtyFill?e.OrderInfoData[t].orderInfo.orderQtyFill:0,displayWt:e.OrderInfoData[t].orderInfo.displayWtFill?e.OrderInfoData[t].orderInfo.displayWtFill:0,chargeWeight:i,qpWt:e.OrderInfoData[t].orderInfo.qpWtFill?e.OrderInfoData[t].orderInfo.qpWtFill:0,labelNos:a,rote:n};r=e.PublicEncryption(r),v.a.post(e.HOST+"checkUpdateOrderNew.do",{params:r}).then(function(t){if(1==t.data.status)e.$emit("isLoading",!1),e.$alert(t.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){e.cleardata(),e.scanData(e.deliveryNoSF)}});else if(301==t.data.status)e.$emit("isLoading",!1),e.ReturnToLogin();else{var a;e.$emit("isLoading",!1),a=t.data.Msg?t.data.Msg:"请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})}else e.$alert("所有子件都必须维护重量","提示",{confirmButtonText:"确定"})}else e.$alert("请维护轻抛件","提示",{confirmButtonText:"确定"})}},cleardata:function(){this.$route.query.displayWtFill=null,this.$route.query.LightBehindNum=null,this.$route.query.LightBeIndex=null,this.LightBeIndex=null,this.$route.query.needLoseWt=null,this.needLoseWt=null,this.$route.query.deliveryNoSF=null,this.$route.query.LightBehindList=null,this.LightBehindList=null,this.$route.query.CastLightWeight=null,this.CastLightWeight=null},printBtn:function(t,e,a){var i=this;if("CP"==i.OrderInfoData[e].orderInfo.reference10){var s={omsNo:[i.OrderInfoData[e].orderInfo.omsNo]};this.httpRequest("getConfirmFlagFromOrder.do",s,function(s){if(s.data&&"Y"==s.data){var o=[];if(t&&"item"==t){var n=l()(i.OrderInfoData[e].orderInfo),r=l()([i.OrderInfoData[e].orderDetailArray[a]]);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}else if(t&&"el"==t){n=l()(i.OrderInfoData[e].orderInfo),r=l()(i.OrderInfoData[e].orderDetailArray);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}for(var c in o[0])0==o[0][c]&&(o[0][c]="-"),null==o[0][c]&&(o[0][c]="");for(var d in o[1])null==o[1][d]&&(o[1][d]="");o=l()(o);try{CallAndroidOrIOS.callAndroid("打印",o)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:o})}catch(t){}}else s.data&&"N"==s.data&&i.$alert("请先确定件数重量，再打印面单","提示",{confirmButtonText:"确定",callback:function(t){}})})}else{var o=[];if(t&&"item"==t){var n=l()(i.OrderInfoData[e].orderInfo),r=l()([i.OrderInfoData[e].orderDetailArray[a]]);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}else if(t&&"el"==t){n=l()(i.OrderInfoData[e].orderInfo),r=l()(i.OrderInfoData[e].orderDetailArray);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}for(var c in o[0])0==o[0][c]&&(o[0][c]="-"),null==o[0][c]&&(o[0][c]="");for(var d in o[1])null==o[1][d]&&(o[1][d]="");o=l()(o);try{CallAndroidOrIOS.callAndroid("打印",o)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:o})}catch(t){}}},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),e.uploadSuccessNum=0,e.uploadFailNum=0,e.uploadTotalNum=0,e.$refs.upreceived[0].clearFiles(),t=t?","+t:"",e.$alert("成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.cleardata(),e.scanData(e.deliveryNoSF)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){},GoPrev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SweepCodePrinting"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.GoPrev}}),a("span",[t._v("揽收扫码打印")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{deliveryNoSF:t.deliveryNoSF,textre:t.textre,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t._l(t.OrderInfoData,function(e,i){return a("div",{key:i,staticClass:"orderInfo",attrs:{id:i}},[a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]),t._v(" "),a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.orderInfo.omsNo,expression:"listItem.orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.orderInfo.omsNo)+"\n                "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.orderInfo.omsNo,expression:"listItem.orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(e.orderInfo.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(e.orderInfo.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.orderInfo.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(e.orderInfo.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(e.orderInfo.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.orderInfo.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(e.orderInfo.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(e.orderInfo.displayWt))]),t._v("   kg")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(e.orderInfo.transportFee))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(e.orderInfo.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("轻抛重量：")]),a("span",[t._v(t._s(e.orderInfo.qpWt))]),t._v("   kg")]),t._v(" "),a("div",[a("span",[t._v("计费重量：")]),a("span",[t._v(t._s(e.orderInfo.chargeWeight))]),t._v("   kg")])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(e.orderInfo.remark))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("当前城市：")]),a("span",{staticClass:"reddiv"},[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticClass:"reddiv"},[t._v(t._s(t.CurrentDistrict))])])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("span",{staticClass:"refresh",on:{click:t.RefreshPositioning}},[t._v("刷新定位")]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传（限6张）")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upreceived",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),a("span",{staticClass:"refresh",on:{click:function(e){return t.updatePhoto(i)}}},[t._v("上传图片")]),t._v(" "),t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("已上传照片： ")]),t._v(" "),a("div",{staticClass:"UploadedPicturebox"},t._l(t.ValueAddedPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.HOSTimg+e,preview:"99",alt:""}})])}),0)]):t._e(),t._v(" "),a("fieldset",[a("legend",[t._v("请填写")]),t._v(" "),a("div",[t._m(0,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.orderQtyFill,expression:"listItem.orderInfo.orderQtyFill"}],attrs:{type:"number"},domProps:{value:e.orderInfo.orderQtyFill},on:{input:[function(a){a.target.composing||t.$set(e.orderInfo,"orderQtyFill",a.target.value)},function(e){return t.QtyFillChange(e,i)}]}})])]),t._v(" "),a("span",[t._v("注意：如轻抛重量有值，修改件数后，需要重新维护轻抛件")]),t._v(" "),a("div",[t._m(1,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.qpWtFill,expression:"listItem.orderInfo.qpWtFill"}],attrs:{type:"number",disabled:""},domProps:{value:e.orderInfo.qpWtFill},on:{input:function(a){a.target.composing||t.$set(e.orderInfo,"qpWtFill",a.target.value)}}})]),t._v(" "),t._m(2,!0),t._v(" "),a("div",{on:{click:function(e){return t.reviewBtnThreeHigh(i)}}},[t._v("轻抛件")])]),t._v(" "),a("div",[t._m(3,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.displayWtFill,expression:"listItem.orderInfo.displayWtFill"}],attrs:{type:"number",disabled:""},domProps:{value:e.orderInfo.displayWtFill},on:{input:function(a){a.target.composing||t.$set(e.orderInfo,"displayWtFill",a.target.value)}}})]),t._v(" "),t._m(4,!0)]),t._v(" "),a("div",{staticClass:"fieldset_btn",on:{click:function(e){return t.modifyLightBe(i)}}},[a("span",[t._v("确定修改")])])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("el",i)}}},[t._v("打印所有标签")])])]),t._v(" "),t.OrderInfoData[i].orderDetailArray.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoData[i].orderDetailArray,function(e,s){return a("div",{key:s,staticClass:"AbnormalItem",attrs:{id:s}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),e.cargoBoxLength||e.cargoBoxWidth||e.cargoHeight||e.issueWt?a("div",[e.cargoBoxLength?a("div",[a("span",[t._v("长：")]),a("span",[t._v(t._s(e.cargoBoxLength)+"  CM")])]):t._e(),t._v(" "),e.cargoBoxWidth?a("div",[a("span",[t._v("宽：")]),a("span",[t._v(t._s(e.cargoBoxWidth)+"  CM")])]):t._e(),t._v(" "),e.cargoHeight?a("div",[a("span",[t._v("高：")]),a("span",[t._v(t._s(e.cargoHeight)+"  CM")])]):t._e(),t._v(" "),e.issueWt?a("div",[a("span",[t._v("重量：")]),a("span",[t._v(t._s(parseFloat(e.issueWt)/1e3)+"  KG")])]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i,s)}}},[t._v("打印")])])])})],2)}),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(5)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("件数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("轻抛重量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fieldset_unit"},[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("总重量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fieldset_unit"},[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var dt=a("VU/8")(lt,ct,!1,function(t){a("w5HQ")},"data-v-c57843c4",null).exports,ut={name:"LightBehind",data:function(){return{LightBehindList:[],LabelList:[],tips_Msg:"",ifTips:!1,deliveryNoSF:"",LightBeIndex:0,CastLightCoefficient:"",LightBehindNum:0,addLB_show:!1,ChangeInfo_show:!1,displayQty:"",oldQty:"",oldQtyIndex:"",displayWtFill:0,waybillLabelList:[],waybillListBOX_show:!1,LabelListInfo:[],monthCardNumber:""}},components:{"v-scan":M},mounted:function(){},created:function(){var t=this,e=this;this.$route.query.deliveryNoSF&&(this.deliveryNoSF=this.$route.query.deliveryNoSF),this.$route.query.CastLightCoefficient&&(this.CastLightCoefficient=this.$route.query.CastLightCoefficient),this.$route.query.LightBeIndex&&(this.LightBeIndex=this.$route.query.LightBeIndex),this.$route.query.displayWtFill&&(this.displayWtFill=this.$route.query.displayWtFill),this.$route.query.LabelListInfo&&(this.LabelListInfo=this.$route.query.LabelListInfo),this.$route.query.monthCardNumber&&(this.monthCardNumber=this.$route.query.monthCardNumber),this.$route.query.LightBehindNum&&(this.LightBehindNum=this.$route.query.LightBehindNum,this.LightBehindNum>1&&(this.addLB_show=!0)),this.$route.query.LightBeLabelList&&(this.LabelList=this.$route.query.LightBeLabelList),this.LabelListInfo.length&&!e.getItem("SXJF_SizeWeight")?e.loadingData():e.getItem("SXJF_SizeWeight")&&e.getItem("SXJF_SizeWeight").deliveryNoSF==this.deliveryNoSF?function(){for(var a=e.getItem("SXJF_SizeWeight"),i=0,s=function(t){i+=parseInt(a.list[t].LB_number);for(var s=function(i){e.LabelList.forEach(function(s,o){s==a.list[t].LB_labelList[i]&&e.LabelList.splice(o,1)})},o=0;o<a.list[t].LB_labelList.length;o++)s(o)},o=0;o<a.list.length;o++)s(o);i>t.LightBehindNum?e.$alert("修改件数由多变少，暂存数据失效","提示",{confirmButtonText:"确定",callback:function(){e.setItem({name:"SXJF_SizeWeight",value:""}),e.loadingData()}}):e.LightBehindList=a.list}():(this.LightBehindList=[{LB_wt:"",LB_len:"",LB_wide:"",LB_high:"",LB_volume_wt:0,LB_number:1}],e.LabelList.length&&(this.LightBehindList[0].LB_labelList=[],this.LightBehindList[0].LB_labelList[0]=e.LabelList[0],e.LabelList.splice(0,1)))},methods:{staging:function(){var t={};t.deliveryNoSF=this.deliveryNoSF,t.list=this.LightBehindList,t=l()(t),this.setItem({name:"SXJF_SizeWeight",value:t}),this.$alert("暂存成功","提示",{confirmButtonText:"确定"})},loadingData:function(){for(var t=this,e=0;e<t.LabelListInfo.length;e++)if(0==e)t.LightBehindList=[{LB_wt:t.LabelListInfo[0].issueWt?t.LabelListInfo[0].issueWt:"",LB_len:t.LabelListInfo[0].cargoBoxLength?t.LabelListInfo[0].cargoBoxLength:"",LB_wide:t.LabelListInfo[0].cargoBoxWidth?t.LabelListInfo[0].cargoBoxWidth:"",LB_high:t.LabelListInfo[0].cargoHeight?t.LabelListInfo[0].cargoHeight:"",LB_volume_wt:t.LabelListInfo[0].cargoWeight?t.LabelListInfo[0].cargoWeight:"",LB_number:1,LB_labelList:[t.LabelListInfo[0].productNo]}],t.LabelList.forEach(function(e,a){e==t.LabelListInfo[0].productNo&&t.LabelList.splice(a,1)});else{for(var a,i=!1,s=0;s<t.LightBehindList.length;s++)if(t.LabelListInfo[e].issueWt==t.LightBehindList[s].LB_wt&&t.LabelListInfo[e].cargoBoxLength==t.LightBehindList[s].LB_len&&t.LabelListInfo[e].cargoBoxWidth==t.LightBehindList[s].LB_wide&&t.LabelListInfo[e].cargoHeight==t.LightBehindList[s].LB_high){i=!0,a=s;break}i?(t.LightBehindList[a].LB_number=parseInt(t.LightBehindList[a].LB_number)+1,t.LightBehindList[a].LB_labelList.push(t.LabelListInfo[e].productNo),t.LabelList.forEach(function(a,i){a==t.LabelListInfo[e].productNo&&t.LabelList.splice(i,1)})):(c.default.set(t.LightBehindList,t.LightBehindList.length,{LB_wt:t.LabelListInfo[e].issueWt?t.LabelListInfo[e].issueWt:"",LB_len:t.LabelListInfo[e].cargoBoxLength?t.LabelListInfo[e].cargoBoxLength:"",LB_wide:t.LabelListInfo[e].cargoBoxWidth?t.LabelListInfo[e].cargoBoxWidth:"",LB_high:t.LabelListInfo[e].cargoHeight?t.LabelListInfo[e].cargoHeight:"",LB_volume_wt:t.LabelListInfo[e].cargoWeight?t.LabelListInfo[e].cargoWeight:"",LB_number:1,LB_labelList:[t.LabelListInfo[e].productNo]}),t.LabelList.forEach(function(a,i){a==t.LabelListInfo[e].productNo&&t.LabelList.splice(i,1)}))}},LB_jian:function(t){this.LightBehindList[t].LB_number>1&&(this.LightBehindList[t].LB_number=parseInt(this.LightBehindList[t].LB_number)-1,this.LightBehindList[t].LB_labelList.length&&(this.LabelList.push(this.LightBehindList[t].LB_labelList[this.LightBehindList[t].LB_labelList.length-1]),this.LabelList=this.BubbleSort(this.LabelList),this.LightBehindList[t].LB_labelList.splice(-1,1)),this.addLB_show=!0)},LB_jia:function(t){for(var e=0,a=0;a<this.LightBehindList.length;a++)e+=parseInt(this.LightBehindList[a].LB_number);e<this.LightBehindNum&&(this.LightBehindList[t].LB_number=parseInt(this.LightBehindList[t].LB_number)+1,parseInt(e)+1>=this.LightBehindNum&&(this.addLB_show=!1),this.LabelList.length&&(this.LightBehindList[t].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1)))},entryShow:function(t){this.oldQty=this.LightBehindList[t].LB_number,this.displayQty=this.LightBehindList[t].LB_number,this.oldQtyIndex=t,this.ChangeInfo_show=!0},addLightBehind:function(){for(var t=0,e=0;e<this.LightBehindList.length;e++)t+=parseInt(this.LightBehindList[e].LB_number);t<this.LightBehindNum&&(c.default.set(this.LightBehindList,this.LightBehindList.length,{LB_wt:"",LB_len:"",LB_wide:"",LB_high:"",LB_volume_wt:0,LB_number:1,LB_labelList:[]}),this.LabelList.length&&(this.LightBehindList[this.LightBehindList.length-1].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1)),parseInt(t)+1>=this.LightBehindNum&&(this.addLB_show=!1))},del_lb:function(t){if(this.LightBehindList.length>1){for(var e=0;e<this.LightBehindList[t].LB_labelList.length;e++)this.LabelList.push(this.LightBehindList[t].LB_labelList[e]);this.LabelList=this.BubbleSort(this.LabelList),this.LightBehindList.splice(t,1),this.addLB_show=!0}},ChangeInfoThreeHighConfirm:function(){for(var t=this,e=0;e<t.LightBehindList.length;e++)if("NaN"==parseFloat(t.LightBehindList[e].LB_wt).toString()||parseFloat(t.LightBehindList[e].LB_wt)<=0||t.LightBehindList[e].LB_wt!=parseFloat(t.LightBehindList[e].LB_wt))return void t.$alert("重量必须大于0","提示",{confirmButtonText:"确定"});for(var a=0,i=0,s=0,o=0,n=0;n<t.LightBehindList.length;n++)s+=t.LightBehindList[n].LB_number,o+=t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number,t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number<parseFloat(t.LightBehindList[n].LB_volume_wt)?(i+=parseFloat(t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number),a+=parseFloat(t.LightBehindList[n].LB_volume_wt)):(a+=parseFloat(t.LightBehindList[n].LB_volume_wt),i+=parseFloat(t.LightBehindList[n].LB_volume_wt));"7576756428"==t.monthCardNumber&&s<t.LightBehindNum?t.$alert("所有子件都必须维护重量","提示",{confirmButtonText:"确定"}):(t.displayWtFill=o.toFixed(3),a=a.toFixed(3),t.$confirm("确认吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setItem({name:"SXJF_SizeWeight",value:""}),t.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:t.deliveryNoSF,CastLightWeight:a,LightBeIndex:t.LightBeIndex,displayWtFill:t.displayWtFill,LightBehindNum:t.LightBehindNum,needLoseWt:i,LightBehindList:t.LightBehindList}})}).catch(function(){}))},ChangeInfoThreeHighCancel:function(){this.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:this.deliveryNoSF}})},ChangeInfoConfirm:function(){var t=0;if(this.displayQty)if("NaN"==parseInt(this.displayQty).toString()||parseInt(this.displayQty)<=0||this.displayQty!=parseInt(this.displayQty))alert("请输入正整数");else{for(var e=0;e<this.LightBehindList.length;e++)t+=parseInt(this.LightBehindList[e].LB_number);if(parseInt(t)-parseInt(this.oldQty)+parseInt(this.displayQty)<=this.LightBehindNum){if(this.LightBehindList[this.oldQtyIndex].LB_number=this.displayQty,parseInt(this.oldQty)-parseInt(this.displayQty)>0)for(var a=parseInt(this.oldQty)-1;a>=parseInt(this.displayQty);a--)this.LabelList.push(this.LightBehindList[this.oldQtyIndex].LB_labelList[a]),this.LightBehindList[this.oldQtyIndex].LB_labelList.splice(a,1);else if(parseInt(this.oldQty)-parseInt(this.displayQty)<0)for(a=parseInt(this.displayQty)-1;a>=parseInt(this.oldQty);a--)this.LightBehindList[this.oldQtyIndex].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1);this.LabelList=this.BubbleSort(this.LabelList),t-this.oldQty+this.displayQty>=this.LightBehindNum?this.addLB_show=!1:this.addLB_show=!0,this.ChangeInfo_show=!1}else alert("该页面添加的轻抛件数量总和不能超过订单总件数，请重新输入")}},ChangeInfoCancel:function(){this.ChangeInfo_show=!1},toShowWaybillList:function(t){this.waybillLabelList=this.LightBehindList[t].LB_labelList,this.waybillListBOX_show=!0},waybillList_confrim:function(){this.waybillListBOX_show=!1},goprev:function(){this.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:this.deliveryNoSF,displayWtFill:this.displayWtFill,LightBeIndex:this.LightBeIndex,LightBehindNum:this.LightBehindNum}})}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"LightBehind"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("轻抛件")]),a("span",{staticClass:"staging",on:{click:t.staging}},[t._v("暂存")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"_CastLightCoefficient"},[a("span",[t._v("轻抛系数")]),t._v(" "),a("span",[t._v(t._s(t.CastLightCoefficient))])]),t._v(" "),a("div",{staticClass:"LightCastList"},[t._l(t.LightBehindList,function(e,i){return a("div",{key:i,staticClass:"BatchCommit_ThreeHigh",attrs:{id:i}},[a("div",{staticClass:"BatchCommit_head"},[t._v("轻抛件"),t.LightBehindList.length>1?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.del_lb(i)}}}):t._e()]),t._v(" "),a("div",{staticClass:"BatchCommitThreeHigh_ChangeInfo"},[a("div",[a("div",{attrs:{id:"ThreeHighadd"}},[a("div",{staticClass:"ThreeHigh_"},[a("div",[t._m(0,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_len,expression:"dataItem.LB_len"}],attrs:{type:"number"},domProps:{value:e.LB_len},on:{input:function(a){a.target.composing||t.$set(e,"LB_len",a.target.value)}}})])]),t._v(" "),a("div",[t._m(1,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wide,expression:"dataItem.LB_wide"}],attrs:{type:"number"},domProps:{value:e.LB_wide},on:{input:function(a){a.target.composing||t.$set(e,"LB_wide",a.target.value)}}})])]),t._v(" "),a("div",[t._m(2,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_high,expression:"dataItem.LB_high"}],attrs:{type:"number"},domProps:{value:e.LB_high},on:{input:function(a){a.target.composing||t.$set(e,"LB_high",a.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"ThreeHigh_wt"},[a("div",[t._m(3,!0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wt,expression:"dataItem.LB_wt"}],attrs:{type:"number",placeholder:"填写单件重量"},domProps:{value:e.LB_wt},on:{input:function(a){a.target.composing||t.$set(e,"LB_wt",a.target.value)}}}),a("span",[t._v("KG")]),a("span",[t._v("总重量")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wt*e.LB_number,expression:"dataItem.LB_wt*dataItem.LB_number"}],attrs:{type:"number",disabled:""},domProps:{value:e.LB_wt*e.LB_number},on:{input:function(a){a.target.composing||t.$set(e.LB_wt*e,"LB_number",a.target.value)}}}),a("span",[t._v("KG")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("体积重量")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_volume_wt=(e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number).toFixed(3),expression:"dataItem.LB_volume_wt=(dataItem.LB_len*dataItem.LB_wide*dataItem.LB_high/CastLightCoefficient*dataItem.LB_number).toFixed(3)"}],attrs:{type:"text",disabled:""},domProps:{value:e.LB_volume_wt=(e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number).toFixed(3)},on:{input:function(a){a.target.composing||t.$set(e.LB_volume_wt=e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number,"toFixed(3)",a.target.value)}}}),a("span",[t._v("公斤/厘米")])]),t._v(" "),a("div",{staticClass:"listLast"},[a("i",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.LB_jian(i)}}}),t._v(" "),a("span",{on:{click:function(e){return t.entryShow(i)}}},[t._v(t._s(e.LB_number))]),t._v(" "),a("i",{staticClass:"iconfont icon-jia",on:{click:function(e){return t.LB_jia(i)}}})])]),t._v(" "),e.LB_labelList&&e.LB_labelList.length?a("div",{staticClass:"relevance",on:{click:function(e){return t.toShowWaybillList(i)}}},[a("span",[t._v("关联运单号:")]),t._v(" "),t._l(e.LB_labelList,function(i,s){return a("span",{key:s,attrs:{id:s}},[t._v(t._s(s==e.LB_labelList.length-1?i:i+","))])})],2):t._e()])])])])])}),t._v(" "),t.addLB_show?a("div",{staticClass:"ThreeHigh_iconjia",on:{click:t.addLightBehind}},[a("i",{staticClass:"iconfont icon-jia"}),a("span",[t._v("添加一个轻抛件")])]):t._e(),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoThreeHighCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoThreeHighConfirm}},[t._v("确定")])])],2),t._v(" "),t.ChangeInfo_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请输入数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_lb"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.displayQty,expression:"displayQty"}],attrs:{type:"number"},domProps:{value:t.displayQty},on:{input:function(e){e.target.composing||(t.displayQty=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.waybillListBOX_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"waybillListBOX"},[a("div",{staticClass:"waybillList_head"},[t._v("关联运单")]),t._v(" "),a("div",{staticClass:"waybillList_box"},t._l(t.waybillLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v("\n              "+t._s(e)+"\n            ")])}),0),t._v(" "),a("div",{staticClass:"waybillList_btn"},[a("span",{on:{click:t.waybillList_confrim}},[t._v("确定")])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("长(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("宽(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("高(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("重量"),e("i",[this._v("*")])])}]};var pt=a("VU/8")(ut,ht,!1,function(t){a("JUVm")},"data-v-32324889",null).exports,vt={data:function(){return{isShowConfirm:!1,titleText:"操作提示",content:"Say Something ...",cancelText:"取消",confirmText:"确认",type:"confirm",outerData:null}},methods:{show:function(t,e){this.content=t||"Say Something ...","[object Object]"===Object.prototype.toString.call(e)&&(this.titleText=e.titleText||"操作提示",this.cancelText=e.cancelText||"取消",this.confirmText=e.confirmText||"确认",this.type=e.type||"confirm",this.outerData=e.data||null),this.isShowConfirm=!0},hidden:function(){this.isShowConfirm=!1,this.titleText="操作提示",this.cancelText="取消",this.confirmText="确认",this.type="confirm",this.outerData=null},clickFun:function(t){this.$emit("userBehavior",t,this.outerData),this.hidden()}}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"confirm-fade"}},[t.isShowConfirm?a("div",{staticClass:"my-confirm",on:{click:function(e){return e.stopPropagation(),t.clickFun("clickCancel")}}},[a("div",{staticClass:"confirm-content-wrap",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"my-confirm-title"},[t._v(t._s(t.titleText))]),t._v(" "),a("p",{staticClass:"my-confirm-content"},[t._v(t._s(t.content))]),t._v(" "),a("div",{staticClass:"my-operation"},["confirm"===t.type?a("div",{staticClass:"my-cancel-btn",on:{click:function(e){return t.clickFun("clickCancel")}}},[a("p",{staticClass:"my-btn-text my-border-right"},[t._v(t._s(t.cancelText))])]):t._e(),t._v(" "),a("div",{staticClass:"confirm-btn",on:{click:function(e){return t.clickFun("clickConfirm")}}},[a("p",{staticClass:"my-btn-text"},[t._v(t._s(t.confirmText))])])])])]):t._e()])},staticRenderFns:[]};var ft=a("VU/8")(vt,mt,!1,function(t){a("0YSe")},"data-v-083399c9",null).exports,_t={name:"headers",components:{"v-confirm":ft},data:function(){return{index:!0,flash:a("N3cg"),activeFlash:!1}},props:["headerName","orderList"],mounted:function(){"/"===this.$route.path||"Index"===this.$route.path?this.index=!1:this.index=!0},methods:{flashSwitch:function(){U.$emit("flashActive",this.activeFlash),this.activeFlash?(this.activeFlash=!1,this.flash=a("N3cg")):(this.activeFlash=!0,this.flash=a("AbpN"))},userBehaviorFun:function(t){"clickCancel"!==t&&this.$router.go(-1)},checkForBack:function(){0!==this.orderList.length?this.$refs.myConfirm.show("表单内有未提交保存的运单数据",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"是否返回首页?",data:this.orderList}):this.$router.go(-1)},backToHome:function(){0!==this.orderList.length||this.$router.go(-1)}}},gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.index,expression:"index"}],staticClass:"back-button",on:{click:t.checkForBack}}),t._v(" "),a("div",{staticClass:"right-text"},[t._v("\n      "+t._s(t.headerName)+"\n    ")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1)},staticRenderFns:[]};var bt=a("VU/8")(_t,gt,!1,function(t){a("GC0Y")},"data-v-f4b89bf2",null).exports,yt=a("NYxO");c.default.use(yt.a);var Lt=new yt.a.Store({state:{RequestLink:"https://sfkc.sf-express.com/tmsAppNew/",RequestLinkimg:"https://sfkc.sf-express.com/",userInfo:[],typeOfCarList:[],Waybill:{waybillLinkStatus:"Link_PickUp",WaybillInfo:{clickWaybillInfo:[],clickShipmentId:""},Waybill_SearchData:"",Waybill_SearchType:0},AviationWaybill:{Waybill_SearchData:"",Waybill_SearchType:0},Aviation_HistoryWaybill:{Waybill_SearchData:"",Waybill_SearchType:0},Waybill_needRefresh:!0,IF_Navigation:!0,history_Data:[],history_NoSearchFrom:!0,history_SearchData:{},history_needRefresh:!0,search_WaybillDetail:[],history_LinkStatus:"Link_PickUp",ScanQRCodeInputName:"",App_Version:"",Device:"",flashStatus:!1,scan:!1},mutations:{activeScan:function(t){t.scan=!0},offScan:function(t){t.scan=!1}}}),Ct=a("Av7u"),St=a.n(Ct);v.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var Nt=Lt.state.RequestLink,It=function(t){Lt.state.userInfo.userToken&&(t.userToken=Lt.state.userInfo.userToken),t.cellphone||(t.cellphone=Lt.state.userInfo.cellphone),t=l()(t);var e=St.a.enc.Utf8.parse("l5TJHfZrmY38Hf2e2H1h0Q=="),a=St.a.enc.Utf8.parse(t);return St.a.AES.encrypt(a,e,{mode:St.a.mode.ECB,padding:St.a.pad.Pkcs7}).toString()},wt=function(t){return t=It(t),v.a.post(Nt+"verificationLabel.do",{params:t})},kt=function(t){return t=It(t),v.a.post(Nt+"commitScan.do",{params:t})},Dt=function(t){return t=It(t),v.a.post(Nt+"commitShipScan.do",{params:t})},Tt=function(t){return v.a.get(Nt+"abnormalSeleteData.do")},xt={name:"ReportAbnormal",components:{"v-scan":M,"v-header":bt},data:function(){return{headerName:"上报异常",responseData:{},OMS:{},aboType:"",typeOptions:[],aboReason:"",reasonOptions:[],localtttOptions:[],aboLink:"",linkOptions:[],aboPer:"",perOptions:[],aboText:"",allData:{},dialogImageUrl:"",dialogVisible:!1,imgUrl:null,imgObj:null,uploadParams:{},imageUrl:"",switchScan:!0,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",longitude:"",latitude:"",labelList:[],selectedLabelList:[],labelInput:""}},watch:{aboType:function(t,e){if(t!=e){this.aboReason="";for(var a=0;a<this.allData.newAbnormalType.length;a++)this.allData.newAbnormalType[a].abnormalType==t&&(this.reasonOptions=this.allData.newAbnormalType[a].abnormalReason)}}},mounted:function(){this.getAboList(),this.onPlusReady("e")},created:function(){},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.confirmLabelInput()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},uploadSuccessful:function(t,e,a){1==t.status?this.uploadSuccessNum++:this.uploadFailNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败"):this.finishUpload("图片上传失败"):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},finishUpload:function(t){var e=this;e.$emit("isLoading",!1);var a="";t&&(a=t?","+t:""),this.$alert("异常上报成功"+a,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},commitAbo:function(){var t=this;if(t.OMS.omsNo||t.OMS.deliveryNoSF)if(!t.labelList.length||t.selectedLabelList.length)if(t.aboLink){this.uploadParams.omsNo=this.OMS.omsNo,this.uploadParams.fileType="异常",this.uploadParams.labelNo=this.aboLink,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,t.uploadTotalNum=f()("div.uploadImg ul>li").length;var e={omsNo:this.OMS.omsNo,deliveryNoSF:this.OMS.deliveryNoSF,transporterId:this.$store.state.userInfo.orgnizationId,transporterName:this.$store.state.userInfo.orgnizationName,sponsorName:this.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone,abnormalType:this.aboType,abnormalReason:this.aboReason,abnormalLink:this.aboLink,responsibleParty:this.aboPer,abnormalExplain:this.aboText,city:t.CurrentCity,labelNoArr:t.selectedLabelList};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"reportAbnormalHome.do",{params:e}).then(function(e){if("1"==e.data.status)e.data.data&&(e.data.data=JSON.parse(t.decryption(e.data.data))),t.uploadTotalNum>0?(t.uploadParams.abnormalId=e.data.data?e.data.data:0,t.$refs.uploadAb.submit()):t.finishUpload();else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading",!1),a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})}else t.$alert("请选择异常环节","提示",{confirmButtonText:"确定"});else t.$alert("请选择运单号","提示",{confirmButtonText:"确定"});else t.$alert("请输入单号","提示",{confirmButtonText:"确定"})},selectLabel:function(t){var e=this;e.labelList[t].ifSelect=!e.labelList[t].ifSelect;var a=f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont");a.hasClass("icon-xuanzhong")?(e.selectedLabelList=e.selectedLabelList.filter(function(a){return a!==e.labelList[t].productNo}),a.removeClass("icon-xuanzhong").addClass("icon-weixuanzhong")):a.hasClass("icon-weixuanzhong")&&(e.selectedLabelList.push(e.labelList[t].productNo),a.removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"))},deleteLabel:function(t){for(var e=0;e<this.labelList.length;e++)if(this.labelList[e].productNo==this.selectedLabelList[t]){this.labelList[e].ifSelect=!1,this.selectedLabelList.splice(t,1),f()(".SingleLatitudeBox_box>div").eq(e).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");break}},confirmLabelInput:function(){var t=this;t.labelList.forEach(function(e,a){t.labelInput==e.productNo&&(e.ifSelect=!0,f()(".SingleLatitudeBox_box>div").eq(a).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"),t.selectedLabelList=t.selectedLabelList.filter(function(t){return t!==e.productNo}),t.selectedLabelList.push(e.productNo))})},checkAllLabel:function(){this.selectedLabelList=[];for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!0,this.selectedLabelList[t]=this.labelList[t].productNo,f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong")},UnselectAllLabel:function(){for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!1,f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");this.selectedLabelList=[]},getAboList:function(){var t=this,e=this;Tt().then(function(a){if(1==a.data.status){a.data.data&&(a.data.data=e.decryption(a.data.data)),t.typeOptions=[],t.reasonOptions=[],t.linkOptions=[],t.perOptions=[];var i=JSON.parse(a.data.data);for(var s in t.allData=i,i.abnormalLink){var o=i.abnormalLink[s],n={};n.value=o,n.label=o,t.linkOptions.push(n)}for(var r in t.typeOptions=i.newAbnormalType,i.responsibleParty){var l=i.responsibleParty[r],c={};c.value=l,c.label=l,t.perOptions.push(c)}}else 301==a.data.status&&e.ReturnToLogin()})},scanData:function(t){var e=this;e.selectedLabelList=[],e.labelList=[];var a={labelNo:t};this.httpRequest("reportAbnormalHomeSelect.do",a,function(t){if(e.OMS={omsNo:t.data.omsNo,deliveryNoSF:t.data.deliveryNoSF},t.data.labelNos&&t.data.labelNos.length){e.labelList=[];for(var a=0;a<t.data.labelNos.length;a++)e.labelList[a]={ifSelect:!1,productNo:t.data.labelNos[a]}}})},goPrev:function(){this.$router.go(-1)},switchScanFun:function(t){this.switchScan=!!t},uploadOnChange:function(t){this.switchScanFun(!0)}}},$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body Abnormal"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("异常上报")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,textre:"手动输入单号"},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"form-content"},[a("div",{staticClass:"form-item"},[a("label",[t._v("订单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.omsNo,callback:function(e){t.$set(t.OMS,"omsNo",e)},expression:"OMS.omsNo"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("运单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.deliveryNoSF,callback:function(e){t.$set(t.OMS,"deliveryNoSF",e)},expression:"OMS.deliveryNoSF"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("当前城市")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.CurrentCity,callback:function(e){t.CurrentCity=e},expression:"CurrentCity"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常环节")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常环节选择"},model:{value:t.aboLink,callback:function(e){t.aboLink=e},expression:"aboLink"}},t._l(t.linkOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常类型")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常类型选择"},model:{value:t.aboType,callback:function(e){t.aboType=e},expression:"aboType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.abnormalType,attrs:{label:t.abnormalType,value:t.abnormalType}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常原因")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常原因选择"},model:{value:t.aboReason,callback:function(e){t.aboReason=e},expression:"aboReason"}},t._l(t.reasonOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常描述")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.aboText,callback:function(e){t.aboText=e},expression:"aboText"}})],1)]),t._v(" "),t.labelList.length?a("div",{staticClass:"SingleLatitude"},[a("div",{staticClass:"SingleLatitudeScan"},[a("div",[a("span",{staticClass:"iconfont icon-saomiao",on:{click:function(e){return t.androidScan("labelInput")}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelInput,expression:"labelInput"}],attrs:{type:"text",placeholder:"输入要异常上报的运单"},domProps:{value:t.labelInput},on:{input:function(e){e.target.composing||(t.labelInput=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.confirmLabelInput}},[t._v("确定")])])]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox"},[a("div",{staticClass:"SingleLatitudeBox_head"},[t._v("请选择要异常上报的运单")]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_box"},t._l(t.labelList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.selectLabel(i)}}},[a("span",[t._v(t._s(e.productNo))]),t._v(" "),a("span",{staticClass:"iconfont icon-weixuanzhong"})])}),0),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_btn"},[a("span",{staticClass:"checkAll",on:{click:t.checkAllLabel}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"UnselectAll",on:{click:t.UnselectAllLabel}},[t._v("全不选")])]),t._v(" "),t.selectedLabelList.length?a("div",{staticClass:"SelectedWaybill"},[a("div",{staticClass:"SelectedWaybill_head"},[t._v("已选择的运单")]),t._v(" "),a("div",{staticClass:"SelectedWaybill_box"},t._l(t.selectedLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[a("span",[t._v(t._s(e))]),t._v(" "),a("span",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.deleteLabel(i)}}})])}),0)]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"uploadImg"},[t._m(0),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"uploadAb",attrs:{action:t.HOST+"abnormalUploadImage.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:3,multiple:!0,"on-error":t.uploadErr,"show-file-list":!0,"on-success":t.uploadSuccessful,"before-upload":t.beforeAvatarUpload,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"footer-commit"},[a("div",{staticClass:"commit",on:{click:t.commitAbo}},[t._v("提交")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("上传图片"),e("span",[this._v("(限3张)")]),this._v("：")])}]};var Pt=a("VU/8")(xt,$t,!1,function(t){a("TSYN")},"data-v-538cde6e",null).exports,Bt=a("BO1k"),At=a.n(Bt),Ot=a("lHA8"),Ft=a.n(Ot),Ut=a("c/Tr"),Wt=a.n(Ut),Rt=a("bOdI"),Mt=a.n(Rt),Et={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],imgObj:null,longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中");this.$route.path;for(var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.longitude,o=this.latitude,n=this.CurrentLocation,r=this.CurrentDistrict,c=this.CurrentCity,d=[],u=0;u<e.orderListScanned.length;u++){var h={};h.omsNo=e.orderListScanned[u].order,h.lables=[];for(var p=0;p<e.orderListScanned[u].waybillNumber.length;p++){var m={},_=e.orderListScanned[u].waybillNumber[p];m.labelNo=_,m.linkNode="40",m.scanPerson=a,m.cellphone=i,m.longitude=s,m.latitude=o,m.address=n,m.city=c,m.districict=r,h.lables.push(m)}d.push(h)}var g=[];for(var b in this.cacheResponseData){var y={},L=this.cacheResponseData[b];y.omsNo=L.omsNo,y.displayWt=L.displayWt,y.linkNode="40",g.push(y)}for(var C in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[C].order);this.params={params:l()(d)},function(t){return t=It(t),v.a.post(Nt+"commitScanRC.do",{params:t})}(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},Ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n         共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n       ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n         当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n       ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var qt={name:"WarehousingSignScan",components:{"v-scan":j,"v-footer":a("VU/8")(Et,Ht,!1,function(t){a("qezu")},"data-v-56578c61",null).exports,"v-confirm":ft},data:function(){return Mt()({activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsListSignBill:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,uploadSuccessNumSignBill:0,uploadTotalNumSignBill:0,uploadFailNumSignBill:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,SignBillOMSNo:"",SignBillShow:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""},"ifflash",!1)},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},computed:{uploadParamcom:function(){return function(t){return this.orderListScanned.length>0?{cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"签收",labelNo:"40"}:{cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,fileType:"签收",labelNo:"40"}}}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.$refs.upload_refXH[t].submit()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,o=this;this.loadingData=!0,function(t){return t=It(t),v.a.post(Nt+"queryOmsNoSelectInfoRC.do",{params:t})}(t).then(function(t){if("1"==t.data.status){t.data.data&&(t.data.data=JSON.parse(o.decryption(t.data.data)));var n=t.data.data;for(var r in t.data.data.notScanned&&(o.notScanned=o.notScanned.concat(t.data.data.notScanned)),t.data.data.scanned&&(o.scanned=o.scanned.concat(t.data.data.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}n.scanned&&n.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(n.scanned[0].waybillNumber)),n.notScanned&&n.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(n.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[r].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)},toHistoryWarehousingSign:function(){this.$router.push({name:"HistoryWarehousingSign"})},SignBillUpload:function(t){this.onPlusReady("e"),this.SignBillOMSNo=this.orderListScanned[t].order,this.SignBillShow=!0},cancelSignBill:function(){this.SignBillShow=!1,this.$refs.upload_refSignBill.clearFiles()},updateSignBill:function(){this.uploadTotalNumSignBill=f()(".SignBillToUpload div.uploadImg ul>li").length,this.uploadParamsListSignBill.cellphone=this.$store.state.userInfo.cellphone,this.uploadParamsListSignBill.driverName=this.$store.state.userInfo.userName,this.uploadParamsListSignBill.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParamsListSignBill.city=this.CurrentCity,this.uploadParamsListSignBill.address=this.CurrentLocation,this.uploadParamsListSignBill.district=this.CurrentDistrict,this.uploadParamsListSignBill.omsNo=this.SignBillOMSNo,this.uploadParamsListSignBill.fileType="回单",this.uploadParamsListSignBill.labelNo="40",this.uploadParamsListSignBill.returnFlag="T",this.$refs.upload_refSignBill.submit()},finishUploadSignBill:function(t){var e=this;e.$emit("isLoading_",!1),this.SignBillShow=!1,this.uploadSuccessNumSignBill=0,this.uploadTotalNumSignBill=0,this.uploadFailNumSignBill=0,t=t?","+t:"",this.$alert("签单上传成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$refs.upload_refSignBill.clearFiles();for(var t=0;t<e.orderListScanned.length;t++)if(e.orderListScanned[t].order==e.SignBillOMSNo){e.orderListScanned[t].returnOrderStatus="已签收";break}}})},uploadSuccessfulSignBill:function(t,e,a){1==t.status?this.uploadSuccessNumSignBill++:this.uploadFailNumSignBill++,this.uploadSuccessNumSignBill!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分签单图片上传失败"):this.finishUploadSignBill("")},uploadErrSignBill:function(t,e,a){if(this.uploadFailNumSignBill++,this.uploadFailNumSignBill==parseInt(this.uploadTotalNumSignBill))return this.uploadSuccessNumSignBill=0,this.uploadFailNumSignBill=0,this.uploadTotalNumSignBill=0,this.$emit("isLoading",!1),void this.$alert("签单上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分签单图片上传失败")},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("入仓签收")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")]),a("i",{staticClass:"iconfont icon-lishijilu",on:{click:t.toHistoryWarehousingSign}})]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.order)+" "),1==e.returnBillFlag?a("span",{staticClass:"SignReceiptStatus"},[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))]):t._e(),1==e.returnBillFlag?a("span",{staticClass:"SignReceipt",on:{click:function(e){return t.SignBillUpload(i)}}},[t._v("签单上传")]):t._e()]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamcom(i),"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.SignBillShow,expression:"SignBillShow"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"SignBillToUpload"},[a("div",{staticClass:"SignBillToUpload_head"},[t._v("签单上传")]),t._v(" "),a("div",{staticClass:"SignBillToUpload_info"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",[t._v(t._s(t.SignBillOMSNo))])]),t._v(" "),a("div",{staticClass:"SignBillToUpload_content"},[a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refSignBill",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsListSignBill,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErrSignBill,"on-success":t.uploadSuccessfulSignBill,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"SignBillToUpload_botm"},[a("div",{on:{click:t.cancelSignBill}},[t._v("取消")]),t._v(" "),a("div",{on:{click:t.updateSignBill}},[t._v("上传")])])])]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var zt=a("VU/8")(qt,Qt,!1,function(t){a("mjee")},"data-v-d96fdfb2",null).exports,Vt={name:"HistoryWarehousingSign",data:function(){return{shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={currentPage:e.loadPage,numberPerPage:e.numberPerPage,driverPhone:this.$store.state.userInfo.cellphone};this.httpRequest("queryRCDeliveryData.do",a,function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.shipmentListData=e.shipmentListData.concat(a.data):(e.shipmentListData=a.data,a.data.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},goprev:function(){this.$router.go(-1)}}},Jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoryWarehousingSign"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("历史记录")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult"},[a("div",[a("span",[t._v("签收时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.deliveryDate))])]),t._v(" "),a("div",[a("span",[t._v("发货人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"    "+t._s(e.issuePartyTel)+"    ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("收货人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"    "+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Xt=a("VU/8")(Vt,Jt,!1,function(t){a("r58W")},"data-v-0e173d30",null).exports,jt={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","actualQty","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this;this.$route.path;t.$emit("isLoading_",!0,"拼命加载中");var e={omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"25",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName};e=t.PublicEncryption(e),v.a.post(t.HOST+"aviationLoadingInboundScanBatch.do",{params:e}).then(function(e){if("1"==e.data.status)f()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.$emit("isLoading_",!1),t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(-1)}}));else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading_",!1),a=e.data.Msg?e.data.Msg:"批量提交失败",t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum-this.BatchOrderLastNum?this.$alert("批量提交数量不能超过剩余未扫描总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中");this.$route.path;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=[];for(var p in this.count){var m={};m.omsNo=this.count[p].omsno,m.labelNo=this.count[p].order,m.linkNode="25",m.scanPerson=a,m.cellphone=i,m.scanTime=this.count[p].time,m.supplierId=s,m.supplierName=o,m.longitude=n,m.latitude=r,m.address=c,m.city=u,m.districict=d,h.push(m)}for(var _ in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[_].order);this.params={params:l()(h)},function(t){return t=It(t),v.a.post(Nt+"aviationLoadingInboundScan.do",{params:t})}(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},Yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n         共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n       ")]),t._v(" "),a("div",{staticClass:"top"},[t._v("\n        已扫描数量:"),a("i",[t._v(" "+t._s(t.historyLabelNo.length))]),t._v("件\n       ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n         当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n       ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<1||1==t.orderListScanned.length&&"package"!=t.orderListScanned[0].flag&&"cheBiao"!=t.orderListScanned[0].flag?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("上次已扫描数量：")]),a("span",[t._v(t._s(t.BatchOrderLastNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var Gt={name:"PortScanning",components:{"v-header":bt,"v-scan":j,"v-footer":a("VU/8")(jt,Yt,!1,function(t){a("wkB4")},"data-v-09cd308b",null).exports,"v-confirm":ft},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"入港扫描",labelNo:"20"},this.$refs.upload_refXH[t].submit()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},closeScan:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="",e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,o=this;this.loadingData=!0,function(t){return t=It(t),v.a.post(Nt+"queryAviationInboundScan.do",{params:t})}(t).then(function(t){if("1"==t.data.status){i.$refs.ch.code="",t.data.data&&(t.data.data=JSON.parse(o.decryption(t.data.data)));var n=t.data.data;for(var r in t.data.data.notScanned&&(o.notScanned=o.notScanned.concat(t.data.data.notScanned)),t.data.data.scanned&&(o.scanned=o.scanned.concat(t.data.data.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}n.scanned&&n.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(n.scanned[0].waybillNumber)),n.notScanned&&n.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(n.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[r].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)}}},Kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("进港扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"cheBiao"==e.flag?"车标号:":"订单号:")+" "+t._s(e.order))]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,actualQty:t.actualQty,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Zt=a("VU/8")(Gt,Kt,!1,function(t){a("OhoF")},"data-v-744425e1",null).exports,te={name:"UploadReceipt",components:{"v-scan":st},data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,omsNo:"",PaperSheetimgDataList:[],tips_Msg:"",ifTips:!1,failText:"部分图片上传失败"}},mounted:function(){},created:function(){},methods:{goprev:function(){this.$router.push({name:"Index"})},updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.omsNo?f()("div.PaperSheet ul>li").length>0&&this.PaperSheetimgDataList.length+f()("div.PaperSheet ul>li").length>6?this.$alert("签收单最多上传六张图片","提示",{confirmButtonText:"确定"}):f()("div.PaperSheet ul>li").length<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.fileType="签收单",this.uploadParams.omsNo=this.omsNo,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.labelNo="40",this.uploadParams.type="运单",this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refTransit.submit()):this.$alert("请输入订单号/运单号，并点击确认按钮","提示",{confirmButtonText:"确定"})},selectimg:function(){var t=this,e={orderSFNo:t.omsNo};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"getImagesByOrderSFNoApp.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),1==e.data.status){try{e.data.data&&(e.data.data=JSON.parse(t.decryption(e.data.data)))}catch(a){e.data.data&&(e.data.data=t.decryption(e.data.data))}e.data.data.deliveryPic.length?(t.$previewRefresh(),t.PaperSheetimgDataList=e.data.data.deliveryPic):t.PaperSheetimgDataList=[]}else if(301==e.data.status)t.ReturnToLogin();else{var a;t.omsNo="",t.PaperSheetimgDataList=[],a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})},switchScanFun:function(t){this.switchScan=!!t},scanData:function(t){},scanData_com:function(t){this.omsNo=t,this.selectimg()},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),e.uploadSuccessNum=0,e.uploadFailNum=0,e.uploadTotalNum=0,this.$refs.upload_refTransit.clearFiles(),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.selectimg()}})},uploadSuccessful:function(t,e,a){1==t.status?this.uploadSuccessNum++:(this.failText=t.Msg,this.uploadFailNum++),this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)!=parseInt(this.uploadTotalNum)||this.finishUpload(this.failText):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload(this.failText)},uploadOnChange:function(t){this.switchScanFun(!0)}}},ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AirMasterScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("签收单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData,textre:"手动输入订单号/运单号"},on:{scanData:t.scanData,scanData_com:t.scanData_com}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t.omsNo?a("div",{staticClass:"orderinfo"},[a("div",[a("span",[t._v("订单号/运单号：")]),t._v(" "),a("span",[t._v(t._s(t.omsNo))])])]):t._e(),t._v(" "),t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPicture"},[t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("已上传照片： ")]),t._v(" "),t._l(t.PaperSheetimgDataList,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.HOSTimg+e,preview:"99",alt:""}})])})],2):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg PaperSheet"},[a("div",{staticClass:"LoadImg_head"},[t._v("签收单照片（限6张）")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refTransit",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("div",{staticClass:"g_signBtn",on:{click:t.updateimg}},[t._v("上传")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ae=a("VU/8")(te,ee,!1,function(t){a("w/nK")},"data-v-6773695a",null).exports,ie={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","hideBitch","transportLinks","actualQty","orderId","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this;this.$route.path;t.$emit("isLoading_",!0,"拼命加载中");var e={omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"28",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName};e=t.PublicEncryption(e),v.a.post(t.HOST+"batchSavePaitiScan.do",{params:e}).then(function(e){if("1"==e.data.status)f()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.$emit("isLoading_",!1),t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.BatchCommit_show=!1,t.AllCommitPopUp_show=!1,t.$emit("reflash",!0)}}));else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading_",!1),a=e.data.Msg?e.data.Msg:"批量提交失败",t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum?this.$alert("批量提交数量不能超过总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber<this.BatchOrderNum?this.$alert("子母件分离请逐渐扫描","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中");this.$route.path;for(var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=[],p=0;p<e.orderListScanned.length;p++){var m={};m.omsNo=e.orderListScanned[p].order,m.lables=[];for(var _=0;_<e.orderListScanned[p].waybillNumber.length;_++){var g={},b=e.orderListScanned[p].waybillNumber[_];g.labelNo=b,g.linkNode="28",g.scanPerson=a,g.cellphone=i,g.longitude=n,g.latitude=r,g.address=c,g.city=u,g.districict=d,g.supplierId=s,g.supplierName=o,m.lables.push(g)}h.push(m)}this.params={params:l()(h)},function(t){return t=It(t),v.a.post(Nt+"savePaitiScans.do",{params:t})}(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n         共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n       ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n         当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n       ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<=1?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var oe={name:"LeadWarehouseScan",components:{"v-scan":j,"v-footer":a("VU/8")(ie,se,!1,function(t){a("ohDP")},"data-v-4fc82ad0",null).exports,"v-confirm":ft},data:function(){return Mt()({activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""},"ifflash",!1)},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},computed:{uploadParamcom:function(){return function(t){return this.orderListScanned.length>0?{cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"卸车扫描",labelNo:"28"}:{cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,fileType:"卸车扫描",labelNo:"28"}}}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.$refs.upload_refXHk[t].submit()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="",e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,o=this;this.loadingData=!0,function(t){return t=It(t),v.a.post(Nt+"queryPaitiInfo.do",{params:t})}(t).then(function(t){if("1"==t.data.status){i.$refs.ch.code="",t.data.data&&(t.data.data=JSON.parse(o.decryption(t.data.data)));var n=t.data.data;for(var r in t.data.data.notScanned&&(o.notScanned=o.notScanned.concat(t.data.data.notScanned)),t.data.data.scanned&&(o.scanned=o.scanned.concat(t.data.data.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}n.scanned&&n.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(n.scanned[0].waybillNumber)),n.notScanned&&n.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(n.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[r].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)},toHistoryLeadWarehousingSign:function(){this.$router.push({name:"HistoryLeadWarehousingSign"})},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("前置仓扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")]),a("i",{staticClass:"iconfont icon-lishijilu",on:{click:t.toHistoryLeadWarehousingSign}})]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXHk",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamcom(i),"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var re=a("VU/8")(oe,ne,!1,function(t){a("UZ1n")},"data-v-4e7849ba",null).exports,le={name:"HistoryLeadWarehousingSign",data:function(){return{shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={currentPage:e.loadPage,numberPerPage:e.numberPerPage,driverPhone:this.$store.state.userInfo.cellphone};this.httpRequest("queryPaitiScans.do",a,function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.shipmentListData=e.shipmentListData.concat(a.data):(e.shipmentListData=a.data,a.data.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},goprev:function(){this.$router.go(-1)}}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoryWarehousingSign"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("历史记录")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult"},[a("div",[a("span",[t._v("发货人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"    "+t._s(e.issuePartyTel)+"    ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("收货人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"    "+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var de=a("VU/8")(le,ce,!1,function(t){a("H5a+")},"data-v-f0ce8580",null).exports,ue={name:"PrintExpress",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1,ifflash:!1}},components:{"v-scan":j},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:t};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"queryOrderPrinting.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),1==t.data.status){for(var a in t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),t.data.data.length?e.is_NoData=!1:e.is_NoData=!0,t.data.data[1])t.data.data[0][a]=t.data.data[1][a];for(var i in t.data.data[0].bsOrderWt&&(t.data.data[0].bsOrderWt=parseFloat(t.data.data[0].bsOrderWt/1e3)),t.data.data[0])0==t.data.data[0][i]&&(t.data.data[0][i]="-");e.OrderInfoData=t.data.data[0],e.OrderInfoDataList=t.data.data[2],e.printData=[],e.printData[0]=t.data.data[0],e.printData[1]=t.data.data[2],e.OrderInfo_show=!0}else if(301==t.data.status)e.ReturnToLogin();else{var s;e.is_NoData=!0,e.OrderInfoData={},e.OrderInfoDataList=[],e.printData=[],e.OrderInfo_show=!1,s=t.data.Msg?t.data.Msg:"请求失败",e.$alert(s,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},printBtn:function(t,e){var a=[];t&&"item"==t?(a[0]=this.OrderInfoData,a[1]=[this.OrderInfoDataList[e]],a=l()(a)):a=l()(this.printData);try{CallAndroidOrIOS.callAndroid("航空标签打印",a)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"航空标签打印",b:a})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},he={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("航空标签打印")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])]),t._v(" "),a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i)}}},[t._v("打印")])])])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var pe=a("VU/8")(ue,he,!1,function(t){a("u3rR")},"data-v-ff6a7446",null).exports,ve={name:"WaybillInfo_template",data:function(){return{currentAddressInfo:{},address_listData:[],typeMShow:!1,Navigate_addressList:[],shipmentIdx:0,tips_Msg:"",ifTips:!1,ifWarehouse:"Y"}},props:{shipmentListData:{},LinkStatus:"",orderList:{type:Array,default:function(){return[]}}},created:function(){},watch:{orderList:function(t){for(var e=0;e<this.orderList.length;e++)if("Y"==this.orderList[e].whetherWarehouseBusiness){this.ifWarehouse="N";break}}},methods:{_ewm:function(t){event.stopPropagation();this.$route.query.LinkStatus=this.LinkStatus,this.$router.push({name:"QRCode",query:{shipmentCode:t,LinkStatus:this.LinkStatus}})},OrderReceiving:function(t,e){var a=this,i={shipmentID:a.shipmentListData[e].shipmentID,type:t};a.httpRequest("updateReceivingStatus.do",i,function(t){a.$alert("成功","提示",{confirmButtonText:"确定",callback:function(){"Waybill"==a.$route.name?a.$emit("fatherMethodloadData"):a.$parent.loadData()}})},"isLoading_")},toPickUpRandomScan:function(t){event.stopPropagation();var e=this;if(e.orderList.length){for(var a=[],i=0;i<e.orderList.length;i++)a[a.length]=e.orderList[i].omsNo;var s={omsNo:a};e.httpRequest("getConfirmFlagFromOrder.do",s,function(a){a.data&&"Y"==a.data?e.$router.push({name:"PickUpRandomScan",query:{shipmentCode:e.shipmentListData[t].shipmentCode}}):a.data&&"N"==a.data&&e.$alert("请先在app首页揽收扫码打印页面确定件数重量，再提货扫描","提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$router.push({name:"PickUpRandomScan",query:{shipmentCode:e.shipmentListData[t].shipmentCode}})},toAirportPickUpRandomScan:function(t){event.stopPropagation();this.$router.push({name:"AirportPickUpRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toToSendRandomScan:function(t){event.stopPropagation();this.$router.push({name:"ToSendRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},oneTimeSubmit:function(t,e){event.stopPropagation();var a=this,i={shipmentCode:a.shipmentListData[e].shipmentCode,transportLinks:t,driverName:a.$store.state.userInfo.userName,cellphone:a.$store.state.userInfo.cellphone};this.httpRequest("updateDeliveryScanNumberBatch.do",i,function(t){a.$alert("成功","提示",{confirmButtonText:"确定",callback:function(){"Waybill"==a.$route.name?a.$emit("fatherMethodloadData"):a.$parent.loadData()}})},"isLoading_")},toSignRandomScan:function(t){event.stopPropagation();for(var e=!1,a=!1,i=!1,s=0;s<this.orderList.length;s++){if("Y"==this.orderList[s].whetherWarehouseBusiness){a=!0;break}if(-1!=this.orderList[s].chargeTypes.indexOf("到付")&&"ZK"==this.orderList[s].reference10){e=!0;break}if("Y"==this.orderList[s].IN01Flag&&"ZK"==this.orderList[s].reference10){i=!0;break}}a?this.$alert("订单中包含入仓签收的单，你不能进行签收扫描","提示",{confirmButtonText:"确定"}):e?this.$alert("订单中包含直客的到付单，请使用订单上的签收扫描进行扫描操作","提示",{confirmButtonText:"确定"}):i?this.$alert("订单中包含需代收货款订单，请使用订单上的签收扫描进行扫描操作","提示",{confirmButtonText:"确定"}):this.$router.push({name:"SignRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toDepartTakingPictures:function(t){event.stopPropagation();this.$router.push({name:"DepartTakingPictures",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toUnloadingTakingPictures:function(t){event.stopPropagation();this.$router.push({name:"UnloadingTakingPictures",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toDeliveryScanXH:function(t){event.stopPropagation();this.$router.push({name:"DeliveryScanXH",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toMassTransfer:function(t){event.stopPropagation();this.$router.push({name:"MassTransfer",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toAbnormal:function(t){event.stopPropagation();this.$router.push({name:"Abnormal",query:{shipmentCode:this.shipmentListData[t].shipmentCode,linkno:"20"}})},toTrackOnTheWay:function(t){event.stopPropagation();this.$router.push({name:"TrackOnTheWay",query:{shipmentID:this.shipmentListData[t].shipmentID}})},Details_waybill:function(t,e){"WaybillInfo"!=this.$route.name&&10!=this.DriverError(e)&&(this.$store.state.Waybill.WaybillInfo.clickWaybillInfo=[this.shipmentListData[e]],this.$store.state.Waybill.WaybillInfo.clickShipmentId=t,this.$router.push({name:"WaybillInfo",query:{LinkStatus:this.LinkStatus}}))},DriverError:function(t){var e=this;if("F"==e.shipmentListData[t].countDelivery)return e.$alert("该配载单中没有运单，请与调度联系","提示",{confirmButtonText:"确定",callback:function(t){"Waybill"==e.$route.name?e.$emit("fatherMethodloadData"):e.$router.push({name:"WaybillInfo"})}}),10},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_template_WaybillInfo"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybill(e.shipmentID,i,t.LinkStatus)}}},[a("span",{staticClass:"Navigation",on:{click:function(e){return t.Navigation(i)}}},[t._v("导航")]),t._v(" "),e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v("配载单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.shipmentCode))]),t._v("  \n\t\t  "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t  "),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(a){return t._ewm(e.shipmentCode)}}})]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(e.countDelivery)+" 单   ")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("物流公司：")]),t._v(" "),a("span",[t._v(t._s(e.transPartyName))])])]),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("联 系  人：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueUser)+"    "+t._s(e.issueAddrLiat[0].issuePhone))]),t._v("      "),e.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),1!=e.issueAddrLiat.length&&0!=e.issueAddrLiat.length?a("div",[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"},on:{click:function(e){return t.MultiAddress(i)}}},[t._v("查看多装货地址")])]):t._e()]),t._v(" "),a("p",["Link_PickUp"==t.LinkStatus&&"未接单"==e.receivingStatus?a("span",{on:{click:function(e){return t.OrderReceiving("接单",i)}}},[t._v("接单")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path?a("span",{on:{click:function(e){return t.toPickUpRandomScan(i)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path?a("span",{on:{click:function(e){return t.oneTimeSubmit("10",i)}}},[t._v("一键提交")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.toAirportPickUpRandomScan(i)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.oneTimeSubmit("27",i)}}},[t._v("一键装车")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.toToSendRandomScan(i)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.oneTimeSubmit("30",i)}}},[t._v("一键装车")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"==t.ifWarehouse?a("span",{on:{click:function(e){return t.toSignRandomScan(i)}}},[t._v("签收扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"未到达"==e.daoDaStatus?a("span",{on:{click:function(e){return t.OrderReceiving("到达",i)}}},[t._v("到场确认")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus?a("span",{on:{click:function(e){return t.toAbnormal(i)}}},[t._v("异常上报")]):t._e()])])}),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i)}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("       "),t.currentAddressInfo.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}}):t._e()])])])]),t._v(" "),t.typeMShow?a("div",{staticClass:"Navigate_MultiAddress"},[a("div",[a("div",{staticClass:"SelectTitle"},[t._v("请选择导航地址")]),t._v(" "),a("div",{staticClass:"SelectContent"},t._l(t.Navigate_addressList,function(e,i){return a("div",{key:i,staticClass:"addressContent",attrs:{id:i},on:{click:function(a){return t.Navigate_SelectComit(e.issueAddr1)}}},[a("div",[a("span",{staticClass:"ORFlag"},[t._v(t._s(e.ORFlag?e.ORFlag:"发"))]),a("span",[t._v(t._s(e.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.issueUser)+"      ")]),a("span",[t._v(t._s(e.issuePhone))]),e.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(a){return t.callPhone(e.issuePhone)}}}):t._e()])])}),0),t._v(" "),a("div",{staticClass:"cancel",on:{click:function(e){return t.selectCancel("e")}}},[t._v("取消")])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])}]};var fe=a("VU/8")(ve,me,!1,function(t){a("m8A4")},"data-v-18b560f8",null).exports,_e={name:"Waybill",data:function(){return{shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,LinkStatus:"Link_PickUp"}},components:{FooterIndex:x,WaybillInfo_template:fe},mounted:function(){this.allLoaded=!1},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$store.state.Waybill.waybillLinkStatus&&(this.LinkStatus=this.$store.state.Waybill.waybillLinkStatus),this.loadData()},methods:{LinkChoose:function(t){this.loadPage=1,this.allLoaded=!1,this.LinkStatus=t,this.$store.state.Waybill.waybillLinkStatus=t,this.loadData()},loadData:function(t,e){var a=this,i={currentPage:a.loadPage,numberPerPage:a.numberPerPage,startDate:null,endDate:null,deliveryNoinput:null,shipmentCodeinput:null,clientOrderNo:null,cellphone:a.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":"",searchNumberNo:a.$store.state.Waybill.Waybill_SearchData,searchType:a.$store.state.Waybill.Waybill_SearchType};a.httpRequest("queryShipmentData.do",i,function(i){t&&("TopLoad"==t?a.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&a.$refs.loadmore.onBottomLoaded()),a.loadPage>1?a.shipmentListData=a.shipmentListData.concat(i.data):(a.shipmentListData=i.data,i.data.length?a.is_NoData=!1:(a.is_NoData_text="没有任务",a.is_NoData=!0)),a.shipmentListData.length&&"T"==e&&(a.$store.state.Waybill.WaybillInfo.clickWaybillInfo=[a.shipmentListData[0]],a.$store.state.Waybill.WaybillInfo.clickShipmentId=a.shipmentListData[0].shipmentID,a.$router.push({name:"WaybillInfo",query:{LinkStatus:a.LinkStatus,Waybill_SearchData:a.$store.state.Waybill.Waybill_SearchData,Waybill_SearchType:a.$store.state.Waybill.Waybill_SearchType}})),i.data.length<a.numberPerPage?a.allLoaded=!0:a.allLoaded=!1})},SearchSelect:function(t){"order"==t?(this.$store.state.Waybill.Waybill_SearchType=1,f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Waybill.Waybill_SearchType=2,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Waybill.Waybill_SearchType&&(this.$store.state.Waybill.Waybill_SearchType=2),""==this.$store.state.Waybill.Waybill_SearchData&&(this.$store.state.Waybill.Waybill_SearchType=0),this.loadData(null,"T")},searchLabel_close:function(){this.$store.state.Waybill.Waybill_SearchData="",this.$store.state.Waybill.Waybill_SearchType=0,this.loadData()},fatherMethodloadData:function(){this.loadData()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},historyTask:function(){this.$router.push({name:"historyList"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Waybill"},[a("header",[a("div",{staticClass:"currentTask"},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask",on:{click:t.historyTask}},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{class:{selected_head:"Link_PickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_PickUp")}}},[a("span",[t._v("提货")])]),t._v(" "),a("div",{class:{selected_head:"Link_Transit"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_Transit")}}},[a("span",[t._v("中转")])]),t._v(" "),a("div",{class:{selected_head:"Link_AirportPickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_AirportPickUp")}}},[a("span",[t._v("派提")])]),t._v(" "),a("div",{class:{selected_head:"Link_ToSend"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_ToSend")}}},[a("span",[t._v("派件")])])]),t._v(" "),a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.Waybill.Waybill_SearchData,expression:"$store.state.Waybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.Waybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.Waybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{staticClass:"SearchBoxOrder",on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{staticClass:"SearchBoxSFOrder",on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),a("div",{staticClass:"SearchBoxBtn"},[a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.Waybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.Waybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.Waybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,LinkStatus:t.LinkStatus},on:{fatherMethodloadData:t.fatherMethodloadData,isLoading_:t.fullscreenLoading}}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],1)])],1),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[]};var be=a("VU/8")(_e,ge,!1,function(t){a("jjfT")},"data-v-1af65276",null).exports,ye={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",t._l(t.footList,function(e,i){return a("div",{key:i,class:{active:t.active==e.title},attrs:{id:i},on:{click:function(e){return t.toggle(i)}}},[a("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),a("p",[t._v(t._s(e.title))])])}),0)])},staticRenderFns:[]};var Le=a("VU/8")({name:"FooterIndex",data:function(){return{footList:[{path:"Index",title:"首页",icon:"icon-shouye-blue"},{path:"AviationWaybill",title:"航空任务",icon:"icon-woderenwu"}],active:"航空任务"}},created:function(){for(var t=0;t<this.footList.length;t++){if("historyList"==this.$route.name)return void(this.active="航空任务");if(this.$route.name==this.footList[t].path)return void(this.active=this.footList[t].title)}this.$route.query.active&&(this.active=this.$route.query.active)},methods:{toggle:function(t){this.$store.state.Waybill_needRefresh=!1,this.active=this.footList[t].title,this.$router.push({name:this.footList[t].path,query:{active:this.footList[t].title}})}}},ye,!1,function(t){a("MLBd")},"data-v-46272bc2",null).exports,Ce={name:"Aviation_template_WaybillInfo",data:function(){return{currentAddressInfo:{},address_listData:[],typeMShow:!1,Navigate_addressList:[],shipmentIdx:0,tips_Msg:"",ifTips:!1}},props:{shipmentListData:{},packageArray:{}},created:function(){},methods:{Details_waybillPackage:function(t,e){this.$router.push({name:"PackageDetail",query:{contnrCode:t,ifCheBiao:e}})},Details_waybill:function(t){this.$router.push({name:"AviationWaybillInfo",query:{deliveryId:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Aviation_template_WaybillInfo"},[t._l(t.packageArray,function(e,i){return a("div",{key:i+"w",staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybillPackage(e.contnrCode,e.ifCheBiao)}}},[e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v(t._s(e.ifCheBiao?"车标号：":"包 号 ："))]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.contnrCode))]),t._v("  \n        "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n      ")]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedDepartureTime))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(e.createOrderContactName))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybill(e.deliveryId,i)}}},[e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(1,!0),t._v(" "),e.aviationScanNum<e.orderQty&&e.aviationScanNum>0?a("div",{staticClass:"unfinished"},[a("span",[t._v("未扫完")])]):t._e(),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v("订 单 号 ：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.omsNo))]),t._v("  \n\t\t  "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF"}],staticClass:"codestyle"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.deliveryNoSF))]),t._v("  \n      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n    ")]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(e.createOrderContactName))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",[a("span",[t._v("已扫描件数：")]),t._v(" "),a("span",[t._v(t._s(e.aviationScanNum))])])])])}),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])}]};var Ne={name:"AviationWaybill",data:function(){return{tips_Msg:"",ifTips:!1,shipmentListData:[],packageArray:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:10,loadPage:1,allLoaded:!0,autoFill:!1}},components:{AviationFooter:Le,WaybillInfo_template:a("VU/8")(Ce,Se,!1,function(t){a("3q/r")},"data-v-083f0a04",null).exports},mounted:function(){var t=this;t.$store.state.userInfo.aiportCode?(this.allLoaded=!1,1==this.$store.state.AviationWaybill.Waybill_SearchType?f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000"):f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()):this.$alert("未获取到机场信息，请联系负责人维护该账号的机场信息，维护后请退出app账号重新登录","提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"Index"})}})},created:function(){},methods:{QRScanAjax:function(t){this.$store.state.AviationWaybill.Waybill_SearchData=t,this.SearchWaybill()},storeAndroidScan:function(){window.QRScanAjax=this.QRScanAjax,window.TellVue_QRScanResult_Ajax=this.QRScanAjax;try{CallAndroidOrIOS.VueSCAN()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生扫描二维码/条码"})}catch(t){}},loadData:function(t){var e=this;""==this.$store.state.AviationWaybill.Waybill_SearchData&&(this.$store.state.AviationWaybill.Waybill_SearchType=0);var a={currentPage:e.loadPage,numberPerPage:e.numberPerPage,aviationIsLoaded:"WEI",transporterId:e.$store.state.userInfo.orgnizationId,searchNumberNo:e.$store.state.AviationWaybill.Waybill_SearchData,searchType:e.$store.state.AviationWaybill.Waybill_SearchType,flightDepcode:e.$store.state.userInfo.aiportCode};e.httpRequest("queryAviationDeliveryData.do",a,function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded());for(var i=0;i<a.data.cheBiaoArray.length;i++)a.data.cheBiaoArray[i].ifCheBiao=!0;e.loadPage>1?(e.shipmentListData=e.shipmentListData.concat(a.data.deliveryArray),e.packageArray=e.packageArray.concat(a.data.packageArray),e.packageArray=e.packageArray.concat(a.data.cheBiaoArray)):(e.shipmentListData=a.data.deliveryArray,e.packageArray=a.data.packageArray,e.packageArray=e.packageArray.concat(a.data.cheBiaoArray),a.data.deliveryArray.length||e.packageArray.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.data.deliveryArray.length<e.numberPerPage||a.data.packageArray.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},SearchSelect:function(t){"order"==t?(this.$store.state.AviationWaybill.Waybill_SearchType=1,f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.AviationWaybill.Waybill_SearchType=2,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},BatchLoading:function(){var t=this;this.$confirm("确认要一键提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$emit("isLoading",!0,"拼命加载中");var e={transporterId:t.$store.state.userInfo.orgnizationId,appFlightDepcode:t.$store.state.userInfo.aiportCode,driverPhone:t.$store.state.userInfo.cellphone,driverName:t.$store.state.userInfo.userName};e=t.PublicEncryption(e),v.a.post(t.HOST+"aviationUpdateDeliveryScanNumberBatch.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status)t.ifTips=!0,t.tips_Msg=e.data.Msg,setTimeout(function(){t.ifTips=!1,t.loadData()},1500);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"提交失败",alert(a)}}).catch(function(e){t.$emit("isLoading",!1),alert("提交失败")})}).catch(function(){})},SearchWaybill:function(){0==this.$store.state.AviationWaybill.Waybill_SearchType&&(this.$store.state.AviationWaybill.Waybill_SearchType=2),""==this.$store.state.AviationWaybill.Waybill_SearchData&&(this.$store.state.AviationWaybill.Waybill_SearchType=0),this.loadData()},searchLabel_close:function(){this.$store.state.AviationWaybill.Waybill_SearchData="",this.$store.state.AviationWaybill.Waybill_SearchType=0,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},fatherMethodloadData:function(){this.loadData()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},historyTask:function(){this.$router.push({name:"AviationHistoryList"})},toAviationAllTransitScan:function(){this.$router.push({name:"AviationAllTransitScan"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},Ie={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationWaybill"},[a("header",[a("div",{staticClass:"currentTask"},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask",on:{click:t.historyTask}},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{on:{click:t.toAviationAllTransitScan}},[a("span",[t._v("航空出港扫描")]),a("i",{staticClass:"iconfont icon-sousuoxiawu-"})])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.AviationWaybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.AviationWaybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.AviationWaybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.AviationWaybill.Waybill_SearchData,expression:"$store.state.AviationWaybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.AviationWaybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.AviationWaybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{staticClass:"SearchBoxOrder",on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{staticClass:"SearchBoxSFOrder",on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),a("div",{staticClass:"SearchBoxBtn",on:{click:t.storeAndroidScan}},[a("i",{staticClass:"iconfont icon-sousuoxiawu-"})])]),t._v(" "),a("div",{staticClass:"SearchBoxBtnquery"},[t.shipmentListData.length||t.packageArray.length?a("div",{on:{click:t.BatchLoading}},[t._v("一键提交")]):t._e(),a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])]),t._v(" "),a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,packageArray:t.packageArray},on:{fatherMethodloadData:t.fatherMethodloadData,isLoading_:t.fullscreenLoading}}),t._v(" "),t.allLoaded&&(t.shipmentListData.length||t.packageArray.length)?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],1)])],1),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("AviationFooter")],1)},staticRenderFns:[]};var we=a("VU/8")(Ne,Ie,!1,function(t){a("jckB")},"data-v-6df90250",null).exports,ke={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,deliveryMethod_crru:"",forwardSupplier_crru:"",forwardSupplierId_crru:"",CarrierList:[],CarrierSelection_show:!1,CarrierSelecteditem:0,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","deliveryMethod","forwardSupplier","forwardSupplierId","reference10","chargeTypes","shipmentNum"],mounted:function(){var t=this;this.onPlusReady("e"),this.deliveryMethod_crru=this.deliveryMethod,this.forwardSupplier_crru=this.forwardSupplier,this.forwardSupplierId_crru=this.forwardSupplierId,window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1,"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=this.deliveryMethod_crru,p=this.forwardSupplier_crru,v=this.forwardSupplierId_crru,m=[];for(var _ in this.count){var g={};g.omsNo=this.count[_].omsno,g.labelNo=this.count[_].order,g.linkNode="10",g.scanPerson=a,g.cellphone=i,g.scanTime=this.count[_].time,g.supplierId=s,g.supplierName=o,g.longitude=n,g.latitude=r,g.address=c,g.city=u,g.districict=d,g.deliveryMethod=h,g.forwardSupplier=p,g.forwardSupplierId=v,m.push(g)}var b=[];for(var y in this.cacheResponseData){var L={},C=this.cacheResponseData[y];L.omsNo=C.omsNo,L.displayWt=C.displayWt,L.linkNode="10",b.push(L)}for(var S in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[S].order);this.params={params:l()(m),labelNo:l()(this.cleanOrderList)},Dt(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Te={name:"PickUpRandomScan",components:{"v-scan":j,"v-footer":a("VU/8")(ke,De,!1,function(t){a("s5V/")},"data-v-469a37c8",null).exports,"v-confirm":ft},watch:{},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"10"};t.httpRequest("shipmentCodeSelectInfo.do",e,function(e){e.data.notScanned?t.notScanned=e.data.notScanned:t.notScanned=[],e.data.scanned?t.scanned=e.data.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"装车扫描",labelNo:"10"},this.$refs.upload_refXH[t].submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){var i=!1;e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}))}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){"1"==t.data.status?(t.data.data&&(t.data.data=JSON.parse(a.decryption(t.data.data))),a.loadingData=!1,a.responseData=t.data.data,a.dealConfirmData(a.propScanData)):301==t.data.status?a.ReturnToLogin():(a.loadingData=!1,a.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,a.$alert(t,"提示",{confirmButtonText:"确定"})})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PickUpRandomScan coc"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("提货扫描-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var $e=a("VU/8")(Te,xe,!1,function(t){a("/Z2R")},"data-v-47d1024c",null).exports,Pe={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","reference10","chargeTypes","shipmentNum"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;window.onresize=function(){t.realHeight=document.body.clientHeight},this.onPlusReady("e")},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=[];for(var p in this.count){var v={};v.omsNo=this.count[p].omsno,v.labelNo=this.count[p].order,v.linkNode="27",v.scanPerson=a,v.cellphone=i,v.scanTime=this.count[p].time,v.supplierId=s,v.supplierName=o,v.longitude=n,v.latitude=r,v.address=c,v.city=u,v.districict=d,h.push(v)}var m=[];for(var _ in this.cacheResponseData){var g={},b=this.cacheResponseData[_];g.omsNo=b.omsNo,g.displayWt=b.displayWt,g.linkNode="27",m.push(g)}for(var y in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[y].order);this.params={params:l()(h),labelNo:l()(this.cleanOrderList)},Dt(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},Be={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ae={name:"AirportPickUpRandomScan",components:{"v-scan":j,"v-footer":a("VU/8")(Pe,Be,!1,function(t){a("ItJw")},"data-v-ecc0c3cc",null).exports,"v-confirm":ft},watch:{},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"27"};t.httpRequest("shipmentCodeSelectInfo.do",e,function(e){e.data.notScanned?t.notScanned=e.data.notScanned:t.notScanned=[],e.data.scanned?t.scanned=e.data.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"装车扫描",labelNo:"27"},this.$refs.upload_refXH[t].submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){for(var i=!1,s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}))}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ToSendRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派提装车-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"ToSendRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Fe=a("VU/8")(Ae,Oe,!1,function(t){a("84Ns")},"data-v-56ed0149",null).exports,Ue={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","reference10","chargeTypes","shipmentNum"],mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=[];for(var p in this.count){var v={};v.omsNo=this.count[p].omsno,v.labelNo=this.count[p].order,v.linkNode="30",v.scanPerson=a,v.cellphone=i,v.scanTime=this.count[p].time,v.supplierId=s,v.supplierName=o,v.longitude=n,v.latitude=r,v.address=c,v.city=u,v.districict=d,h.push(v)}var m=[];for(var _ in this.cacheResponseData){var g={},b=this.cacheResponseData[_];g.omsNo=b.omsNo,g.displayWt=b.displayWt,g.linkNode="30",m.push(g)}for(var y in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[y].order);this.params={params:l()(h),labelNo:l()(this.cleanOrderList)},Dt(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},We={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Re={name:"ToSendRandomScan",components:{"v-scan":j,"v-footer":a("VU/8")(Ue,We,!1,function(t){a("i2d5")},"data-v-26753e9e",null).exports,"v-confirm":ft},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"30"};t.httpRequest("shipmentCodeSelectInfo.do",e,function(e){e.data.notScanned?t.notScanned=e.data.notScanned:t.notScanned=[],e.data.scanned?t.scanned=e.data.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"装车扫描",labelNo:"30"},this.$refs.upload_refXH[t].submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="";for(var i=!1,s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}))}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){"1"==t.data.status?(t.data.data&&(t.data.data=JSON.parse(a.decryption(t.data.data))),a.loadingData=!1,a.responseData=t.data.data,a.dealConfirmData(a.propScanData)):301==t.data.status?a.ReturnToLogin():(a.loadingData=!1,a.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,a.$alert(t,"提示",{confirmButtonText:"确定"})})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ToSendRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派件装车-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"ToSendRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ee=a("VU/8")(Re,Me,!1,function(t){a("Ub+r")},"data-v-bccfffdc",null).exports,He={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","shipmentNum","orderListScanned"],mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},CarrierSelected:function(t){this.CarrierSelecteditem=t},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitPopUp_show=!1,this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.AllCommitPopUp_show=!1,this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0)},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1;for(var a=0;a<e.orderListScanned.length;a++)if("XY"==e.orderListScanned[a].IN91Flag&&f()(".order-list_item:eq("+a+") .uploadImg ul>li").length<1)return void e.$alert("客户要求电子验收，请拍照上传后再妥投！","提示",{confirmButtonText:"确定"});e.$emit("isLoading_",!0,"拼命加载中"),e.AllCommitPopUp_show=!1;var i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=[];for(var v in this.count){var m={};m.omsNo=this.count[v].omsno,m.labelNo=this.count[v].order,m.linkNode="40",m.scanPerson=i,m.cellphone=s,m.scanTime=this.count[v].time,m.supplierId=o,m.supplierName=n,m.longitude=r,m.latitude=c,m.address=d,m.city=h,m.districict=u,p.push(m)}var _=[];for(var g in this.cacheResponseData){var b={},y=this.cacheResponseData[g];b.omsNo=y.omsNo,b.displayWt=y.displayWt,b.linkNode="40",_.push(b)}for(var L in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[L].order);this.params={params:l()(p),labelNo:l()(this.cleanOrderList)},Dt(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$emit("reflash",!0),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},qe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Qe={name:"SignRandomScan",components:{"v-scan":j,"v-footer":a("VU/8")(He,qe,!1,function(t){a("eYl9")},"data-v-a49a9dee",null).exports,"v-confirm":ft},watch:{},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode,this.querylabellist())},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{querylabellist:function(){var t=this,e={shipmentCode:this.shipmentCode,linkNode:"40"};t.httpRequest("shipmentCodeSelectInfo.do",e,function(e){e.data.notScanned?t.notScanned=e.data.notScanned:t.notScanned=[],e.data.scanned?t.scanned=e.data.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})},updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"签收",labelNo:"40"},this.$refs.upload_refXH[t].submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),IN91Flag:e.notScanned[i].IN91Flag}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],IN91Flag:e.notScanned[i].IN91Flag,flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],IN91Flag:e.notScanned[i].IN91Flag,flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1)}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){"1"==t.data.status?(t.data.data&&(t.data.data=JSON.parse(a.decryption(t.data.data))),a.loadingData=!1,a.responseData=t.data.data,a.dealConfirmData(a.propScanData)):301==t.data.status?a.ReturnToLogin():(a.loadingData=!1,a.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,a.$alert(t,"提示",{confirmButtonText:"确定"})})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow(),IN91Flag:i.IN91Flag}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SignRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("签收扫描-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"SignRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderListScanned:t.orderListScanned,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ve=a("VU/8")(Qe,ze,!1,function(t){a("2IDr")},"data-v-3330037c",null).exports,Je={name:"DepartTakingPictures",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.onPlusReady("isLoading_")},methods:{submit:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadTotalNum<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.shipmentCode=this.shipmentCode,this.uploadParams.fileType="发车拍照",this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.longitude=this.longitude,this.uploadParams.latitude=this.latitude,this.uploadParams.city=this.CurrentCity,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.address=this.CurrentLocation,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refDepart.submit())},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DepartTakingPictures"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("提货-发车拍照")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("配载单号：")]),a("span",[t._v(t._s(t.shipmentCode))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refDepart",attrs:{action:t.HOST+"shipmentCodeUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var je=a("VU/8")(Je,Xe,!1,function(t){a("d/PR")},"data-v-5f64eac8",null).exports,Ye={name:"DepartTakingPictures",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.onPlusReady("isLoading_")},methods:{submit:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadTotalNum<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.shipmentCode=this.shipmentCode,this.uploadParams.fileType="卸车拍照",this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.longitude=this.longitude,this.uploadParams.latitude=this.latitude,this.uploadParams.city=this.CurrentCity,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.address=this.CurrentLocation,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refUnload.submit())},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DepartTakingPictures"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("提货-卸车拍照")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("配载单号：")]),a("span",[t._v(t._s(t.shipmentCode))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refUnload",attrs:{action:t.HOST+"shipmentCodeUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ke=a("VU/8")(Ye,Ge,!1,function(t){a("L6wv")},"data-v-fe1925ba",null).exports,Ze={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,BatchCommit_show:!1,BatchCommitNumber:"",latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,crruentconfirm:"",deliveryMethod_crru:"",forwardSupplier_crru:"",forwardSupplierId_crru:"",CarrierList:[],CarrierSelection_show:!1,CarrierSelecteditem:0,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","transportLinks","actualQty","omsNo","orderId","HasLoading","abnormalscan","AbHasScanNum","deliveryMethod","forwardSupplier","forwardSupplierId","reference10","chargeTypes","IN91Flag","IN01Flag"],mounted:function(){var t=this;window.onresize=function(){t.realHeight=document.body.clientHeight},this.onPlusReady("e"),this.deliveryMethod_crru=this.deliveryMethod,this.forwardSupplier_crru=this.forwardSupplier,this.forwardSupplierId_crru=this.forwardSupplierId},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},CarrierSelected:function(t){this.CarrierSelecteditem=t},CarrierSelectionCancel:function(){this.CarrierSelection_show=!1},CarrierSelectionConfirm:function(){this.CarrierList.length&&(this.forwardSupplier_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplier,this.forwardSupplierId_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplierId),this.CarrierSelection_show=!1},SetCurrAddress:function(t){this.ReceivingLatitud(t)},DeliverySelect:function(t){this.deliveryMethod_crru=t},SelectCarrier:function(){var t=this;if("ZK"!=t.reference10){if(this.CarrierList.length){for(var e=0;e<t.CarrierList.length;e++)if(t.CarrierList[e].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=e;break}}else{t.httpRequest("queryOrgnization.do",{},function(e){t.CarrierList=e.data;for(var a=0;a<t.CarrierList.length;a++)if(t.CarrierList[a].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=a;break}},"isLoading_")}this.CarrierSelection_show=!0}else alert("该订单的转寄承运商只能为SF")},DeliveryBoxCancel:function(){this.SelectDelivery_show=!1},DeliveryBoxConfirm:function(){var t=this;if("ZK"==t.reference10&&("到付现结"==t.chargeTypes||"到付"==t.chargeTypes||"到付月结"==t.chargeTypes)&&f()("div.uploadImg ul>li").length<1)t.$alert("请拍摄接收货物的顺丰小哥工牌照片","提示",{confirmButtonText:"确定"});else if("XY"==t.IN91Flag&&f()("div.uploadImg ul>li").length<1)t.$alert("客户要求电子验收，请拍照上传后再妥投！","提示",{confirmButtonText:"确定"});else if("批量"==t.crruentconfirm){t.$emit("isLoading_",!0,"拼命加载中"),"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var e=this.$route.path,a="",i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=this.deliveryMethod_crru,v=this.forwardSupplier_crru,m=this.forwardSupplierId_crru;switch(e){case"/DeliveryScanXH":case"/DeliveryScan":a="10";break;case"/TransitScan":a="20";break;case"/AirportPickUpScan":a="27";break;case"/DeliveryOrderPickScan":a="30";break;case"/AbnormalScan":case"/ReceiptScan":a="40";break;default:a="10"}var _=[];for(var g in this.count){var b={};b.omsNo=t.omsNo,b.orderId=t.orderId,t.abnormalscan&&(b.abnormalscan="T",b.ifbatch="T"),b.labelNo=this.count[g].order,b.linkNode=a,b.scanPerson=i,b.cellphone=s,b.scanTime=this.count[g].time,b.supplierId=o,b.supplierName=n,b.longitude=r,b.latitude=c,b.address=d,b.city=h,b.districict=u,b.deliveryMethod=p,b.forwardSupplier=v,b.forwardSupplierId=m,_.push(b)}var y=[];for(var L in this.cacheResponseData){var C={},S=this.cacheResponseData[L];C.omsNo=S.omsNo,C.displayWt=S.displayWt,C.linkNode=a,y.push(C)}for(var N in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[N].order);this.params={params:l()(_),labelNo:l()(this.cleanOrderList),deliveryId:t.deliveryId},t.uploadTotalNum=f()("div.uploadImg ul>li").length,kt(this.params).then(function(e){"1"==e.data.status?t.BatchCommitConfirmitem():301==e.data.status?t.ReturnToLogin():(t.$alert(e.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("isLoading_",!1),t.$emit("scanFun",!0))}).catch(function(e){t.$emit("isLoading_",!1)})}else this.commitData()},BatchCommit:function(){0!==this.count.length&&(this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1))},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":e="10";break;case"/TransitScan":e="20";break;case"/AirportPickUpScan":e="27";break;case"/DeliveryOrderPickScan":e="30";break;case"/AbnormalScan":case"/ReceiptScan":e="40";break;default:e="10"}if("直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru=""),t.abnormalscan)var a={deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,abnormalscan:"T",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru};else a={deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru};a=t.PublicEncryption(a),v.a.post(t.HOST+"batchScanLabel.do",{params:a}).then(function(e){if("1"==e.data.status)f()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.$emit("isLoading_",!1),t.ifTips=!0,t.tips_Msg="批量提交成功",setTimeout(function(){t.ifTips=!1,t.$router.back(-1)},1500));else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading_",!1),a=e.data.Msg?e.data.Msg:"批量提交失败",t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){if(this.BatchCommitNumber)if("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber))this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}});else{var t="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":t="10";break;case"/TransitScan":t="20";break;case"/AirportPickUpScan":t="27";break;case"/DeliveryOrderPickScan":t="30";break;case"/AbnormalScan":case"/ReceiptScan":t="40";break;default:t="10"}if(("30"==t||"27"==t)&&this.BatchCommitNumber<this.actualQty)this.$alert("派件装车子母件分离时不允许批量提交，请逐件扫描后使用提交功能","提示",{confirmButtonText:"确定",callback:function(){}});else{if(this.HasLoading){if(this.BatchCommitNumber>this.HasLoading)return void this.$alert("批量扫描件数不能超过已装车件数","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.abnormalscan){if(this.BatchCommitNumber>this.actualQty-this.AbHasScanNum)return void this.$alert("批量扫描件数不能超过剩余待签收数量","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.BatchCommitNumber>this.actualQty)return void this.$alert("批量提交数量不能超过订单总件数","提示",{confirmButtonText:"确定",callback:function(){}});this.AllCommitPopUp_show=!0}}},BatchCommitConfirm:function(){var t=this;t.$emit("isLoading_",!0,"拼命加载中"),"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var e=this.$route.path,a="",i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=this.deliveryMethod_crru,v=this.forwardSupplier_crru,m=this.forwardSupplierId_crru;switch(e){case"/DeliveryScanXH":case"/DeliveryScan":a="10";break;case"/TransitScan":a="20";break;case"/AirportPickUpScan":a="27";break;case"/DeliveryOrderPickScan":a="30";break;case"/AbnormalScan":case"/ReceiptScan":a="40";break;default:a="10"}var _=[];for(var g in this.count){var b={};b.omsNo=t.omsNo,b.orderId=t.orderId,t.abnormalscan&&(b.abnormalscan="T",b.ifbatch="T"),b.labelNo=this.count[g].order,b.linkNode=a,b.scanPerson=i,b.cellphone=s,b.scanTime=this.count[g].time,b.supplierId=o,b.supplierName=n,b.longitude=r,b.latitude=c,b.address=d,b.city=h,b.districict=u,b.deliveryMethod=p,b.forwardSupplier=v,b.forwardSupplierId=m,_.push(b)}var y=[];for(var L in this.cacheResponseData){var C={},S=this.cacheResponseData[L];C.omsNo=S.omsNo,C.displayWt=S.displayWt,C.linkNode=a,y.push(C)}for(var N in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[N].order);this.params={params:l()(_),labelNo:l()(this.cleanOrderList),deliveryId:t.deliveryId},t.uploadTotalNum=f()("div.uploadImg ul>li").length,kt(this.params).then(function(e){"1"==e.data.status?t.BatchCommitConfirmitem():301==e.data.status?t.ReturnToLogin():(t.$alert(e.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("isLoading_",!1),t.$emit("scanFun",!0))}).catch(function(e){t.$emit("isLoading_",!1)})},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.commitPopUp_show=!1,this.SelectDelivery_show=!0):this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.AllCommitPopUp_show=!1,this.SelectDelivery_show=!0):"批量"==this.crruentconfirm?this.BatchCommitConfirm():this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.crruentconfirm="提交","/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path)return void(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0);if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1,"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,d=this.latitude,u=this.CurrentLocation,h=this.CurrentDistrict,p=this.CurrentCity,v=this.deliveryMethod_crru,m=this.forwardSupplier_crru,_=this.forwardSupplierId_crru;switch(a){case"/DeliveryScanXH":case"/DeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/AirportPickUpScan":i="27";break;case"/DeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":i="40";break;default:i="10"}var g=[];for(var b in this.count){var y={};y.omsNo=e.omsNo,y.orderId=e.orderId,e.abnormalscan&&(y.abnormalscan="T"),y.labelNo=this.count[b].order,y.linkNode=i,y.scanPerson=s,y.cellphone=o,y.scanTime=this.count[b].time,y.supplierId=n,y.supplierName=r,y.longitude=c,y.latitude=d,y.address=u,y.city=p,y.districict=h,y.deliveryMethod=v,y.forwardSupplier=m,y.forwardSupplierId=_,g.push(y)}var L=[];for(var C in this.cacheResponseData){var S={},N=this.cacheResponseData[C];S.omsNo=N.omsNo,S.displayWt=N.displayWt,S.linkNode=i,L.push(S)}for(var I in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[I].order);this.params={params:l()(g),labelNo:l()(this.cleanOrderList),deliveryId:e.deliveryId},kt(this.params).then(function(a){e.$emit("isLoading_",!1),"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},ta={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        订单总件数:"),a("i",[t._v(t._s(t.actualQty))]),t._v("件\n      ")]),t._v(" "),t.abnormalscan?a("div",{staticClass:"top"},[t._v("\n        已签收数量:"),a("i",[t._v(t._s(t.AbHasScanNum))]),t._v("件\n      ")]):t._e(),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),t.abnormalscan?a("div",{staticClass:"commit-button-box commitAbnormal"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button-box"},[t.HasLoading&&t.HasLoading==t.actualQty||!t.HasLoading?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.actualQty))])]),t._v(" "),t.HasLoading?a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("已装车件数：")]),a("span",[t._v(t._s(t.HasLoading))])]):t._e(),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.SelectDelivery_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head"},[t._v("请选择派件方式")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content"},["ZK"!=t.reference10||"到付现结"!=t.chargeTypes&&"到付"!=t.chargeTypes&&"到付月结"!=t.chargeTypes&&"Y"!=t.IN01Flag?a("div",{class:{DeliveryBox_content_active:"直送"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("直送")}}},[a("span",[t._v("直送")]),"直送"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()]):t._e(),t._v(" "),a("div",{class:{DeliveryBox_content_active:"转寄"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("转寄")}}},[a("span",[t._v("转寄")]),"转寄"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()])]),t._v(" "),"转寄"==t.deliveryMethod_crru?a("div",{staticClass:"DeliveryBox_input",on:{click:t.SelectCarrier}},[a("span",[t._v("转寄承运商：")]),t._v(" "),a("span",[t._v(t._s(t.forwardSupplier_crru))]),t._v(" "),a("i",{staticClass:"iconfont icon-xiangshang"})]):t._e(),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.DeliveryBoxCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.DeliveryBoxConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.CarrierSelection_show?a("div",{staticClass:"CarrierSelection"},[a("div",{staticClass:"CarrierSelectionBox"},[a("div",{staticClass:"CarrierSelection_head"},[t._v("请选择转寄承运商")]),t._v(" "),a("div",{staticClass:"CarrierSelection_content"},t._l(t.CarrierList,function(e,i){return a("div",{key:i,class:{CarrierSelection_active:t.CarrierSelecteditem==i},attrs:{id:i},on:{click:function(e){return t.CarrierSelected(i)}}},[t._v(t._s(e.forwardSupplier))])}),0),t._v(" "),a("div",{staticClass:"CarrierSelection_bottom"},[a("div",[a("span",{on:{click:t.CarrierSelectionCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.CarrierSelectionConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ea=a("VU/8")(Ze,ta,!1,function(t){a("HWhq")},"data-v-088417bd",null).exports,aa={name:"delivery-scan",components:{"v-header":bt,"v-scan":j,"v-footer":ea,"v-confirm":ft},watch:{},data:function(){return{activeName:"first",headerName:"提货扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,scanResult:{issuePartyAddr:"--",receivePartyAddr1:"--",orderQty:"--",orderWt:"--",displayWt:"--"},propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){this.linkNode="10"},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:10,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"deleteOrderScanLabel.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",alert(a),t.$router.back(-1)}}).catch(function(e){t.$emit("isLoading",!1),alert("请求失败"),t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="10",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refXH.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length){for(var s in a.cacheResponseData)-1!==a.cacheResponseData[s].allOrder.indexOf(t)&&(a.scanResult=a.cacheResponseData[s]);e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})}else{var o={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(o,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){"1"==t.data.status?(t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1,a.responseData=t.data.data,a.dealConfirmData(a.propScanData)):301==t.data.status?a.ReturnToLogin():(a.loadingData=!1,a.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,a.$alert(t,"提示",{confirmButtonText:"确定"})})},confirmResult:function(){var t=this;this.dealConfirmData(this.propScanData),this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},confirmResult01:function(){var t=this;this.showSliderData01=!1,this.switchScan=!0,this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ia={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("提货扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var sa=a("VU/8")(aa,ia,!1,function(t){a("8LW+")},"data-v-5320938c",null).exports,oa={name:"delivery-scan",components:{"v-header":bt,"v-scan":M,"v-footer":ea,"v-confirm":ft},watch:{},data:function(){return{test:"",activeName:"first",headerName:"提货扫描(拍照)",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,scanResult:{issuePartyAddr:"--",receivePartyAddr1:"--",orderQty:"--",orderWt:"--",displayWt:"--"},propScanData:"",responseData:{},switchScan:!0,testData:{},cacheResponseData:[]}},mounted:function(){switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":this.linkNode="10";break;case"/TransitScan":this.linkNode="20";break;case"/DeliveryOrderPickScan":this.linkNode="30";break;case"/ReceiptScan":this.linkNode="40";break;default:this.linkNode="10"}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode)},methods:{switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData?this.showSliderData=!1:this.showSliderData=!0},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,shipmentCode:a.shipmentCode};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length){for(var s in a.cacheResponseData)-1!==a.cacheResponseData[s].allOrder.indexOf(t)&&(a.scanResult=a.cacheResponseData[s]);e.showSliderData01=!0,e.switchScan=!1,e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})}else{var o={scanLabel:t,linkNode:e.linkNode,shipmentCode:a.shipmentCode};e.getTheOrderNum(o,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var e=JSON.parse(t.data.data);if(a.responseData=e,a.scanResult=JSON.parse(JSON.parse(t.data.data).orderSF),a.scanResult.allOrder=JSON.parse(t.data.data).historySubmitLabelNo.concat(JSON.parse(t.data.data).notScanLabelNo),a.showSearchResult(),0!==a.cacheResponseData.length)for(var s in a.cacheResponseData)a.scanResult.omsNo===a.cacheResponseData[s].omsNo&&(a.scanResult.omsNo=a.cacheResponseData[s].displayWt);else a.cacheResponseData.push(a.scanResult)}else 301==t.data.status?i.ReturnToLogin():(i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}),a.loadingData=!1)}).catch(function(t){i.$alert(t,"提示",{confirmButtonText:"确定"}),a.loadingData=!1})},confirmResult:function(){var t=this;this.showSearchResult(),this.dealConfirmData(this.propScanData),this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},confirmResult01:function(){var t=this;this.showSliderData01=!1,this.switchScan=!0,this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)}}},na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList},on:{reflash:t.reflashData,scanFun:t.switchScanFun}}),t._v(" "),a("v-confirm",{ref:"message"}),t._v(" "),a("el-dialog",{staticClass:"search-side",attrs:{title:"扫描结果",visible:t.showSliderData,"close-on-click-modal":!1,"show-close":!1,width:"90%"},on:{"update:visible":function(e){t.showSliderData=e}}},[a("el-form",{ref:"form",attrs:{model:t.scanResult,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"寄件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"寄件地址"},model:{value:t.scanResult.issuePartyAddr,callback:function(e){t.$set(t.scanResult,"issuePartyAddr",e)},expression:"scanResult.issuePartyAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"收件地址"},model:{value:t.scanResult.receivePartyAddr1,callback:function(e){t.$set(t.scanResult,"receivePartyAddr1",e)},expression:"scanResult.receivePartyAddr1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"件数"}},[a("el-input",{attrs:{disabled:!0,placeholder:"件数"},model:{value:t.scanResult.orderQty,callback:function(e){t.$set(t.scanResult,"orderQty",e)},expression:"scanResult.orderQty"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{attrs:{disabled:!0,placeholder:"重量"},model:{value:t.scanResult.orderWt,callback:function(e){t.$set(t.scanResult,"orderWt",e)},expression:"scanResult.orderWt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"实际重量"}},[a("el-input",{attrs:{placeholder:"实际重量"},model:{value:t.scanResult.displayWt,callback:function(e){t.$set(t.scanResult,"displayWt",e)},expression:"scanResult.displayWt"}},[a("template",{slot:"append"},[t._v("KG")])],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.showSearchResult}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmResult}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"search-side",attrs:{title:"扫描结果",visible:t.showSliderData01,"close-on-click-modal":!1,"show-close":!1,width:"90%"},on:{"update:visible":function(e){t.showSliderData01=e}}},[a("el-form",{ref:"form",attrs:{model:t.scanResult,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"寄件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"寄件地址"},model:{value:t.scanResult.issuePartyAddr,callback:function(e){t.$set(t.scanResult,"issuePartyAddr",e)},expression:"scanResult.issuePartyAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"收件地址"},model:{value:t.scanResult.receivePartyAddr1,callback:function(e){t.$set(t.scanResult,"receivePartyAddr1",e)},expression:"scanResult.receivePartyAddr1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"件数"}},[a("el-input",{attrs:{disabled:!0,placeholder:"件数"},model:{value:t.scanResult.orderQty,callback:function(e){t.$set(t.scanResult,"orderQty",e)},expression:"scanResult.orderQty"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{attrs:{disabled:!0,placeholder:"重量"},model:{value:t.scanResult.orderWt,callback:function(e){t.$set(t.scanResult,"orderWt",e)},expression:"scanResult.orderWt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"实际重量"}},[a("el-input",{attrs:{placeholder:"实际重量"},model:{value:t.scanResult.displayWt,callback:function(e){t.$set(t.scanResult,"displayWt",e)},expression:"scanResult.displayWt"}},[a("template",{slot:"append"},[t._v("KG")])],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmResult01}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ra=a("VU/8")(oa,na,!1,function(t){a("YchS")},"data-v-86cd110e",null).exports,la={name:"PackageCommitFooter",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,crruentconfirm:"",commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","transportLinks","actualQty","omsNo","orderId","HasLoading","abnormalscan","AbHasScanNum"],mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitPopUp_show=!1,this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.AllCommitPopUp_show=!1,this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.crruentconfirm="提交","/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path)return void(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0);if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),e.AllCommitPopUp_show=!1;var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,d=this.latitude,u=this.CurrentLocation,h=this.CurrentDistrict,p=this.CurrentCity;switch(a){case"/DeliveryScanXH":case"/PackageDeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/DeliveryOrderPickScan":case"/PackageDeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":case"/PackageReceiptScan":i="40";break;default:i="10"}var m=[];for(var _ in this.count){var g={};g.omsNo=e.omsNo,e.abnormalscan&&(g.abnormalscan="T"),g.labelNo=this.count[_].order,g.linkNode=i,g.scanPerson=s,g.cellphone=o,g.scanTime=this.count[_].time,g.supplierId=n,g.supplierName=r,g.longitude=c,g.latitude=d,g.address=u,g.city=p,g.districict=h,m.push(g)}var b=[];for(var y in this.cacheResponseData){var L={},C=this.cacheResponseData[y];L.omsNo=C.omsNo,L.displayWt=C.displayWt,L.linkNode=i,b.push(L)}for(var S in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[S].order);this.params={params:l()(m),labelNo:l()(this.cleanOrderList)},function(t){return t=It(t),v.a.post(Nt+"commitScanContainer.do",{params:t})}(this.params).then(function(a){e.$emit("isLoading_",!1),"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),t.abnormalscan?a("div",{staticClass:"commit-button-box commitAbnormal"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button-box"},[t.abnormalscan?t._e():a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var da=a("VU/8")(la,ca,!1,function(t){a("cGYK")},"data-v-1e84613a",null).exports,ua={name:"PackageDeliveryScan",components:{"v-header":bt,"v-scan":M,"v-footer":da,"v-confirm":ft},watch:{},data:function(){return{test:"",activeName:"first",headerName:"提货扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,scanResult:{issuePartyAddr:"--",receivePartyAddr1:"--",orderQty:"--",orderWt:"--",displayWt:"--"},propScanData:"",responseData:{},switchScan:!0,testData:{},cacheResponseData:[],omsNo:"",transportLinks:"",scanNumber:0}},mounted:function(){this.linkNode="10"},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks)},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="10",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refXH.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length){for(var s in a.cacheResponseData)-1!==a.cacheResponseData[s].allOrder.indexOf(t)&&(a.scanResult=a.cacheResponseData[s]);e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})}else{var o={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(o,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,wt(t).then(function(t){"1"==t.data.status?(t.data.data&&(t.data.data=JSON.parse(a.decryption(t.data.data))),a.loadingData=!1,a.responseData=t.data.data,a.dealConfirmData(a.propScanData)):301==t.data.status?a.ReturnToLogin():(a.loadingData=!1,a.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,a.$alert(t,"提示",{confirmButtonText:"确定"})})},confirmResult:function(){var t=this;this.dealConfirmData(this.propScanData),this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},confirmResult01:function(){var t=this;this.showSliderData01=!1,this.switchScan=!0,this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var o in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[o].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},ha={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,omsNo:t.omsNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var pa=a("VU/8")(ua,ha,!1,function(t){a("sd2v")},"data-v-78287791",null).exports,va={name:"delivery-scan",components:{"v-header":bt,"v-scan":j,"v-footer":ea,"v-confirm":ft},data:function(){return{activeName:"first",headerName:"装车扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",transportLinks:"",hideBitch:!1,scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){this.linkNode="20"},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.pagetype&&"air"==this.$route.query.pagetype&&(this.headerName="航空出港扫描",this.hideBitch=!0),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:20,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"deleteOrderScanLabel.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",alert(a),t.$router.back(-1)}}).catch(function(e){t.$emit("isLoading",!1),alert("请求失败"),t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="20",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refTransit.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){if(1==this.hideBitch)var i={scanLabel:t,linkNode:this.linkNode};else i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{if(1==e.hideBitch)var s={scanLabel:t,linkNode:e.linkNode};else s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ma={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("中转扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refTransit",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,hideBitch:t.hideBitch,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var fa=a("VU/8")(va,ma,!1,function(t){a("BaWC")},"data-v-9df3134e",null).exports,_a={name:"delivery-scan",components:{"v-header":bt,"v-scan":j,"v-footer":ea,"v-confirm":ft},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"27",switchScan:!0,shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:27,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"deleteOrderScanLabel.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",alert(a),t.$router.back(-1)}}).catch(function(e){t.$emit("isLoading",!1),alert("请求失败"),t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="27",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refDePick.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}),a.loadingData=!1)}).catch(function(t){i.$alert(t,"提示",{confirmButtonText:"确定"}),a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ga={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派提装车扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refDePick",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var ba=a("VU/8")(_a,ga,!1,function(t){a("euiG")},"data-v-08472e82",null).exports,ya={name:"delivery-scan",components:{"v-header":bt,"v-scan":j,"v-footer":ea,"v-confirm":ft},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){this.linkNode="30"},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:30,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"deleteOrderScanLabel.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",alert(a),t.$router.back(-1)}}).catch(function(e){t.$emit("isLoading",!1),alert("请求失败"),t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="30",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refDePick.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)a.$refs.ch.code="",e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){i.$refs.ch.code="",t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}),a.loadingData=!1)}).catch(function(t){i.$alert(t,"提示",{confirmButtonText:"确定"}),a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},La={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派件装车扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refDePick",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ca=a("VU/8")(ya,La,!1,function(t){a("g9s8")},"data-v-c177c440",null).exports,Sa={name:"delivery-scan",components:{"v-header":bt,"v-scan":M,"v-footer":da,"v-confirm":ft},data:function(){return{activeName:"first",headerName:"派件装车扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,omsNo:"",transportLinks:"30"}},mounted:function(){this.linkNode="30"},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="30",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refDePick.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}),a.loadingData=!1)}).catch(function(t){i.$alert(t,"提示",{confirmButtonText:"确定"}),a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},Na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refDePick",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,omsNo:t.omsNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ia=a("VU/8")(Sa,Na,!1,function(t){a("wTQA")},"data-v-b49dd038",null).exports,wa={name:"delivery-scan",components:{"v-scan":j,"v-footer":ea,"v-confirm":ft},data:function(){return{activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"40",switchScan:!0,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",transportLinks:"",deliveryNumber:0,actualQty:0,HasLoading:0,deliveryMethod:"",forwardSupplier:"",forwardSupplierId:"",reference10:"",chargeTypes:"",IN01Flag:"",IN91Flag:"",ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.HasLoading&&(this.HasLoading=this.$route.query.HasLoading),this.$route.query.deliveryMethod&&(this.deliveryMethod=this.$route.query.deliveryMethod),this.$route.query.forwardSupplier&&(this.forwardSupplier=this.$route.query.forwardSupplier),this.$route.query.forwardSupplierId&&(this.forwardSupplierId=this.$route.query.forwardSupplierId),this.$route.query.reference10&&(this.reference10=this.$route.query.reference10),this.$route.query.chargeTypes&&(this.chargeTypes=this.$route.query.chargeTypes),this.$route.query.IN01Flag&&(this.IN01Flag=this.$route.query.IN01Flag),this.$route.query.IN91Flag&&(this.IN91Flag=this.$route.query.IN91Flag),this.$route.query.deliveryNumber&&(this.deliveryNumber=this.$route.query.deliveryNumber,t.deliveryNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:40,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"deleteOrderScanLabel.do",{params:e}).then(function(e){if(t.$emit("isLoading",!1),"1"==e.data.status);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"请求失败",alert(a),t.$router.back(-1)}}).catch(function(e){t.$emit("isLoading",!1),alert("请求失败"),t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refReceipt.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ka={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("签收扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),"ZK"!=t.reference10||"到付现结"!=t.chargeTypes&&"到付"!=t.chargeTypes&&"到付月结"!=t.chargeTypes?t._e():a("div",{staticClass:"LoadImg_head",staticStyle:{color:"red"}},[t._v("请拍摄接收货物的顺丰小哥工牌照片")]),t._v(" "),"ZK"==t.reference10&&"Y"==t.IN01Flag?a("div",{staticClass:"LoadImg_head",staticStyle:{color:"red"}},[t._v("此单需代收货款，请转寄给SF")]):t._e(),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refReceipt",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId,loadingData:t.loadingData,HasLoading:t.HasLoading,deliveryMethod:t.deliveryMethod,forwardSupplier:t.forwardSupplier,forwardSupplierId:t.forwardSupplierId,reference10:t.reference10,chargeTypes:t.chargeTypes,IN91Flag:t.IN91Flag,IN01Flag:t.IN01Flag},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Da=a("VU/8")(wa,ka,!1,function(t){a("82cy")},"data-v-758fc170",null).exports,Ta={name:"delivery-scan",components:{"v-header":bt,"v-scan":M,"v-footer":da,"v-confirm":ft},data:function(){return{activeName:"first",headerName:"签收扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"40",switchScan:!0,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,omsNo:""}},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo)},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refReceipt.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},xa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refReceipt",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,omsNo:t.omsNo,loadingData:t.loadingData},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var $a=a("VU/8")(Ta,xa,!1,function(t){a("gte8")},"data-v-4d2c6a08",null).exports,Pa={name:"AbnormalScan",components:{"v-header":bt,"v-scan":M,"v-footer":ea,"v-confirm":ft},data:function(){return{activeName:"first",headerName:"异常单签收",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",LocateAbnormalScanLabel:"",transportLinks:"",actualQty:0,abnormalscan:!0,AbHasScanNum:0}},mounted:function(){switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":this.linkNode="10";break;case"/TransitScan":this.linkNode="20";break;case"/DeliveryOrderPickScan":this.linkNode="30";break;case"/ReceiptScan":case"/AbnormalScan":this.linkNode="40";break;default:this.linkNode="10"}var t=this;f()(".LoadImg_conentul ul.el-upload-list+div").click(function(e){event.stopPropagation(),t.switchScanFun(!1)})},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.AbHasScanNum&&(this.AbHasScanNum=this.$route.query.AbHasScanNum),this.$route.query.LocateAbnormalScanLabel&&(this.LocateAbnormalScanLabel=this.$route.query.LocateAbnormalScanLabel)},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.$refs.upload_refAbScan.submit()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},goprev:function(){this.LocateAbnormalScanLabel?this.$router.push({name:"ScanQueryOrderInfo",query:{LocateAbnormalScanLabel:this.LocateAbnormalScanLabel}}):this.$router.back(-1)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Wt()(new Ft.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,wt(t).then(function(t){if("1"===t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data))),a.loadingData=!1;var o=t.data.data;for(var n in new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}i.historyLabelNo=i.historyLabelNo.concat(o.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:o.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,o.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},Ba={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box AbnormalScan"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n\t            运单号("+t._s(t.orderList.length)+")\n\t          ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n\t              "+t._s(e.order)+"\n\t              ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n\t              "+t._s(e)+"\n\t            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n\t              "+t._s(e)+"\n\t            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refAbScan",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:4,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,abnormalscan:t.abnormalscan,omsNo:t.omsNo,orderId:t.orderId,AbHasScanNum:t.AbHasScanNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Aa=a("VU/8")(Pa,Ba,!1,function(t){a("i8Kb")},"data-v-7f48863a",null).exports,Oa={name:"Abnormal",components:{"v-scan":M,"v-header":bt},data:function(){return{headerName:"上报异常",responseData:{},OMS:{},aboType:"",typeOptions:[],aboReason:"",reasonOptions:[],localtttOptions:[],aboLink:"",linkOptions:[],aboPer:"",perOptions:[],aboText:"",allData:{},dialogImageUrl:"",dialogVisible:!1,imgUrl:null,imgObj:null,uploadParams:{},imageUrl:"",switchScan:!0,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,shipmentCode:"",omsNo:"",deliveryNoSF:"",linkno:"10",CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",longitude:"",latitude:"",labelList:[],selectedLabelList:[],labelInput:""}},watch:{aboType:function(t,e){if(t!=e){this.aboReason="";for(var a=0;a<this.allData.newAbnormalType.length;a++)this.allData.newAbnormalType[a].abnormalType==t&&(this.reasonOptions=this.allData.newAbnormalType[a].abnormalReason)}}},mounted:function(){this.getAboList(),this.onPlusReady("e");var t=this;f()(".LoadImg_conentul ul.el-upload-list+div").click(function(e){event.stopPropagation(),t.switchScanFun(!1)})},created:function(){if(this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo,this.OMS.omsNo=this.omsNo),this.$route.query.deliveryNoSF?(this.deliveryNoSF=this.$route.query.deliveryNoSF,this.OMS.deliveryNoSF=this.deliveryNoSF):this.OMS.deliveryNoSF="",this.$route.query.linkno&&(this.linkno=this.$route.query.linkno),this.$route.query.labelList){this.labelList=this.$route.query.labelList;for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!1}},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.confirmLabelInput()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},uploadSuccessful:function(t,e,a){1==t.status?this.uploadSuccessNum++:this.uploadFailNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败"):this.finishUpload("图片上传失败"):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},finishUpload:function(t){var e=this;e.$emit("isLoading",!1);var a="";t&&(a=t?","+t:""),this.$alert("异常上报成功"+a,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},commitAbo:function(){var t=this;if(t.selectedLabelList.length){this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="异常",this.uploadParams.labelNo=this.linkno,this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,t.uploadTotalNum=f()("div.uploadImg ul>li").length,"40"==this.linkno&&(this.linkno="30");var e={omsNo:this.OMS.omsNo,deliveryNoSF:this.OMS.deliveryNoSF,transporterId:this.$store.state.userInfo.orgnizationId,transporterName:this.$store.state.userInfo.orgnizationName,sponsorName:this.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone,abnormalType:this.aboType,abnormalReason:this.aboReason,abnormalLink:this.linkno,responsibleParty:this.aboPer,abnormalExplain:this.aboText,city:t.CurrentCity,labelNoArr:t.selectedLabelList};t.$emit("isLoading",!0,"拼命加载中"),e=t.PublicEncryption(e),v.a.post(t.HOST+"reportAbnormalNew.do",{params:e}).then(function(e){if("1"==e.data.status)e.data.data&&(e.data.data=JSON.parse(t.decryption(e.data.data))),t.uploadTotalNum>0?(t.uploadParams.abnormalId=e.data.data?e.data.data:0,t.$refs.uploadAb.submit()):t.finishUpload();else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading",!1),a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})}else t.$alert("请选择运单号","提示",{confirmButtonText:"确定"})},selectLabel:function(t){var e=this;e.labelList[t].ifSelect=!e.labelList[t].ifSelect;var a=f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont");a.hasClass("icon-xuanzhong")?(e.selectedLabelList=e.selectedLabelList.filter(function(a){return a!==e.labelList[t].productNo}),a.removeClass("icon-xuanzhong").addClass("icon-weixuanzhong")):a.hasClass("icon-weixuanzhong")&&(e.selectedLabelList.push(e.labelList[t].productNo),a.removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"))},deleteLabel:function(t){for(var e=0;e<this.labelList.length;e++)if(this.labelList[e].productNo==this.selectedLabelList[t]){this.labelList[e].ifSelect=!1,this.selectedLabelList.splice(t,1),f()(".SingleLatitudeBox_box>div").eq(e).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");break}},confirmLabelInput:function(){var t=this;t.labelList.forEach(function(e,a){t.labelInput==e.productNo&&(e.ifSelect=!0,f()(".SingleLatitudeBox_box>div").eq(a).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"),t.selectedLabelList=t.selectedLabelList.filter(function(t){return t!==e.productNo}),t.selectedLabelList.push(e.productNo))})},checkAllLabel:function(){this.selectedLabelList=[];for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!0,this.selectedLabelList[t]=this.labelList[t].productNo,f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong")},UnselectAllLabel:function(){for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!1,f()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");this.selectedLabelList=[]},getAboList:function(){var t=this,e=this;Tt().then(function(a){if(1==a.data.status){a.data.data&&(a.data.data=e.decryption(a.data.data)),t.typeOptions=[],t.reasonOptions=[],t.linkOptions=[],t.perOptions=[];var i=JSON.parse(a.data.data);for(var s in t.allData=i,i.abnormalLink){var o=i.abnormalLink[s],n={};n.value=o,n.label=o,t.linkOptions.push(n)}for(var r in t.typeOptions=i.newAbnormalType,i.responsibleParty){var l=i.responsibleParty[r],c={};c.value=l,c.label=l,t.perOptions.push(c)}}else 301==a.data.status&&e.ReturnToLogin()})},scanData:function(t){var e=this,a={scanLabel:t,shipmentCode:e.shipmentCode};this.httpRequest("verificationOmsNo.do",a,function(t){e.OMS={omsNo:t.data.omsNo,deliveryNoSF:t.data.deliveryNoSF}})},goPrev:function(){this.$router.go(-1)},switchScanFun:function(t){this.switchScan=!!t},uploadOnChange:function(t){this.switchScanFun(!0)}}},Fa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body Abnormal"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("异常上报")])]),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),a("div",{staticClass:"common-box"},[t.omsNo?t._e():a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"form-content"},[a("div",{staticClass:"form-item"},[a("label",[t._v("订单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.omsNo,callback:function(e){t.$set(t.OMS,"omsNo",e)},expression:"OMS.omsNo"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("当前城市")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.CurrentCity,callback:function(e){t.CurrentCity=e},expression:"CurrentCity"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常类型")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常类型选择"},model:{value:t.aboType,callback:function(e){t.aboType=e},expression:"aboType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.abnormalType,attrs:{label:t.abnormalType,value:t.abnormalType}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常原因")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常原因选择"},model:{value:t.aboReason,callback:function(e){t.aboReason=e},expression:"aboReason"}},t._l(t.reasonOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常描述")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.aboText,callback:function(e){t.aboText=e},expression:"aboText"}})],1)]),t._v(" "),a("div",{staticClass:"SingleLatitude"},[a("div",{staticClass:"SingleLatitudeScan"},[a("div",[a("span",{staticClass:"iconfont icon-saomiao",on:{click:function(e){return t.androidScan("labelInput")}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelInput,expression:"labelInput"}],attrs:{type:"text",placeholder:"输入要异常上报的运单"},domProps:{value:t.labelInput},on:{input:function(e){e.target.composing||(t.labelInput=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.confirmLabelInput}},[t._v("确定")])])]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox"},[a("div",{staticClass:"SingleLatitudeBox_head"},[t._v("请选择要异常上报的运单")]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_box"},t._l(t.labelList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.selectLabel(i)}}},[a("span",[t._v(t._s(e.productNo))]),t._v(" "),a("span",{staticClass:"iconfont icon-weixuanzhong"})])}),0),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_btn"},[a("span",{staticClass:"checkAll",on:{click:t.checkAllLabel}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"UnselectAll",on:{click:t.UnselectAllLabel}},[t._v("全不选")])]),t._v(" "),t.selectedLabelList.length?a("div",{staticClass:"SelectedWaybill"},[a("div",{staticClass:"SelectedWaybill_head"},[t._v("已选择的运单")]),t._v(" "),a("div",{staticClass:"SelectedWaybill_box"},t._l(t.selectedLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[a("span",[t._v(t._s(e))]),t._v(" "),a("span",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.deleteLabel(i)}}})])}),0)]):t._e()])]),t._v(" "),a("div",{staticClass:"uploadImg"},[t._m(0),t._v(" "),a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"uploadAb",attrs:{action:t.HOST+"abnormalUploadImage.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:3,multiple:!0,"on-error":t.uploadErr,"show-file-list":!0,"on-success":t.uploadSuccessful,"before-upload":t.beforeUpload,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"footer-commit"},[a("div",{staticClass:"commit",on:{click:t.commitAbo}},[t._v("提交")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("上传图片"),e("span",[this._v("(限3张)")]),this._v("：")])}]};var Ua=a("VU/8")(Oa,Fa,!1,function(t){a("VQ3y")},"data-v-ba3bf3be",null).exports,Wa={data:function(){return{headerText:"途中轨迹",shipmentID:"",pointsArray:[],lngLats:[],lineArr:[],map_g:"",myInterval:"",myInterval_onComplete:"",myInterval_onError:"",geoShopList:[],geoTotalQty:0,geoOkQty:0,ifTips:!1,tips_Msg:""}},mounted:function(){var t=this;if(this.$route.query.head&&(this.headerText=this.$route.query.head),this.$route.query.shipmentID){this.shipmentID=this.$route.query.shipmentID;var e=new AMap.Map("container",{resizeEnable:!0});t.map_g=e}else t.$alert("运单id为空","提示",{confirmButtonText:"确定",callback:function(){t.$router.back(-1)}})},created:function(){},methods:{}},Ra={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TrackOnTheWay"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v(t._s(t.headerText))])]),t._v(" "),a("div",{staticClass:"container",attrs:{id:"container"}}),t._v(" "),a("div",{attrs:{id:"panel"}}),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips_text"},[a("div",{staticClass:"tips_content"},[a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ma=a("VU/8")(Wa,Ra,!1,function(t){a("Zj4f")},"data-v-14cd255a",null).exports,Ea={name:"MassTransfer",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",omsNo:"",deliveryId:"",CurrentLocation:"",CurrentDistrict:"",CurrentCity:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.onPlusReady("isLoading_"),this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.driverName=this.$store.state.userInfo.userName,this.uploadParams.city=this.CurrentCity,this.uploadParams.address=this.CurrentLocation,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.omsNo=this.omsNo,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.fileType="回单",this.uploadParams.labelNo="40",this.uploadParams.returnFlag="T"},methods:{SetCurrAddress:function(t){this.ReceivingLatitud(t)},submit:function(){f()(".Upload>div.uploadImg:eq(0) ul>li").length?(this.uploadTotalNum=f()("div.uploadImg ul>li").length,this.$refs.upload_refMass.submit()):this.$alert("请上传图片","提示",{confirmButtonText:"确定"})},finishUpload:function(t){t=t?","+t:"";var e=this;this.$alert("签单上传成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Ha={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MassTransfer"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("签单上传")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.omsNo))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refMass",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var qa=a("VU/8")(Ea,Ha,!1,function(t){a("B9+k")},"data-v-abf03618",null).exports,Qa={name:"CollectCustomerNum",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],tips_Msg:"",ifTips:!1,printData:[],loadingData:!1,OrderInfo_show:!1,scanLabel:"",omsNo:""}},components:{"v-scan":M},mounted:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo)},created:function(){},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:this.omsNo,clientOrderNo:t};e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),v.a.post(e.HOST+"saveClientOrderNo.do",{params:a}).then(function(t){if(e.$emit("isLoading",!1),1==t.data.status)e.ifTips=!0,e.tips_Msg="操作成功",setTimeout(function(){e.ifTips=!1,e.$router.back(-1)},1500);else if(301==t.data.status)e.ReturnToLogin();else{var a;a=t.data.Msg?t.data.Msg:"请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},za={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CollectCustomerNum"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("采集客户单号")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{textre:"手动输入客户单号",loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])])])]):t._e()])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Va=a("VU/8")(Qa,za,!1,function(t){a("rVXd")},"data-v-00c2aad4",null).exports,Ja={name:"UnloadDelivery",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,omsNo:"",orderId:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,Package:"",contnrCode:""}},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.Package&&(this.Package=this.$route.query.Package,this.$route.query.contnrCode&&(this.contnrCode=this.$route.query.contnrCode)),this.onPlusReady("isLoading_"),this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.driverName=this.$store.state.userInfo.userName,this.uploadParams.orgnizationName=this.$store.state.userInfo.orgnizationName,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="卸车扫描",this.uploadParams.labelNo="10"},methods:{submit:function(){var t=this;t.uploadTotalNum=f()("div.uploadImg ul>li").length,t.$emit("isLoading",!0,"拼命加载中");var e,a={linkNode:"10",supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,unloadPlace:t.CurrentLocation,district:t.CurrentDistrict,city:t.CurrentCity,longitude:t.longitude,latitude:t.latitude,unloadPerson:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};t.Package&&"Package"==t.Package?(a.labelNo=t.contnrCode,e="savePickupDataContainer.do"):(a.omsNo=t.omsNo,a.orderId=t.orderId,e="savePickupData.do"),a=t.PublicEncryption(a),v.a.post(t.HOST+e,{params:a}).then(function(e){var a;1==e.data.status?t.uploadTotalNum>0?t.$refs.upload_refMass.submit():301==e.data.status?t.ReturnToLogin():(t.$emit("isLoading",!1),t.ifTips=!0,t.tips_Msg=e.data.Msg,setTimeout(function(){t.ifTips=!1,t.$router.back(-1)},1500)):(t.$emit("isLoading",!1),a=e.data.Msg?e.data.Msg:"请求失败",t.$alert(a,"提示",{confirmButtonText:"确定"}))}).catch(function(e){t.$emit("isLoading",!1),t.$alert("请求失败","提示",{confirmButtonText:"确定"})})},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){t=t?","+t:"";var e=this;e.$emit("isLoading",!1),this.$alert("卸货交付成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading_",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Xa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"UnloadDelivery"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("卸车交付")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.Package&&"Package"==t.Package,expression:'Package && Package == "Package"'}]},[a("span",[t._v("包号：")]),a("span",[t._v(t._s(t.contnrCode))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.Package,expression:"!Package"}]},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.omsNo))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refMass",attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ja=a("VU/8")(Ja,Xa,!1,function(t){a("M47N")},"data-v-32bba35c",null).exports,Ya={name:"commit-footer",components:{"v-confirm":ft},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","hideBitch","transportLinks","actualQty","orderId","AbHasScanNum","yiScanNumber","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this;this.$route.path;t.$emit("isLoading_",!0,"拼命加载中");var e={omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"20",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,appFlightDepcode:t.$store.state.userInfo.aiportCode};e=t.PublicEncryption(e),v.a.post(t.HOST+"aviationLoadingCommitScanBatch.do",{params:e}).then(function(e){if("1"==e.data.status)f()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.$emit("isLoading_",!1),t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(-1)}}));else if(301==e.data.status)t.ReturnToLogin();else{var a;t.$emit("isLoading_",!1),a=e.data.Msg?e.data.Msg:"批量提交失败",t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum-this.BatchOrderLastNum?this.$alert("批量提交数量不能超过剩余未扫描总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中");this.$route.path;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=[];for(var p in this.count){var m={};m.omsNo=this.count[p].omsno,m.labelNo=this.count[p].order,m.linkNode="20",m.scanPerson=a,m.cellphone=i,m.scanTime=this.count[p].time,m.supplierId=s,m.supplierName=o,m.longitude=n,m.latitude=r,m.address=c,m.city=u,m.districict=d,h.push(m)}this.params={params:l()(h),appFlightDepcode:e.$store.state.userInfo.aiportCode},function(t){return t=It(t),v.a.post(Nt+"aviationLoadingCommitScan.do",{params:t})}(this.params).then(function(a){"1"==a.data.status?(f()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"})),t.$emit("reflash",!0),t.$emit("scanFun",!0)):301==a.data.status?e.ReturnToLogin():(e.$emit("isLoading_",!1),e.$alert(a.data.Msg,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))}).catch(function(t){e.$emit("isLoading_",!1)})}}},Ga={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n         共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n       ")]),t._v(" "),a("div",{staticClass:"top"},[t._v("\n        已扫描数量:"),a("i",[t._v(" "+t._s(t.historyLabelNo.length))]),t._v("件\n       ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n         当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n       ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<1||1==t.orderListScanned.length&&"package"!=t.orderListScanned[0].flag&&"cheBiao"!=t.orderListScanned[0].flag?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("上次已扫描数量：")]),a("span",[t._v(t._s(t.BatchOrderLastNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var Ka={name:"AviationAllTransitScan",components:{"v-header":bt,"v-scan":j,"v-footer":a("VU/8")(Ya,Ga,!1,function(t){a("zz2/")},"data-v-12b6e509",null).exports,"v-confirm":ft},data:function(){return{activeName:"first",headerName:"航空出港扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,vfooterflag:!0}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){this.uploadTotalNum=f()("div.uploadImg ul>li").length;for(var t=0;t<this.orderListScanned.length;t++)this.uploadParamsList[t]={cellphone:this.$store.state.userInfo.cellphone,orgnizationName:this.$store.state.userInfo.orgnizationName,omsNo:this.orderListScanned[t].order,fileType:"装车扫描",labelNo:"20"},this.$refs.upload_refXH[t].submit()},closeScan:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},CloseScanBox:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var l,c=At()(a);!(o=(l=c.next()).done);o=!0){var d=l.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new s.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new s.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new s.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,o=this;this.loadingData=!0,function(t){return t=It(t),v.a.post(Nt+"queryAviationOmsNoSelectInfo.do",{params:t})}(t).then(function(t){if("1"==t.data.status){t.data.data&&(t.data.data=JSON.parse(i.decryption(t.data.data)));var n=t.data.data;for(var r in t.data.data.notScanned&&(o.notScanned=o.notScanned.concat(t.data.data.notScanned)),t.data.data.scanned&&(o.scanned=o.scanned.concat(t.data.data.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new s.a(function(t){function e(t){return Wt()(new Ft.a(t))}n.scanned&&n.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(n.scanned[0].waybillNumber)),n.notScanned&&n.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(n.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[r].order)}else 301==t.data.status?i.ReturnToLogin():(a.loadingData=!1,i.$alert(t.data.Msg,"提示",{confirmButtonText:"确定"}))}).catch(function(t){a.loadingData=!1,i.$alert(t,"提示",{confirmButtonText:"确定"})})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)}}},Za={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationAllTransitScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("航空出港扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"cheBiao"==e.flag?"车标号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_conentul"},[a("el-upload",{ref:"upload_refXH",refInFor:!0,attrs:{action:t.HOST+"abnormalUploadImage.do",limit:6,multiple:!0,data:t.uploadParamsList[i],"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-change":t.uploadOnChange}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.vfooterflag,expression:"vfooterflag"}],attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var ti=a("VU/8")(Ka,Za,!1,function(t){a("fdDa")},"data-v-26c5e857",null).exports,ei=a("MJLE"),ai=a.n(ei),ii=(a("TwlK"),{name:"OrderInfo_template",props:{_orderInfo:{type:Array,default:function(){return[]}},packageList:{type:Array,default:function(){return[]}},shipmentID:0,shipStatus:"",selectAddr:!1,historyList:!1,LinkStatus:"",receivingStatus:"",daoDaStatus:""},data:function(){return{tips_Msg:"",ifTips:!1,qrcodePayment_show:!1,wxqrcodePayment_show:!1,selectPaymentmeng:!1,queryPaySetInterval:"",queryPayMsg:"",payOmsNo:""}},components:{QRCode:ai.a},mounted:function(){},created:function(){},beforeDestroy:function(){clearInterval(this.queryPaySetInterval)},methods:{PrintExpress:function(t){var e=this;if("CP"==e._orderInfo[t].reference10){var a={omsNo:[e._orderInfo[t].omsNo]};e.httpRequest("getConfirmFlagFromOrder.do",a,function(a){if(a.data&&"Y"==a.data){var i={omsNo:e._orderInfo[t].omsNo};e.httpRequest("surfacePrint.do",i,function(t){for(var e in t.data[0].bsOrderWt&&(t.data[0].bsOrderWt=parseFloat(t.data[0].bsOrderWt/1e3)),t.data[0])0==t.data[0][e]&&(t.data[0][e]="-"),null==t.data[0][e]&&(t.data[0][e]="");for(var a in t.data[1])null==t.data[1][a]&&(t.data[1][a]="");var i=l()(t.data);try{CallAndroidOrIOS.callAndroid("打印",i)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:i})}catch(t){}},"isLoading_")}else a.data&&"N"==a.data&&e.$alert("请先在app首页揽收扫码打印页面确定件数重量，再打印面单","提示",{confirmButtonText:"确定",callback:function(t){}})})}else{var i={omsNo:e._orderInfo[t].omsNo};e.httpRequest("surfacePrint.do",i,function(t){for(var e in t.data[0].bsOrderWt&&(t.data[0].bsOrderWt=parseFloat(t.data[0].bsOrderWt/1e3)),t.data[0])0==t.data[0][e]&&(t.data[0][e]="-");var a=l()(t.data);try{CallAndroidOrIOS.callAndroid("打印",a)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:a})}catch(t){}},"isLoading_")}},toPackageDeliveryScan:function(t){event.stopPropagation();this.$router.push({name:"PackageDeliveryScan",query:{omsNo:this.packageList[t].contnrCode,transportLinks:this.LinkStatus}})},toDeliveryScanXH:function(t){event.stopPropagation();var e=this;if("CP"==e._orderInfo[t].reference10){var a={omsNo:[e._orderInfo[t].omsNo]};e.httpRequest("getConfirmFlagFromOrder.do",a,function(a){a.data&&"Y"==a.data?e.$router.push({name:"DeliveryScanXH",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,transportLinks:e.LinkStatus,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}}):a.data&&"N"==a.data&&e.$alert("请先在app首页揽收扫码打印页面确定件数重量，再提货扫描","提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$router.push({name:"DeliveryScanXH",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,transportLinks:e.LinkStatus,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}})},CollectCustomerNum:function(t){event.stopPropagation();this.$router.push({name:"CollectCustomerNum",query:{omsNo:this._orderInfo[t].omsNo}})},refreshBtn:function(){this.$parent.loadData()},qrcodeClose:function(){clearInterval(this.queryPaySetInterval),this.qrcodePayment_show=!1,this.wxqrcodePayment_show=!1,this.$parent.loadData()},selectPayClose:function(){this.selectPaymentmeng=!1},toSelectQrCodePay:function(t){this.payOmsNo=this._orderInfo[t].omsNo,this.selectPaymentmeng=!0},toWXQrCodePayment:function(){var t=this;this.selectPaymentmeng=!1;var e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};this.httpRequest("getFeeWithSecondCodeFromWeiXin.do",e,function(e){t.wxqrcodePayment_show=!0,t.$nextTick(function(){t.qrcode(e.Msg)}),clearInterval(t.queryPaySetInterval),t.queryPaySetInterval=setInterval(t.queryPayResults,1500)},"isLoading_")},toQrCodePayment:function(){var t=this;this.selectPaymentmeng=!1;var e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};this.httpRequest("getFeeWithSecondCodeFromZhiFuBao.do",e,function(e){t.qrcodePayment_show=!0,t.$nextTick(function(){t.qrcode(e.Msg)}),clearInterval(t.queryPaySetInterval),t.queryPaySetInterval=setInterval(t.queryPayResults,1500)},"isLoading_")},queryPayResults:function(){var t=this,e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};e=t.PublicEncryption(e),v.a.post(t.HOST+"getFeeStatusWithOrderSF.do",{params:e}).then(function(e){if("1"==e.data.status)clearInterval(t.queryPaySetInterval),t.queryPayMsg=e.data.Msg;else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"提交失败",alert(a)}}).catch(function(e){clearInterval(t.queryPaySetInterval),t.$alert("查询支付结果失败","提示",{confirmButtonText:"确定"})})},qrcode:function(t){new ai.a("qrcode",{width:200,height:200,text:t})},submitOrders:function(t,e,a){event.stopPropagation();var i,s=this;i=a&&"package"==a?"确认要提交"+e+"吗？ 包号："+s.packageList[t].contnrCode:"确认要提交"+e+"吗？ 订单号："+s._orderInfo[t].omsNo,this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$emit("isLoading_",!0,"拼命加载中");var i="";"Link_PickUp"==s.LinkStatus&&(i="10"),"Link_Transit"==s.LinkStatus&&(i="20"),"Link_AirportPickUp"==s.LinkStatus&&(i="27"),a&&"package"==a?("Link_ToSend"==s.LinkStatus&&"WEI"==s.packageList[t].updateStatus&&(i="30"),"Link_ToSend"==s.LinkStatus&&"YI"==s.packageList[t].updateStatus&&(i="40")):("Link_ToSend"==s.LinkStatus&&"WEI"==s._orderInfo[t].loadingStatus&&(i="30"),"Link_ToSend"==s.LinkStatus&&"YI"==s._orderInfo[t].loadingStatus&&(i="40"));var o={transportLinks:i,driverName:s.$store.state.userInfo.userName,cellphone:s.$store.state.userInfo.cellphone};a&&"package"==a?(o.flag="package",o.labelNo=s.packageList[t].contnrCode):(o.deliveryId=s._orderInfo[t].deliveryId,o.deliveryMethod=s._orderInfo[t].deliveryMethod,o.forwardSupplier=s._orderInfo[t].forwardSupplier,o.forwardSupplierId=s._orderInfo[t].forwardSupplierId),v.a.post(s.HOST+"updateDeliveryScanNumber.do",{params:l()(o)}).then(function(t){var a;(s.$emit("isLoading_",!1),"1"==t.data.status)?(s.ifTips=!0,s.tips_Msg="提交"+e+"成功",setTimeout(function(){s.ifTips=!1,s.$parent.loadData()},1500)):(a=t.data.Msg?t.data.Msg:"提交失败",alert(a))}).catch(function(t){s.$emit("isLoading_",!1),alert("提交失败")})}).catch(function(){})},toPackageDetail:function(t){this.$router.push({name:"PackageDetail",query:{contnrCode:this.packageList[t].contnrCode}})},UnloadDelivery:function(t,e){event.stopPropagation();e&&"Package"==e?this.$router.push({name:"UnloadDelivery",query:{contnrCode:this.packageList[t].contnrCode,Package:"Package"}}):this.$router.push({name:"UnloadDelivery",query:{omsNo:this._orderInfo[t].omsNo,orderId:this._orderInfo[t].orderId}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toPackageDeliveryOrderPickScan:function(t){event.stopPropagation();this.$router.push({name:"PackageDeliveryOrderPickScan",query:{omsNo:this.packageList[t].contnrCode}})},toAirportPickUpScan:function(t){event.stopPropagation();this.$router.push({name:"AirportPickUpScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toDeliveryOrderPickScan:function(t){event.stopPropagation();var e=this;"ZK"!=e._orderInfo[t].reference10||"到付现结"!=e._orderInfo[t].chargeTypes&&"到付"!=e._orderInfo[t].chargeTypes&&"到付月结"!=e._orderInfo[t].chargeTypes?e.$router.push({name:"DeliveryOrderPickScan",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}}):e.$alert("到付件需转送大网派送","提示",{confirmButtonText:"确定",callback:function(){e.$router.push({name:"DeliveryOrderPickScan",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}})}})},toAbnormal:function(t,e){event.stopPropagation();var a;"Link_PickUp"==this.LinkStatus?a="10":"Link_Transit"==this.LinkStatus?a="20":"Link_AirportPickUp"==this.LinkStatus?a="27":"Link_ToSend"==this.LinkStatus&&(a="WEI"==e?"30":"40"),this.$router.push({name:"Abnormal",query:{omsNo:this._orderInfo[t].omsNo,deliveryNoSF:this._orderInfo[t].clientOrderNo,linkno:a,labelList:this._orderInfo[t].deliveryDetailList}})},toReceiptScan:function(t){event.stopPropagation();this.$router.push({name:"ReceiptScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,deliveryNumber:this._orderInfo[t].deliveryNumber,actualQty:this._orderInfo[t].actualQty,HasLoading:this._orderInfo[t].scanNumber,returnBillFlag:this._orderInfo[t].returnBillFlag,deliveryMethod:this._orderInfo[t].deliveryMethod,forwardSupplier:this._orderInfo[t].forwardSupplier,forwardSupplierId:this._orderInfo[t].forwardSupplierId,reference10:this._orderInfo[t].reference10,chargeTypes:this._orderInfo[t].chargeTypes,IN91Flag:this._orderInfo[t].IN91Flag,IN01Flag:this._orderInfo[t].IN01Flag}})},toPackageReceiptScan:function(t){event.stopPropagation();this.$router.push({name:"PackageReceiptScan",query:{omsNo:this.packageList[t].contnrCode}})},toMassTransfer:function(t){event.stopPropagation();this.$router.push({name:"MassTransfer",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId}})},detail_takaUp:function(t){event.stopPropagation();var e=f()(".goodsInfoOrder").eq(t).find(".TakeUp").find("span"),a=f()(".goodsInfoOrder").eq(t).find(".TakeUp").find("i");"查看货物信息"==e.html()?(f()(".goodsInfoOrder").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(f()(".goodsInfoOrder").eq(t).find(".goodsContent").hide(),e.html("查看货物信息"),a.css("transform","rotate(0deg)"))},_ewm:function(t){this.$router.push({name:"QRCode",query:{omsNo:t}})},onCopy:function(){event.stopPropagation();var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}}),si={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"OrderInfo_template"},[i("div",{staticClass:"orderHead"},[t._v("订单信息")]),t._v(" "),t._l(t.packageList,function(e,a){return i("div",{key:a+"w",staticClass:"goodsInfo",attrs:{id:a},on:{click:function(e){return t.toPackageDetail(a)}}},[i("div",{staticClass:"goodsHead"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("包号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packageItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.contnrCode)+"\n    \t\t  ")]),t._v(" "),i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packageItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),i("div",[i("span",[t._v("计划发件时间：")]),t._v(" "),i("span",[t._v(t._s(e.requiredIssueDte))])]),t._v(" "),i("div",[i("div",[i("span",[t._v("件数：")]),t._v(" "),i("span",[t._v(t._s(e.actualQty))])]),t._v(" "),i("div",[i("span",[t._v("重量：")]),t._v(" "),i("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus?i("div",[i("span",[t._v("航班号：")]),t._v(" "),i("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("起飞机场：")]),t._v(" "),i("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("扫描状态：")]),t._v(" "),i("span",[t._v(t._s("YI"==e.scanStatus?"已扫描":"未扫描"))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("div",[i("span",[t._v("扫描状态：")]),t._v(" "),i("span",[t._v(t._s("YI"==e.scanStatus?"装车已扫描":"装车未扫描"))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus?i("div",[i("span",[t._v("状态：")]),t._v(" "),"YI"!=e.updateStatus40?i("span",[t._v(t._s("YI"==e.scanStatus40?"签收已扫描":"签收未扫描"))]):i("span",[t._v("已签收")])]):t._e()]),t._v(" "),t.historyList?t._e():i("div",{staticClass:"_btn"},["Link_PickUp"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageDeliveryScan(a)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toTransitScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageDeliveryOrderPickScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.updateStatus40&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageReceiptScan(a)}}},[t._v("签收扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.updateStatus40&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"签收","package")}}},[t._v("提交签收")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车","package")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_PickUp"!=t.LinkStatus&&"Link_Transit"!=t.LinkStatus||"WEI"!=e.updateStatus?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"订单","package")}}},[t._v("提交订单")]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.unloadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.UnloadDelivery(a,"Package")}}},[t._v("卸车交付")]):t._e()])])}),t._v(" "),t._l(t._orderInfo,function(e,a){return i("div",{key:a,staticClass:"goodsInfo goodsInfoOrder",attrs:{id:a}},[i("div",{staticClass:"goodsHead"},["Link_PickUp"==t.LinkStatus?i("span",{staticClass:"iconfont icon-dayin KeyInfoGroup",on:{click:function(e){return t.PrintExpress(a)}}},[i("span",[t._v("打印")])]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"Y"!=e.IN01Flag&&"T"!=e.returnBillFlag?t._e():i("div",{staticClass:"KeyInfoGroup"},["T"==e.returnBillFlag?i("div",[i("span",[t._v("签回单")])]):t._e(),t._v(" "),"Y"==e.IN01Flag?i("div",[i("span",[t._v("代收货款")])]):t._e()]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"XY"==e.IN91Flag?i("div",{staticClass:"KeyInfoGroup"},[t._m(1,!0)]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?i("div",{staticClass:"KeyInfoGroup"},["到付现结"==e.chargeTypes||"到付"==e.chargeTypes||"到付月结"==e.chargeTypes?i("div",[i("span",[t._v(t._s(e.chargeTypesOld))])]):t._e()]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes?i("div",{staticClass:"KeyInfoGroup"},[t._m(2,!0)]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"Y"==e.IN01Flag&&"ZK"==e.reference10?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("此单需代收货款，请转寄给SF")])]):t._e(),t._v(" "),"WEI"==e.loadingStatus&&e.scanNumber<e.actualQty&&e.scanNumber>0?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("装车未扫完")])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&e.deliveryNumber<e.actualQty&&e.deliveryNumber>0?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("签收未扫完")])]):t._e(),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("订单号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n\t\t\t\t  ")]),t._v(" "),i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("SF运单号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n          ")]),t._v(" "),e.clientOrderNo?i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),i("div",{staticClass:"orderContact"},[i("span",[t._v("卸货联系人：")]),t._v(" "),i("span",[t._v(t._s(e.receivePartyContactName)+"    "+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?i("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),i("div",{staticClass:"PartyAddr"},[i("span",[t._v("卸货地址：")]),t._v(" "),i("span",[t._v(t._s(e.receivePartyAddr1))])]),t._v(" "),i("div",[i("span",[t._v("装货联系人：")]),t._v(" "),i("span",[t._v(t._s(e.issuePartyContact)+"    "+t._s(e.issuePartyTel)+"    ")]),t._v(" "),e.issuePartyTel?i("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),i("div",{staticClass:"PartyAddr"},[i("span",[t._v("装货地址：")]),t._v(" "),i("span",[t._v(t._s(e.issuePartyAddr))])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_Transit"==t.LinkStatus?i("div",[i("span",[t._v("计划发件时间：")]),t._v(" "),i("span",[t._v(t._s(e.requiredIssueDte))])]):t._e(),t._v(" "),i("div",[i("div",[i("span",[t._v("件数：")]),t._v(" "),i("span",[t._v(t._s(e.actualQty))])]),t._v(" "),i("div",[i("span",[t._v("重量：")]),t._v(" "),i("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("航班号：")]),t._v(" "),i("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("主单号：")]),t._v(" "),i("span",[t._v(t._s(e.aviationMasterNumber))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("起飞机场：")]),t._v(" "),i("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("实际起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.actualDepartureTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划落地时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedLandingTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("落地机场：")]),t._v(" "),i("span",[t._v(t._s(e.arriveAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?i("div",[i("span",[t._v("期望到达时间：")]),t._v(" "),i("span",[t._v(t._s(e.requestedDeliveryDte))])]):t._e(),t._v(" "),e.deliveryMethod&&"Link_ToSend"==t.LinkStatus?i("div",[i("div",[i("span",[t._v("派件方式：")]),t._v(" "),i("span",[t._v(t._s(e.deliveryMethod))])]),t._v(" "),e.forwardSupplier&&"转寄"==e.deliveryMethod?i("div",[i("span",[t._v("转寄承应商：")]),t._v(" "),i("span",[t._v(t._s(e.forwardSupplier))])]):t._e()]):t._e(),t._v(" "),e.valuationMoney?i("div",[i("span",[t._v("保价金额：")]),i("span",[t._v(t._s(e.valuationMoney)+"  元")])]):t._e(),t._v(" "),"WEI"==e.loadingStatus&&e.scanNumber?i("div",[i("span",[t._v("已扫描：")]),i("span",[t._v(t._s(e.scanNumber)+"  件")])]):t._e(),t._v(" "),i("div",["Link_ToSend"!=t.LinkStatus&&"Link_AirportPickUp"!=t.LinkStatus||"YI"!=e.loadingStatus?t._e():i("div",[i("span",[t._v("已装车：")]),i("span",[t._v(t._s(e.scanNumber)+"  件")])]),t._v(" "),"YI"==e.loadingStatus&&"WEI"==e.signStatus&&e.deliveryNumber?i("div",[i("span",[t._v("已扫描：")]),i("span",[t._v(t._s(e.deliveryNumber)+"  件")])]):t._e(),t._v(" "),"YI"==e.loadingStatus&&"YI"==e.signStatus?i("div",[i("span",[t._v("已签收：")]),i("span",[t._v(t._s(e.deliveryNumber)+"  件")])]):t._e()]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes&&"ZK"!=e.reference10?i("div",[i("span",[t._v("支付状态：")]),i("span",{style:{color:"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?"red":"green"}},[t._v(t._s(e.payeeStatus))]),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:t.refreshBtn}},[t._v("刷新支付状态")]):t._e(),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:function(e){return t.toSelectQrCodePay(a)}}},[t._v("收款二维码")]):t._e()]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"YI"!=e.loadingStatus||"到付现结"!=e.chargeTypes&&"到付"!=e.chargeTypes&&"到付月结"!=e.chargeTypes||"ZK"==e.reference10?t._e():i("div",[i("span",[t._v("支付状态：")]),i("span",{style:{color:"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?"red":"green"}},[t._v(t._s(e.payeeStatus))]),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:t.refreshBtn}},[t._v("刷新支付状态")]):t._e()]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag?i("div",[i("span",[t._v("是否上传回单：")]),i("span",[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.remark,expression:"dataItem.remark"}]},[i("span",[t._v("客户特殊要求："+t._s(e.remark))]),i("span")])]),t._v(" "),t.historyList?t._e():i("div",{staticClass:"_btn"},["Link_PickUp"==t.LinkStatus&&"T"==e.vipshop?i("span",{staticClass:"g_btn",on:{click:function(e){return t.CollectCustomerNum(a)}}},[t._v("采集单号")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toDeliveryScanXH(a)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toTransitScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toAirportPickUpScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toDeliveryOrderPickScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toReceiptScan(a)}}},[t._v("签收扫描")]):t._e(),t._v(" "),i("span",{staticClass:"g_btn",on:{click:function(i){return t.toAbnormal(a,e.loadingStatus)}}},[t._v("异常上报")]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toMassTransfer(a)}}},[t._v("签单上传")]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"YI"!=e.loadingStatus||"到付现结"!=e.chargeTypes&&"到付"!=e.chargeTypes&&"到付月结"!=e.chargeTypes||"未收款"!=e.payeeStatus&&""!=e.payeeStatus&&"待付款"!=e.payeeStatus||"ZK"==e.reference10?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.toSelectQrCodePay(a)}}},[t._v("收款二维码")]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"签收")}}},[t._v("提交签收")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_PickUp"!=t.LinkStatus&&"Link_Transit"!=t.LinkStatus||"WEI"!=e.loadingStatus?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"订单")}}},[t._v("提交订单")]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"YI"==e.loadingStatus&&"0"==e.unloadStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.UnloadDelivery(a)}}},[t._v("卸车交付")]):t._e()]),t._v(" "),i("div",{staticClass:"goodsContent",staticStyle:{display:"none"},on:{click:function(e){return t.detail_takaUp(a)}}},t._l(e.deliveryDetailList,function(e,a){return i("div",{key:a,attrs:{id:a}},[t._v(t._s(e.productNo)+"      "+t._s(e.productName)+"         "+t._s(e.poOrderQty)+t._s(e.poUom))])}),0),t._v(" "),e.deliveryDetailList.length?i("div",{staticClass:"goodsBtn"},[i("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(a)}}},[t._m(3,!0)])]):t._e()])}),t._v(" "),t.ifTips?i("div",{staticClass:"msg_tips msg_tips1"},[i("div",{staticClass:"tips_content"},[i("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),i("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.selectPaymentmeng?i("div",{staticClass:"selectPaymentmeng"},[i("div",{staticClass:"selectPayment"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.selectPayClose}}),t._v(" "),i("div",{staticClass:"selectPaymentimg",on:{click:t.toWXQrCodePayment}},[i("img",{attrs:{src:a("NHJI")}})]),t._v(" "),i("div",{staticClass:"selectPaymentimg",on:{click:t.toQrCodePayment}},[i("img",{staticClass:"zfbimg",attrs:{src:a("Ro8Z")}})]),t._v(" "),i("div",{staticClass:"selectPaymenttext"},[t._v("请选择支付方式")])])]):t._e(),t._v(" "),t.wxqrcodePayment_show?i("div",{staticClass:"qrcodePaymentMeng"},[i("div",{staticClass:"_qrcode"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.qrcodeClose}}),t._v(" "),i("img",{attrs:{src:a("NHJI")}}),t._v(" "),i("div",{staticClass:"qrcodebox"},[i("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})]),t._v(" "),i("div",{staticClass:"payStatus"},[t._v(t._s(t.queryPayMsg))])])]):t._e(),t._v(" "),t.qrcodePayment_show?i("div",{staticClass:"qrcodePaymentMeng"},[i("div",{staticClass:"_qrcode"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.qrcodeClose}}),t._v(" "),i("img",{staticClass:"zfbimg",attrs:{src:a("Ro8Z")}}),t._v(" "),i("div",{staticClass:"qrcodebox"},[i("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})]),t._v(" "),i("div",{staticClass:"payStatus"},[t._v(t._s(t.queryPayMsg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"KeyInfoGroup"},[e("div",[e("span",[this._v("包")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("签单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("寄付现结")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("查看货物信息")]),e("i",{staticClass:"iconfont icon-up",staticStyle:{transform:"rotate(0deg)"}})])}]};var oi=a("VU/8")(ii,si,!1,function(t){a("dO1F")},"data-v-f79d44b2",null).exports,ni={name:"WaybillInfo",data:function(){return{shipmentID:"",shipmentListData:[],orderList:[],shipStatus:"",LinkStatus:"Link_PickUp",receivingStatus:"",daoDaStatus:"",packageList:[]}},components:{OrderInfo_template:oi,WaybillInfo_template:fe},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.shipmentID=this.$store.state.Waybill.WaybillInfo.clickShipmentId,this.loadData()},methods:{goprev:function(){this.$router.push({name:"Waybill",query:{LinkStatus:this.LinkStatus}})},loadData:function(){var t=this,e=null;"Link_PickUp"==t.LinkStatus?e="10":"Link_Transit"==t.LinkStatus?e="20":"Link_AirportPickUp"==t.LinkStatus?e="27":"Link_ToSend"==t.LinkStatus&&(e="30");var a={shipmentId:t.shipmentID,transportLinks:e};this.httpRequest("queryDeliverDetailInfo.do",a,function(a){if(a.data.length){if(a.data[0].length?(t.shipmentListData=a.data[0],t.$store.state.Waybill.WaybillInfo.clickWaybillInfo=a.data[0]):t.shipmentListData=t.$store.state.Waybill.WaybillInfo.clickWaybillInfo,t.shipStatus=t.shipmentListData[0].status,t.receivingStatus=t.shipmentListData[0].receivingStatus,t.daoDaStatus=t.shipmentListData[0].daoDaStatus,t.orderList=a.data[1],t.packageList=a.data[2],t.orderList.length){for(var i=0;i<t.orderList.length;i++)"ZK"!=t.orderList[i].reference10||"到付现结"!=t.orderList[i].chargeTypes&&"到付"!=t.orderList[i].chargeTypes&&"到付月结"!=t.orderList[i].chargeTypes||(t.orderList[i].deliveryMethod="转寄"),"ZK"==t.orderList[i].reference10&&"Y"==t.orderList[i].IN01Flag&&(t.orderList[i].deliveryMethod="转寄");"10"==e&&t.orderList.sort(function(t,e){t.issuePartyContact,e.issuePartyTel,e.issuePartyAddr;return t.issuePartyContact==e.issuePartyContact&&t.issuePartyTel==e.issuePartyTel&&t.issuePartyAddr==e.issuePartyAddr?-1:0});for(var s=[],o=0;o<t.orderList.length-1;o++)for(var n=o+1;n<t.orderList.length;n++)t.orderList[o].loadingStatus>t.orderList[n].loadingStatus?(s=t.orderList[o],t.orderList[o]=t.orderList[n],t.orderList[n]=s):t.orderList[o].loadingStatus==t.orderList[n].loadingStatus&&"YI"==t.orderList[n].loadingStatus&&t.orderList[o].signStatus>t.orderList[n].signStatus&&(s=t.orderList[o],t.orderList[o]=t.orderList[n],t.orderList[n]=s)}if(t.$route.query.Waybill_SearchType){for(var r=void 0,l={},c=0;c<t.orderList.length;c++)if(r=t.orderList[c].clientOrderNo,1==t.$route.query.Waybill_SearchType&&(r=t.orderList[c].omsNo),r==t.$route.query.Waybill_SearchData){l=t.orderList[c],t.orderList.splice(c,1);break}t.orderList.unshift(l),t.$nextTick(function(){document.getElementById("OrderInfo_template_p").scrollIntoView()})}}})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},Navigation:function(t){event.stopPropagation();this.Navigate_addressList=[];for(var e=this.bigListData[t].issueAddrLiat,a=this.bigListData[t].deliveryList,i=[],s=0;s<a.length;s++)i[s]={issueAddr1:a[s].recAddr1,issuePhone:a[s].recPhone,issueUser:a[s].recName};this.Navigate_addressList=e.concat(i),this.Navigate_addressList.length?this.typeMShow=!0:this.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})},Navigate_SelectComit:function(t){t=t;this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}}}},ri={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillInfo"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("配载单信息")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"bigListBox"},[a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,orderList:t.orderList,LinkStatus:t.LinkStatus},on:{isLoading_:t.fullscreenLoading}}),t._v(" "),a("div",{attrs:{id:"OrderInfo_template_p"}}),t._v(" "),t.orderList.length||t.packageList.length?a("OrderInfo_template",{attrs:{_orderInfo:t.orderList,packageList:t.packageList,shipmentID:t.shipmentID,shipStatus:t.shipStatus,receivingStatus:t.receivingStatus,daoDaStatus:t.daoDaStatus,LinkStatus:t.LinkStatus},on:{isLoading_:t.fullscreenLoading}}):t._e()],1)])])])},staticRenderFns:[]};var li=a("VU/8")(ni,ri,!1,function(t){a("pwZU")},"data-v-70d13a33",null).exports,ci={name:"AviationOrderInfo_template",props:{_orderInfo:{type:Object,default:function(){return[]}},shipmentID:0,shipStatus:"",selectAddr:!1,AviationHistory:!1,LinkStatus:"",receivingStatus:"",daoDaStatus:"",deliveryId:""},data:function(){return{tips_Msg:"",ifTips:!1,SubmitOrderPopUpBox_show:!1,AbnormalDescription:""}},mounted:function(){},created:function(){},methods:{submitOrders:function(t,e,a){event.stopPropagation();var i=this;e<a?i.SubmitOrderPopUpBox_show=!0:this.$confirm("确认要提交装车吗？ 订单号："+t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$emit("isLoading_",!0,"拼命加载中");var t={deliveryId:i.deliveryId,transporterId:i.$store.state.userInfo.orgnizationId,driverPhone:i.$store.state.userInfo.cellphone,driverName:i.$store.state.userInfo.userName};t=i.PublicEncryption(t),v.a.post(i.HOST+"aviationUpdateDeliveryScanNumber.do",{params:t}).then(function(t){if(i.$emit("isLoading_",!1),"1"==t.data.status)i.ifTips=!0,i.tips_Msg="提交订单成功",setTimeout(function(){i.ifTips=!1,i.$router.push({name:"AviationWaybill"})},1500);else if(301==t.data.status)i.ReturnToLogin();else{var e;e=t.data.Msg?t.data.Msg:"提交失败",alert(e)}}).catch(function(t){i.$emit("isLoading_",!1),alert("提交失败")})}).catch(function(){})},SubmitOrderPopUpBox_cancel:function(){this.SubmitOrderPopUpBox_show=!1},SubmitOrderPopUpBox_confirm:function(){var t=this;if(t.AbnormalDescription){t.SubmitOrderPopUpBox_show=!1,t.$emit("isLoading_",!0,"拼命加载中");var e={deliveryId:t.deliveryId,transporterId:t.$store.state.userInfo.orgnizationId,driverPhone:t.$store.state.userInfo.cellphone,driverName:t.$store.state.userInfo.userName,AbnormalDescription:t.AbnormalDescription};e=t.PublicEncryption(e),v.a.post(t.HOST+"aviationUpdateDeliveryScanNumber.do",{params:e}).then(function(e){if(t.$emit("isLoading_",!1),"1"==e.data.status)t.ifTips=!0,t.tips_Msg="提交订单成功",setTimeout(function(){t.ifTips=!1,t.$router.push({name:"AviationWaybill"})},1500);else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"提交失败",alert(a)}}).catch(function(e){t.$emit("isLoading_",!1),alert("提交失败")})}else t.$alert("请填写异常描述","提示",{confirmButtonText:"确定",callback:function(){}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toAbnormal:function(t,e){event.stopPropagation();for(var a=this._orderInfo.notScanned?this._orderInfo.notScanned:[],i=this._orderInfo.scanned?this._orderInfo.scanned:[],s=a.concat(i),o=[],n=0;n<s.length;n++)o[n]={},o[n].productNo=s[n];this.$router.push({name:"Abnormal",query:{omsNo:t,deliveryNoSF:e,linkno:"20",labelList:o}})},detail_takaUp:function(t){event.stopPropagation();var e=f()(".goodsInfo").eq(t).find(".TakeUp").find("span"),a=f()(".goodsInfo").eq(t).find(".TakeUp").find("i");"查看标签列表"==e.html()?(f()(".goodsInfo").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(f()(".goodsInfo").eq(t).find(".goodsContent").hide(),e.html("查看标签列表"),a.css("transform","rotate(0deg)"))},_ewm:function(t){this.$router.push({name:"QRCode",query:{omsNo:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},di={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationOrderInfo_template"},[a("div",{staticClass:"goodsInfo"},[a("div",{staticClass:"goodsHead"},[a("div",{staticClass:"ordernum"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.omsNo,expression:"_orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t._orderInfo.omsNo)+"\n\t\t\t\t    ")]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.omsNo,expression:"_orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF"}],staticClass:"ordernum"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t._orderInfo.deliveryNoSF)+"\n\t\t\t\t    ")]),t._v(" "),t._orderInfo.deliveryNoSF?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("提货司机：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.driverName)+"    "+t._s(t._orderInfo.driverPhone)+"    ")]),t._v(" "),t._orderInfo.driverPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t._orderInfo.driverPhone)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("司机车牌：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.vehicleCodeCar))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.orderWt)+"   KG")])])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("落地机场：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.actualFlightLandAirportName))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.createOrderContactName))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.plannedDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("发货城市：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货城市：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.receivePartyCity))])])]),t._v(" "),t._orderInfo.scannedNum||t.AviationHistory?a("div",[a("span",[t._v("已扫描：")]),a("span",[t._v(t._s(t._orderInfo.scannedNum)+"  件")])]):t._e(),t._v(" "),t._orderInfo.scannedNum<t._orderInfo.orderQty&&t._orderInfo.scannedNum>0?a("div",{staticClass:"YourSynths"},[a("i",{staticClass:"iconfont icon-tishi"}),a("span",[t._v("该订单未扫描完")])]):t._e()]),t._v(" "),t.AviationHistory?t._e():a("div",{staticClass:"_btn"},[a("span",{staticClass:"g_btn",on:{click:function(e){return t.toAbnormal(t._orderInfo.omsNo,t._orderInfo.deliveryNoSF)}}},[t._v("异常上报")]),t._v(" "),a("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(t._orderInfo.omsNo,t._orderInfo.scannedNum,t._orderInfo.orderQty)}}},[t._v("提交订单")])]),t._v(" "),a("div",{staticClass:"goodsBtnBox"},[t._orderInfo.scanned&&t._orderInfo.scanned.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(0)}}},[a("div",[a("span",[t._v("已扫描标签（"+t._s(t._orderInfo.scanned.length)+"）")])])]),t._v(" "),t._orderInfo.scanned&&t._orderInfo.scanned.length?a("div",{staticClass:"goodsContent"},t._l(t._orderInfo.scanned,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v(t._s(e)+"      "+t._s(e.productName)+"         "+t._s(e.poOrderQty)+t._s(e.poUom))])}),0):t._e()]):t._e(),t._v(" "),t._orderInfo.notScanned&&t._orderInfo.notScanned.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp"},[a("div",{staticStyle:{color:"red"}},[a("span",[t._v("未扫描标签（"+t._s(t._orderInfo.notScanned.length)+"）")])])]),t._v(" "),t._orderInfo.notScanned&&t._orderInfo.notScanned.length?a("div",{staticClass:"goodsContent"},t._l(t._orderInfo.notScanned,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v(t._s(e)+"      "+t._s(e.productName)+"         "+t._s(e.poOrderQty)+t._s(e.poUom))])}),0):t._e()]):t._e()])]),t._v(" "),t.SubmitOrderPopUpBox_show?a("div",{staticClass:"unfinishScan"},[a("div",{staticClass:"unfinishScan_box"},[a("div",{staticClass:"unfinishScan_head"},[t._v("该订单未扫描完，确定提交订单吗？")]),t._v(" "),a("div",{staticClass:"unfinishScan_content"},[t._m(0),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.AbnormalDescription,expression:"AbnormalDescription"}],attrs:{placeholder:"请填写未扫描完的原因"},domProps:{value:t.AbnormalDescription},on:{input:function(e){e.target.composing||(t.AbnormalDescription=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"unfinishScan_botm"},[a("span",{on:{click:t.SubmitOrderPopUpBox_cancel}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.SubmitOrderPopUpBox_confirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("请填写未扫描完的原因")])])}]};var ui=a("VU/8")(ci,di,!1,function(t){a("iDaE")},"data-v-27442810",null).exports,hi={name:"AviationWaybillInfo",data:function(){return{deliveryId:"",orderList:{}}},components:{OrderInfo_template:ui},created:function(){this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.loadData()},methods:{goprev:function(){this.$router.push({name:"AviationWaybill",query:{}})},loadData:function(){var t=this,e={deliveryId:t.deliveryId};this.httpRequest("queryAviationOrderDetailData.do",e,function(e){t.orderList=e.data})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)}}},pi={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"AviationWaybillInfo"},[e("header",[e("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:this.goprev}}),e("span",[this._v("订单信息")])]),this._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"waybillContainer"},[e("div",{staticClass:"bigListBox"},[e("OrderInfo_template",{attrs:{_orderInfo:this.orderList,deliveryId:this.deliveryId},on:{isLoading_:this.fullscreenLoading}})],1)])])])},staticRenderFns:[]};var vi=a("VU/8")(hi,pi,!1,function(t){a("J/rV")},"data-v-1cadaa2a",null).exports,mi={name:"PackageDetail",data:function(){return{contnrCode:"",orderList:[],LinkStatus:"Link_PickUp",historyList:!1,tips_Msg:"",ifTips:!1,ifCheBiao:!1}},components:{OrderInfo_template:oi,WaybillInfo_template:fe},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$route.query.ifCheBiao&&(this.ifCheBiao=this.$route.query.ifCheBiao),this.$route.query.contnrCode&&(this.contnrCode=this.$route.query.contnrCode),this.loadData()},methods:{loadData:function(){var t=this;"Link_PickUp"==t.LinkStatus||("Link_Transit"==t.LinkStatus||t.LinkStatus);var e={contnrCode:t.contnrCode};this.httpRequest("selectPackageDetails.do",e,function(e){e.data.length&&(t.orderList=e.data)})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},Navigation:function(t){event.stopPropagation();this.Navigate_addressList=[];for(var e=this.bigListData[t].issueAddrLiat,a=this.bigListData[t].deliveryList,i=[],s=0;s<a.length;s++)i[s]={issueAddr1:a[s].recAddr1,issuePhone:a[s].recPhone,issueUser:a[s].recName};this.Navigate_addressList=e.concat(i),this.Navigate_addressList.length?this.typeMShow=!0:this.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})},Navigate_SelectComit:function(t){t=t;this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}},detail_takaUp:function(t){event.stopPropagation();var e=f()(".goodsInfoOrder").eq(t).find(".TakeUp").find("span"),a=f()(".goodsInfoOrder").eq(t).find(".TakeUp").find("i");"查看货物信息"==e.html()?(f()(".goodsInfoOrder").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(f()(".goodsInfoOrder").eq(t).find(".goodsContent").hide(),e.html("查看货物信息"),a.css("transform","rotate(0deg)"))},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},fi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PackageDetail OrderInfo_template"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v(t._s(t.ifCheBiao?"车标":"包")+"明细")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"packageInfo"},[a("div",[a("span",[t._v(t._s(t.ifCheBiao?"车标":"包")+"号：")]),t._v(" "),a("span",[t._v(t._s(t.contnrCode))])])]),t._v(" "),a("div",{staticClass:"bigListBox"},t._l(t.orderList,function(e,i){return a("div",{key:i,staticClass:"goodsInfo goodsInfoOrder",attrs:{id:i}},[a("div",{staticClass:"goodsHead"},["Link_ToSend"==t.LinkStatus?a("div",{staticClass:"KeyInfoGroup"},["到付现结"==e.chargeTypes||"到付"==e.chargeTypes||"到付月结"==e.chargeTypes?a("div",[a("span",[t._v(t._s(e.chargeTypesOld))])]):t._e(),t._v(" "),"T"==e.returnBillFlag?a("div",[a("span",[t._v("签回单")])]):t._e()]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes?a("div",{staticClass:"KeyInfoGroup"},[t._m(0,!0)]):t._e(),t._v(" "),a("div",{staticClass:"ordernum"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n              ")]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"ordernum"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n              ")]),t._v(" "),e.clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),a("div",[a("span",[t._v("卸货联系人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"    "+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",{staticClass:"PartyAddr"},[a("span",[t._v("卸货地址：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyAddr1))])]),t._v(" "),a("div",[a("span",[t._v("装货联系人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"    "+t._s(e.issuePartyTel)+"    ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",{staticClass:"PartyAddr"},[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyAddr))])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_Transit"==t.LinkStatus?a("div",[a("span",[t._v("计划发件时间：")]),t._v(" "),a("span",[t._v(t._s(e.requiredIssueDte))])]):t._e(),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.actualQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("航班号：")]),t._v(" "),a("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("主单号：")]),t._v(" "),a("span",[t._v(t._s(e.aviationMasterNumber))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?a("div",[a("span",[t._v("起飞机场：")]),t._v(" "),a("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("实际起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("计划落地时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedLandingTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("落地机场：")]),t._v(" "),a("span",[t._v(t._s(e.arriveAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("期望到达时间：")]),t._v(" "),a("span",[t._v(t._s(e.requestedDeliveryDte))])]):t._e(),t._v(" "),e.valuationMoney?a("div",[a("span",[t._v("保价金额：")]),a("span",[t._v(t._s(e.valuationMoney)+"  元")])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag?a("div",[a("span",[t._v("是否上传回单：")]),a("span",[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))])]):t._e()]),t._v(" "),a("div",{staticClass:"goodsContent",staticStyle:{display:"none"},on:{click:function(e){return t.detail_takaUp(i)}}},t._l(e.deliveryDetailList,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v(t._s(e.productNo)+"      "+t._s(e.productName)+"         "+t._s(e.poOrderQty)+t._s(e.poUom))])}),0),t._v(" "),e.deliveryDetailList&&e.deliveryDetailList.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(i)}}},[t._m(1,!0)])]):t._e()])}),0)])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("寄付现结")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("查看货物信息")]),e("i",{staticClass:"iconfont icon-up",staticStyle:{transform:"rotate(0deg)"}})])}]};var _i=a("VU/8")(mi,fi,!1,function(t){a("4UD6")},"data-v-7897d498",null).exports,gi=a("TwlK"),bi={name:"QRCode",data:function(){return{title:""}},components:{QRCode:ai.a},mounted:function(){var t=this,e="";this.$route.query.omsNo?(e=this.$route.query.omsNo,this.title="订单号"):this.$route.query.shipmentCode&&(e=this.$route.query.shipmentCode,this.title="配载单号"),this.$nextTick(function(){t.qrcode(e);var a=document.getElementById("canvascode");gi(a,e,{format:"CODE128",displayValue:1,fontSize:22,lineColor:"#000"})})},created:function(){},methods:{qrcode:function(t){new ai.a("qrcode",{width:200,height:200,text:t})}}},yi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QRCode"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v(t._s(t.title)+"二维码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"_qrcode"},[a("canvas",{attrs:{id:"canvascode"}}),t._v(" "),a("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})])])])},staticRenderFns:[]};var Li=a("VU/8")(bi,yi,!1,function(t){a("K1CS")},"data-v-11fe0e65",null).exports,Ci={name:"historyList",data:function(){return{LinkStatus:"Link_PickUp",shipmentListData:[],address_listData:[],currentAddressInfo:[],history_NoSearchFrom:!0,is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,history_SearchData:{startDate:null,endDate:null,orderNoinput:null,shipmentCodeinput:null,TransportLink:null},thisMonth:"",tips_Msg:"",ifTips:!1}},components:{FooterIndex:x},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$store.state.history_LinkStatus&&(this.LinkStatus=this.$store.state.history_LinkStatus),this.history_NoSearchFrom=this.$store.state.history_NoSearchFrom,this.$store.state.history_NoSearchFrom||(this.history_SearchData=this.$store.state.history_SearchData),this.loadData()},methods:{LinkChoose:function(t){this.loadPage=1,this.allLoaded=!1,this.LinkStatus=t,this.$store.state.history_LinkStatus=t,this.loadData()},loadData:function(t){var e,a=this;a.$store.state.history_Data;a.$store.state.history_NoSearchFrom?e={startDate:null,endDate:null,orderNoinput:null,shipmentCodeinput:null,TransportLink:null,cellphone:a.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":""}:(e=a.$store.state.history_SearchData).transportLinks="Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":"",e.currentPage=a.loadPage,e.numberPerPage=a.numberPerPage,this.httpRequest("queryOldShipmentData.do",e,function(e){t&&("TopLoad"==t?a.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&a.$refs.loadmore.onBottomLoaded()),a.loadPage>1?a.shipmentListData=a.shipmentListData.concat(e.data):(a.shipmentListData=e.data,e.data.length?a.is_NoData=!1:(a.is_NoData_text="没有任务",a.is_NoData=!0)),a.$store.state.history_Data=a.shipmentListData,e.data.length<a.numberPerPage?a.allLoaded=!0:a.allLoaded=!1})},currentTask:function(){this.$router.push({name:"Waybill"})},searchLabel_close:function(t){this.$store.state.history_SearchData[t]=null,this.loadData()},ViewTrajectory:function(t){event.stopPropagation(),t+="";try{CallAndroidOrIOS.callAndroid("查看路线",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"查看路线",b:t})}catch(t){}},toOrderDeliver:function(t){this.$store.state.search_WaybillDetail=t;this.$router.push({name:"WaybillDetail",query:{shipmentID:t.shipmentID,LinkStatus:this.LinkStatus}})},_ewm:function(t){event.stopPropagation(),this.$router.push({name:"QRCode",query:{shipmentCode:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.$store.state.history_needRefresh=!0,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.$store.state.history_needRefresh=!0,this.loadData("BottomLoad"))}}},Si={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historyList"},[a("header",[a("div",{staticClass:"currentTask",on:{click:t.currentTask}},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask"},[t._v("历史任务"),a("i",{staticClass:"iconfont icon-huabanfuben",on:{click:function(e){return t.search("History")}}})])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{class:{selected_head:"Link_PickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_PickUp")}}},[a("span",[t._v("提货")])]),t._v(" "),a("div",{class:{selected_head:"Link_Transit"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_Transit")}}},[a("span",[t._v("中转")])]),t._v(" "),a("div",{class:{selected_head:"Link_AirportPickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_AirportPickUp")}}},[a("span",[t._v("派提")])]),t._v(" "),a("div",{class:{selected_head:"Link_ToSend"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_ToSend")}}},[a("span",[t._v("派件")])])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.history_SearchData.startDate||t.history_SearchData.endDate||t.history_SearchData.orderNoinput||t.history_SearchData.shipmentCodeinput||t.history_SearchData.TransportLink?a("div",{staticClass:"search_Label"},[t.history_SearchData.startDate?a("div",{on:{click:function(e){return t.searchLabel_close("startDate")}}},[a("span",[t._v("开始日期")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.endDate?a("div",{on:{click:function(e){return t.searchLabel_close("endDate")}}},[a("span",[t._v("结束日期")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.orderNoinput?a("div",{on:{click:function(e){return t.searchLabel_close("orderNoinput")}}},[a("span",[t._v("订单号")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.shipmentCodeinput?a("div",{on:{click:function(e){return t.searchLabel_close("shipmentCodeinput")}}},[a("span",[t._v("配载单号")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.TransportLink?a("div",{on:{click:function(e){return t.searchLabel_close("TransportLink")}}},[a("span",[t._v("运输环节")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("配载单号："+t._s(e.shipmentCode))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}),t._v(" "),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(a){return t._ewm(e.shipmentCode)}}})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliver(e)}}},[a("div",[a("span",[t._v("创建时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.addDate))])]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(e.countDelivery)+" 单   ")])]),t._v(" "),e.deliveryTime?a("div",[a("span",[t._v("交付时间：")]),t._v(" "),a("span",[t._v(t._s(e.deliveryTime))])]):t._e(),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueUser)+"    "+t._s(e.issueAddrLiat[0].issuePhone))]),t._v("      "),e.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),1!=e.issueAddrLiat.length&&0!=e.issueAddrLiat.length?a("div",{on:{click:function(e){return t.MultiAddress(i)}}},[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"}},[t._v("查看多装货地址")])]):t._e(),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliver(e)}}},[t._v("详情")]),t._v(" "),a("span",{staticClass:"g_btn",on:{click:function(a){return t.ViewTrajectory(e.shipmentID)}}},[t._v("查看路线")])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i)}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("       "),t.currentAddressInfo.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}}):t._e()]),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.phoneAppointTime))])]):t._e(),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.appointLoadingStatus))])]):t._e()])])])],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[]};var Ni=a("VU/8")(Ci,Si,!1,function(t){a("vbeE")},"data-v-d924a6ec",null).exports,Ii={name:"WaybillDetail",data:function(){return{LinkStatus:"Link_PickUp",shipmentListData:[],orderList:[],address_listData:[],shipmentID:"",currentAddressInfo:[],historyList:!0,tips_Msg:"",ifTips:!1,packageList:[]}},components:{OrderInfo_template:oi},created:function(){var t=this;this.$route.query.shipmentID?this.shipmentID=this.$route.query.shipmentID:this.shipmentID=this.$store.state.Waybill.WaybillInfo.clickShipmentId,this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus);var e=null;"Link_PickUp"==t.LinkStatus?e="10":"Link_Transit"==t.LinkStatus?e="20":"Link_AirportPickUp"==t.LinkStatus?e="27":"Link_ToSend"==t.LinkStatus&&(e="30");var a={shipmentId:t.shipmentID,appointLoadingSite:"YI",transportLinks:e};this.httpRequest("queryDeliverDetailInfo.do",a,function(e){if(e.data.length){e.data[0].length?t.shipmentListData=e.data[0][0]:t.shipmentListData=t.$store.state.search_WaybillDetail,t.orderList=e.data[1],t.packageList=e.data[2];for(var a=0;a<e.data[1].length;a++)t.orderList[a].ifDeliver=!1}})},methods:{goprev:function(){this.$router.push({name:"historyList",query:{LinkStatus:this.LinkStatus}})},_ewm:function(t){event.stopPropagation(),this.$router.push({name:"QRCode",query:{shipmentCode:t}})},toRoutingInfo:function(){this.$router.push({name:"RoutingInfo",query:{shipmentCode:this.shipmentListData.shipmentCode}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},wi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillDetail"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillHead",staticStyle:{"margin-top":"0"}},[t._v("配载单信息")]),t._v(" "),a("div",{staticClass:"listHead"},[a("div",[a("span",[t._v("配载单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shipmentListData.shipmentCode,expression:"shipmentListData.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.shipmentListData.shipmentCode))]),t._v("\n\t\t\t            \n\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shipmentListData.shipmentCode,expression:"shipmentListData.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t"),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(e){return t._ewm(t.shipmentListData.shipmentCode)}}})]),t._v(" "),a("div",[a("span",[t._v("创建时间：")]),a("span",[t._v(t._s(t.shipmentListData.addDate))])]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.countDelivery)+" 单   ")])]),t._v(" "),a("div",[a("span",[t._v("物流公司：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.transPartyName))])]),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length?a("div",[a("span",[t._v("联 系  人：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].issueUser)+"    "+t._s(t.shipmentListData.issueAddrLiat[0].issuePhone))]),t._v("      "),t.shipmentListData.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.shipmentListData.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1!=t.shipmentListData.issueAddrLiat.length&&0!=t.shipmentListData.issueAddrLiat.length?a("div",{on:{click:function(e){return t.MultiAddress(null)}}},[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"}},[t._v("查看多装货地址")])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length&&t.shipmentListData.issueAddrLiat[0].phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].phoneAppointTime))])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length&&t.shipmentListData.issueAddrLiat[0].phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s("NEW"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"新预约":"YI"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"已确定":"REFUSE"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"已拒绝":""))])]):t._e()]),t._v(" "),t.orderList.length||t.packageList.length?a("OrderInfo_template",{attrs:{_orderInfo:t.orderList,packageList:t.packageList,historyList:t.historyList,LinkStatus:t.LinkStatus}}):t._e()],1),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i,"usedtemplate")}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("       "),a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}})]),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.phoneAppointTime))])]):t._e(),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.appointLoadingStatus))])]):t._e()])])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ki=a("VU/8")(Ii,wi,!1,function(t){a("9cOk")},"data-v-559546d6",null).exports,Di={data:function(){return{orderNum:"",orderSF:{},WaybillTrackList:[],code:"",carShow:!1}},created:function(){var t=this;if(this.$route.query.shipmentCode&&(this.orderNum=this.$route.query.shipmentCode),t.orderNum.length){t.orderNum;this.httpRequest("getOrderRoute.do",postData,function(e){t.orderSF=e.data.orderSF;for(var a=e.data.orderTrack,i=0;i<a.length;i++)a[i].dataTime=a[i].operateTime.substring(0,10),a[i].detailTime=a[i].operateTime.substring(11,16);t.WaybillTrackList=a.sort(function(t,e){return Date.parse(e.operateTime)-Date.parse(t.operateTime)})})}else t.$alert("未获取到订单号,请稍后重试","异常提示",{confirmButtonText:"确定",callback:function(e){t.$router.back(-1)}})},methods:{}},Ti={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillTrack"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("路由详情")])]),t._v(" "),a("div",{staticClass:"container"},[t.orderNum?a("div",{staticClass:"orderInfo"},[a("div",[a("span",[t._v("配载单号：")]),t._v(" "),a("span",[t._v(t._s(t.orderNum))]),t._v(" "),t.orderNum?a("icon",{staticClass:"iconfont icon-fuzhi",on:{click:function(e){return e.stopPropagation(),t.CopyNum(t.orderNum)}}}):t._e()],1)]):t._e(),t._v(" "),a("div",{staticClass:"TrackingInfo"},t._l(t.WaybillTrackList,function(e,i){return a("div",{key:i,staticClass:"TrackDetailList",attrs:{id:i}},[a("div",{staticClass:"TrackOfTime"},[a("div",[t._v(t._s(e.dataTime))]),t._v(" "),a("div",[t._v(t._s(e.detailTime))])]),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"TrackProgress"},[a("span",[t._v(t._s(e.routeDescribe))])])])}),0)]),t._v(" "),t.WaybillTrackList.length?t._e():a("div",{staticClass:"noData"},[a("i",{staticClass:"iconfont icon-rBEhWVIxcboIAAAAAAHkLwWBmsAADFGgISYAAeRHjpg"}),t._v(" "),a("div",[t._v("该单号暂无物流进展")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"TraceListStyle_outter"},[e("div",{staticClass:"TraceListStyle"},[e("div",{staticClass:"TraceListStyle_lineTop"}),this._v(" "),e("div",{staticClass:"TraceListStyle_dot"},[e("div"),this._v(" "),e("img",{attrs:{src:"/static/images/TrackLine_Up.png"}})]),this._v(" "),e("div",{staticClass:"TraceListStyle_lineBottom"})])])}]};var xi=a("VU/8")(Di,Ti,!1,function(t){a("kB+v")},"data-v-eb0635dc",null).exports,$i={name:"AviationWaybillDetail",data:function(){return{shipmentListData:{},deliveryId:"",orderList:[],tips_Msg:"",ifTips:!1,AviationHistory:!0}},components:{OrderInfo_template:ui},created:function(){var t=this;this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId);var e={deliveryId:t.deliveryId};this.httpRequest("queryAviationOrderDetailData.do",e,function(e){t.shipmentListData=e.data})},methods:{goprev:function(){this.$router.push({name:"AviationHistoryList"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Pi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationWaybillDetail"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"bigListBox"},[a("OrderInfo_template",{attrs:{AviationHistory:t.AviationHistory,_orderInfo:t.shipmentListData,deliveryId:t.deliveryId}})],1)])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Bi=a("VU/8")($i,Pi,!1,function(t){a("tJy6")},"data-v-4054b48e",null).exports,Ai={name:"AviationHistoryList",data:function(){return{shipmentListData:[],packageArray:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},components:{FooterIndex:Le},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={currentPage:e.loadPage,numberPerPage:e.numberPerPage,aviationIsLoaded:"YI",transporterId:e.$store.state.userInfo.orgnizationId,searchNumberNo:e.$store.state.Aviation_HistoryWaybill.Waybill_SearchData,searchType:e.$store.state.Aviation_HistoryWaybill.Waybill_SearchType,flightDepcode:e.$store.state.userInfo.aiportCode};this.httpRequest("queryAviationDeliveryData.do",a,function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded());for(var i=0;i<a.data.cheBiaoArray.length;i++)a.data.cheBiaoArray[i].ifCheBiao=!0;e.loadPage>1?(e.shipmentListData=e.shipmentListData.concat(a.data.deliveryArray),e.packageArray=e.packageArray.concat(a.data.packageArray),e.packageArray=e.packageArray.concat(a.data.cheBiaoArray)):(e.shipmentListData=a.data.deliveryArray,e.packageArray=a.data.packageArray,e.packageArray=e.packageArray.concat(a.data.cheBiaoArray),a.data.deliveryArray.length||e.packageArray.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.data.deliveryArray.length<e.numberPerPage||a.data.packageArray.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},currentTask:function(){this.$router.push({name:"AviationWaybill"})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,f()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,f()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliverPackage:function(t,e){this.$router.push({name:"PackageDetail",query:{contnrCode:t,ifCheBiao:e}})},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){event.stopPropagation();var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},Oi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationHistoryList"},[a("header",[a("div",{staticClass:"currentTask",on:{click:t.currentTask}},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask"},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData,expression:"$store.state.Aviation_HistoryWaybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.Aviation_HistoryWaybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{staticClass:"SearchBoxOrder",on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{staticClass:"SearchBoxSFOrder",on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"SearchBoxBtnquery"},[a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])]),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.packageArray,function(e,i){return a("div",{key:i+"r",staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v(t._s(e.ifCheBiao?"车标号：":"包 号 ：")+" "+t._s(e.contnrCode))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliverPackage(e.contnrCode,e.ifCheBiao)}}},[a("div",[a("span",[t._v("派单时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliverPackage(e.contnrCode,e.ifCheBiao)}}},[t._v("详情")])])])])}),t._v(" "),t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliver(e.deliveryId)}}},[a("div",[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("运单号："+t._s(e.deliveryNoSF))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliver(e.deliveryId)}}},[t._v("详情")])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"SearchBoxBtn"},[e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var Fi=a("VU/8")(Ai,Oi,!1,function(t){a("Fy65")},"data-v-5431abd5",null).exports,Ui={name:"Search",data:function(){return{startvalue:null,endValue:null,orderNum:null,order_WaybillNum:null,TsptLinkList:[{value:"提货",label:"提货"},{value:"中转",label:"中转"},{value:"派件",label:"派件"},{value:"签收",label:"签收"}],TransportLink:""}},created:function(){this.startvalue=this.$store.state.history_SearchData.startDate,this.endValue=this.$store.state.history_SearchData.endDate,this.orderNum=this.$store.state.history_SearchData.orderNoinput,this.order_WaybillNum=this.$store.state.history_SearchData.shipmentCodeinput,this.TransportLink=this.$store.state.history_SearchData.TransportLink},methods:{goPrev:function(){this.$store.state.history_needRefresh=!1,this.$router.push({name:"historyList",query:{}})},sureScreen:function(){var t,e;t=f()("#startvalue").val()?f()("#startvalue").val():null,e=f()("#endValue").val()?f()("#endValue").val():null;var a=this.$store.state.history_LinkStatus;this.$store.state.history_SearchData={startDate:t,endDate:e,orderNoinput:this.orderNum,shipmentCodeinput:this.order_WaybillNum,TransportLink:this.TransportLink,cellphone:this.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a?"提货":"Link_Transit"==a?"中转":"Link_ToSend"==a?"派件":""},this.$store.state.history_NoSearchFrom=!1,this.$router.push({name:"historyList",query:{}})},reset:function(){this.startvalue=null,this.endValue=null,this.orderNum=null,this.order_WaybillNum=null,this.TransportLink=null}}},Wi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Search"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"CompetitionScreen"},[a("div",{staticClass:"screen"},[a("div",[a("span",[t._v("开始日期")]),a("el-date-picker",{attrs:{id:"startvalue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.startvalue,callback:function(e){t.startvalue=e},expression:"startvalue"}})],1),t._v(" "),a("div",[a("span",[t._v("结束日期")]),a("el-date-picker",{attrs:{id:"endValue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1),t._v(" "),a("div",[a("span",[t._v(" 订 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNum,expression:"orderNum"}],attrs:{placeholder:"请输入订单号"},domProps:{value:t.orderNum},on:{input:function(e){e.target.composing||(t.orderNum=e.target.value)}}}),t._v(" "),t.orderNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("orderNum")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("配载单号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order_WaybillNum,expression:"order_WaybillNum"}],attrs:{placeholder:"请输入配载单号"},domProps:{value:t.order_WaybillNum},on:{input:function(e){e.target.composing||(t.order_WaybillNum=e.target.value)}}}),t._v(" "),t.order_WaybillNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("order_WaybillNum")}}}):t._e()])]),t._v(" "),a("div",{staticClass:"g_doubleBtn"},[a("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{on:{click:t.sureScreen}},[t._v("搜索")])])])])])},staticRenderFns:[]};var Ri=a("VU/8")(Ui,Wi,!1,function(t){a("vdeg")},"data-v-bb8d472e",null).exports,Mi={name:"Search",data:function(){return{startvalue:null,endValue:null,orderNum:"",deliveryNoSF:"",order_WaybillNum:null,TransportLink:""}},created:function(){this.startvalue=this.$store.state.history_SearchData.startDate,this.endValue=this.$store.state.history_SearchData.endDate,this.orderNum=this.$store.state.history_SearchData.orderNoinput},methods:{goPrev:function(){this.$store.state.history_needRefresh=!1,this.$router.push({name:"AviationHistoryList",query:{}})},sureScreen:function(){var t,e;t=f()("#startvalue").val()?f()("#startvalue").val():null,e=f()("#endValue").val()?f()("#endValue").val():null;var a=this.$store.state.history_LinkStatus;this.$store.state.history_SearchData={startDate:t,endDate:e,orderNoinput:this.orderNum,cellphone:this.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a?"提货":"Link_Transit"==a?"中转":"Link_ToSend"==a?"派件":""},this.$store.state.history_NoSearchFrom=!1,this.$router.push({name:"AviationHistoryList",query:{}})},reset:function(){this.startvalue=null,this.endValue=null,this.orderNum=null}}},Ei={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Search"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"CompetitionScreen"},[a("div",{staticClass:"screen"},[a("div",[a("span",[t._v("开始日期")]),a("el-date-picker",{attrs:{id:"startvalue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.startvalue,callback:function(e){t.startvalue=e},expression:"startvalue"}})],1),t._v(" "),a("div",[a("span",[t._v("结束日期")]),a("el-date-picker",{attrs:{id:"endValue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1),t._v(" "),a("div",[a("span",[t._v(" 订 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNum,expression:"orderNum"}],attrs:{placeholder:"请输入订单号"},domProps:{value:t.orderNum},on:{input:function(e){e.target.composing||(t.orderNum=e.target.value)}}}),t._v(" "),t.orderNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("orderNum")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v(" 运 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryNoSF,expression:"deliveryNoSF"}],attrs:{placeholder:"请输入运单号"},domProps:{value:t.deliveryNoSF},on:{input:function(e){e.target.composing||(t.deliveryNoSF=e.target.value)}}}),t._v(" "),t.deliveryNoSF?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("deliveryNoSF")}}}):t._e()])]),t._v(" "),a("div",{staticClass:"g_doubleBtn"},[a("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{on:{click:t.sureScreen}},[t._v("搜索")])])])])])},staticRenderFns:[]};var Hi=a("VU/8")(Mi,Ei,!1,function(t){a("A5uk")},"data-v-2c221eb1",null).exports,qi={name:"HomeIndex",data:function(){return{userName:"",cellphone:"",VersionNum:"",iosorandroid:"android",ifShowDisableScan:!1,ifDisableScan:"否"}},components:{FooterIndex:x},created:function(){this.userName=this.$store.state.userInfo.userName,this.cellphone=this.$store.state.userInfo.cellphone,this.VersionNum=this.$store.state.App_Version},mounted:function(){this.iosorandroid=this.$store.state.Device,this.ifDisableScan=this.getItem("SXJF_ifScan")||"否"},methods:{updateapp:function(){try{CallAndroidOrIOS.updateAPP()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"检查版本更新"})}catch(t){}},show_DisableScan:function(){this.ifShowDisableScan=!0},selectDisableScan:function(t){this.ifDisableScan=t,this.setItem({name:"SXJF_ifScan",value:t}),this.ifShowDisableScan=!1},toPassword:function(){this.$router.push({name:"RePassword",query:{}})},toHistoricalTrack:function(){this.$router.push({name:"HistoricalTrack",query:{}})},exit:function(){var t=this;this.$confirm("确定要退出登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){localStorage.removeItem("SXJF_USERDATA"),localStorage.removeItem("SXJF_pwd"),t.pluginGetUser("",""),t.$store.state.AviationWaybill.Waybill_SearchData="",t.$store.state.AviationWaybill.Waybill_SearchType=0,t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",t.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,t.$store.state.Waybill.Waybill_SearchData="",t.$store.state.Waybill.Waybill_SearchType=0,t.$router.push({name:"Login",query:{}})}).catch(function(){})},pluginGetUser:function(t,e){try{CallAndroidOrIOS.callAndroidTrack(t,e)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:t,c:e})}catch(t){}}}},Qi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"HomeIndex"},[i("div",{staticClass:"container"},[i("div",{staticClass:"headImg"},[i("div",{staticClass:"background"}),t._v(" "),i("div",{staticClass:"background_blank"}),t._v(" "),i("div",{staticClass:"head"},[i("div",{staticClass:"image"}),t._v(" "),i("img",{staticClass:"userinfo-avatar",attrs:{src:a("7ADV")}}),t._v(" "),i("div",{staticClass:"userName"},[t._v(t._s(t.userName))]),t._v(" "),i("div",{staticClass:"userName"},[t._v(t._s(t.cellphone))])]),t._v(" "),i("div",{staticClass:"stripInfo"},[t.$store.state.userInfo.aiportName?i("div",[i("i",{staticClass:"iconfont icon-jiesongjifuwu"}),i("span",[t._v("所属机场："+t._s(t.$store.state.userInfo.aiportName))])]):t._e(),t._v(" "),i("div",{on:{click:t.toHistoricalTrack}},[i("i",{staticClass:"iconfont icon-lishiguiji"}),i("span",[t._v("历史轨迹")]),i("i",{staticClass:"iconfont icon-xiangshang"})]),t._v(" "),i("div",{on:{click:t.toPassword}},[i("i",{staticClass:"iconfont icon-xiugaimima"}),i("span",[t._v("修改密码")]),i("i",{staticClass:"iconfont icon-xiangshang"})]),t._v(" "),i("div",{on:{click:t.show_DisableScan}},[i("i",{staticClass:"iconfont icon-xiugaimima"}),i("span",[t._v("扫描方式")]),i("i",{staticClass:"iconfont icon-xiangshang"}),i("span",[t._v(t._s("是"==t.ifDisableScan?"巴枪扫描":"手机扫描"))])]),t._v(" "),i("div",{on:{click:t.updateapp}},[i("i",{staticClass:"iconfont icon-guanyu"}),i("span",[t._v("版本更新")]),i("i",{staticClass:"iconfont icon-xiangshang"}),i("span",[t._v(t._s(t.VersionNum))])])]),t._v(" "),i("div",{staticClass:"Exit_logon"},[i("i",{staticClass:"iconfont icon-icon-yxj-switch-account",on:{click:t.exit}}),t._v(" "),i("div",[i("span",{on:{click:t.exit}},[t._v("退出登录")])])])])]),t._v(" "),t.ifShowDisableScan?i("div",{staticClass:"SelectDelivery"},[i("div",{staticClass:"DeliveryBox"},[i("div",{staticClass:"DeliveryBox_head"},[t._v("请选择扫描方式")]),t._v(" "),i("div",{staticClass:"DeliveryBox_content"},[i("div",{class:{DeliveryBox_content_active:"是"==t.ifDisableScan},on:{click:function(e){return t.selectDisableScan("是")}}},[i("span",[t._v("巴枪扫描")]),"是"==t.ifDisableScan?i("i",{staticClass:"iconfont icon-duigou"}):t._e()]),t._v(" "),i("div",{class:{DeliveryBox_content_active:"否"==t.ifDisableScan},on:{click:function(e){return t.selectDisableScan("否")}}},[i("span",[t._v("手机扫描")]),"否"==t.ifDisableScan?i("i",{staticClass:"iconfont icon-duigou"}):t._e()])])])]):t._e(),t._v(" "),i("FooterIndex")],1)},staticRenderFns:[]};var zi=a("VU/8")(qi,Qi,!1,function(t){a("Q0IC")},"data-v-51ade47a",null).exports,Vi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoricalTrack"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("历史轨迹")])]),t._v(" "),a("div",{staticClass:"container"},[t._l(t.TrackListData,function(e,i){return a("div",{key:i,staticClass:"TrackList",attrs:{id:i}},[a("div",[t._v(t._s(e.trackingTime))]),t._v(" "),a("div",[t._v(t._s(e.vehicleLocation))])])}),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],2)])},staticRenderFns:[]};var Ji=a("VU/8")({name:"HistoricalTrack",data:function(){return{TrackListData:[],is_NoData:!1,is_NoData_text:"没有任务"}},created:function(){var t=this,e={cellphone:t.$store.state.userInfo.cellphone};this.httpRequest("queryTrajectoryData.do",e,function(e){t.TrackListData=e.data,e.data.length||(t.is_NoData_text="没有结果",t.is_NoData=!0)})},methods:{goPrev:function(){this.$router.push({name:"HomeIndex",query:{}})}}},Vi,!1,function(t){a("1bEl")},"data-v-65f559d4",null).exports,Xi={name:"RePassword",data:function(){return{oldpwd:"",newpwd:"",reNewpwd:"",tips_Msg:"",ifTips:!1}},created:function(){},methods:{goPrev:function(){this.$router.push({name:"HomeIndex",query:{}})},submit:function(){var t=this,e=t.$store.state.userInfo.cellphone;if(this.oldpwd)if(this.newpwd)if(this.reNewpwd)if(this.reNewpwd==this.newpwd)if(this.newpwd.length<6)t.$alert("密码不能小于6位数！","提示",{confirmButtonText:"确定"});else if(this.oldpwd!=this.newpwd){var a={cellphone:e,next_page:"xiugaimima",oldPassword:t.oldpwd,password:t.newpwd};t.httpRequest("updateUserPassword.do",a,function(e){t.ifTips=!0,t.tips_Msg="修改成功",setTimeout(function(){t.ifTips=!1,localStorage.removeItem("SXJF_USERDATA"),t.pluginGetUser("",""),t.$router.push({name:"Login",query:{}})},1500)})}else t.$alert("新密码不能与原密码相同！","提示",{confirmButtonText:"确定"});else t.$alert("两次新密码不一致！","提示",{confirmButtonText:"确定"});else t.$alert("请确认新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入原密码！","提示",{confirmButtonText:"确定"})},pluginGetUser:function(t,e){try{plus.plugintest.PluginGetUserFunction(t,e,function(t){},function(t){})}catch(t){}}}},ji={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"RePassword"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("修改密码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",[a("span",[t._v("原密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpwd,expression:"oldpwd"}],ref:"oldpwd",attrs:{placeholder:"请输入原密码"},domProps:{value:t.oldpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("newpwd")},input:function(e){e.target.composing||(t.oldpwd=e.target.value)}}}),t._v(" "),t.oldpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("oldpwd")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("新密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newpwd,expression:"newpwd"}],ref:"newpwd",attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:t.newpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("reNewpwd")},input:function(e){e.target.composing||(t.newpwd=e.target.value)}}}),t._v(" "),t.newpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("newpwd")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("确认密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reNewpwd,expression:"reNewpwd"}],ref:"reNewpwd",attrs:{type:"password",placeholder:"请再次输入新密码"},domProps:{value:t.reNewpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.reNewpwd=e.target.value)}}}),t._v(" "),t.reNewpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("reNewpwd")}}}):t._e()]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Yi=a("VU/8")(Xi,ji,!1,function(t){a("HqYX")},"data-v-2c51f33f",null).exports;c.default.use(h.a);var Gi=new h.a({routes:[{path:"/",name:"Login",component:b},{path:"/ForgotPwd",name:"ForgotPwd",component:I},{path:"/Reg",name:"Reg",component:C},{path:"/Identifying",name:"Identifying",component:D},{path:"/Search",name:"Search",component:Ri},{path:"/AviationSearch",name:"AviationSearch",component:Hi},{path:"/Index",name:"Index",component:B},{path:"/ExceptionList",name:"ExceptionList",component:F},{path:"/ScanQueryOrderInfo",name:"ScanQueryOrderInfo",component:q},{path:"/PrintExpress",name:"PrintExpress",component:V},{path:"/PrintExpressShein",name:"PrintExpressShein",component:K},{path:"/AuditWeight",name:"AuditWeight",component:et},{path:"/AirMasterScan",name:"AirMasterScan",component:rt},{path:"/SweepCodePrinting",name:"SweepCodePrinting",component:dt},{path:"/LightBehind",name:"LightBehind",component:pt},{path:"/ReportAbnormal",name:"ReportAbnormal",component:Pt},{path:"/WarehousingSignScan",name:"WarehousingSignScan",component:zt},{path:"/HistoryWarehousingSign",name:"HistoryWarehousingSign",component:Xt},{path:"/PortScanning",name:"PortScanning",component:Zt},{path:"/UploadReceipt",name:"UploadReceipt",component:ae},{path:"/LeadWarehouseScan",name:"LeadWarehouseScan",component:re},{path:"/HistoryLeadWarehousingSign",name:"HistoryLeadWarehousingSign",component:de},{path:"/AirLabelPrinting",name:"AirLabelPrinting",component:pe},{path:"/Waybill",name:"Waybill",component:be},{path:"/AviationWaybill",name:"AviationWaybill",component:we},{path:"/PickUpRandomScan",name:"PickUpRandomScan",component:$e},{path:"/AirportPickUpRandomScan",name:"AirportPickUpRandomScan",component:Fe},{path:"/ToSendRandomScan",name:"ToSendRandomScan",component:Ee},{path:"/SignRandomScan",name:"SignRandomScan",component:Ve},{path:"/DepartTakingPictures",name:"DepartTakingPictures",component:je},{path:"/UnloadingTakingPictures",name:"UnloadingTakingPictures",component:Ke},{path:"/WaybillInfo",name:"WaybillInfo",component:li},{path:"/AviationWaybillInfo",name:"AviationWaybillInfo",component:vi},{path:"/PackageDetail",name:"PackageDetail",component:_i},{path:"/DeliveryScanXH",name:"DeliveryScanXH",component:sa},{path:"/DeliveryScan",name:"DeliveryScan",component:ra},{path:"/PackageDeliveryScan",name:"PackageDeliveryScan",component:pa},{path:"/TransitScan",name:"TransitScan",component:fa},{path:"/AirportPickUpScan",name:"AirportPickUpScan",component:ba},{path:"/AviationAllTransitScan",name:"AviationAllTransitScan",component:ti},{path:"/DeliveryOrderPickScan",name:"DeliveryOrderPickScan",component:Ca},{path:"/PackageDeliveryOrderPickScan",name:"PackageDeliveryOrderPickScan",component:Ia},{path:"/ReceiptScan",name:"ReceiptScan",component:Da},{path:"/PackageReceiptScan",name:"PackageReceiptScan",component:$a},{path:"/AbnormalScan",name:"AbnormalScan",component:Aa},{path:"/Abnormal",name:"Abnormal",component:Ua},{path:"/TrackOnTheWay",name:"TrackOnTheWay",component:Ma},{path:"/MassTransfer",name:"MassTransfer",component:qa},{path:"/CollectCustomerNum",name:"CollectCustomerNum",component:Va},{path:"/UnloadDelivery",name:"UnloadDelivery",component:ja},{path:"/WaybillDetail",name:"WaybillDetail",component:ki},{path:"/AviationWaybillDetail",name:"AviationWaybillDetail",component:Bi},{path:"/RoutingInfo",name:"RoutingInfo",component:xi},{path:"/QRCode",name:"QRCode",component:Li},{path:"/historyList",name:"historyList",component:Ni},{path:"/AviationHistoryList",name:"AviationHistoryList",component:Fi},{path:"/HomeIndex",name:"HomeIndex",component:zi},{path:"/HistoricalTrack",name:"HistoricalTrack",component:Ji},{path:"/RePassword",name:"RePassword",component:Yi}]}),Ki=(a("uKUT"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.Loading,expression:"Loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app",type:"primary","element-loading-text":this.loadingText,"element-loading-background":"rgba(0, 0, 0, 0)"}},[e("router-view",{on:{isLoading:this.fullscreenLoading}})],1)},staticRenderFns:[]});var Zi=a("VU/8")({name:"App",data:function(){return{Loading:!1,loadingText:"拼命加载中"}},mounted:function(){},methods:{fullscreenLoading:function(t,e){this.Loading=t,e&&(this.loadingText=e)}}},Ki,!1,function(t){a("5PmW")},null,null).exports,ts=a("8+8L"),es=a("mw3O"),as=a.n(es),is=(a("6q5P"),a("nFqq"),a("U7mS")),ss=a.n(is),os=a("wvfG"),ns=a.n(os),rs=a("ibnl"),ls=a.n(rs),cs=(a("tOCg"),a("Au9i"));a("d8/S");c.default.use(ns.a),c.default.use(ls.a),c.default.component(cs.Loadmore.name,cs.Loadmore),c.default.prototype.BaiDuMap="http://api.map.baidu.com/geocoder/v2/",c.default.use(ts.a),c.default.use(u.a),c.default.use(d.DatePicker),c.default.use(d.Upload),c.default.use(d.Loading),c.default.use(d.Image),c.default.prototype.$notify=d.Notification,c.default.prototype.$msgbox=d.MessageBox,c.default.prototype.$alert=d.MessageBox.alert,c.default.prototype.$confirm=d.MessageBox.confirm,c.default.prototype.$prompt=d.MessageBox.prompt,c.default.config.productionTip=!1,c.default.prototype.HOST=Lt.state.RequestLink,c.default.prototype.HOSTimg=Lt.state.RequestLinkimg,"Login"!=Gi.name&&Gi.push({name:"Login",query:{}}),Gi.afterEach(function(t,e,a){window.scrollTo(0,0)}),c.default.prototype.TelliOSORAndroidVueMounted=function(t){try{CallAndroidOrIOS.callAndroid("获取当前位置页面已加载","")}catch(t){}},c.default.prototype.androidScan=function(t){if(window.QRScanAjax=this.QRScanAjax,window.TellVue_QRScanResult_Ajax=this.QRScanAjax,this.$store.state.ScanQRCodeInputName=t,!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.VueSCAN()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生扫描二维码/条码",b:t})}catch(t){}},c.default.prototype.encryption=function(t){var e=St.a.enc.Utf8.parse("l5TJHfZrmY38Hf2e2H1h0Q=="),a=St.a.enc.Utf8.parse(t);return St.a.AES.encrypt(a,e,{mode:St.a.mode.ECB,padding:St.a.pad.Pkcs7}).toString()},c.default.prototype.decryption=function(t){var e=St.a.enc.Utf8.parse("l5TJHfZrmY38Hf2e2H1h0Q=="),a=St.a.AES.decrypt(t,e,{mode:St.a.mode.ECB,padding:St.a.pad.Pkcs7});return St.a.enc.Utf8.stringify(a).toString()},c.default.prototype.httpRequest=function(t,e,a,i){var s=this;i&&"isLoading_"==i?s.$emit("isLoading_",!0,"拼命加载中"):s.$emit("isLoading",!0,"拼命加载中"),s.$store.state.userInfo.userToken&&(e.userToken=s.$store.state.userInfo.userToken),e.cellphone||(e.cellphone=s.$store.state.userInfo.cellphone),e=l()(e),e=s.encryption(e),v.a.post(s.HOST+t,{params:e}).then(function(t){if(i&&"isLoading_"==i?s.$emit("isLoading_",!1):s.$emit("isLoading",!1),1==t.data.status||1==t.data.type){if(t.data.data)try{t.data.data=JSON.parse(s.decryption(t.data.data))}catch(e){t.data.data=s.decryption(t.data.data)}a(t.data)}else if(301==t.data.status)s.ReturnToLogin();else if(501==t.data.status){e=t.data.Msg?t.data.Msg:"请求失败",s.$alert(e,"提示",{confirmButtonText:"确定",callback:function(t){try{CallAndroidOrIOS.updateAPP()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"检查版本更新"})}catch(t){}}})}else{var e;e=t.data.Msg?t.data.Msg:"请求失败",s.$alert(e,"提示",{confirmButtonText:"确定",callback:function(t){}})}}).catch(function(t){i&&"isLoading_"==i?s.$emit("isLoading_",!1):s.$emit("isLoading",!1),s.$alert("请求失败","提示",{confirmButtonText:"确定"})})},c.default.prototype.onPlusReady=function(t){"e"!=t&&this.$emit(t,!0,"正在获取当前位置"),"android"==this.$store.state.Device?(this.TelliOSORAndroidVueMounted("获取当前位置页面已加载"),window.SetCurrAddress=this.SetCurrAddress):this.Geolocation(t)},c.default.prototype.Geolocation=function(t){var e=this;(new BMap.Geolocation).getCurrentPosition(function(a){if(a.point){e.longitude=parseFloat(a.point.lng),e.latitude=parseFloat(a.point.lat);var i={longitude:e.longitude,latitude:e.latitude};i=e.PublicEncryption(i),v.a.post(e.HOST+"getAddressFromFT.do",{params:i}).then(function(a){if("e"!=t&&e.$emit(t,!1),1==a.data.status||1==a.data.type)a.data.data&&(a.data.data=JSON.parse(e.decryption(a.data.data))),e.CurrentCity=a.data.data[0].city,e.CurrentLocation=a.data.data[0].province+a.data.data[0].city+a.data.data[0].county+a.data.data[0].town,e.CurrentDistrict=a.data.data[0].county;else if(301==a.data.status)e.ReturnToLogin();else{var i;i=a.data.Msg?a.data.Msg:"位置信息解析失败",e.$alert(i,"提示",{confirmButtonText:"确定",callback:function(t){}})}}).catch(function(a){"e"!=t&&e.$emit(t,!1),e.$alert("位置信息解析失败","提示",{confirmButtonText:"确定"})})}},{enableHighAccuracy:!0})},c.default.prototype.ReceivingLatitud=function(t){var e=this,a=JSON.parse(t);if(e.longitude=parseFloat(a.lng),e.latitude=parseFloat(a.lat),"0"==a.lng)this.$alert("定位失败","提示",{confirmButtonText:"确定",callback:function(t){e.$router.go(-1)}});else try{var i={longitude:e.longitude,latitude:e.latitude,userToken:e.$store.state.userInfo.userToken,cellphone:e.$store.state.userInfo.cellphone};i=l()(i),i=e.encryption(i),v.a.post(e.HOST+"getAddressFromFT.do",{params:i}).then(function(t){if(1==t.data.status||1==t.data.type)t.data.data&&(t.data.data=JSON.parse(e.decryption(t.data.data))),e.CurrentCity=t.data.data[0].city,e.CurrentLocation=t.data.data[0].province+t.data.data[0].city+t.data.data[0].county+t.data.data[0].town,e.CurrentDistrict=t.data.data[0].county;else if(301==t.data.status)ReturnToLogin();else{var a;a=t.data.Msg?t.data.Msg:"位置信息解析失败",e.$alert(a,"提示",{confirmButtonText:"确定",callback:function(t){}})}}).catch(function(t){e.$alert("位置信息解析失败","提示",{confirmButtonText:"确定"})})}catch(t){e.$alert(t,"提示",{confirmButtonText:"确定"})}},c.default.prototype.PublicEncryption=function(t){return this.$store.state.userInfo.userToken&&(t.userToken=this.$store.state.userInfo.userToken),t.cellphone||(t.cellphone=this.$store.state.userInfo.cellphone),t=l()(t),this.encryption(t)},c.default.prototype.ReturnToLogin=function(){var t=this;t.$alert("登录失效或接口验证不通过、请重新登录！","提示",{confirmButtonText:"确定",callback:function(e){localStorage.removeItem("SXJF_USERDATA"),localStorage.removeItem("SXJF_pwd");try{CallAndroidOrIOS.callAndroidTrack("","")}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:"",c:""})}catch(t){}t.$store.state.AviationWaybill.Waybill_SearchData="",t.$store.state.AviationWaybill.Waybill_SearchType=0,t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",t.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,t.$store.state.Waybill.Waybill_SearchData="",t.$store.state.Waybill.Waybill_SearchType=0,Gi.push({name:"Login",query:{}})}})},c.default.prototype.closeScan=function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},c.default.prototype.flashOpenOrClose=function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},c.default.prototype.beforeUploadWithoutCompress=function(t){if(0==t.size)return this.$alert("上传失败，图片大小为0，请检查照片或重新拍照!","提示",{confirmButtonText:"确定",callback:function(t){f()(".el-loading-mask.is-fullscreen").css("display","none")}}),!1;var e=t.size/1024/1024<10;return e||this.$alert("上传图片大小不能超过 10MB!","提示",{confirmButtonText:"确定",callback:function(t){f()(".el-loading-mask.is-fullscreen").css("display","none")}}),e},c.default.prototype.beforeUpload=function(t){if(0==t.size)return this.$alert("上传失败，图片大小为0，请检查照片或重新拍照!","提示",{confirmButtonText:"确定",callback:function(t){f()(".el-loading-mask.is-fullscreen").css("display","none")}}),!1;try{return ss()(t).then(function(t){return t.file}).catch(function(e){return t})}catch(a){var e=t.size/1024/1024<10;return e||this.$alert("上传图片大小不能超过 10MB!","提示",{confirmButtonText:"确定",callback:function(t){f()(".el-loading-mask.is-fullscreen").css("display","none")}}),e}},c.default.prototype.uploadSuccess=function(t,e,a){},c.default.prototype.uploadError=function(t,e,a){alert(t)},c.default.prototype.callPhone=function(t){event.stopPropagation(),window.location.href="tel://"+t},c.default.prototype.BubbleSort=function(t){for(var e=[],a=0;a<t.length-1;a++)for(var i=a+1;i<t.length;i++)t[a]>t[i]&&(e=t[a],t[a]=t[i],t[i]=e);return t},c.default.prototype.getFocus=function(t){this.$refs[t].focus()},c.default.prototype.clearInput=function(t){this[t]=""},c.default.prototype.toWaybill=function(){Lt.state.Waybill_needRefresh=!0,Gi.push({name:"Waybill",query:{}})},c.default.prototype.toLogin=function(){Gi.push({name:"Login",query:{}})},c.default.prototype.search=function(t){Gi.push({name:"Search",query:{thisPage:t}})},c.default.prototype.typeSelect=function(t){this.typeMShow=!0},c.default.prototype.selectCancel=function(t){this.typeMShow=!1},c.default.prototype.Navigation=function(t){event.stopPropagation();var e=this;this.Navigate_addressList=[];var a=e.shipmentListData[t].issueAddrLiat,i=[];e.$emit("isLoading_",!0,"拼命加载中");var s={shipmentId:e.shipmentListData[t].shipmentID};this.httpRequest("queryDeliverReceiveAddrInfo.do",s,function(t){if(e.$emit("isLoading_",!1),t.data.length){for(var s=0;s<t.data.length;s++)i[s]={issueAddr1:t.data[s].receivePartyAddr1,issuePhone:t.data[s].receivePartyPhone,issueUser:t.data[s].receivePartyContactName,ORFlag:"收"};e.Navigate_addressList=a.concat(i),e.Navigate_addressList.length?e.typeMShow=!0:e.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})}else e.Navigate_addressList=a,e.Navigate_addressList.length?e.typeMShow=!0:e.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})},"isLoading_")},c.default.prototype.Navigate_SelectComit=function(t){t=t;this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}},c.default.prototype.MultiAddress=function(t){event.stopPropagation(),null==t?(this.address_listData=this.shipmentListData.issueAddrLiat,this.currentAddressInfo=this.shipmentListData.issueAddrLiat[0]):(this.addressWaybill_Idx=t,this.address_listData=this.shipmentListData[t].issueAddrLiat,this.currentAddressInfo=this.shipmentListData[this.addressWaybill_Idx].issueAddrLiat[0]),"NEW"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="新预约":"YI"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="已确定":"REFUSE"==this.currentAddressInfo.appointLoadingStatus&&(this.currentAddressInfo.appointLoadingStatus="已拒绝"),f()(".MultiAddress").css("display","block"),f()(".addressHead>span").eq(0).css("border-bottom-color","#5965D8").siblings().css("border-bottom-color","#eee")},c.default.prototype.closeAddress=function(){event.stopPropagation(),f()(".MultiAddress").css("display","none")},c.default.prototype.address_SwitchView=function(t,e){event.stopPropagation(),this.currentAddressInfo=e?this.shipmentListData.issueAddrLiat[t]:this.shipmentListData[this.addressWaybill_Idx].issueAddrLiat[t],"NEW"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="新预约":"YI"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="已确定":"REFUSE"==this.currentAddressInfo.appointLoadingStatus&&(this.currentAddressInfo.appointLoadingStatus="已拒绝"),f()(".addressHead>span").eq(t).css("border-bottom-color","#5965D8").siblings().css("border-bottom-color","#eee")},c.default.prototype.setItem=function(t){var e={name:"",value:"",expires:"",startTime:(new Date).getTime()},a={};if(n()(a,e,t),a.expires)localStorage.setItem(a.name,l()(a));else{Object.prototype.toString.call(a.value);"[object Object]"==Object.prototype.toString.call(a.value)&&(a.value=l()(a.value)),"[object Array]"==Object.prototype.toString.call(a.value)&&(a.value=l()(a.value)),localStorage.setItem(a.name,a.value)}},c.default.prototype.goPrev=function(){Gi.go(-1)},c.default.prototype.getItem=function(t){var e=localStorage.getItem(t);try{e=JSON.parse(e)}catch(t){e=e}return e&&e.startTime?(new Date).getTime()-e.startTime>e.expires?(localStorage.removeItem(t),!1):e.value:e},c.default.prototype.onError=function(t){},c.default.prototype.stopevent=function(){event.stopPropagation()},v.a.interceptors.request.use(function(t){return"post"==t.method&&(t.data=as.a.stringify(t.data)),t},function(t){return s.a.reject(t)}),v.a.interceptors.response.use(function(t){return t},function(t){return s.a.reject(t)}),new c.default({el:"#app",router:Gi,Axios:v.a,store:Lt,$:f.a,components:{App:Zi},template:"<App/>"})},OCRG:function(t,e){},OhoF:function(t,e){},Q0IC:function(t,e){},QDfD:function(t,e){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},Ro8Z:function(t,e,a){t.exports=a.p+"img/zfb_logo.7ae63c4.jpg"},S2TK:function(t,e){},TSYN:function(t,e){},UZ1n:function(t,e){},"Ub+r":function(t,e){},VQ3y:function(t,e){},YchS:function(t,e){},Zj4f:function(t,e){},b2XV:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABN0lEQVRYR+2X71ECMRTEdyuQDqADtQKhArQCxwq0FK1AOsAOwA6gA+1AK1hnmeDcMPHygnCfko/c+/PLssm9I4JL0i2AVwCjQMqM5DoQB0aCHJMAFgAuAjmnBwg0PSokrMBR1QNJWQBJGwCXgfyakA3J68OEIQG2JK+iAHa6XWwVrIZN9VWzXUmusQLgplsA01yNPz0gaZKa2/ULkg+VAG8A5gC+DUHyI5ffa0JJprcSVRCSfFzvU3Pv3CpmV/EUHEC8kHzqU0LSM4DHSHPXKQJ0LqElgHeS0wKAFbsBcEfSf0PvigK4qQ1VAxC6DRtAU+BfCkiy40Vytrd6+s2n4PwmlKTdWSZ/N9IAhlZgN/d1b8dBAXJ3bANoCjQFmgLnVqA04nWfn+5tmAZTz/XjIMEnSX9XFNcPHYwoMMvZ5+4AAAAASUVORK5CYII="},cGYK:function(t,e){},"d/PR":function(t,e){},"d8/S":function(t,e){},dO1F:function(t,e){},daAn:function(t,e){},eYl9:function(t,e){},ejIc:function(t,e){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},euiG:function(t,e){},fdDa:function(t,e){},g9s8:function(t,e){},gte8:function(t,e){},hFOO:function(t,e){},i1Yn:function(t,e,a){t.exports=a.p+"img/input.1ac59c7.png"},i2d5:function(t,e){},i5pW:function(t,e){document.addEventListener("plusready",function(){var t="plugintest",e=window.plus.bridge,a={PluginScanFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginScanFunction",[callbackID])},PluginUpdateAPPFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginUpdateAPPFunction",[callbackID])},PluginGetUserFunction:function(a,i,s,o){var n="function"!=typeof s?null:function(t){s(t)},r="function"!=typeof o?null:function(t){o(t)};return callbackID=e.callbackId(n,r),e.exec(t,"PluginGetUserFunction",[callbackID,a,i])},PluginSetUserFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginSetUserFunction",[callbackID])},PluginPrintIosFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginPrintIosFunction",[callbackID,a])},PluginNavigationFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginNavigationFunction",[callbackID,a])},PluginTrackIosFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginTrackIosFunction",[callbackID,a])},PluginWXLoginFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginWXLoginFunction",[callbackID])},PluginTestFunctionArrayArgu:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginTestFunctionArrayArgu",[callbackID,a])},PluginTestFunctionSync:function(a,i,s,o){return e.execSync(t,"PluginTestFunctionSync",[a,i,s,o])},PluginTestFunctionSyncArrayArgu:function(a){return e.execSync(t,"PluginTestFunctionSyncArrayArgu",[a])}};window.plus.plugintest=a},!0)},i8Kb:function(t,e){},iDaE:function(t,e){},iQH9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN0AAABsCAYAAADuUrfKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZDQ0M2NhNy0wMzc1LTkyNDctOWMyNi1lODU2NjllMTc4NGYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTYyNUQ0MTg2MTAwMTFFQUFDRDlGQzUxNkFGNDM3NzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTYyNUQ0MTc2MTAwMTFFQUFDRDlGQzUxNkFGNDM3NzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmNmODc0NjY0LTI3MzItNWY0Ni04YjgxLTkyNWFkMTA3YTVhNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ZDQ0M2NhNy0wMzc1LTkyNDctOWMyNi1lODU2NjllMTc4NGYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5kPptMAAAcSUlEQVR42uxdCZAc1Xn+X3fPzN7SohUSEiAhIIAUJIHFkbJNCHFCSIWkTGIbQxWkcHBwKrYhxk6KhNjgGAGFi2CIywUBBBTCJhBuYyFUAikCcUqc0upAQtdKu9r7mLP75f+73+z0zM5098x098zuvr/0a2anZ/p1//2+9x/vf/9jnHOQJElSeKRIEUiSJEEnSZIEnSRJkvwjrfCDDSP9sH64FzQWMB4Z/cfFa+F729eYq88ZQ25Ajor7iU6iAa8JOYO8DzkefJMcOD5XvaURYl290P7KZvyI5G4JPpVKwUUXXQSLFy+WyAgTdGuGjsJtB7YBqJHgQccMG/hKADAfdASuU5HPxOMn4SvxicjHIs9EpotW61jeTFwj8RDyVuSnkI8EDjoFm27A8SmjQ2RdJ8x+eh20vvMpcE0bB93Q0BC0t7dL0IUNugZFMQHXqGohgI67gg41XQu+/BHyHyP/oQDZMZNY5geRXxRgewfvczBYOTMwGglsGWh9txM6XtgIzVs7gekGGMdMFGM0GpWoCBt0dUQLkK/gnH0DX5dCUeNz0hCp69eRV+Mg8hK+HgreeEWwoWZjqNla3/4EOp7fAC1bdyDYdNBjMeBRJnu/BN04zUK+DrvptQJ4k5mGkX+L/DAOGevJbQregGWgN0ZBsYGtWYCNQAjRiOz1EnR59KfIt2PPOWuSy7VXmI8PopJ7J5ywTE6ztaGv1vFcVrMZoDdEUbNJsEnQFXQZ5B+hdvt3fG2cxPLsR34C+Veo2T4KFWxp9NneRrC9gGDb0glAPhuCDaQZKUFXhCjkfzdw9p1JLMck8m+Q/xMY3xJWoxQgMX021Gyz0IxslWCToPPY/i/QnPz2JA6RrEOgoUkMr4bZLM21tWzZAcc++Sq0fLDDnAowo5QSbBJ0LnQzdtrJCjia0F5pBkksTRci4Jqg9b1PYcHPVoE6NAJ6c6MMkEjQeaKvokn5r5NUbo8i34pqbnfYExl6a5NpTp64chUoiST+3WxllUiazKBjNg6M5mFHuRPqO3ukGNH82k3Ij9Ri1tAE3Lvb4MTbUMPFk+i7RSTgpgTouI2DoxsR1KdMMlm9gvxP6L99UgO/EfQ2C3ALbnsYlHjCCpZIvE0h85Izi4Oh05H/dpLJiaKSN+PrSC0azwLuRALcWFICTmq6sulbyO2TRD6jyP+CpuR9tbqAPJNyLGtSyo4rfTrvRKsBvjpJZNODfC328OfqA3AJCbipCjou/gvIP78A+eRJIJcDyFcyBhtqBriWnEkpNdy0MC8D8+n+ZBLIZD/y19GH2xzI2bNLmegNL63hWt7bbjMpozJKOeXNy2BAR+leX6hzedBi0st9BVxWjIoAjUGyVaz1g6puLSDNyhqBpTfTxPd2oeESEnDTRtMZEET1lIXI8+tYFrSY9CoEyRtVn4kARvLTmQAZ/htuNMFmjDbg53gwkgHWlACG32UtCQuPsZiZ2mUCblQCbhppusDMSwLcrDqVA6oc+B5qn1cq1mYENEPIbCRmASsRA57SUJQ00aZaX8yWn0hGgCei1rHBZusimpuhadNGiPT3Q6ZtRk0Ax5jM3ayBpgvMvDwW+1y9Jgj+B1Bq17iZZ/1nel6KMAOLgSxbViKFgEqgKEeiFtgyKuKFyl7kiv6Y7wuduCwAMyIxJ62CoSEQNbVmGk6nleW6LpHhEymKMmEgCzP38tQ6jb49ZYKO2cxruzOW7fz2mRQ0G9kYgQyZNJkAmgWyLCgN7zMvWfCx4FOBnKgZNe0DDzwAq1evLjxEEeflyMcJx+M95E0SUs40OjoK11xzDVxxxRU1My+X1KFctiF/Hzt7pmRf5yLwYaDvlcL3AyiyhIrvNSvmRFW2TB/OsPnBk9NEo1G5t7cXuru7sx9RtbUbkf+qwB9fLUHnTsPDw9Df318z8zIKVum8eqI43uT3gZKYS90riQH9NDasgjKEZsKogthkFqY0odUUmNwlkwpIVVWTkS5BpkycRUW+9skUuNUJto3fRJXVhCy9aDrfL4VGybl1JvS7Ue5rSwdGrPCKMsxA6RPIUoQvx2BqIW0iUa0aKjsxo8TxHSFfD+XrXoV8Bli1T6vtndTvdyLfALliUVT49+tgzSXPFD2AVwlqRcQLNrpoukDMy9PASgGrF3oX+U4oVj1aiEoZRLANoHZLoig04W9Nj8jePKHhSgGOoiz7Q7yeryHfizzH5/PS/aXFe/JVV4nBxm/6uQdNF4h5uQjqpwgSrfK+CW9wMO8eRdCDJQhwaGahhjMhqU51pTaBvuHiClCls6MhXcvZyPcLzeM37RIqRrOsnkAAN4bc5cGngyByL0+vo071KCqstYVurCmMPsRYH7OSA7RpB7YsXeJynMpUHAnpWq4LCHDZ+yBaIQaaQGIpABMreIcRvSRdcWaddKhDCKSV5kaYdH+KFRQhEzLSZYCStAKVNd3LqLzRjgkfp1r/IzvcUgc/0VWGlonZ5FMwIwPFa8zQPb0GVhn6dJnnpe9T5PXvHZ7m5zZg/FjcEy9TXsRXOyiVw+L8bprOd/OSHuTCOgHdPXhje8xnrVmmpNZngDoktHsdmJJluo2LhS/S4hPoKD/Wrao27Sfxjk9DE0n8MRFsKCSyN1ZXce4LhaYsRQfF6ydQXTT2YgfQdXkDnR3D/hBNrHbUAeA+RX4g26vVfgMi3RyUBAeDpKDV3pZUUkkYWHYezF7/MqjxMRwEVC+yXRHyZc5wCLJUQkHtVrTEYQjNCN/UD1k4BQiPiLa8+HS+arozxEhcYxUCd6Pp2K8kOUQQcFqvYZqSvI58N2YYkGrvgMScedCya5sX0B03BXzIbS6a8BrRT3cJzUHmbZ+H8zqZyX0F5zgP+SLkTqEBDwnT0M2sne0yABX1fUtELxU/QVf7AkQKbMHB5NfasAHRrgywFEew1WGUBEFnNDbC0QsvgdYdHyMIdXwUqtuANtnpsMMxSqr4AVhTTlmwZEGxTwB2uwAjdfBu4ZsRzXM4b2+BpqNt2H4m3ifE+Q6K1x3CStoLVjUB+mzEBrpjXPxfD6Dzt0YK2f2/X1vAMR0y/I5od2ZEG9DNK+J1XPhPTcRhYOk5cPCyq2HeC0+YO6c6OHo0gf2WraNV69N9F/nLDt+hTnez6LCKD32DOvhOh++QhWTf2+IYwWcWMVEpMPI3wj9jLi4NTXnY87Psc4ANIghzUhH50H3THOYtNtA1Oshzf5mazpcQHgqN1y7nkia5x4wjsf0pBc3KSyDKSKARM2hiH1oYWIsKGGQXdRcOOzEonjZUanjiwjSKFHyWlTl13t8VBQulcWbScOQrl0Jr50fQuv1DMKKxUnf4lmC/yK3aNpl490N4WdlzPbom1PFPsF1XqwCEE+gyBWaiu4NiAbnZ9pmTP0cDygGPoPNVpCgIVrtMFAOHrT2pOZHBzCNGBO20DGdoNTMKmjABSq4ycxfm3FQBLeVhPLsVN6dFpjS3QO/ND5WcjMwvmMet33MbNO3aaaKmWo1ffsnJzKR2es+7ANo+fh+NrFgY0moD9+mC/RDuMogF4H3X3X02k3GmCyAOFWi2hWVck117He8SIOr2bl4agqsPXiwVDzN0oux/BBtow7rKVQQcswMFCkqUTAAIs6tLnjtp7kdMZKzQcQ62c7K8gYszVjiQkWQfcoveKKk0xOcvguSceRDp77X2Bg+WqAO5lUY8FPJjTAvtmtUwEZegxYANdLNdAGrHwAEBkFZw36qty2OwhszX0TJ8Ot+il6fXLDaI16/1ZEwDjkdzYLDwwcZtSPM+BVi4DYBcAJSPgwtyv2G291BwvEDbFZnrfh4/fc29u2UgPm8hJDvmQrTnSBigO8ED6D4P+SmuQz5fgIh8rN8TWok04MnitU0EXKiTJ22+X4PH+6CgyDUiCknR4FNF8I/ksUjwsQL0hg10qgvoDkGJ4sRB1r2k3liT9C/ScujLAQVO6L21HIdZ44iJMZbTQCwfbAB2gNrkYFeAXGgwm9YbH6yYTetNHLgoJehW7iHwoTc0wZxXnoGWXZ+atVNCoHngnB9LHW53yI8yY4s0Utv27chmiEGCgiDLC/yn410CRoUae0QwRSzfLfDlqY1ZAoh03k5bZNXNhI17Ah0XnYdXr+naahW5JLBo/TooaW76bIW+qv3WxjVaYWhEgIdnizRxW9dTC8xH+zGWG7tYtq2ctqOo1xbnAY0jyBoh1tsNc9Y/b00bqKGEW09wOU6Bgc+gfmhQ8N4iwSSnrJoRmxnqRqQ5DwsuzFppd3GdukodCDIjZa7LiBMYMQRbpC9tC2AIYCjMZgaygnVxLN8Hy2owheUUHMuZormgiU0r2o0EDoXWwn/jn/e4CZYAFxnohUUP34X+6AAY0cawYhduRYD7wZ8sjjDIyezrKQN0TjTHBXTd3kHnX+4labnQM1HMAMpQBtRRYVoyyJmW43MBLKfdGLMBJ6eisr/LysH++zwz0g5ebgdcnhZ8Ahi/XujNkhpOR8BFB/rg5AfvgKZ9u0FvbAoLcJoH0FHwYbgOAcaE33XYFrg4zgUMfRW00yGCLPs9gu5gGaADq5ScwaoVxVKoRb4+BVD6M8DQazI0luejActqI5anBXmeL1sYgRSA5Szff2N215XBeARFmJg2wP0XAu5HYK2tcjApmxBwvQi42xFwuxBwzWFKrQGcMzhARBFH6wBkijAfKV5AyddfEKD7S2ECRsB5mqHH430cI4I35yJ/SbTzLNCGMjnQlbL7U+WBzq9ACjcjTaGPeUqKm1MFplloNymzmo3bBhcGeaZlnmnNYWIABfI/43nnsQVZLG25H9/cKsxKZ1FpUYj2dcNJq+7yCjgmOoXqgyrURQd2W7fWL/wYv8Kog5ArleBEEeGmkOVEe2EsFYETexDjMOTWrc0C52yUHgdNRiD7IlhJ5MtEtDRq+05fgXlZikbLBJ0vPh1FlkLPCyRzUkPTkiUNMFRWXHuB0OQqy49c8iL+Xc6Zy70Uajy7uWnRUfzjcTx2L2o4T9E+IxKBuWufhtbPtkG6ZaYX4c8Wo24HVD+jagg3wA1030T+ClS/ey4TYLscnJfUUOj+WrBWjy8TYGIOpq9X0B0s6P9Xi/s6C6zpiJjH4MjxLqDrK8+8rN6nmws12J2HIZgiA2mznEmubqxtJlzJBUqKTozn/U78rIgmG496wrgPR6bjNnx9Bv9+Gnm75x4fiULT/j3Q/sFmyDS1eh3tFojROMzivbPBW7qUFxr2YOJdivxDj+frsp2vHZznG+0ZJeT73Qbe6vekIZecTSauU7SX0sziYWu6JaEHURBMLMFBG9GFP8Vs0wUsT4uZtSrBFkhhuUCJdeeM5ocy+EUDPyJNoKPWS+ORDIobW6HoF6N5mM/wsx3MgM3Y1nb87ki5gjNiDTB70xpQR4fK8eNOChlwftMeyE84LgVyrzRg0/izHWIJ9HDsE+MzwXvGlGEDXdRF0x1w8uGDil6GvjsPVxSIDCfRpzMsUGUjj0qBmWhFKxGZOBoxtkcZ03eDxrr0mNqDYO3Gz/tRvP14bARN1ARTCHzmJK1uApEAySCJ5xrBM2U4q3x0okTm2W+shfb3N5pTBWXQQr/FB+FmDu3xEAn1Uv2LTLgPkJ/3aPalID+UPwucM1eIkuJ6X7UBthGc9+U4AA4JEEHUSGEQdiEiZo1D5M9xyKZuid1yuNBsChvCvzfj32+gz7cB9cRerqhHtZH0sN6AYmhQ80P+YUTqEdEzt74J2tgImpZlGQa/FR0g5QPYaNSmtWRO6x7J97pFmFjVgpM09E4XXzRSAjw9AmQfIW8Q17UP8musOFUyI5NvyAWgdK5O0cbbyG9Cbi2d3X1y8hu7nQRQXNMZVWWkzIIaVP+iFeEqmZaKYtsbwLQyduM9rcbu9RTTjY85Uw1mr3bGWE1XjhvRqHXN5dHHgv0gmgy83eU7tHfB/4QollZhQveIzv++AFknWFkxGRdttr3Id1Txe7tZe5rQSB+CtVB1o2iL2nBKBCA/YAcUL3yriHOVAbrqfbr5YQdRqNOqI8K01MSAoShD+PILvI9fMc4PcpBbQDn4h27LZ/aHfE2UcvYPot3OMnvjT4EKCU/UpNmoqb0k3jPIawSwB8tog77/Zw5212CZmq5q85KCKLHQHs+4aZkWl29OZuPIzL6Hf71Rz72dIpdcrXkN3oUegl4HQr4mCkKsrfC35YDn/QrbSELxsoGeKIgKz+eG688xNC0N9ItE1FJRXmSM/x0PryBqRUSRypbdn0Dznu0m+Gqs6Zzm3jKQv/5MUpWklVYfrNLzLQ7VtKQVBQg4mhDnUWUdV9nVTOd99WxNEuCa9+6ARQ/eCREzqdmPPTGqcgeciAIPe+pIfKoIYrAS/hQNEn3gT90YFUpn/ggby/T99OpAN557WdFFzsNLOQ3CRR1ow+aKgp1cU74FlSWzhnatepMFuJMfugOvuz/MVQSlRtcFHkB3qI6kSEWJ/lcAwSjSnyko8tc+ge40EUBqKdIWtb8XrJ1+DlcJuqrMS/IPTgizy1CupRbXEzyifhc/+NwKrKhgFj5htezPRQDXjID7HDUcAW6o35qb4zW9wCaYWPWqkChtarSOQHe2yzVvEYEYP2iui+VGmScjtTYvl0OIYULy4dRkBpS4/gC2uoZl7GvhDLPUnhFV8goq1BRwZFI+dCdEB/vNZTw1BhwRhebdihHtAucQfdh0lsvxN31syy0r5oA/oBPzdBUt7WF8RZgdmYIo2kj6YGQoddcElWZugsQg06ZCpkWrKeJMk/LzTlPDRYb6LMDVhwqmHEW3Euk7oL7IbfXKez625bYIu8vHQEqFpgpnoftzDYdHH2roGdtnaBMnmJnBITKgQHx+I6TbI8D08KMrFCQxTcqHEXCDfSLdqyLAkVZqBn/qtIHQXpSu55Z/NibA6Veupyq0Q6k0sOvBWl5TmG1D901TUec4iRtoD3mAK6vs21z4hG5KhNbZrYL8jdVITpS4sBJKlGX3Mw3sFA+jkI/+HCOz8misO/4Y0w1zV+KiT3g0A43742A0qNa+BWGOCaoG2tgQnPTYz9Gk7K1Ww1Gq1l9A9alfWaJORZE5t3SYG8FaYuNXoRaaH6EMmPuLHCNQ0V5x51d4brqXPw/xES8u4fM1QTm5l1wAroI0MNJyM8MDHV58Qt+YnN20MzHHOTufYiqQpB8YofpRpOVmb3oJYj2Hql0JTmg910PQIwiaD+7TCuVSqQz8GaH2oeDIMbfUzzSw80O9LRxH0i3RJwcWe1kKZWUyq6kMREdHQB1L5hcgCgJwkRj6m4PQsXkN8EjVlhnd5FTYoYcom1BcjEjznjwF7vFomYGUisxLUutnh3xj+xBHG70NDta9ZCi5GFpATaQD1Xhci0Cs7zDMf/lRiPb3gKFVnXHSIbjc3ULdRiIvG4X5GbkkEzW7804xIj/vHpg42ZNd/3G5S3CDVtNv88H/pHueK9prcLjWx8FKO1NtHY3erys/kFI+6E7AH4Q9Qm3GR3GwPIvUAD0ShVRTE0RTI4FNJdA8YWSoH9q3/h9k/CkwtBesSVi/gii60J73uphzlAx8N/hUfVgMzhREKbX0hZ5nqdXiM138NdKgtPxoq08yoiDKNx2Ofyb83bLnMP2aHD8jALvfDULPVvQrnUOquQX0WBQakoMBXRs3Vz7o5S1MdSJKNXrJ54s8BfKL7hSjDQJ49UAUM1jkcJwSI7p8bG8+OCfuU25vRZPwfvl0y3Lb2YRCe3Hcfa3iCAzZD5EGyOhJiPAE+BeYm1REUbcml+901dH1LgLnVd7kJ/b42J6bD30EKkw180vTfSnkB/A7HBSq6hB0d8nYDGhQRmqfsVIbcnMHuM+d2A9zD1zMPcPH9twixRXn+BbXdEZZoOuAcMvtpfDiHvfjRAZquHS0BTQ+PB1B59apSCiH6+RaqTMud/nOzpDlM+Qf6Mrf/ng5hJnkDPA6PoO3/TiRohsQn9EGKo9BxBipRT3qWpJbRWdatV0vKWA0sDtFLcnM8zP9S/VgXu7xD3TlL2Jd5sEh95MeBMb9ycqgWikaajtoMbccViGOH00L5LV5GCgfrmY095lOAedAHW0lvcXH9igC1u7iz633WdOVBbovhij8txBwL/q0YeX4/ZJPl1EQeDwB04RoEtppdcEqoD0Y6sv/LDX3QvNyP4AqyicUIVpdMMNBq/4bWNM4lVlYJTWAN6a5k6UhCv+XCLjRvGCPL0zVZKMozUZRW3ZagK5Y3UaaQ/sJ8nfAvzVpflCpmMELYFWC7vS5vWNLgI4CS98G2p+iCqp2A5HlCLyw5uc2IT8VZAMZylZh00LbUWJ6pCAoQMVU7wJ/16P54nojf9n2tyH8t1+ClRGSDqBN6tOtBYMRAZyqjFU9+V5tIIWWWTSEIHgS9B3guN1U9Xamjq6pzmOgIfCmeMm+LtM3trIpKNT+OvIHjDGeSCQglUrVG+jWCjOSykZQEG0jVLB4tAw6IgZ4Gox2iQHpnXJPMjQ0VFSWJRaxKhY7E9llYc3PUZ2Kl4LGgVlpBkEHU1/bvS44j+LxOFx22WVwzjnn1NO1Uh7kT0Nuc5PgqiidTsOSJUu8mJfg1bREu5cFv2cBNzO2bzG1XQhz2BnejJouDoylYboRjcorVqyASy+9FCQFR9UkPNP6rjnBXyJfKUyLcIirqO2ioEJq2nUGNC8hmUxKVIQOOu8+3Xngb7mHYrQGu0LooeuM3oSOxJjsHZLC0nSeJscp8hX0/Bw6+/x6c1uqkMkwIsANEo0OIPdAkBSOpnMF3ULsi8sCdZ45XG/uaFqLXGSugZFpBCU2bEYxJewkBa/p3OfpLgDO2wO8LirC82RtHRxD9g5JYYEOrFkxpz7HaClPYOP/alQ1t1kap3Y6Rk83AuNxYFLNSaoD87IDtdwFAV3Pq4jlf0RA1zh0yNC8bBAy4LKXSAoWdFxELh3q9qzATrkwgGvZhH39Kga8vz5EI8EmKUyfjjv6dBeD/yvPKN/vcmy4Sz4SSdPTpyttXrbhgQt9vgZKR7oSMX5QPg5J09inK2ldnYUa8Ewf238OqGQ34z3yUUiS5mVRTccpKc+v0ln3YVP/jCxTPyRJTVdC080Exi72oU1aknETNnCvFL8kCTq7tpsYSPkDBOKSKtv7APkGNCfXS9FLkqArpu3y6WtQ+Yw4TbXTEvcf4xkOS7FLkqDLA1xRn45qAF5SYRtUpelW1G7PSnFLkuR9yoC03Nwyz92HWu0+PNE9UEU1XEmSpolPl2dqUsWvq8o4Zxz5Nwg42u3lQyliSZLcQEcl1fPLqtN2QV4CKFTE5Xn8IVVpelOKVpKksn068y8qx3CDyzn2gVU56RHUblKzSZJUmU8H2T3Hf4J8agmttpnAxhh/GV8PSFFKklQh6DIU3M9AB8/A9fjuOtsh2jDhU7A2J9yU9dfy4i2F74sdG/+cF3nPLa4HwutI6Nyq+MxtOeBcGb9n80+z1LX93jjV8cPf6maRH9occrIsyqPr1XVdoiJs0B3Xxk5bPE/5IYsxKpf+a+SPBL9fNCl5Akj4RHBNAB19ptg+z4GO1QXomLnHZaStEV94PugUNnEw4WYRsfF71qNRaOyYCQvOOMMC3SShsbExaG9vl6gIfDyfuHBOFZyS4pEkKRzQSZIkKUBSpAgkSZKgkyRpStP/CzAAln1PpiT6kIoAAAAASUVORK5CYII="},jckB:function(t,e){},jjfT:function(t,e){},"kB+v":function(t,e){},l9IN:function(t,e,a){t.exports=a.p+"img/ad_pic_2.aa96f5f.jpg"},m4tS:function(t,e){},m8A4:function(t,e){},mjee:function(t,e){},n55d:function(t,e,a){t.exports=a.p+"img/ad_pic_1.45c1b81.png"},ndWM:function(t,e){},ohDP:function(t,e){},pwZU:function(t,e){},qezu:function(t,e){},r58W:function(t,e){},rGXg:function(t,e){},rVXd:function(t,e){},"s5V/":function(t,e){},sd2v:function(t,e){},tJy6:function(t,e){},tOCg:function(t,e){},tvR6:function(t,e){},u3rR:function(t,e){},uKUT:function(t,e){},vbeE:function(t,e){},vdeg:function(t,e){},"w/nK":function(t,e){},w5HQ:function(t,e){},wTQA:function(t,e){},wkB4:function(t,e){},"zz2/":function(t,e){}},["NHnr"]);