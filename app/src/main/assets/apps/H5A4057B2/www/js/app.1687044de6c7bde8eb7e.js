webpackJsonp([1],{"+ZpJ":function(t,e){},"+fNJ":function(t,e){},"/HEB":function(t,e){},0:function(t,e){},"0YSe":function(t,e){},"0rMw":function(t,e){},"0xox":function(t,e){},1:function(t,e){},"18x3":function(t,e){},2:function(t,e){},"2ZT8":function(t,e){},"2iQ8":function(t,e){},3:function(t,e){},4:function(t,e){},"4Vh3":function(t,e){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},"5KeO":function(t,e){},"5OBz":function(t,e){},"5XjF":function(t,e){},"6ZSt":function(t,e){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},"6q5P":function(t,e){},"6rOW":function(t,e){},"7A0F":function(t,e){},"7ADV":function(t,e,a){t.exports=a.p+"img/defaultHead.fd63503.png"},"7Khc":function(t,e){},"7TPc":function(t,e){},"7h8G":function(t,e){},"8YCc":function(t,e){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},"939u":function(t,e){},"9Py4":function(t,e){},"9n+I":function(t,e){},A5uk:function(t,e){},AbpN:function(t,e,a){t.exports=a.p+"img/lon.57a382e.png"},Ae3X:function(t,e){},BRZt:function(t,e){},CSxH:function(t,e){},Ch0p:function(t,e){},Csmu:function(t,e){},GC0Y:function(t,e){},HrtS:function(t,e){},IEtN:function(t,e){},ISAU:function(t,e){},K1CS:function(t,e){},KYqO:function(t,e){t.exports={_args:[["elliptic@6.4.0","/Users/89010955/project/CY/TMS/SXJF/SFKC_driver/sfkc-dev/sxjf_second_phase/sfkc-driver-app"]],_from:"elliptic@6.4.0",_id:"elliptic@6.4.0",_inBundle:!1,_integrity:"sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.0",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.0",saveSpec:null,fetchSpec:"6.4.0"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz",_spec:"6.4.0",_where:"/Users/89010955/project/CY/TMS/SXJF/SFKC_driver/sfkc-dev/sxjf_second_phase/sfkc-driver-app",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.0"}},"Kqn+":function(t,e){},LK59:function(t,e){},LvoK:function(t,e){},MLBd:function(t,e){},Mlcx:function(t,e){},N3cg:function(t,e,a){t.exports=a.p+"img/loff.f501e5e.png"},NHJI:function(t,e,a){t.exports=a.p+"img/WePayLogo.ac49e82.png"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};a.d(i,"loginUrl",function(){return P});var s={};a.d(s,"setPwdUrl",function(){return Q});var o={};a.d(o,"getYzmUrl",function(){return X}),a.d(o,"validYzmUrl",function(){return J});var n={};a.d(n,"deriverAueryShipmentData",function(){return et});var r={};a.d(r,"abnormalOrderApp",function(){return ot});var c={};a.d(c,"selectOrderByClientOrderNo",function(){return ft}),a.d(c,"checkUpdateOrderNew",function(){return _t}),a.d(c,"getConfirmFlagFromOrder",function(){return gt}),a.d(c,"checkUpdateOrderQP",function(){return bt}),a.d(c,"lanShouSaoMaGetImageApp",function(){return yt});var l={};a.d(l,"getFaceListToScpPrint",function(){return Tt});var d={};a.d(d,"selectOrder",function(){return jt}),a.d(d,"updateCheckWt",function(){return Xt});var u={};a.d(u,"airlineMasterNumberGetImageApp",function(){return pe}),a.d(u,"airlineMasterNumberUploadImage",function(){return ve}),a.d(u,"airlineMasterNumberDeleteImage",function(){return me});var h={};a.d(h,"reportAbnormalQuery",function(){return we}),a.d(h,"abnormalImg",function(){return ke}),a.d(h,"abnormalAdd",function(){return Ie});var p={};a.d(p,"getImagesByOrderSFNoApp",function(){return Ye}),a.d(p,"fileUpload",function(){return Ge});var v={};a.d(v,"queryShipmentData",function(){return va});var m={};a.d(m,"queryDeliverDetailInfo",function(){return ma}),a.d(m,"updateReceivingStatus",function(){return fa}),a.d(m,"updateDeliveryScanNumberBatch",function(){return _a});var f={};a.d(f,"abnormalImg",function(){return Hi}),a.d(f,"reportAbnormalQuery",function(){return Mi}),a.d(f,"abnormalAdd",function(){return Ei});var _={};a.d(_,"updateDeliveryScanNumber",function(){return ds});var g={};a.d(g,"queryOldShipmentData",function(){return Ps});var b={};a.d(b,"queryDeliverDetailInfo",function(){return Fs});var y={};a.d(y,"historData",function(){return so});var L={};a.d(L,"upadtePassword",function(){return co});var C=a("woOf"),S=a.n(C),N=a("//Fk"),w=a.n(N),I=a("mvHQ"),k=a.n(I),D=a("7+uW"),T=a("zL8q"),x=a.n(T),$=(a("tvR6"),a("/ocq")),P="/leaguer/tmsApp/login",B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function A(t){var e,a,i,s,o,n;for(i=(t=function(t){var e,a,i,s;for(e="",i=t.length,a=0;a<i;a++)(s=t.charCodeAt(a))>=1&&s<=127?e+=t.charAt(a):s>2047?(e+=String.fromCharCode(224|s>>12&15),e+=String.fromCharCode(128|s>>6&63),e+=String.fromCharCode(128|s>>0&63)):(e+=String.fromCharCode(192|s>>6&31),e+=String.fromCharCode(128|s>>0&63));return e}(t)).length,a=0,e="";a<i;){if(s=255&t.charCodeAt(a++),a==i){e+=B.charAt(s>>2),e+=B.charAt((3&s)<<4),e+="==";break}if(o=t.charCodeAt(a++),a==i){e+=B.charAt(s>>2),e+=B.charAt((3&s)<<4|(240&o)>>4),e+=B.charAt((15&o)<<2),e+="=";break}n=t.charCodeAt(a++),e+=B.charAt(s>>2),e+=B.charAt((3&s)<<4|(240&o)>>4),e+=B.charAt((15&o)<<2|(192&n)>>6),e+=B.charAt(63&n)}return e}function F(t){var e,a,i,s,o,n,r;for(n=t.length,o=0,r="";o<n;){do{e=O[255&t.charCodeAt(o++)]}while(o<n&&-1==e);if(-1==e)break;do{a=O[255&t.charCodeAt(o++)]}while(o<n&&-1==a);if(-1==a)break;r+=String.fromCharCode(e<<2|(48&a)>>4);do{if(61==(i=255&t.charCodeAt(o++)))return U(r);i=O[i]}while(o<n&&-1==i);if(-1==i)break;r+=String.fromCharCode((15&a)<<4|(60&i)>>2);do{if(61==(s=255&t.charCodeAt(o++)))return U(r);s=O[s]}while(o<n&&-1==s);if(-1==s)break;r+=String.fromCharCode((3&i)<<6|s)}return U(r)}function U(t){var e,a,i,s,o,n;for(e="",i=t.length,a=0;a<i;)switch((s=t.charCodeAt(a++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=t.charAt(a-1);break;case 12:case 13:o=t.charCodeAt(a++),e+=String.fromCharCode((31&s)<<6|63&o);break;case 14:o=t.charCodeAt(a++),n=t.charCodeAt(a++),e+=String.fromCharCode((15&s)<<12|(63&o)<<6|(63&n)<<0)}return e}var W={name:"Login",data:function(){return{fetchObj:i,userName:"",password:"",tips_Msg:"",ifTips:!1,MinuteNum:60,CountDown:""}},mounted:function(){window.VersionShow=this.VersionShow,window.Device_Ajax=this.Device_Ajax,this.loginVueMounted(),this.getItem("SXJF_phone")&&this.getItem("SXJF_pwd")&&(this.userName=this.getItem("SXJF_phone"),this.password=this.getItem("SXJF_pwd"),this.login())},created:function(){},beforeDestroy:function(){clearInterval(this.CountDown)},methods:{loginVueMounted:function(){try{CallAndroidOrIOS.callAndroid("登录页面已加载","")}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"登录页面已加载"})}catch(t){}},VersionShow:function(t){this.$store.state.App_Version=t},Device_Ajax:function(t){this.$store.state.Device=t},pluginGetUser:function(t,e){try{CallAndroidOrIOS.callAndroidTrack(t,e)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:t})}catch(t){}},login:function(){var t=this;if(this.userName)if(this.password){var e={cellphone:this.userName,password:this.password,wxOpenid:""};this.httpRequest1("post",this.fetchObj.loginUrl,e).then(function(e){localStorage.setItem("jwt",e.entity);var a=JSON.parse(F(e.entity.split(".")[1])).sxjfUserInfo;a.aiportName=decodeURIComponent(a.aiportName),a.orgnizationName=decodeURIComponent(a.orgnizationName),a.userName=decodeURIComponent(a.userName),t.$store.state.userInfo=a,t.$store.state.WaybillData=[],t.$store.state.Waybill_NoSearchFrom=!0,t.$store.state.Waybill_needRefresh=!0,t.setItem({name:"SXJF_USERDATA",value:a,expires:6048e5}),t.setItem({name:"SXJF_phone",value:t.userName}),t.setItem({name:"SXJF_pwd",value:t.password}),t.pluginGetUser(t.userName+"",""),t.$router.push({name:"Index",query:{}})})}else t.$alert("密码不能为空","提示",{confirmButtonText:"确定",callback:function(t){}});else t.$alert("用户名不能为空","提示",{confirmButtonText:"确定",callback:function(t){}})},constructor:function(t){this.name="storage"},removeItem:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()},repwd:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},reg:function(){this.$router.push({name:"Identifying",query:{page:"Reg"}})}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Login"},[a("div",{staticClass:"container"},[t._m(0),t._v(" "),a("div",{staticClass:"identeContainer"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",attrs:{placeholder:"请输入手机号",maxlength:"50"},domProps:{value:t.userName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("password")},input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{placeholder:"请输入密码",maxlength:"50",type:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"login",on:{click:t.login}},[t._v("登录")]),t._v(" "),a("div",{staticClass:"repswd"},[a("span",{on:{click:t.repwd}},[t._v("忘记密码")])])]),t._v(" "),a("div",{staticClass:"App_Version"},[a("span",[t._v(t._s(this.$store.state.App_Version))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"LoginLogo"},[e("img",{attrs:{src:a("iQH9"),alt:""}})])}]};var q=a("VU/8")(W,R,!1,function(t){a("p/yQ")},"data-v-ce23b854",null).exports,M={name:"Reg",data:function(){return{typeMShow:!1,cellphone:"",userName:"",password:"",IDCardNum:"",vicheNo:"",vehicleType:"请选择",vehicleType_code:"",vehicleLength:"",vehicleWide:"",vehicleHeight:"",maxLoadWeight:"",maxLoadVolumn:"",tips_Msg:"",ifTips:!1,typeOfCarList:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{}}},mounted:function(){this.$refs.userName.focus()},created:function(){var t=this;if(this.cellphone=this.$route.query.phoneNum,this.uploadParams.cellphone=this.cellphone,this.$store.state.typeOfCarList.length)this.typeOfCarList=t.$store.state.typeOfCarList;else{this.httpRequest("queryCodeLukupData.do",{listName:"TMS-客户指定车型",tenantCode:"SFKC"},function(e){t.typeOfCarList=e.data,t.$store.state.typeOfCarList=e.data})}},methods:{goPrev:function(){this.$router.push({name:"Identifying",query:{page:"Reg"}})},regBtn:function(){var t=this;if(t.userName&&t.password&&t.IDCardNum&&t.vicheNo&&t.maxLoadWeight&&t.maxLoadVolumn)if(t.vehicleType_code)if(t.password.length<6)t.$alert("密码不能小于六位数","提示",{confirmButtonText:"确定"});else{this.$refs.upload_info1.submit(),this.$refs.upload_info2.submit(),this.$refs.upload_info3.submit(),this.$refs.upload_info4.submit();var e={loginname:"",username:t.userName,idNo:t.IDCardNum,password:t.password,cellphone:t.cellphone,vicheNo:t.vicheNo,vehicleType:t.vehicleType_code,vehicleLength:t.vehicleLength,vehicleWide:t.vehicleWide,vehicleHeight:t.vehicleHeight,maxLoadWeight:t.maxLoadWeight,maxLoadVolumn:t.maxLoadVolumn};t.httpRequest("registerAppUser.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.ifTips=!1,t.toLogin()},1500)})}else t.$alert("请选择车型","提示",{confirmButtonText:"确定"});else t.$alert("请输入必填项","提示",{confirmButtonText:"确定"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},TypeOfCar:function(){this.typeMShow=!0},SelectComit:function(t){this.typeMShow=!1,this.vehicleType=this.typeOfCarList[t].description,this.vehicleType_code=this.typeOfCarList[t].code}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Reg"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("注册")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"regContainer"},[a("div",{staticClass:"regInfo"},[t._m(0),t._v(" "),a("div",[a("span",[t._v("手机号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cellphone,expression:"cellphone"}],attrs:{readonly:""},domProps:{value:t.cellphone},on:{input:function(e){e.target.composing||(t.cellphone=e.target.value)}}})]),t._v(" "),a("div",[a("span",[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",attrs:{placeholder:"必填"},domProps:{value:t.userName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("password")},input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t.userName?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("userName")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",attrs:{placeholder:"必填"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("IDCardNum")},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.password?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("password")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("身份证号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.IDCardNum,expression:"IDCardNum"}],ref:"IDCardNum",attrs:{placeholder:"必填"},domProps:{value:t.IDCardNum},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vicheNo")},input:function(e){e.target.composing||(t.IDCardNum=e.target.value)}}}),t.IDCardNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("IDCardNum")}}}):t._e()]),t._v(" "),t._m(1),t._v(" "),a("div",[a("span",[t._v("车牌号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vicheNo,expression:"vicheNo"}],ref:"vicheNo",attrs:{placeholder:"必填"},domProps:{value:t.vicheNo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleLength")},input:function(e){e.target.composing||(t.vicheNo=e.target.value)}}}),t.vicheNo?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vicheNo")}}}):t._e()]),t._v(" "),a("div",{on:{click:t.TypeOfCar}},[a("span",[t._v("车型")]),a("div",[a("span",[t._v(t._s(t.vehicleType))]),a("i",{staticClass:"iconfont icon-xiangshang"})])]),t._v(" "),a("div",[a("span",[t._v("车长（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleLength,expression:"vehicleLength"}],ref:"vehicleLength",attrs:{placeholder:"车长",type:"number"},domProps:{value:t.vehicleLength},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleWide")},input:function(e){e.target.composing||(t.vehicleLength=e.target.value)}}}),t.vehicleLength.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleLength")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("车宽（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleWide,expression:"vehicleWide"}],ref:"vehicleWide",attrs:{placeholder:"车宽",type:"number"},domProps:{value:t.vehicleWide},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("vehicleHeight")},input:function(e){e.target.composing||(t.vehicleWide=e.target.value)}}}),t.vehicleWide.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleWide")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("车高（米）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.vehicleHeight,expression:"vehicleHeight"}],ref:"vehicleHeight",attrs:{placeholder:"车高",type:"number"},domProps:{value:t.vehicleHeight},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("maxLoadWeight")},input:function(e){e.target.composing||(t.vehicleHeight=e.target.value)}}}),t.vehicleHeight.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("vehicleHeight")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("载重（吨）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxLoadWeight,expression:"maxLoadWeight"}],ref:"maxLoadWeight",attrs:{placeholder:"必填",type:"number"},domProps:{value:t.maxLoadWeight},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("maxLoadVolumn")},input:function(e){e.target.composing||(t.maxLoadWeight=e.target.value)}}}),t.maxLoadWeight.length?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("maxLoadWeight")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("载重体积(方)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxLoadVolumn,expression:"maxLoadVolumn"}],ref:"maxLoadVolumn",attrs:{placeholder:"必填",type:"number"},domProps:{value:t.maxLoadVolumn},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.regBtn(e)},input:function(e){e.target.composing||(t.maxLoadVolumn=e.target.value)}}}),t.maxLoadVolumn?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("maxLoadVolumn")}}}):t._e()]),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("身份证正面照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info1",attrs:{action:t.HOST+"registerUploadPicture.do",limit:2,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("身份证反面照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info2",attrs:{action:t.HOST+"registerUploadPicture.do",limit:2,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("驾驶证照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info3",attrs:{action:t.HOST+"registerUploadPicture.do",limit:3,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("行驶证照片")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_info4",attrs:{action:t.HOST+"registerUploadPicture.do",limit:3,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.regBtn}},[t._v("注册")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.typeMShow?a("div",{staticClass:"SelectMeng"},[a("div",{staticClass:"SelectWarehouses"},[a("div",{staticClass:"SelectTitle"},[t._v("请选择车型")]),t._v(" "),a("div",{staticClass:"SelectItem"},t._l(t.typeOfCarList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.SelectComit(i)}}},[t._v(t._s(e.description))])}),0),t._v(" "),a("div",{staticClass:"cancel",on:{click:function(e){return t.selectCancel("e")}}},[t._v("取消")])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("个人信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("车辆信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("上传资料")])])}]};var H=a("VU/8")(M,E,!1,function(t){a("IEtN")},"data-v-0cad84c9",null).exports,Q="/leaguer/tmsApp/setUserPassword",z={name:"ForgotPwd",data:function(){return{fetchObj:s,newPassWord:"",rePassWord:"",tips_Msg:"",ifTips:!1}},mounted:function(){this.$refs.newPassWord.focus()},methods:{goPrev:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},submit:function(){var t=this;if(""!=t.newPassWord)if(""!=t.rePassWord)if(t.newPassWord==t.rePassWord)if(t.newPassWord.length<6)t.$alert("密码不能小于六位数","提示",{confirmButtonText:"确定"});else{var e={cellphone:t.$route.query.phoneNum,next_page:"wangjimima",oldPassword:t.newPassWord,password:t.newPassWord,verificationCode:t.$route.query.verificationCode};t.httpRequest1("post",this.fetchObj.setPwdUrl,e).then(function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.ifTips=!1,t.toLogin()},1500)})}else t.$alert("两次密码输入不一致","提示",{confirmButtonText:"确定"});else t.$alert("请输入确认密码","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码","提示",{confirmButtonText:"确定"})}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ForgotPwd"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("忘记密码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"identeContainer"},[a("div",[a("span",[t._v("新密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassWord,expression:"newPassWord"}],ref:"newPassWord",attrs:{placeholder:"请输入新密码"},domProps:{value:t.newPassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("rePassWord")},input:function(e){e.target.composing||(t.newPassWord=e.target.value)}}}),t.newPassWord?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("newPassWord")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("确认密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rePassWord,expression:"rePassWord"}],ref:"rePassWord",attrs:{placeholder:"请确认新密码"},domProps:{value:t.rePassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.rePassWord=e.target.value)}}}),t.rePassWord?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("rePassWord")}}}):t._e()]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("找回密码")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[]};var j=a("VU/8")(z,V,!1,function(t){a("ohFQ")},"data-v-63a2658f",null).exports,X="/leaguer/tmsApp/sendYzmToCellphone",J="/leaguer/tmsApp/validateVerificationCode",Y={name:"Identifying",data:function(){return{fetchObj:o,page:"wangjimima",phoneNum:"",identifyingCode:"",tips_Msg:"",ifTips:!1,minuteNum:60,countDown:"",countFlag:0}},mounted:function(){this.$refs.phoneNum.focus()},computed:{sendIdentifyingWords:function(){return 0==this.countFlag?"获取验证码":1==this.countFlag?"重新发送("+this.minuteNum+")":"重新获取验证码"}},created:function(){this.$route.query.page&&("ForgotPwd"==this.$route.query.page?this.page="wangjimima":"Reg"==this.$route.query.page&&(this.page="zhucezhanghao"))},beforeDestroy:function(){clearInterval(this.countDown)},methods:{sendIdentifying:function(){var t=this,e=this;if(60==e.minuteNum)if(e.phoneNum.length)if(11!=e.phoneNum.length)e.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else{var a={cellphone:e.phoneNum,next_page:e.page};this.httpRequest1("post",this.fetchObj.getYzmUrl,a).then(function(a){e.ifTips=!0,e.tips_Msg="验证码已发送",t.countFlag=1,e.countDown=setInterval(function(){e.minuteNum--,e.minuteNum<0&&(e.countFlag=2,e.minuteNum=60,clearInterval(e.countDown))},1e3),setTimeout(function(){e.ifTips=!1},1500)})}else e.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}})},nextTo:function(){var t=this;if(t.phoneNum)if(11!=t.phoneNum.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else if(t.identifyingCode){var e={cellphone:t.phoneNum,verificationCode:t.identifyingCode,next_page:t.page};this.httpRequest1("post",this.fetchObj.validYzmUrl,e).then(function(e){t.$route.query.page&&("ForgotPwd"==t.$route.query.page?t.$router.push({name:"ForgotPwd",query:{phoneNum:t.phoneNum,verificationCode:t.identifyingCode}}):"Reg"==t.$route.query.page&&t.$router.push({name:"Reg",query:{phoneNum:t.phoneNum}}))})}else t.$alert("请输入验证码","提示",{confirmButtonText:"确定",callback:function(t){}});else t.$alert("请输入手机号","提示",{confirmButtonText:"确定",callback:function(t){}})}}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Identifying"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.toLogin}}),a("span",[t._v("验证手机号")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"identeContainer"},[a("div",[t._v("我们将发送验证码到您的手机")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],ref:"phoneNum",attrs:{placeholder:"请输入手机号"},domProps:{value:t.phoneNum},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("identifyingCode")},input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}}),t._v(" "),t.phoneNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("phoneNum")}}}):t._e()]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.identifyingCode,expression:"identifyingCode"}],ref:"identifyingCode",attrs:{placeholder:"请输入验证码"},domProps:{value:t.identifyingCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextTo(e)},input:function(e){e.target.composing||(t.identifyingCode=e.target.value)}}}),t.identifyingCode?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("identifyingCode")}}}):t._e(),t._v(" "),a("div",{class:{"code-btn":!0,counting:1==t.countFlag},on:{click:t.sendIdentifying}},[t._v(t._s(t.sendIdentifyingWords))])]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.nextTo}},[t._v("下一步")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[]};var K=a("VU/8")(Y,G,!1,function(t){a("p479")},"data-v-36903374",null).exports,Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",t._l(t.footList,function(e,i){return a("div",{key:i,class:{active:t.active==e.title},attrs:{id:i},on:{click:function(e){return t.toggle(i)}}},[a("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),a("p",[t._v(t._s(e.title))])])}),0)])},staticRenderFns:[]};var tt=a("VU/8")({name:"FooterIndex",data:function(){return{footList:[{path:"Index",title:"首页",icon:"icon-shouye-blue"},{path:"Waybill",title:"任务",icon:"icon-woderenwu"},{path:"HomeIndex",title:"我的",icon:"icon-gerenzhongxin"}],active:"首页"}},created:function(){for(var t=0;t<this.footList.length;t++){if("historyList"==this.$route.name)return void(this.active="任务");if(this.$route.name==this.footList[t].path)return void(this.active=this.footList[t].title)}this.$route.query.active&&(this.active=this.$route.query.active)},methods:{toggle:function(t){this.$store.state.Waybill_needRefresh=!1,this.active=this.footList[t].title,this.$router.push({name:this.footList[t].path,query:{active:this.footList[t].title}})}}},Z,!1,function(t){a("9Py4")},"data-v-29cab2f6",null).exports,et="/kc-transport/tmsApp/driverAueryShipmentDataLastNew";a("i5pW");var at={name:"Index",data:function(){return{fetchObj:n,noticeList:[],numberPerPage:10,loadPage:1,allLoaded:!0,autoFill:!1,is_NoData:!1,LoadingIndex:!1,loadingIndexText:"拼命加载中",AuditWeightLimits:!1,printFlag:"F",AirMasterScanLimits:!1,warehouseManagerFlag:"",frontWarehouseFlag:""}},components:{FooterIndex:tt},mounted:function(){this.allLoaded=!1},created:function(){this.$store.state.userInfo.reviewWeightFlag&&1==this.$store.state.userInfo.reviewWeightFlag?this.AuditWeightLimits=!0:this.AuditWeightLimits=!1,this.$store.state.userInfo.airlineMasterScanFlag&&1==this.$store.state.userInfo.airlineMasterScanFlag?this.AirMasterScanLimits=!0:this.AirMasterScanLimits=!1,this.$store.state.userInfo.printFlag&&(this.printFlag=this.$store.state.userInfo.printFlag),this.$store.state.userInfo.warehouseManagerFlag&&(this.warehouseManagerFlag=this.$store.state.userInfo.warehouseManagerFlag),this.$store.state.userInfo.frontWarehouseFlag&&(this.frontWarehouseFlag=this.$store.state.userInfo.frontWarehouseFlag),this.loadData()},methods:{loadData:function(t){var e=this,a=this,i={start:this.loadPage,pageSize:this.numberPerPage,cellphone:a.$store.state.userInfo.cellphone};this.LoadingIndex=!0,this.httpRequest1("post",this.fetchObj.deriverAueryShipmentData,i).then(function(e){a.LoadingIndex=!1,t&&("TopLoad"==t?a.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&a.$refs.loadmore.onBottomLoaded()),a.loadPage>1?a.noticeList=a.noticeList.concat(e.entity.list||[]):(a.noticeList=e.entity.list||[],e.entity.list.length?a.is_NoData=!1:a.is_NoData=!0),e.entity.list&&e.entity.list.length<a.numberPerPage?a.allLoaded=!0:a.allLoaded=!1}).catch(function(){e.LoadingIndex=!1})},toWaybillInfo:function(t,e,a){this.$store.state.Waybill.WaybillInfo.clickShipmentId=t;var i="Link_PickUp";"提货"==a?i="Link_PickUp":"中转"==a?i="Link_Transit":"派送"==a?i="Link_ToSend":"目的HUB承运商"==a&&(i="Link_AirportPickUp"),"WEI"==e?(this.$store.state.Waybill.waybillLinkStatus=i,this.$router.push({name:"WaybillInfo",query:{LinkStatus:i}})):(this.$store.state.history_LinkStatus=i,this.$router.push({name:"WaybillDetail",query:{LinkStatus:i}}))},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},it={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Index"},[t._m(0),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"swipper"},[i("div",{staticClass:"block"},[i("el-carousel",{attrs:{trigger:"click",height:"150px"}},[i("el-carousel-item",[i("img",{staticStyle:{height:"150px",width:"100%"},attrs:{src:a("l9IN")}})]),t._v(" "),i("el-carousel-item",[i("img",{staticStyle:{height:"150px",width:"100%"},attrs:{src:a("n55d")}})])],1)],1)]),t._v(" "),i("div",{staticClass:"option"},[t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:"/SweepCodePrinting"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("揽收扫码打印")])]),t._v(" "),t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:{name:"AviationWaybill",query:{pagetype:"air"}}}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("航空出港扫描")])]),t._v(" "),t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:"/ExceptionList"}},[i("i",{staticClass:"iconfont icon-qianshou"}),t._v(" "),i("span",[t._v("异常单签收")])]),t._v(" "),!t.AirMasterScanLimits||t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:"/AirMasterScan"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("航空主单扫描")])]),t._v(" "),t.AuditWeightLimits?i("router-link",{attrs:{to:"/AuditWeight"}},[i("i",{staticClass:"iconfont icon-accAudit"}),t._v(" "),i("span",[t._v("重量稽核")])]):t._e(),t._v(" "),!t.printFlag||t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:"/PrintExpressShein"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("打印顺丰面单")])]),t._v(" "),i("router-link",{attrs:{to:"/ReportAbnormal"}},[i("i",{staticClass:"iconfont icon-yichang"}),t._v(" "),i("span",[t._v("异常上报")])]),t._v(" "),t.warehouseManagerFlag?i("router-link",{attrs:{to:"/WarehousingSignScan"}},[i("i",{staticClass:"iconfont icon-qianshou"}),t._v(" "),i("span",[t._v("入仓签收")])]):t._e(),t._v(" "),t.warehouseManagerFlag||t.frontWarehouseFlag?t._e():i("router-link",{attrs:{to:"/PortScanning"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("进港扫描")])]),t._v(" "),t.$store.state.userInfo.receiptFlag&&!t.frontWarehouseFlag?i("router-link",{attrs:{to:"/UploadReceipt"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("签收单")])]):t._e(),t._v(" "),t.frontWarehouseFlag?i("router-link",{attrs:{to:"/LeadWarehouseScan"}},[i("i",{staticClass:"iconfont icon-saomiao"}),t._v(" "),i("span",[t._v("前置仓扫描")])]):t._e(),t._v(" "),i("router-link",{attrs:{to:"/AirLabelPrinting"}},[i("i",{staticClass:"iconfont icon-dayin"}),t._v(" "),i("span",[t._v("航空标签打印")])])],1),t._v(" "),i("div",{staticClass:"noticeHeader"},[t._v("通知：")]),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.LoadingIndex,expression:"LoadingIndex",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"noticeContent",staticStyle:{overflow:"scroll",height:"calc(100% - 310px)"},attrs:{"element-loading-text":t.loadingIndexText,"element-loading-background":"rgba(0, 0, 0, 0)"}},[i("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[i("div",[t._l(t.noticeList,function(e,a){return i("div",{key:a,staticClass:"noticeItem",attrs:{id:a},on:{click:function(a){return t.toWaybillInfo(e.shipmentID,e.appointLoadingSite,e.transportLinks)}}},[i("div",["未查看"==e.daoDaPlace?i("i",{staticClass:"iconfont icon-weiduxiaoxi  red"}):i("i",{staticClass:"iconfont icon-yiduxiaoxi-"}),t._v(" "),i("span",[t._v("配载单号：")]),i("span",[t._v(t._s(e.code))]),t._v(" "),i("span",[t._v(t._s(e.addDate))])])])}),t._v(" "),t.allLoaded&&t.noticeList.length?i("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),i("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?i("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?i("div",{staticClass:"NoData"},[t._m(1)]):t._e()],1)]),t._v(" "),i("FooterIndex")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("span",[this._v("首页")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有通知")])])}]};var st=a("VU/8")(at,it,!1,function(t){a("cjNq")},"data-v-08e70666",null).exports,ot="/kc-transport/tmsApp/abnormalOrderSFData",nt={name:"ExceptionList",data:function(){return{fetchObj:r,AbnormalListData:[],is_NoData:!1,is_NoData_text:"没有异常订单",numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,tips_Msg:"",ifTips:!1}},mounted:function(){},created:function(){this.loadData()},methods:{loadData:function(t){console.log("loadData");var e=this,a={start:this.loadPage,pageSize:this.numberPerPage,cellphone:e.$store.state.userInfo.cellphone};console.log(a),this.httpRequest1("post",this.fetchObj.abnormalOrderApp,a).then(function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.AbnormalListData=e.AbnormalListData.concat(a.entity.list||[]):(e.AbnormalListData=a.entity.list||[],e.AbnormalListData.length?e.is_NoData=!1:(e.is_NoData_text="没有异常订单",e.is_NoData=!0)),a.entity.list&&a.entity.list.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1}).catch(function(t){e.is_NoData_text="没有异常订单",e.is_NoData=!0})},abnormalSign:function(t){event.stopPropagation();this.$router.push({name:"AbnormalScan",query:{omsNo:this.AbnormalListData[t].omsNo,actualQty:this.AbnormalListData[t].actualQty,AbHasScanNum:this.AbnormalListData[t].deliveryNumber,orderId:this.AbnormalListData[t].orderId,deliveryId:this.AbnormalListData[t].deliveryId}})},ScanQueryOrderInfo:function(){this.$router.push({name:"ScanQueryOrderInfo"})},goprev:function(){this.$router.push({name:"Index"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ExceptionList"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("异常单列表")]),a("i",{staticClass:"iconfont icon-sousuoxiawu-",on:{click:t.ScanQueryOrderInfo}})]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"AbnormalContainer ",staticStyle:{overflow:"scroll"}},[a("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"AbnormalList"},[t._l(t.AbnormalListData,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n\t\t\t\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n\t\t\t\t\t\t\t\t\t\t"),e.clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()])]),t._v(" "),a("div",[a("span",[t._v("发起时间：")]),a("span",[t._v(t._s(e.sponsorTime))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(e.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(e.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(e.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("发起人：")]),a("span",[t._v(t._s(e.sponsorName))])]),t._v(" "),a("div",[a("span",[t._v("发起人承运商：")]),a("span",[t._v(t._s(e.operateRdcName))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("异常环节：")]),a("span",[t._v(t._s(e.abnormalLink))])]),t._v(" "),a("div",[a("span",[t._v("异常类型：")]),a("span",[t._v(t._s(e.abnormalType))])])]),t._v(" "),a("div",[a("span",[t._v("责任方：")]),a("span",[t._v(t._s(e.responsibleParty))])]),t._v(" "),a("div",[a("span",[t._v("异常描述：")]),a("span",[t._v(t._s(e.abnormalExplain))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.abnormalSign(i)}}},[t._v("异常单签收")])])])}),t._v(" "),t.allLoaded&&t.AbnormalListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)])],1)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ct=a("VU/8")(nt,rt,!1,function(t){a("tsvS")},"data-v-b88ca024",null).exports,lt=new D.default,dt={name:"scan",props:["loadingData","switchScan","textre","deliveryNoSF"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){this.textre&&(this.placeholdertext=this.textre),this.deliveryNoSF&&(this.code=this.deliveryNoSF,this.$emit("scanData",this.code))},mounted:function(){this.$refs.code.focus()},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData",this.code)},startRecognize:function(){this.$emit("scanData","")}}},ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"},on:{click:function(e){return t.androidScan("code")}}},[t._m(0)]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("扫描")]),e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var ht=a("VU/8")(dt,ut,!1,function(t){a("QPdl")},"data-v-550f41fb",null).exports,pt={name:"ScanQueryOrderInfo",data:function(){return{fetchObj:r,AbnormalInfoData:[],loadingData:!1,AbnormalInfo_show:!1,scanLabel:"",LocateAbnormalScanLabel:"",tips_Msg:"",ifTips:!1}},components:{"v-scan":ht},mounted:function(){},created:function(){this.$route.query.LocateAbnormalScanLabel&&(this.LocateAbnormalScanLabel=this.$route.query.LocateAbnormalScanLabel,this.scanData(this.LocateAbnormalScanLabel))},methods:{scanData:function(t){var e=this;this.scanLabel=t,e.AbnormalInfo_show=!0;var a={scanLabel:t,cellphone:e.$store.state.userInfo.cellphone,start:1,pageSize:3};console.log(a),this.httpRequest1("post",this.fetchObj.abnormalOrderApp,a).then(function(t){console.log(t),e.AbnormalInfoData=t.entity.list||[],e.AbnormalInfo_show=!0})},abnormalSign:function(){event.stopPropagation();this.$router.push({name:"AbnormalScan",query:{omsNo:this.AbnormalInfoData[0].omsNo,LocateAbnormalScanLabel:this.scanLabel,actualQty:this.AbnormalInfoData[0].actualQty,AbHasScanNum:this.AbnormalInfoData[0].deliveryNumber,orderId:this.AbnormalInfoData[0].orderId,deliveryId:this.AbnormalInfoData[0].deliveryId}})},goprev:function(){this.$router.push({name:"ExceptionList"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ScanQueryOrderInfo"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("定位异常单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"containerInfo"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.AbnormalInfo_show,expression:"AbnormalInfo_show"}],staticClass:"orderInfo"},[t.AbnormalInfoData.length?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].omsNo,expression:"AbnormalInfoData[0].omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.AbnormalInfoData[0].omsNo)+"\n                "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].omsNo,expression:"AbnormalInfoData[0].omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].clientOrderNo,expression:"AbnormalInfoData[0].clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.AbnormalInfoData[0].clientOrderNo)+"\n                "),t.AbnormalInfoData[0].clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.AbnormalInfoData[0].clientOrderNo,expression:"AbnormalInfoData[0].clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()])]),t._v(" "),a("div",[a("span",[t._v("发起时间：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].sponsorTime))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.AbnormalInfoData[0].receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("发起人：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].sponsorName))])]),t._v(" "),a("div",[a("span",[t._v("发起人承运商：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].operateRdcName))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("异常环节：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalLink))])]),t._v(" "),a("div",[a("span",[t._v("异常类型：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalType))])])]),t._v(" "),a("div",[a("span",[t._v("责任方：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].responsibleParty))])]),t._v(" "),a("div",[a("span",[t._v("异常描述：")]),a("span",[t._v(t._s(t.AbnormalInfoData[0].abnormalExplain))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.abnormalSign}},[t._v("异常单签收")])])]):t._e()])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var mt=a("VU/8")(pt,vt,!1,function(t){a("xWlY")},"data-v-3bce28ed",null).exports,ft="/kc-transport/tmsApp/selectOrderByClientOrderNo",_t="/kc-transport/tmsApp/checkUpdateOrderNew",gt="/kc-transport/tmsApp/getConfirmFlagFromOrder",bt="/kc-transport/tmsApp/checkUpdateOrderQP",yt="/kc-transport/tmsApp/lanShouSaoMaGetImageApp",Lt=a("mtWM"),Ct=a.n(Lt),St={name:"PrintExpress",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1}},components:{"v-scan":ht},mounted:function(){},created:function(){},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:t};console.log(a),e.$emit("isLoading",!0,"拼命加载中"),e.httpRequest1("post",surfacePrint,postprint).then(function(t){for(var a in e.$emit("isLoading",!1),t.entity.length?e.is_NoData=!1:e.is_NoData=!0,t.entity.bsOrderWt&&(t.entity.bsOrderWt=parseFloat(t.entity.bsOrderWt/1e3)),t.entity)0==t.entity[a]&&(t.entity[a]="-");e.OrderInfoData=t.entity,e.OrderInfoDataList=t.entity.orderDetailArray,e.printData=t.entity,e.OrderInfo_show=!0}).catch(function(t){e.is_NoData=!0,e.OrderInfoData={},e.OrderInfoDataList=[],e.printData=[],e.OrderInfo_show=!1,e.$emit("isLoading",!1)})},printBtn:function(t,e){var a=this;if("CP"==a.OrderInfoData.reference10){var i={omsNo:[a.OrderInfoData.omsNo]};this.httpRequest1("post",gt,i).then(function(i){var s=[];t&&"item"==t?(s[0]=a.OrderInfoData,s[1]=[a.OrderInfoDataList[e]],s=k()(s)):s=k()(a.printData);try{CallAndroidOrIOS.callAndroid("打印",s)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:s})}catch(t){}})}else{var s=[];t&&"item"==t?(s[0]=a.OrderInfoData,s[1]=[a.OrderInfoDataList[e]],console.log(s),s=k()(s)):(console.log(a.printData),s=k()(a.printData));try{CallAndroidOrIOS.callAndroid("打印",s)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:s})}catch(t){}}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("打印面单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("寄件时间：")]),a("span",[t._v(t._s(t.OrderInfoData.actualPieceTime))])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("费用合计：")]),a("span",[t._v(t._s(t.OrderInfoData.orderAmount))])]),t._v(" "),a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(t.OrderInfoData.transportFee))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计重：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("附加服务：")]),a("span",[t._v(t._s(t.OrderInfoData.insuranceFee))])]),t._v(" "),a("div",[a("span",[t._v("声明价值：")]),a("span",[t._v(t._s(t.OrderInfoData.valuationMoney))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("代收货款：")]),a("span",[t._v(t._s(t.OrderInfoData.collectPayment))])]),t._v(" "),a("div",[a("span",[t._v("签回单：")]),a("span",[t._v(t._s(t.OrderInfoData.returnBillFlag))])])]),t._v(" "),a("div",[a("span",[t._v("尺寸：")]),a("span",[t._v(t._s(t.OrderInfoData.productSize))])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(t.OrderInfoData.remark))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i)}}},[t._v("打印")])])])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var wt=a("VU/8")(St,Nt,!1,function(t){a("ap4A")},"data-v-32e30754",null).exports,It={name:"scan",props:["loadingData","switchScan","textre","deliveryNoSF"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){window.QRScanAjax=this.QRScanAjax,this.$store.state.ScanQRCodeInputName="code",window.TellVue_QRScanResult_Ajax=this.QRScanAjax,this.textre&&(this.placeholdertext=this.textre),this.deliveryNoSF&&(this.code=this.deliveryNoSF,this.$emit("scanData",this.code))},mounted:function(){this.$refs.code.focus()},methods:{scanopen:function(){try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData",this.code)}}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"}},[i("div",{on:{click:t.scanopen}},[i("span",[t._v("扫描")]),i("i",{staticClass:"iconfont icon-sousuoxiawu-"})])]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.commitInput(e)},input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[]};var Dt=a("VU/8")(It,kt,!1,function(t){a("W3GH")},"data-v-2ed44f84",null).exports,Tt="/kc-transport/tmsApp/getFaceListToScpPrint",xt={name:"PrintExpressShein",data:function(){return{fetchObj:l,OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1,ifflash:!1}},components:{"v-scan":Dt},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={clientOrderNo:t};this.httpRequest1("post",this.fetchObj.getFaceListToScpPrint,a).then(function(t){t.entity?(e.OrderInfoData=t.entity.orderArray,e.OrderInfoDataList=t.entity.orderArray.orderDetailArray||[],e.printData=t.entity.zhiLing,e.OrderInfo_show=!0):(e.is_NoData=!0,e.OrderInfoData={},e.OrderInfoDataList=[],e.printData=[],e.OrderInfo_show=!1)}).catch(function(t){e.is_NoData=!0})},printBtn:function(t,e){console.log(this.printData);try{CallAndroidOrIOS.callAndroid("shein打印",this.printData)}catch(t){}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpressShein"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("打印顺丰面单")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("寄件时间：")]),a("span",[t._v(t._s(t.OrderInfoData.actualPieceTime))])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(t.OrderInfoData.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("费用合计：")]),a("span",[t._v(t._s(t.OrderInfoData.orderAmount))])]),t._v(" "),a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(t.OrderInfoData.transportFee))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计重：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("附加服务：")]),a("span",[t._v(t._s(t.OrderInfoData.insuranceFee))])]),t._v(" "),a("div",[a("span",[t._v("声明价值：")]),a("span",[t._v(t._s(t.OrderInfoData.valuationMoney))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("代收货款：")]),a("span",[t._v(t._s(t.OrderInfoData.collectPayment))])]),t._v(" "),a("div",[a("span",[t._v("签回单：")]),a("span",[t._v(t._s(t.OrderInfoData.returnBillFlag))])])]),t._v(" "),a("div",[a("span",[t._v("尺寸：")]),a("span",[t._v(t._s(t.OrderInfoData.productSize))])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(t.OrderInfoData.remark))])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"dataItem",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e,expression:"dataItem",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"})])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var Pt=a("VU/8")(xt,$t,!1,function(t){a("lvNd")},"data-v-8bf37332",null).exports,Bt=a("Dd8w"),Ot=a.n(Bt),At={name:"uploader",data:function(){return{uploadParams:"",fileList:[]}},props:{title:{type:String,default:""},url:{type:String,default:""},listType:{type:String,default:"picture-card"},name:{type:String,default:"file"},params:{type:Object,default:function(){}},limit:{type:Number,default:1},isNotice:{type:Boolean,default:!0},isClearFiles:{type:Boolean,default:!0}},methods:{uploadOnChange:function(t,e){console.log(t),this.$emit("onChange",t,e),this.fileList=e.slice(0);var a="image/jpeg"===t.raw.type,i="image/png"===t.raw.type,s=t.size/1024/1024<10;a||i||(this.$alert("上传图片只能是 JPG.PNG 格式!","提示",{confirmButtonText:"确定"}),this.clearFiles()),s||(this.$alert("上传图片大小不能超过 10MB!","提示",{confirmButtonText:"确定"}),this.clearFiles())},uploadOnRemove:function(t,e){this.$emit("onRemove",t,e),this.fileList=e.slice(0)},uploadEvent:function(t){this.uploadParams.append(this.name,t.file)},submit:function(t,e){var a=this,i=e||this.params;console.log(i),this.uploadParams=new FormData,this.$refs.upload.submit(),this.uploadParams.append("param",A(k()({entity:Ot()({},i)})));var s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer"+localStorage.getItem("jwt")}};return new w.a(function(e,i){t.$emit("isLoading",!0,"拼命加载中"),a.uploadParams.forEach(function(t,e){console.log("key "+e+": value "+t)}),Ct.a.post(a.HOST1+a.url,a.uploadParams,s).then(function(s){var o=JSON.parse(F(s.data.result));console.log("返回参数：",o),t.$emit("isLoading",!1),0==o.code?(a.isNotice&&a.$alert("上传图片成功!","提示",{confirmButtonText:"确定",callback:function(t){a.$emit("onSuccess")}}),a.isClearFiles&&a.clearFiles(),e(o)):(a.isNotice&&a.$alert("上传图片失败!","提示",{confirmButtonText:"确定",callback:function(t){a.$emit("onErr")}}),i(o))}).catch(function(e){a.isNotice&&a.$alert("请求失败!","提示",{confirmButtonText:"确定"}),t.$emit("isLoading",!1),i(e)})})},clearFiles:function(){this.fileList=[],this.$refs.upload&&this.$refs.upload.clearFiles()},getImgNum:function(){return this.fileList.length}}},Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myUpload"},[a("div",{staticClass:"uploadSheet"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"uploadHead"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"uploadContent"},[a("el-upload",{ref:"upload",attrs:{action:t.HOST1+t.url,limit:t.limit,multiple:!0,"auto-upload":!1,"list-type":t.listType,"http-request":t.uploadEvent,"on-change":t.uploadOnChange,"on-remove":t.uploadOnRemove}},[a("i",{staticClass:"el-icon-plus"})])],1)])])},staticRenderFns:[]};var Ut=a("VU/8")(At,Ft,!1,function(t){a("VmtA")},null,null).exports,Wt=a("NYxO");D.default.use(Wt.a);var Rt=new Wt.a.Store({state:{RequestLink:"http://113.105.119.25:8099/tmsAppNew/",RequestLinkimg:"http://113.105.119.25:8099/",RequestLink1:"https://sit.fengyee.com/microservice",RequestLinkimg1:"https://sit.fengyee.com/microservice/atp-baseinfo/common/getPicture",userInfo:[],ifNoMissionStowage:!1,typeOfCarList:[],Waybill:{waybillLinkStatus:"Link_PickUp",WaybillInfo:{clickWaybillInfo:[],clickShipmentId:""},Waybill_SearchData:"",Waybill_SearchType:0},AviationWaybill:{Waybill_SearchData:"",Waybill_SearchType:0},Aviation_HistoryWaybill:{Waybill_SearchData:"",Waybill_SearchType:0},Waybill_needRefresh:!0,IF_Navigation:!0,history_Data:[],history_NoSearchFrom:!0,history_SearchData:{},history_needRefresh:!0,search_WaybillDetail:[],history_LinkStatus:"Link_PickUp",ScanQRCodeInputName:"",App_Version:"",Device:"",flashStatus:!1,scan:!1},mutations:{activeScan:function(t){t.scan=!0},offScan:function(t){t.scan=!1}}}),qt=a("Av7u"),Mt=a.n(qt);Ct.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";Rt.state.RequestLink,Rt.state.RequestLink1;var Et="/kc-transport/tmsAppNew/verificationLabel",Ht="/kc-transport/tmsApp/commitScan",Qt="/kc-transport/tmsAppNew/commitShipScan",zt="/kc-transport/tmsAppNew/taskUploadImage",Vt="/kc-transport/tmsAppNew/deleteOrderScanLabel",jt="/kc-transport/tmsApp/selectOrder",Xt="/kc-transport/tmsApp/updateCheckWt",Jt=a("7t+N"),Yt=a.n(Jt),Gt={name:"AuditWeight",data:function(){return{fetchObj:d,abnormalUploadImage:zt,OrderInfoData:{},is_NoData:!1,loadingData:!1,OrderInfo_show:!1,deliveryNoSF:"",tips_Msg:"",ifTips:!1,ChangeInfo_show:!1,ChangeOrderWt:"",orderId:"",SignBillShow:!1,dialogImageUrl:"",dialogVisible:!1,uploadParamsListAuditWeight:{},uploadSuccessNumSignBill:0,uploadTotalNumSignBill:0,uploadFailNumSignBill:0,WeightList:[],ifflash:!1}},components:{"v-scan":Dt,"v-uploader":Ut},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}D.default.set(this.WeightList,this.WeightList.length,{value:""})},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},computed:{WeightSum:function(){for(var t=0,e=0;e<this.WeightList.length;e++)parseFloat(this.WeightList[e].value)&&(t+=parseFloat(this.WeightList[e].value));return parseFloat(t).toFixed(3)}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.deliveryNoSF=t;var a={deliveryNoSF:t};this.httpRequest1("post",this.fetchObj.selectOrder,a).then(function(t){t.entity.orderWt&&(t.entity.orderWt=parseFloat(t.entity.orderWt)),t.entity.chargeWeight&&(t.entity.chargeWeight=parseFloat(t.entity.chargeWeight)),e.ChangeOrderWt=parseFloat(t.entity.checkWt),e.orderId=t.entity.orderId,e.OrderInfoData=t.entity,e.OrderInfo_show=!0})},CheckWeight:function(){this.ChangeInfo_show=!0},ChangeInfoCancel:function(){this.ChangeInfo_show=!1},ChangeInfoConfirm:function(){var t=this,e=this;if("NaN"==parseInt(e.WeightSum).toString()||parseInt(e.WeightSum)<=0||e.WeightSum!=parseFloat(e.WeightSum))e.$alert("复核重量请输入正数","提示",{confirmButtonText:"确定"});else{for(var a=!1,i=0,s=0;s<this.WeightList.length;s++){var o=this.$refs.upload_refAuditWeight[s].getImgNum();o<=0&&(a=!0),i+=o}if(0!=i)if(a)e.$alert("填写了复核重量的都要上传照片","提示",{confirmButtonText:"确定"});else{this.uploadParamsListAuditWeight={orderId:e.orderId,checkWt:parseFloat(e.WeightSum),cellphone:this.$store.state.userInfo.cellphone,driverName:this.$store.state.userInfo.userName,omsNo:this.OrderInfoData.omsNo,fileType:"复核重量",labelNo:"复核环节"},console.log(this.uploadParamsListAuditWeight);for(var n=this.WeightList.length,r=function(i){t.$nextTick(function(){t.$refs.upload_refAuditWeight[i].submit(t).then(function(t){++a===n&&e.finishUploadSignBill("图片上传成功")}).catch(function(t){++a===n&&e.finishUploadSignBill(t.detail)})})},c=0;c<this.WeightList.length;c++)r(c)}else e.$alert("请上传照片","提示",{confirmButtonText:"确定"})}},AddList:function(){D.default.set(this.WeightList,this.WeightList.length,{value:""})},goPrev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},finishUploadSignBill:function(t){var e=this;e.$emit("isLoading",!1),this.uploadSuccessNumSignBill=0,this.uploadTotalNumSignBill=0,this.uploadFailNumSignBill=0,t=t?","+t:"",this.$alert("复核成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.WeightList=[],D.default.set(e.WeightList,e.WeightList.length,{value:""}),e.scanData(e.deliveryNoSF)}})},uploadSuccessfulSignBill:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code?this.uploadSuccessNumSignBill++:this.uploadFailNumSignBill++,this.uploadSuccessNumSignBill!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分图片上传失败"):this.finishUploadSignBill("图片上传失败"):this.finishUploadSignBill("")},uploadErrSignBill:function(t,e,a){console.log(t);if(this.uploadFailNumSignBill++,this.uploadFailNumSignBill==parseInt(this.uploadTotalNumSignBill))return this.uploadSuccessNumSignBill=0,this.uploadFailNumSignBill=0,this.uploadTotalNumSignBill=0,this.$emit("isLoading",!1),void this.$alert("图片上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress AuditWeight"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("重量稽核")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData,textre:"手动输入订单号"},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyAddr))])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(t.OrderInfoData.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.OrderInfoData.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyAddr1))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("包裹重量：")]),a("span",[t._v(t._s(t.OrderInfoData.orderWt))]),t._v("  KG")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("计费重量：")]),a("span",[t._v(t._s(t.OrderInfoData.chargeWeight?t.OrderInfoData.chargeWeight.toFixed(2):""))]),t._v("  KG")]),t._v(" "),t.ChangeOrderWt?a("div",[a("span",[t._v("复核重量：")]),a("span",[t._v(t._s(t.ChangeOrderWt))]),t._v("  KG\n\t\t\t\t\t\t\t")]):t._e()])]),t._v(" "),a("div",{staticClass:"CheckWeight"},[a("div",{staticClass:"Check_WeightBox"},[a("div",{staticClass:"Check_WeightBox_head"},[t._v("请填写复核重量：")]),t._v(" "),t._l(t.WeightList,function(e,i){return a("div",{key:i,staticClass:"Check_WeightBox_list",attrs:{id:i}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"itemData.value"}],attrs:{type:"number",placeholder:"复核重量"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),t._v(" "),a("span",[t._v("KG")])]),t._v(" "),a("v-uploader",{ref:"upload_refAuditWeight",refInFor:!0,attrs:{limit:4,url:t.fetchObj.updateCheckWt,name:"file",isNotice:!1,params:t.uploadParamsListAuditWeight}})],1)}),t._v(" "),a("div",{staticClass:"AddList",on:{click:t.AddList}},[a("i",{staticClass:"iconfont icon-jia"})]),t._v(" "),a("div",{staticClass:"WeightSum"},[a("span",[t._v("复核重量合计：")]),t._v(" "),a("span",[t._v(t._s(t.WeightSum))]),t._v(" "),a("span",[t._v("KG")])])],2)]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])]):t._e()]),t._v(" "),t.ChangeInfo_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("复核重量")]),t._v(" "),a("div",{staticClass:"BatchCommit_ChangeInfo"},[a("div",[t._m(0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ChangeOrderWt,expression:"ChangeOrderWt"}],attrs:{type:"number"},domProps:{value:t.ChangeOrderWt},on:{input:function(e){e.target.composing||(t.ChangeOrderWt=e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(2)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var Zt=a("VU/8")(Gt,Kt,!1,function(t){a("x9LW"),a("0xox")},"data-v-68d1d278",null).exports,te=a("Xxa5"),ee=a.n(te),ae=a("exGp"),ie=a.n(ae),se={data:function(){return{isShowConfirm:!1,titleText:"操作提示",content:"Say Something ...",cancelText:"取消",confirmText:"确认",type:"confirm",outerData:null}},methods:{show:function(t,e){this.content=t||"Say Something ...","[object Object]"===Object.prototype.toString.call(e)&&(this.titleText=e.titleText||"操作提示",this.cancelText=e.cancelText||"取消",this.confirmText=e.confirmText||"确认",this.type=e.type||"confirm",this.outerData=e.data||null),this.isShowConfirm=!0},hidden:function(){this.isShowConfirm=!1,this.titleText="操作提示",this.cancelText="取消",this.confirmText="确认",this.type="confirm",this.outerData=null},clickFun:function(t){this.$emit("userBehavior",t,this.outerData),this.hidden()}}},oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"confirm-fade"}},[t.isShowConfirm?a("div",{staticClass:"my-confirm",on:{click:function(e){return e.stopPropagation(),t.clickFun("clickCancel")}}},[a("div",{staticClass:"confirm-content-wrap",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"my-confirm-title"},[t._v(t._s(t.titleText))]),t._v(" "),a("p",{staticClass:"my-confirm-content"},[t._v(t._s(t.content))]),t._v(" "),a("div",{staticClass:"my-operation"},["confirm"===t.type?a("div",{staticClass:"my-cancel-btn",on:{click:function(e){return t.clickFun("clickCancel")}}},[a("p",{staticClass:"my-btn-text my-border-right"},[t._v(t._s(t.cancelText))])]):t._e(),t._v(" "),a("div",{staticClass:"confirm-btn",on:{click:function(e){return t.clickFun("clickConfirm")}}},[a("p",{staticClass:"my-btn-text"},[t._v(t._s(t.confirmText))])])])])]):t._e()])},staticRenderFns:[]};var ne=a("VU/8")(se,oe,!1,function(t){a("0YSe")},"data-v-083399c9",null).exports,re={name:"headers",components:{"v-confirm":ne},data:function(){return{index:!0,flash:a("N3cg"),activeFlash:!1}},props:["headerName","orderList"],mounted:function(){"/"===this.$route.path||"Index"===this.$route.path?this.index=!1:this.index=!0},methods:{flashSwitch:function(){lt.$emit("flashActive",this.activeFlash),this.activeFlash?(this.activeFlash=!1,this.flash=a("N3cg")):(this.activeFlash=!0,this.flash=a("AbpN"))},userBehaviorFun:function(t){"clickCancel"!==t&&this.$router.go(-1)},checkForBack:function(){0!==this.orderList.length?this.$refs.myConfirm.show("表单内有未提交保存的运单数据",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"是否返回首页?",data:this.orderList}):this.$router.go(-1)},backToHome:function(){0!==this.orderList.length||this.$router.go(-1)}}},ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.index,expression:"index"}],staticClass:"back-button",on:{click:t.checkForBack}}),t._v(" "),a("div",{staticClass:"right-text"},[t._v("\n      "+t._s(t.headerName)+"\n    ")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1)},staticRenderFns:[]};var le=a("VU/8")(re,ce,!1,function(t){a("GC0Y")},"data-v-f4b89bf2",null).exports,de={name:"ScanAirMaster",props:["loadingData","switchScan","textre"],data:function(){return{codeUrl:"",code:"",activeFlash:!1,imgSelect:a("b2XV"),scanState:!1,placeholdertext:"手动输入标签号..."}},created:function(){this.textre&&(this.placeholdertext=this.textre)},mounted:function(){this.$refs.code.focus()},watch:{code:function(t){this.$emit("scanData",t)}},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.commitInput()},commitInput:function(){""!==this.code&&this.$emit("scanData_com",this.code)},startRecognize:function(){this.$emit("scanData","")}}},ue={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scan-box"},[i("div",{staticClass:"kongscan"}),t._v(" "),i("div",{ref:"scan",attrs:{id:"bcid"},on:{click:function(e){return t.androidScan("code")}}},[t._m(0)]),t._v(" "),i("div",{staticClass:"input-order-number"},[i("img",{attrs:{src:a("i1Yn")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"code",attrs:{type:"text",placeholder:t.placeholdertext},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("div",{staticClass:"button-add",on:{click:t.commitInput}},[t._v("确认")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("扫描")]),e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var he=a("VU/8")(de,ue,!1,function(t){a("5XjF")},"data-v-23668168",null).exports,pe="/kc-transport/tmsApp/airlineMasterNumberGetImageApp",ve="/kc-transport/tmsApp/airlineMasterNumberUploadImage",me="/kc-transport/tmsApp/airlineMasterNumberDeleteImage",fe={name:"AirMasterScan",components:{"v-header":le,"v-scan":he,"v-uploader":Ut},data:function(){return{fetchObj:u,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadParamsgoods:{},uploadParamsAdded:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,airlineMasterNumber:"",PaperSheetimgDataList:[],GoodsPictures:[],ValueAddedPictures:[],tips_Msg:"",ifTips:!1,failText:"部分图片上传失败",uploadList:[],uploadGoodsList:[]}},mounted:function(){},methods:{goprev:function(){this.$router.push({name:"Index"})},updateimg:function(){var t=this;return ie()(ee.a.mark(function e(){var a,i,s,o,n,r,c,l,d,u;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,t.airlineMasterNumber&&!(t.airlineMasterNumber.length>11)){e.next=4;break}return a.$alert("请输入11位航空主单号","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 4:if(i=t.$refs.upload_refTransit.getImgNum(),s=t.$refs.upload_refTransitgoods.getImgNum(),o=t.$refs.upload_refTransitAdded.getImgNum(),console.log(i,s,o),!(i>0&&a.PaperSheetimgDataList.length+i>1)){e.next=11;break}return a.$alert("纸质单最多上传一张图片，如需更新请先删除","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 11:if(!(s>0&&a.GoodsPictures.length+s>6)){e.next=14;break}return a.$alert("货物照片最多上传6张，如需更新请先删除","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 14:if(!(o>0&&a.ValueAddedPictures.length+o>3)){e.next=17;break}return a.$alert("增值服务照片最多上传3张，如需更新请先删除","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 17:if(!(i<=0&&s<=0&&o<=0)){e.next=20;break}return a.$alert("请上传照片","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 20:return t.uploadParams.fileType=1,t.uploadParams.airlineMasterNumber=t.airlineMasterNumber,t.uploadParams.orgnizationId=a.$store.state.userInfo.orgnizationId,t.uploadParams.cellphone=a.$store.state.userInfo.cellphone,t.uploadParamsgoods.fileType=2,t.uploadParamsgoods.airlineMasterNumber=t.airlineMasterNumber,t.uploadParamsgoods.orgnizationId=a.$store.state.userInfo.orgnizationId,t.uploadParamsgoods.cellphone=a.$store.state.userInfo.cellphone,t.uploadParamsAdded.fileType=3,t.uploadParamsAdded.airlineMasterNumber=t.airlineMasterNumber,t.uploadParamsAdded.orgnizationId=a.$store.state.userInfo.orgnizationId,t.uploadParamsAdded.cellphone=a.$store.state.userInfo.cellphone,n=t.$refs.upload_refTransit.submit(t),r=t.$refs.upload_refTransitgoods.submit(t),c=t.$refs.upload_refTransitAdded.submit(t),e.next=37,r.catch(function(e){t.$alert(e.detail,"提示",{confirmButtonText:"确定",callback:function(t){}})});case 37:return l=e.sent,e.next=40,n.catch(function(e){t.$alert(e.detail,"提示",{confirmButtonText:"确定",callback:function(t){}})});case 40:return d=e.sent,e.next=43,c.catch(function(e){t.$alert(e.detail,"提示",{confirmButtonText:"确定",callback:function(t){}})});case 43:u=e.sent,d&&l&&u&&0==d.code&&0==l.code&&0==u.code&&t.$alert("上传图片成功!","提示",{confirmButtonText:"确定",callback:function(e){t.selectimg()}});case 45:case"end":return e.stop()}},e,t)}))()},selectimg:function(){var t=this;if(11==t.airlineMasterNumber.length){var e=[];e[0]=t.airlineMasterNumber;var a={waybillNolist:e};this.httpRequest1("post",this.fetchObj.airlineMasterNumberGetImageApp,a).then(function(e){e.entity?(t.$previewRefresh(),t.PaperSheetimgDataList=e.entity[0].mainNoPic||[],t.GoodsPictures=e.entity[0].cargoTypePic||[],t.ValueAddedPictures=e.entity[0].addServicePic||[],console.log(t.ValueAddedPictures)):(t.PaperSheetimgDataList=[],t.GoodsPictures=[],t.ValueAddedPictures=[])})}else t.$alert("航空主单号必须为11位","提示",{confirmButtonText:"确定"})},deleteimg:function(t,e){var a=this,i=this;this.$confirm("确认要删除图片吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e};a.httpRequest1("post",a.fetchObj.airlineMasterNumberDeleteImage,t).then(function(t){i.ifTips=!0,i.tips_Msg=t.detail,setTimeout(function(){i.ifTips=!1,i.selectimg()},1500)})}).catch(function(t){})},switchScanFun:function(t){this.switchScan=!!t},scanData:function(t){this.airlineMasterNumber=t},scanData_com:function(t){this.airlineMasterNumber=t,this.selectimg()},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),this.$refs.upload_refTransit.clearFiles(),this.$refs.upload_refTransitgoods.clearFiles(),this.$refs.upload_refTransitAdded.clearFiles(),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.selectimg()}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));0==i.code?this.uploadSuccessNum++:5==i.code?this.ReturnToLogin():(this.failText=i.detail,this.uploadFailNum++),console.log("img",i),this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)!=parseInt(this.uploadTotalNum)||this.finishUpload(this.failText):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload(this.failText)},uploadOnChange:function(t){this.switchScanFun(!0)}}},_e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AirMasterScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("航空主单扫描")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData,textre:"手动输入航空主单号"},on:{scanData:t.scanData,scanData_com:t.scanData_com}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t.airlineMasterNumber?a("div",{staticClass:"orderinfo"},[a("div",[a("span",[t._v("航空主单号：")]),t._v(" "),a("span",[t._v(t._s(t.airlineMasterNumber))])])]):t._e(),t._v(" "),t.GoodsPictures&&t.GoodsPictures.length||t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length||t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPicture"},[t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("纸质单（已上传照片）： ")]),t._v(" "),t._l(t.PaperSheetimgDataList,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.getImgUrl(e.fileName),preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(a){return t.deleteimg(i,e.id)}}})])})],2):t._e(),t._v(" "),t.GoodsPictures&&t.GoodsPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("货物（已上传照片）： ")]),t._v(" "),t._l(t.GoodsPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.getImgUrl(e.fileName),preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(a){return t.deleteimg(i,e.id)}}})])})],2):t._e(),t._v(" "),t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("增值服务（已上传照片）： ")]),t._v(" "),t._l(t.ValueAddedPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.getImgUrl(e.fileName),preview:"99",alt:""}}),t._v(" "),a("i",{staticClass:"iconfont Uploadicon_imgicon icon-iconfontcuowu",on:{click:function(a){return t.deleteimg(i,e.id)}}})])})],2):t._e()]):t._e(),t._v(" "),a("v-uploader",{ref:"upload_refTransit",attrs:{title:"纸质单照片（限1张）",url:t.fetchObj.airlineMasterNumberUploadImage,limit:1,name:"mainFile",isNotice:!1,params:t.uploadParams}}),t._v(" "),a("v-uploader",{ref:"upload_refTransitgoods",attrs:{title:"货物照片（限6张）",url:t.fetchObj.airlineMasterNumberUploadImage,limit:6,name:"cargoFile",isNotice:!1,params:t.uploadParamsgoods}}),t._v(" "),a("v-uploader",{ref:"upload_refTransitAdded",attrs:{title:"增值服务照片（限3张）",url:t.fetchObj.airlineMasterNumberUploadImage,limit:3,name:"addServiceFile",isNotice:!1,params:t.uploadParamsAdded}})],1),t._v(" "),a("div",{staticClass:"submitBtn"},[a("div",{staticClass:"g_signBtn",on:{click:t.updateimg}},[t._v("上传")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ge=a("VU/8")(fe,_e,!1,function(t){a("Ch0p"),a("939u")},"data-v-32f2365a",null).exports,be={name:"SweepCodePrinting",data:function(){return{fetchObj:c,independentUploadImage:"/kc-transport/commonFile/fileUpload",OrderInfoData:{},printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,clientOrderNo:"",tips_Msg:"",ifTips:!1,ChangeInfo_show:!1,ChangeInfoThreeHigh_show:!1,displayQty:"",displayWt:"",displayLength:"",displayWide:"",displayHigh:"",ThreeHigh:!1,deliveryNoSF:"",LightBehindList:[],textre:"手动输入单号",CastLightWeight:"",LightBeIndex:0,needLoseWt:0,longitude:"",latitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",dialogImageUrl:"",dialogVisible:!1,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,ValueAddedPictures:[],uploadParamsgoods:{}}},components:{"v-scan":ht,"v-uploader":Ut},mounted:function(){this.onPlusReady("e")},created:function(){console.log(this.$route.query),this.$route.query.deliveryNoSF&&(this.deliveryNoSF=this.$route.query.deliveryNoSF),this.$route.query.LightBeIndex&&(this.LightBeIndex=this.$route.query.LightBeIndex),this.$route.query.needLoseWt&&(this.needLoseWt=this.$route.query.needLoseWt),this.$route.query.LightBehindList&&(this.LightBehindList=JSON.parse(this.$route.query.LightBehindList))},methods:{RefreshPositioning:function(){this.onPlusReady("e")},updatePhoto:function(t){var e=this.$refs.upload_sweep_code_print[0].getImgNum();0!=e?e>0&&this.ValueAddedPictures.length+e>6?this.$alert("照片最多上传6张","提示",{confirmButtonText:"确定"}):(this.uploadParamsgoods.fileType="collect-2",this.uploadParamsgoods.bizCode=this.OrderInfoData[t].orderInfo.omsNo,this.$refs.upload_sweep_code_print[0].submit(this)):this.$alert("请先上传照片","提示",{confirmButtonText:"确定"})},SetCurrAddress:function(t){this.ReceivingLatitud(t)},QtyFillChange:function(t,e){this.LightBehindList&&this.LightBehindList.length||!this.OrderInfoData[e].orderInfo.qpWt||t.data==this.OrderInfoData[e].orderInfo.orderQty||(this.OrderInfoData[e].orderInfo.qpWtFill=0,this.OrderInfoData[e].orderInfo.displayWtFill=0)},scanData:function(t){this.is_NoData=!1,this.$route.query.deliveryNoSF||this.cleardata(),this.deliveryNoSF=t;var e=this;console.log(t),-1!=t.indexOf("-")?(t=t.split("-")[0],this.clientOrderNo=t):this.clientOrderNo=t;var a={clientOrderNo:this.clientOrderNo,cellphone:e.$store.state.userInfo.cellphone};this.httpRequest1("post",this.fetchObj.selectOrderByClientOrderNo,a).then(function(t){e.$route.query.deliveryNoSF=null;t.entity;t.entity?(e.is_NoData=!1,e.OrderInfo_show=!0):(e.is_NoData=!0,e.OrderInfo_show=!1),t.entity.orderInfo.bsOrderWt&&(t.entity.orderInfo.bsOrderWt=t.entity.orderInfo.bsOrderWt),t.entity.orderInfo.qpWt&&(t.entity.orderInfo.qpWt=t.entity.orderInfo.qpWt),t.entity.orderInfo.qpWtFill=null!=t.entity.orderInfo.qpWt?t.entity.orderInfo.qpWt.toFixed(2):"",t.entity.orderInfo.orderQtyFill=t.entity.orderInfo.orderQty,t.entity.orderInfo.displayWtFill=null!=t.entity.orderInfo.displayWt?t.entity.orderInfo.displayWt.toFixed(2):"",t.entity.orderDetailArray=t.entity.orderDetailArray||[],e.OrderInfoData=[t.entity],(e.$route.query.CastLightWeight||0==e.$route.query.CastLightWeight)&&(e.CastLightWeight=e.$route.query.CastLightWeight,"NaN"==parseFloat(e.CastLightWeight).toString()||parseFloat(e.CastLightWeight)<0||e.CastLightWeight!=parseFloat(e.CastLightWeight)||(e.OrderInfoData[e.LightBeIndex].orderInfo.qpWtFill=e.CastLightWeight)),e.$route.query.displayWtFill&&(e.OrderInfoData[e.LightBeIndex].orderInfo.displayWtFill=e.$route.query.displayWtFill),e.$route.query.LightBehindNum&&(e.OrderInfoData[e.LightBeIndex].orderInfo.orderQtyFill=e.$route.query.LightBehindNum),e.DisplayPhotos(t.entity.orderInfo.omsNo)}).catch(function(t){console.log("res, ",t),e.is_NoData=!0,e.OrderInfo_show=!1,e.OrderInfoData=[]})},DisplayPhotos:function(t){var e=this,a={omsNo:t};this.httpRequest1("post",this.fetchObj.lanShouSaoMaGetImageApp,a).then(function(t){t.entity?(e.$previewRefresh(),e.ValueAddedPictures=t.entity):e.ValueAddedPictures=[]})},onSuccess:function(){this.scanData(this.deliveryNoSF)},reviewBtnThreeHigh:function(t){var e=this,a=this.OrderInfoData[t].orderInfo.orderQtyFill;if(a<=0||a.toString().indexOf(".")>-1)e.$alert("件数必须是正整数","提示",{confirmButtonText:"确定"});else if(this.OrderInfoData[t].orderInfo.lightFoamCoefficient){var i={omsNo:e.OrderInfoData[t].orderInfo.omsNo,orderQty:e.OrderInfoData[t].orderInfo.orderQtyFill?e.OrderInfoData[t].orderInfo.orderQtyFill:0,cellphone:e.$store.state.userInfo.cellphone,scanPerson:e.$store.state.userInfo.userName};this.httpRequest1("post",this.fetchObj.checkUpdateOrderQP,i).then(function(a){if(a.entity.productNoList.length==parseInt(e.OrderInfoData[t].orderInfo.orderQtyFill)){var i=[];a.entity.orderDetailList&&(i=a.entity.orderDetailList),i.length==a.entity.productNoList.length?e.$router.push({name:"LightBehind",query:{deliveryNoSF:e.deliveryNoSF,CastLightCoefficient:e.OrderInfoData[t].orderInfo.lightFoamCoefficient,LightBehindNum:parseInt(e.OrderInfoData[t].orderInfo.orderQtyFill),LightBeIndex:t,displayWtFill:e.OrderInfoData[t].orderInfo.displayWtFill,LightBeLabelList:a.entity.productNoList,LabelListInfo:i,monthCardNumber:e.OrderInfoData[t].orderInfo.monthCardNumber}}):e.$alert("件数与标签数不匹配，请稍后重试","提示",{confirmButtonText:"确定"})}else e.$alert("件数与标签数不匹配，请稍后重试","提示",{confirmButtonText:"确定"})})}else e.$alert("请联系客服在系统维护轻抛系数","提示",{confirmButtonText:"确定"})},modifyLightBe:function(t){var e=this;if(this.OrderInfoData[t].orderInfo.orderQtyFill<=0)e.$alert("件数必须是正整数","提示",{confirmButtonText:"确定"});else if(this.OrderInfoData[t].orderInfo.displayWtFill<=0)e.$alert("请维护轻抛件","提示",{confirmButtonText:"确定"});else if(this.$route.query.LightBehindNum&&this.OrderInfoData[t].orderInfo.orderQtyFill!=this.$route.query.LightBehindNum)e.$alert("维护轻抛件后，不要修改件数","提示",{confirmButtonText:"确定"});else{var a=[],i=0;if(e.LightBehindList&&e.LightBehindList.length){console.log(e.LightBehindList);for(var s=0;s<e.LightBehindList.length;s++)for(var o=0;o<e.LightBehindList[s].LB_labelList.length;o++)a[a.length]={labelNo:e.LightBehindList[s].LB_labelList[o],cargoBoxLength:e.LightBehindList[s].LB_len,cargoBoxWidth:e.LightBehindList[s].LB_wide,cargoHeight:e.LightBehindList[s].LB_high,cargoWeight:parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number),issueWt:e.LightBehindList[s].LB_wt,issueVol:parseFloat(e.LightBehindList[s].LB_len)*parseFloat(e.LightBehindList[s].LB_wide)*parseFloat(e.LightBehindList[s].LB_high),displayWt:parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number)>parseFloat(e.LightBehindList[s].LB_wt)?parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number):parseFloat(e.LightBehindList[s].LB_wt)},i+=parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number)>parseFloat(e.LightBehindList[s].LB_wt)?parseFloat(e.LightBehindList[s].LB_volume_wt)/parseInt(e.LightBehindList[s].LB_number):parseFloat(e.LightBehindList[s].LB_wt);if(a.length==e.OrderInfoData[t].orderInfo.orderQtyFill||"7576756428"!=e.OrderInfoData[t].orderInfo.monthCardNumber){i<e.OrderInfoData[t].orderInfo.displayWtFill&&(i=e.OrderInfoData[t].orderInfo.displayWtFill);var n={city:e.CurrentCity,districict:e.CurrentDistrict,address:e.CurrentLocation,longitude:e.longitude,latitude:e.latitude,supplierId:e.$store.state.userInfo.orgnizationId,supplierName:e.$store.state.userInfo.orgnizationName,cellphone:e.$store.state.userInfo.cellphone,scanPerson:e.$store.state.userInfo.userName},r={omsNo:e.OrderInfoData[t].orderInfo.omsNo,orderQty:e.OrderInfoData[t].orderInfo.orderQtyFill?e.OrderInfoData[t].orderInfo.orderQtyFill:0,displayWt:e.OrderInfoData[t].orderInfo.displayWtFill?e.OrderInfoData[t].orderInfo.displayWtFill:0,chargeWeight:i,qpWt:e.OrderInfoData[t].orderInfo.qpWtFill?e.OrderInfoData[t].orderInfo.qpWtFill:0,labelNos:a,rote:n};console.log(r),this.httpRequest1("post",this.fetchObj.checkUpdateOrderNew,r).then(function(t){e.$alert(t.detail,"提示",{confirmButtonText:"确定",callback:function(){e.cleardata(),e.scanData(e.deliveryNoSF)}})})}else e.$alert("所有子件都必须维护重量","提示",{confirmButtonText:"确定"})}else e.$alert("请维护轻抛件","提示",{confirmButtonText:"确定"})}},cleardata:function(){this.$route.query.displayWtFill=null,this.$route.query.LightBehindNum=null,this.$route.query.LightBeIndex=null,this.LightBeIndex=null,this.$route.query.needLoseWt=null,this.needLoseWt=null,this.$route.query.deliveryNoSF=null,this.$route.query.LightBehindList=null,this.LightBehindList=null,this.$route.query.CastLightWeight=null,this.CastLightWeight=null},printBtn:function(t,e,a){var i=this;if("CP"==i.OrderInfoData[e].orderInfo.reference10){var s={omsNo:[i.OrderInfoData[e].orderInfo.omsNo]};this.httpRequest1("post",this.fetchObj.getConfirmFlagFromOrder,s).then(function(s){var o=[];if(t&&"item"==t){var n=k()(i.OrderInfoData[e].orderInfo),r=k()([i.OrderInfoData[e].orderDetailArray[a]]);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}else if(t&&"el"==t){n=k()(i.OrderInfoData[e].orderInfo),r=k()(i.OrderInfoData[e].orderDetailArray);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}for(var c in o[0])0==o[0][c]&&(o[0][c]="-"),null==o[0][c]&&(o[0][c]="");for(var l in o[1])null==o[1][l]&&(o[1][l]="");o=k()(o);try{CallAndroidOrIOS.callAndroid("打印",o)}catch(t){}try{console.log(o),window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:o})}catch(t){}})}else{var o=[];if(t&&"item"==t){var n=k()(i.OrderInfoData[e].orderInfo),r=k()([i.OrderInfoData[e].orderDetailArray[a]]);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}else if(t&&"el"==t){n=k()(i.OrderInfoData[e].orderInfo),r=k()(i.OrderInfoData[e].orderDetailArray);o[0]=JSON.parse(n),o[1]=JSON.parse(r)}for(var c in o[0])0==o[0][c]&&(o[0][c]="-"),null==o[0][c]&&(o[0][c]="");for(var l in o[1])null==o[1][l]&&(o[1][l]="");o=k()(o);try{console.log(o),CallAndroidOrIOS.callAndroid("打印",o)}catch(t){}try{console.log(o),window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:o})}catch(t){}}},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),e.uploadSuccessNum=0,e.uploadFailNum=0,e.uploadTotalNum=0,e.$refs.upreceived[0].clearFiles(),t=t?","+t:"",e.$alert("成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.cleardata(),e.scanData(e.deliveryNoSF)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){console.log(t)},GoPrev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ye={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SweepCodePrinting"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.GoPrev}}),a("span",[t._v("揽收扫码打印")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{deliveryNoSF:t.deliveryNoSF,textre:t.textre,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t._l(t.OrderInfoData,function(e,i){return a("div",{key:i,staticClass:"orderInfo",attrs:{id:i}},[a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]),t._v(" "),a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.orderInfo.omsNo,expression:"listItem.orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.orderInfo.omsNo)+"\n\t\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.orderInfo.omsNo,expression:"listItem.orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(e.orderInfo.productName))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("发货区县：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("发货联系人：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyContact))]),t._v("    "),a("span",[t._v(t._s(e.orderInfo.issuePartyTel))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.orderInfo.issuePartyTel)}}})]),t._v(" "),a("div",[a("span",[t._v("发货地址：")]),a("span",[t._v(t._s(e.orderInfo.issuePartyAddr))])])]),t._v(" "),a("div",{staticClass:"AreaBox"},[a("div",[a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货区县：")]),a("span",[t._v(t._s(e.orderInfo.receicePartyDistricict))])])]),t._v(" "),a("div",[a("span",[t._v("收货联系人：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyContactName))]),t._v("    "),a("span",[t._v(t._s(e.orderInfo.receivePartyPhone))]),t._v("  "),a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.orderInfo.receivePartyPhone)}}})]),t._v(" "),a("div",[a("span",[t._v("收货地址：")]),a("span",[t._v(t._s(e.orderInfo.receivePartyAddr1))])])]),t._v(" "),a("div",{staticClass:"nomalList"},[a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(e.orderInfo.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(e.orderInfo.displayWt))]),t._v("   kg")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("运费：")]),a("span",[t._v(t._s(e.orderInfo.transportFee))])]),t._v(" "),a("div",[a("span",[t._v("付款方式：")]),a("span",[t._v(t._s(e.orderInfo.chargeTypes))])])]),t._v(" "),a("div",[a("div",[a("span",[t._v("轻抛重量：")]),a("span",[t._v(t._s(e.orderInfo.qpWt))]),t._v("   kg")]),t._v(" "),a("div",[a("span",[t._v("计费重量：")]),a("span",[t._v(t._s(e.orderInfo.chargeWeight))]),t._v("   kg\n\t\t\t\t\t\t\t")])]),t._v(" "),a("div",[a("span",[t._v("备注：")]),a("span",[t._v(t._s(e.orderInfo.remark))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("当前城市：")]),a("span",{staticClass:"reddiv"},[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticClass:"reddiv"},[t._v(t._s(t.CurrentDistrict))])])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("span",{staticClass:"refresh",on:{click:t.RefreshPositioning}},[t._v("刷新定位")]),t._v(" "),a("v-uploader",{ref:"upload_sweep_code_print",refInFor:!0,attrs:{title:"拍照上传（限6张）",url:t.independentUploadImage,limit:6,name:"file",isNotice:!0,params:t.uploadParamsgoods},on:{onSuccess:t.onSuccess}}),t._v(" "),a("span",{staticClass:"refresh",on:{click:function(e){return t.updatePhoto(i)}}},[t._v("上传图片")]),t._v(" "),t.ValueAddedPictures&&t.ValueAddedPictures.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("已上传照片： ")]),t._v(" "),a("div",{staticClass:"UploadedPicturebox"},t._l(t.ValueAddedPictures,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.getImgUrl(e.fileName),preview:"99",alt:""}})])}),0)]):t._e(),t._v(" "),a("fieldset",[a("legend",[t._v("请填写")]),t._v(" "),a("div",[t._m(0,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.orderQtyFill,expression:"listItem.orderInfo.orderQtyFill"}],attrs:{type:"number"},domProps:{value:e.orderInfo.orderQtyFill},on:{input:[function(a){a.target.composing||t.$set(e.orderInfo,"orderQtyFill",a.target.value)},function(e){return t.QtyFillChange(e,i)}]}})])]),t._v(" "),a("span",[t._v("注意：如轻抛重量有值，修改件数后，需要重新维护轻抛件")]),t._v(" "),a("div",[t._m(1,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.qpWtFill,expression:"listItem.orderInfo.qpWtFill"}],attrs:{type:"number",disabled:""},domProps:{value:e.orderInfo.qpWtFill},on:{input:function(a){a.target.composing||t.$set(e.orderInfo,"qpWtFill",a.target.value)}}})]),t._v(" "),t._m(2,!0),t._v(" "),a("div",{on:{click:function(e){return t.reviewBtnThreeHigh(i)}}},[t._v("轻抛件")])]),t._v(" "),a("div",[t._m(3,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.displayWtFill,expression:"listItem.orderInfo.displayWtFill"}],attrs:{type:"number",disabled:""},domProps:{value:e.orderInfo.displayWtFill},on:{input:function(a){a.target.composing||t.$set(e.orderInfo,"displayWtFill",a.target.value)}}})]),t._v(" "),t._m(4,!0)]),t._v(" "),a("div",{staticClass:"fieldset_btn",on:{click:function(e){return t.modifyLightBe(i)}}},[a("span",[t._v("确定修改")])])])],1),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("el",i)}}},[t._v("打印所有标签")])])]),t._v(" "),t.OrderInfoData[i].orderDetailArray.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoData[i].orderDetailArray,function(e,s){return a("div",{key:s,staticClass:"AbnormalItem",attrs:{id:s}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n\t\t\t\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),e.cargoBoxLength||e.cargoBoxWidth||e.cargoHeight||e.issueWt?a("div",[e.cargoBoxLength?a("div",[a("span",[t._v("长：")]),a("span",[t._v(t._s(parseFloat(e.cargoBoxLength))+"\n\t\t\t\t\t\t\t\t\t CM")])]):t._e(),t._v(" "),e.cargoBoxWidth?a("div",[a("span",[t._v("宽：")]),a("span",[t._v(t._s(parseFloat(e.cargoBoxWidth))+"\n\t\t\t\t\t\t\t\t\t CM")])]):t._e(),t._v(" "),e.cargoHeight?a("div",[a("span",[t._v("高：")]),a("span",[t._v(t._s(parseFloat(e.cargoHeight))+"\n\t\t\t\t\t\t\t\t\t CM")])]):t._e(),t._v(" "),e.issueWt?a("div",[a("span",[t._v("重量：")]),a("span",[t._v(t._s(e.issueWt)+"\n\t\t\t\t\t\t\t\t\t KG")])]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i,s)}}},[t._v("打印")])])])})],2)}),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(5)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("件数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("轻抛重量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fieldset_unit"},[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("总重量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fieldset_unit"},[e("span",[this._v("KG")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var Le=a("VU/8")(be,ye,!1,function(t){a("nWsP"),a("2iQ8")},"data-v-62c53e53",null).exports,Ce={name:"LightBehind",data:function(){return{LightBehindList:[],LabelList:[],tips_Msg:"",ifTips:!1,deliveryNoSF:"",LightBeIndex:0,CastLightCoefficient:"",LightBehindNum:0,addLB_show:!1,ChangeInfo_show:!1,displayQty:"",oldQty:"",oldQtyIndex:"",displayWtFill:0,waybillLabelList:[],waybillListBOX_show:!1,LabelListInfo:[],monthCardNumber:""}},components:{"v-scan":ht},mounted:function(){},created:function(){var t=this,e=this;this.$route.query.deliveryNoSF&&(this.deliveryNoSF=this.$route.query.deliveryNoSF),this.$route.query.CastLightCoefficient&&(this.CastLightCoefficient=this.$route.query.CastLightCoefficient),this.$route.query.LightBeIndex&&(this.LightBeIndex=this.$route.query.LightBeIndex),this.$route.query.displayWtFill&&(this.displayWtFill=this.$route.query.displayWtFill),this.$route.query.LabelListInfo&&(this.LabelListInfo=this.$route.query.LabelListInfo),this.$route.query.monthCardNumber&&(this.monthCardNumber=this.$route.query.monthCardNumber),this.$route.query.LightBehindNum&&(this.LightBehindNum=this.$route.query.LightBehindNum,this.LightBehindNum>1&&(this.addLB_show=!0)),this.$route.query.LightBeLabelList&&(this.LabelList=this.$route.query.LightBeLabelList),console.log(this.LabelListInfo),console.log(e.getItem("SXJF_SizeWeight")),this.LabelListInfo.length&&!e.getItem("SXJF_SizeWeight")?(console.log("231213212"),e.loadingData()):e.getItem("SXJF_SizeWeight")&&e.getItem("SXJF_SizeWeight").deliveryNoSF==this.deliveryNoSF?function(){for(var a=e.getItem("SXJF_SizeWeight"),i=0,s=function(t){i+=parseInt(a.list[t].LB_number);for(var s=function(i){e.LabelList.forEach(function(s,o){s==a.list[t].LB_labelList[i]&&e.LabelList.splice(o,1)})},o=0;o<a.list[t].LB_labelList.length;o++)s(o)},o=0;o<a.list.length;o++)s(o);i>t.LightBehindNum?e.$alert("修改件数由多变少，暂存数据失效","提示",{confirmButtonText:"确定",callback:function(){e.setItem({name:"SXJF_SizeWeight",value:""}),e.loadingData()}}):e.LightBehindList=a.list}():(this.LightBehindList=[{LB_wt:"",LB_len:"",LB_wide:"",LB_high:"",LB_volume_wt:0,LB_number:1}],e.LabelList.length&&(this.LightBehindList[0].LB_labelList=[],this.LightBehindList[0].LB_labelList[0]=e.LabelList[0],e.LabelList.splice(0,1))),console.log(e.LightBehindList)},methods:{staging:function(){var t={};t.deliveryNoSF=this.deliveryNoSF,t.list=this.LightBehindList,t=k()(t),this.setItem({name:"SXJF_SizeWeight",value:t}),this.$alert("暂存成功","提示",{confirmButtonText:"确定"})},loadingData:function(){var t=this;console.log(t.LabelListInfo,"54212212");for(var e=0;e<t.LabelListInfo.length;e++)if(0==e)t.LightBehindList=[{LB_wt:t.LabelListInfo[0].issueWt?t.LabelListInfo[0].issueWt:"",LB_len:t.LabelListInfo[0].cargoBoxLength?t.LabelListInfo[0].cargoBoxLength.toFixed(2):"",LB_wide:t.LabelListInfo[0].cargoBoxWidth?t.LabelListInfo[0].cargoBoxWidth.toFixed(2):"",LB_high:t.LabelListInfo[0].cargoHeight?t.LabelListInfo[0].cargoHeight.toFixed(2):"",LB_volume_wt:t.LabelListInfo[0].cargoWeight?t.LabelListInfo[0].cargoWeight:0,LB_number:1,LB_labelList:[t.LabelListInfo[0].productNo]}],t.LabelList.forEach(function(e,a){e==t.LabelListInfo[0].productNo&&t.LabelList.splice(a,1)});else{var a,i=!1;console.log(t.LightBehindList,t.LabelListInfo);for(var s=0;s<t.LightBehindList.length;s++)if((t.LabelListInfo[e].issueWt?t.LabelListInfo[e].issueWt:""==t.LightBehindList[s].LB_wt)&&(t.LabelListInfo[e].cargoBoxLength?t.LabelListInfo[e].cargoBoxLength.toFixed(2):"")==t.LightBehindList[s].LB_len&&(t.LabelListInfo[e].cargoBoxWidth?t.LabelListInfo[e].cargoBoxWidth.toFixed(2):"")==t.LightBehindList[s].LB_wide&&(t.LabelListInfo[e].cargoHeight?t.LabelListInfo[e].cargoHeight.toFixed(2):"")==t.LightBehindList[s].LB_high){i=!0,a=s;break}i?(t.LightBehindList[a].LB_number=parseInt(t.LightBehindList[a].LB_number)+1,t.LightBehindList[a].LB_labelList.push(t.LabelListInfo[e].productNo),t.LabelList.forEach(function(a,i){a==t.LabelListInfo[e].productNo&&t.LabelList.splice(i,1)})):(D.default.set(t.LightBehindList,t.LightBehindList.length,{LB_wt:t.LabelListInfo[e].issueWt?t.LabelListInfo[e].issueWt:"",LB_len:t.LabelListInfo[e].cargoBoxLength?t.LabelListInfo[e].cargoBoxLength.toFixed(2):"",LB_wide:t.LabelListInfo[e].cargoBoxWidth?t.LabelListInfo[e].cargoBoxWidth.toFixed(2):"",LB_high:t.LabelListInfo[e].cargoHeight?t.LabelListInfo[e].cargoHeight.toFixed(2):"",LB_volume_wt:t.LabelListInfo[e].cargoWeight?t.LabelListInfo[e].cargoWeight:"",LB_number:1,LB_labelList:[t.LabelListInfo[e].productNo]}),t.LabelList.forEach(function(a,i){a==t.LabelListInfo[e].productNo&&t.LabelList.splice(i,1)}))}},LB_jian:function(t){this.LightBehindList[t].LB_number>1&&(this.LightBehindList[t].LB_number=parseInt(this.LightBehindList[t].LB_number)-1,this.LightBehindList[t].LB_labelList.length&&(this.LabelList.push(this.LightBehindList[t].LB_labelList[this.LightBehindList[t].LB_labelList.length-1]),this.LabelList=this.BubbleSort(this.LabelList),this.LightBehindList[t].LB_labelList.splice(-1,1)),this.addLB_show=!0)},LB_jia:function(t){for(var e=0,a=0;a<this.LightBehindList.length;a++)e+=parseInt(this.LightBehindList[a].LB_number);e<this.LightBehindNum&&(this.LightBehindList[t].LB_number=parseInt(this.LightBehindList[t].LB_number)+1,parseInt(e)+1>=this.LightBehindNum&&(this.addLB_show=!1),this.LabelList.length&&(this.LightBehindList[t].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1)))},entryShow:function(t){this.oldQty=this.LightBehindList[t].LB_number,this.displayQty=this.LightBehindList[t].LB_number,this.oldQtyIndex=t,this.ChangeInfo_show=!0},addLightBehind:function(){for(var t=0,e=0;e<this.LightBehindList.length;e++)t+=parseInt(this.LightBehindList[e].LB_number);t<this.LightBehindNum&&(D.default.set(this.LightBehindList,this.LightBehindList.length,{LB_wt:"",LB_len:"",LB_wide:"",LB_high:"",LB_volume_wt:0,LB_number:1,LB_labelList:[]}),this.LabelList.length&&(this.LightBehindList[this.LightBehindList.length-1].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1)),parseInt(t)+1>=this.LightBehindNum&&(this.addLB_show=!1))},del_lb:function(t){if(this.LightBehindList.length>1){for(var e=0;e<this.LightBehindList[t].LB_labelList.length;e++)this.LabelList.push(this.LightBehindList[t].LB_labelList[e]);this.LabelList=this.BubbleSort(this.LabelList),this.LightBehindList.splice(t,1),this.addLB_show=!0}},ChangeInfoThreeHighConfirm:function(){var t=this;console.log(t.LightBehindList);for(var e=0;e<t.LightBehindList.length;e++)if("NaN"==parseFloat(t.LightBehindList[e].LB_wt).toString()||parseFloat(t.LightBehindList[e].LB_wt)<=0||t.LightBehindList[e].LB_wt!=parseFloat(t.LightBehindList[e].LB_wt))return void t.$alert("重量必须大于0","提示",{confirmButtonText:"确定"});for(var a=0,i=0,s=0,o=0,n=0;n<t.LightBehindList.length;n++)s+=t.LightBehindList[n].LB_number,o+=t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number,t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number<parseFloat(t.LightBehindList[n].LB_volume_wt)?(i+=parseFloat(t.LightBehindList[n].LB_wt*t.LightBehindList[n].LB_number),a+=parseFloat(t.LightBehindList[n].LB_volume_wt)):(a+=parseFloat(t.LightBehindList[n].LB_volume_wt),i+=parseFloat(t.LightBehindList[n].LB_volume_wt));console.log(t.LightBehindList),"7576756428"==t.monthCardNumber&&s<t.LightBehindNum?t.$alert("所有子件都必须维护重量","提示",{confirmButtonText:"确定"}):(t.displayWtFill=o.toFixed(3),t.$confirm("确认吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setItem({name:"SXJF_SizeWeight",value:""}),t.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:t.deliveryNoSF,CastLightWeight:a,LightBeIndex:t.LightBeIndex,displayWtFill:t.displayWtFill,LightBehindNum:t.LightBehindNum,needLoseWt:i,LightBehindList:k()(t.LightBehindList)}})}).catch(function(){}))},ChangeInfoThreeHighCancel:function(){this.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:this.deliveryNoSF}})},ChangeInfoConfirm:function(){var t=0;if(this.displayQty)if("NaN"==parseInt(this.displayQty).toString()||parseInt(this.displayQty)<=0||this.displayQty!=parseInt(this.displayQty))alert("请输入正整数");else{for(var e=0;e<this.LightBehindList.length;e++)t+=parseInt(this.LightBehindList[e].LB_number);if(parseInt(t)-parseInt(this.oldQty)+parseInt(this.displayQty)<=this.LightBehindNum){if(this.LightBehindList[this.oldQtyIndex].LB_number=this.displayQty,parseInt(this.oldQty)-parseInt(this.displayQty)>0)for(var a=parseInt(this.oldQty)-1;a>=parseInt(this.displayQty);a--)this.LabelList.push(this.LightBehindList[this.oldQtyIndex].LB_labelList[a]),this.LightBehindList[this.oldQtyIndex].LB_labelList.splice(a,1);else if(parseInt(this.oldQty)-parseInt(this.displayQty)<0)for(a=parseInt(this.displayQty)-1;a>=parseInt(this.oldQty);a--)this.LightBehindList[this.oldQtyIndex].LB_labelList.push(this.LabelList[0]),this.LabelList.splice(0,1);this.LabelList=this.BubbleSort(this.LabelList),t-this.oldQty+this.displayQty>=this.LightBehindNum?this.addLB_show=!1:this.addLB_show=!0,this.ChangeInfo_show=!1}else alert("该页面添加的轻抛件数量总和不能超过订单总件数，请重新输入")}},ChangeInfoCancel:function(){this.ChangeInfo_show=!1},toShowWaybillList:function(t){this.waybillLabelList=this.LightBehindList[t].LB_labelList,this.waybillListBOX_show=!0},waybillList_confrim:function(){this.waybillListBOX_show=!1},goprev:function(){this.$router.push({name:"SweepCodePrinting",query:{deliveryNoSF:this.deliveryNoSF,displayWtFill:this.displayWtFill,LightBeIndex:this.LightBeIndex,LightBehindNum:this.LightBehindNum}})}}},Se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"LightBehind"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("轻抛件")]),a("span",{staticClass:"staging",on:{click:t.staging}},[t._v("暂存")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"_CastLightCoefficient"},[a("span",[t._v("轻抛系数")]),t._v(" "),a("span",[t._v(t._s(t.CastLightCoefficient))])]),t._v(" "),a("div",{staticClass:"LightCastList"},[t._l(t.LightBehindList,function(e,i){return a("div",{key:i,staticClass:"BatchCommit_ThreeHigh",attrs:{id:i}},[a("div",{staticClass:"BatchCommit_head"},[t._v("轻抛件"),t.LightBehindList.length>1?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.del_lb(i)}}}):t._e()]),t._v(" "),a("div",{staticClass:"BatchCommitThreeHigh_ChangeInfo"},[a("div",[a("div",{attrs:{id:"ThreeHighadd"}},[a("div",{staticClass:"ThreeHigh_"},[a("div",[t._m(0,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_len,expression:"dataItem.LB_len"}],attrs:{type:"number"},domProps:{value:e.LB_len},on:{input:function(a){a.target.composing||t.$set(e,"LB_len",a.target.value)}}})])]),t._v(" "),a("div",[t._m(1,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wide,expression:"dataItem.LB_wide"}],attrs:{type:"number"},domProps:{value:e.LB_wide},on:{input:function(a){a.target.composing||t.$set(e,"LB_wide",a.target.value)}}})])]),t._v(" "),a("div",[t._m(2,!0),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_high,expression:"dataItem.LB_high"}],attrs:{type:"number"},domProps:{value:e.LB_high},on:{input:function(a){a.target.composing||t.$set(e,"LB_high",a.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"ThreeHigh_wt"},[a("div",[t._m(3,!0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wt,expression:"dataItem.LB_wt"}],attrs:{type:"number",placeholder:"填写单件重量"},domProps:{value:e.LB_wt},on:{input:function(a){a.target.composing||t.$set(e,"LB_wt",a.target.value)}}}),a("span",[t._v("KG")]),a("span",[t._v("总重量")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_wt*e.LB_number,expression:"dataItem.LB_wt*dataItem.LB_number"}],attrs:{type:"number",disabled:""},domProps:{value:e.LB_wt*e.LB_number},on:{input:function(a){a.target.composing||t.$set(e.LB_wt*e,"LB_number",a.target.value)}}}),a("span",[t._v("KG")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("体积重量")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.LB_volume_wt=(e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number).toFixed(3),expression:"dataItem.LB_volume_wt=(dataItem.LB_len*dataItem.LB_wide*dataItem.LB_high/CastLightCoefficient*dataItem.LB_number).toFixed(3)"}],attrs:{type:"text",disabled:""},domProps:{value:e.LB_volume_wt=(e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number).toFixed(3)},on:{input:function(a){a.target.composing||t.$set(e.LB_volume_wt=e.LB_len*e.LB_wide*e.LB_high/t.CastLightCoefficient*e.LB_number,"toFixed(3)",a.target.value)}}}),a("span",[t._v("公斤/厘米")])]),t._v(" "),a("div",{staticClass:"listLast"},[a("i",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.LB_jian(i)}}}),t._v(" "),a("span",{on:{click:function(e){return t.entryShow(i)}}},[t._v(t._s(e.LB_number))]),t._v(" "),a("i",{staticClass:"iconfont icon-jia",on:{click:function(e){return t.LB_jia(i)}}})])]),t._v(" "),e.LB_labelList&&e.LB_labelList.length?a("div",{staticClass:"relevance",on:{click:function(e){return t.toShowWaybillList(i)}}},[a("span",[t._v("关联运单号:")]),t._v(" "),t._l(e.LB_labelList,function(i,s){return a("span",{key:s,attrs:{id:s}},[t._v(t._s(s==e.LB_labelList.length-1?i:i+","))])})],2):t._e()])])])])])}),t._v(" "),t.addLB_show?a("div",{staticClass:"ThreeHigh_iconjia",on:{click:t.addLightBehind}},[a("i",{staticClass:"iconfont icon-jia"}),a("span",[t._v("添加一个轻抛件")])]):t._e(),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoThreeHighCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoThreeHighConfirm}},[t._v("确定")])])],2),t._v(" "),t.ChangeInfo_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请输入数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_lb"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.displayQty,expression:"displayQty"}],attrs:{type:"number"},domProps:{value:t.displayQty},on:{input:function(e){e.target.composing||(t.displayQty=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.ChangeInfoConfirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.waybillListBOX_show?a("div",{staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"waybillListBOX"},[a("div",{staticClass:"waybillList_head"},[t._v("关联运单")]),t._v(" "),a("div",{staticClass:"waybillList_box"},t._l(t.waybillLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v("\n\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")])}),0),t._v(" "),a("div",{staticClass:"waybillList_btn"},[a("span",{on:{click:t.waybillList_confrim}},[t._v("确定")])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("长(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("宽(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("高(cm)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("重量"),e("i",[this._v("*")])])}]};var Ne=a("VU/8")(Ce,Se,!1,function(t){a("wpeQ")},"data-v-0d814bd7",null).exports,we="/kc-transport/tmsAppNew/reportAbnormalHomeSelect",Ie="/kc-opms/tmsAbnormal/addAbnormal",ke="/kc-opms/tmsAbnormal/abnormalUploadImage",De={name:"ReportAbnormal",components:{"v-scan":ht,"v-header":le,"v-uploader":Ut},data:function(){return{fetchObj:h,headerName:"上报异常",responseData:{},OMS:{},aboType:"",typeOptions:[],aboReason:"",reasonOptions:[],localtttOptions:[],aboLink:"",linkOptions:[],aboPer:"",perOptions:[],aboText:"",allData:{},dialogImageUrl:"",dialogVisible:!1,imgUrl:null,imgObj:null,uploadParams:{},imageUrl:"",switchScan:!0,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",longitude:"",latitude:"",labelList:[],selectedLabelList:[],labelInput:""}},watch:{aboType:function(t,e){if(t!=e){this.aboReason="";for(var a=0;a<this.allData.newAbnormalType.length;a++)this.allData.newAbnormalType[a].abnormalType==t&&(this.reasonOptions=this.allData.newAbnormalType[a].abnormalReason)}}},mounted:function(){this.getAboList()},created:function(){},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.confirmLabelInput()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},beforeAvatarUpload:function(t){console.log(t);var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code?this.uploadSuccessNum++:this.uploadFailNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败"):this.finishUpload("图片上传失败"):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},finishUpload:function(t){var e=this;e.$emit("isLoading",!1);var a="";t&&(a=t?","+t:""),this.$alert("异常上报成功"+a,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},commitAbo:function(){var t=this,e=this;if(e.OMS.omsNo||e.OMS.deliveryNoSF)if(!e.labelList.length||e.selectedLabelList.length)if(e.aboLink){this.uploadParams.omsNo=this.OMS.omsNo,this.uploadParams.fileType="异常",this.uploadParams.labelNo=this.aboLink,e.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(e.uploadParams);var a={omsNo:this.OMS.omsNo,deliveryNoSF:this.OMS.deliveryNoSF,transporterId:this.$store.state.userInfo.orgnizationId,transporterName:this.$store.state.userInfo.orgnizationName,sponsorName:this.$store.state.userInfo.userName,cellphone:e.$store.state.userInfo.cellphone,abnormalType:this.aboType,abnormalReason:this.aboReason,abnormalLink:this.aboLink,responsibleParty:this.aboPer,abnormalExplain:this.aboText,labelNoArr:e.selectedLabelList};this.httpRequest1("post",this.fetchObj.abnormalAdd,a).then(function(a){console.log(a),e.$alert(a.detail,"提示",{confirmButtonText:"确定",callback:function(i){var s=e.$refs.uploadAb.getImgNum();e.uploadParams.abnormalId=a.entity?a.entity.id:0,s>0&&e.$refs.uploadAb.submit(t)}})})}else e.$alert("请选择异常环节","提示",{confirmButtonText:"确定"});else e.$alert("请选择运单号","提示",{confirmButtonText:"确定"});else e.$alert("请输入单号","提示",{confirmButtonText:"确定"})},onSuccess:function(){this.$router.back(-1)},onErr:function(){this.$router.back(-1)},selectLabel:function(t){var e=this;e.labelList[t].ifSelect=!e.labelList[t].ifSelect;var a=Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont");a.hasClass("icon-xuanzhong")?(e.selectedLabelList=e.selectedLabelList.filter(function(a){return a!==e.labelList[t].productNo}),a.removeClass("icon-xuanzhong").addClass("icon-weixuanzhong")):a.hasClass("icon-weixuanzhong")&&(e.selectedLabelList.push(e.labelList[t].productNo),a.removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"))},deleteLabel:function(t){for(var e=0;e<this.labelList.length;e++)if(this.labelList[e].productNo==this.selectedLabelList[t]){this.labelList[e].ifSelect=!1,this.selectedLabelList.splice(t,1),Yt()(".SingleLatitudeBox_box>div").eq(e).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong"),console.log(this.labelList);break}},confirmLabelInput:function(){var t=this;t.labelList.forEach(function(e,a){t.labelInput==e.productNo&&(e.ifSelect=!0,Yt()(".SingleLatitudeBox_box>div").eq(a).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"),t.selectedLabelList=t.selectedLabelList.filter(function(t){return t!==e.productNo}),t.selectedLabelList.push(e.productNo))})},checkAllLabel:function(){this.selectedLabelList=[];for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!0,this.selectedLabelList[t]=this.labelList[t].productNo,Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong")},UnselectAllLabel:function(){for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!1,Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");this.selectedLabelList=[]},getAboList:function(){var t=this;this.httpRequest1("post","/kc-opms/tmsAbnormal/abnormalSelectData",{}).then(function(e){console.log(e),t.typeOptions=[],t.reasonOptions=[],t.linkOptions=[],t.perOptions=[];var a=e.entity;for(var i in t.allData=a,a.abnormalLink){var s=a.abnormalLink[i],o={};o.value=s,o.label=s,t.linkOptions.push(o)}for(var n in t.typeOptions=a.newAbnormalType,a.responsibleParty){var r=a.responsibleParty[n],c={};c.value=r,c.label=r,t.perOptions.push(c)}})},scanData:function(t){var e=this;e.selectedLabelList=[],e.labelList=[];var a={labelNo:t};console.log(a),this.httpRequest1("post",this.fetchObj.reportAbnormalQuery,a).then(function(t){if(console.log(t),t.entity){if(e.OMS={omsNo:t.entity.omsNo,deliveryNoSF:t.entity.deliveryNoSF},t.entity.labelNos&&t.entity.labelNos.length){e.labelList=[];for(var a=0;a<t.entity.labelNos.length;a++)e.labelList[a]={ifSelect:!1,productNo:t.entity.labelNos[a]}}}else e.$alert("暂无订单信息!","提示",{confirmButtonText:"确定"})})},goPrev:function(){this.$router.go(-1)},switchScanFun:function(t){this.switchScan=!!t},uploadOnChange:function(t){this.switchScanFun(!0)}}},Te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body Abnormal"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("异常上报")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,textre:"手动输入单号"},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"form-content"},[a("div",{staticClass:"form-item"},[a("label",[t._v("订单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.omsNo,callback:function(e){t.$set(t.OMS,"omsNo",e)},expression:"OMS.omsNo"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("运单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.deliveryNoSF,callback:function(e){t.$set(t.OMS,"deliveryNoSF",e)},expression:"OMS.deliveryNoSF"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常环节")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常环节选择"},model:{value:t.aboLink,callback:function(e){t.aboLink=e},expression:"aboLink"}},t._l(t.linkOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常类型")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常类型选择"},model:{value:t.aboType,callback:function(e){t.aboType=e},expression:"aboType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.abnormalType,attrs:{label:t.abnormalType,value:t.abnormalType}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常原因")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常原因选择"},model:{value:t.aboReason,callback:function(e){t.aboReason=e},expression:"aboReason"}},t._l(t.reasonOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常描述")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.aboText,callback:function(e){t.aboText=e},expression:"aboText"}})],1)]),t._v(" "),t.labelList.length?a("div",{staticClass:"SingleLatitude"},[a("div",{staticClass:"SingleLatitudeScan"},[a("div",[a("span",{staticClass:"iconfont icon-saomiao",on:{click:function(e){return t.androidScan("labelInput")}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelInput,expression:"labelInput"}],attrs:{type:"text",placeholder:"输入要异常上报的运单"},domProps:{value:t.labelInput},on:{input:function(e){e.target.composing||(t.labelInput=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.confirmLabelInput}},[t._v("确定")])])]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox"},[a("div",{staticClass:"SingleLatitudeBox_head"},[t._v("请选择要异常上报的运单")]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_box"},t._l(t.labelList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.selectLabel(i)}}},[a("span",[t._v(t._s(e.productNo))]),t._v(" "),a("span",{staticClass:"iconfont icon-weixuanzhong"})])}),0),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_btn"},[a("span",{staticClass:"checkAll",on:{click:t.checkAllLabel}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"UnselectAll",on:{click:t.UnselectAllLabel}},[t._v("全不选")])]),t._v(" "),t.selectedLabelList.length?a("div",{staticClass:"SelectedWaybill"},[a("div",{staticClass:"SelectedWaybill_head"},[t._v("已选择的运单")]),t._v(" "),a("div",{staticClass:"SelectedWaybill_box"},t._l(t.selectedLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[a("span",[t._v(t._s(e))]),t._v(" "),a("span",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.deleteLabel(i)}}})])}),0)]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"uploadAb",attrs:{title:"上传图片(限3张)",url:t.fetchObj.abnormalImg,limit:3,name:"file",params:t.uploadParams},on:{onErr:t.onErr,onSuccess:t.onSuccess}})],1),t._v(" "),a("div",{staticClass:"footer-commit"},[a("div",{staticClass:"commit",on:{click:t.commitAbo}},[t._v("提交")])])])},staticRenderFns:[]};var xe=a("VU/8")(De,Te,!1,function(t){a("5OBz")},"data-v-5cefab6d",null).exports,$e=a("BO1k"),Pe=a.n($e),Be=a("lHA8"),Oe=a.n(Be),Ae=a("c/Tr"),Fe=a.n(Ae),Ue={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",imgObj:null,longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1;var a={linkNode:"40"};a.scanPerson=this.$store.state.userInfo.userName,a.cellphone=this.$store.state.userInfo.cellphone,a.longitude=this.longitude,a.latitude=this.latitude,a.address=this.CurrentLocation,a.districict=this.CurrentDistrict,a.city=this.CurrentCity,a.omsNo=e.orderListScanned[0].order,a.deliveryId=this.deliveryId;for(var i=[],s=0;s<e.orderListScanned.length;s++)for(var o=0;o<e.orderListScanned[s].waybillNumber.length;o++){var n=e.orderListScanned[s].waybillNumber[o];i.push(n)}a.labelNoList=i,this.httpRequest1("post","/kc-transport/tmsApp/commitScanRC",a).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(e){t.$emit("reflash",!0),t.$emit("scanFun",!0)})}}},We={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n\t\t\t\t共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v("\n\t\t\t\t\t"+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n\t\t\t")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var Re={name:"WarehousingSignScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(Ue,We,!1,function(t){a("Ugt3")},"data-v-0b3b7480",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsListSignBill:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,uploadSuccessNumSignBill:0,uploadTotalNumSignBill:0,uploadFailNumSignBill:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,SignBillOMSNo:"",SignBillShow:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length;for(var e=t.orderListScanned.length,a=0,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,omsNo:t.orderListScanned[i].order,fileType:"签收",labelNo:"40"}).then(function(i){++a===e&&t.finishUpload("图片上传成功")}).catch(function(i){++a===e&&t.finishUpload(i.detail)})}},SetCurrAddress:function(t){this.ReceivingLatitud(t)},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1);console.log(e.orderListScanned)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,s=this;this.httpRequest1("post","/kc-transport/tmsApp/queryOmsNoSelectInfoRC",t).then(function(t){var o=t.entity;for(var n in t.entity.notScanned&&(s.notScanned=s.notScanned.concat(t.entity.notScanned)),t.entity.scanned&&(s.scanned=s.scanned.concat(t.entity.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}o.scanned&&null!=o.scanned.waybillNumber&&(console.log(o.scanned),i.historyLabelNo=i.historyLabelNo.concat(o.scanned.waybillNumber)),o.notScanned&&null!=o.notScanned.waybillNumber&&(i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanned.waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),console.log(i.historyLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(console.log(t),0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order);a.loadingData=!1}).catch(function(t){a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)},toHistoryWarehousingSign:function(){this.$router.push({name:"HistoryWarehousingSign"})},SignBillUpload:function(t){this.onPlusReady("e"),this.SignBillOMSNo=this.orderListScanned[t].order,this.SignBillShow=!0},cancelSignBill:function(){this.SignBillShow=!1,this.$refs.upload_refSignBill.clearFiles()},updateSignBill:function(){var t=this;this.uploadTotalNumSignBill=Yt()(".SignBillToUpload div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParamsListSignBil.cellphone=this.$store.state.userInfo.cellphone,this.uploadParamsListSignBil.driverName=this.$store.state.userInfo.userName,this.uploadParamsListSignBil.city=this.CurrentCity,this.uploadParamsListSignBil.address=this.CurrentLocation,this.uploadParamsListSignBil.district=this.CurrentDistrict,this.uploadParamsListSignBil.omsNo=this.SignBillOMSNo,this.uploadParamsListSignBil.fileType="回单",this.uploadParamsListSignBil.labelNo="40",this.uploadParamsListSignBil.returnFlag="T",this.$refs.upload_refSignBill.submit(this).then(function(e){t.finishUploadSignBill("图片上传成功")}).catch(function(){t.finishUploadSignBill("图片上传失败")})},finishUploadSignBill:function(t){var e=this;e.$emit("isLoading_",!1),this.SignBillShow=!1,t=t?","+t:"",this.$alert("签单上传成功"+t,"提示",{confirmButtonText:"确定",callback:function(){for(var t=0;t<e.orderListScanned.length;t++)if(e.orderListScanned[t].order==e.SignBillOMSNo){e.orderListScanned[t].returnOrderStatus="已签收";break}}})},uploadSuccessfulSignBill:function(t,e,a){console.log(t);1==t.status?this.uploadSuccessNumSignBill++:this.uploadFailNumSignBill++,this.uploadSuccessNumSignBill!=parseInt(this.uploadTotalNumSignBill)?parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分签单图片上传失败"):this.finishUploadSignBill("")},uploadErrSignBill:function(t,e,a){console.log(t);if(this.uploadFailNumSignBill++,this.uploadFailNumSignBill==parseInt(this.uploadTotalNumSignBill))return this.uploadSuccessNumSignBill=0,this.uploadFailNumSignBill=0,this.uploadTotalNumSignBill=0,this.$emit("isLoading",!1),void this.$alert("签单上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNumSignBill)+parseInt(this.uploadSuccessNumSignBill)==parseInt(this.uploadTotalNumSignBill)&&this.finishUploadSignBill("部分签单图片上传失败")},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},qe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("入仓签收")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")]),a("i",{staticClass:"iconfont icon-lishijilu",on:{click:t.toHistoryWarehousingSign}})]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.order)+" "),"T"==e.returnBillFlag?a("span",{staticClass:"SignReceiptStatus"},[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))]):t._e(),"T"==e.returnBillFlag?a("span",{staticClass:"SignReceipt",on:{click:function(e){return t.SignBillUpload(i)}}},[t._v("签单上传")]):t._e()]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(" "+t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.abnormalUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v("\n                "+t._s(e)+"\n              ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v("\n                "+t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.SignBillShow,expression:"SignBillShow"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"SignBillToUpload"},[a("div",{staticClass:"SignBillToUpload_head"},[t._v("签单上传")]),t._v(" "),a("div",{staticClass:"SignBillToUpload_info"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",[t._v(t._s(t.SignBillOMSNo))])]),t._v(" "),a("div",{staticClass:"SignBillToUpload_content"},[a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refSignBill",attrs:{title:"拍照上传(限6张)",url:t.abnormalUploadImage,limit:6,name:"file",isNotice:!1,params:t.uploadParamsListSignBill}})],1)])]),t._v(" "),a("div",{staticClass:"SignBillToUpload_botm"},[a("div",{on:{click:t.cancelSignBill}},[t._v("取消")]),t._v(" "),a("div",{on:{click:t.updateSignBill}},[t._v("上传")])])])]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Me=a("VU/8")(Re,qe,!1,function(t){a("Q7Lr")},"data-v-4c9302be",null).exports,Ee={name:"HistoryWarehousingSign",data:function(){return{shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={start:e.loadPage,pageSize:e.numberPerPage,driverPhone:this.$store.state.userInfo.cellphone};this.httpRequest1("post","/kc-transport/tmsApp/queryRCDeliveryData",a).then(function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.shipmentListData=e.shipmentListData.concat(a.entity.list||[]):(e.shipmentListData=a.entity.list||[],a.entity.list.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.entity.list&&a.entity.list.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,Yt()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},goprev:function(){this.$router.go(-1)}}},He={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoryWarehousingSign"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("历史记录")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult"},[a("div",[a("span",[t._v("签收时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.deliveryDate))])]),t._v(" "),a("div",[a("span",[t._v("发货人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"   \n                "+t._s(e.issuePartyTel)+"   \n              ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("收货人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"   \n                "+t._s(e.receivePartyPhone)+"   \n              ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("\n          没有更多数据\n        ")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Qe=a("VU/8")(Ee,He,!1,function(t){a("6rOW")},"data-v-3801f9de",null).exports,ze={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","actualQty","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e=(this.$route.path,{omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"25",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName});console.log(e),this.httpRequest1("post","/kc-transport/tmsApp/aviationLoadingInboundScanBatch",e).then(function(e){Yt()("div.uploadImg ul>li").length>0?t.$parent.updateimg():t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(-1)}})}).catch(function(e){t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum-this.BatchOrderLastNum?this.$alert("批量提交数量不能超过剩余未扫描总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中");this.$route.path;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=[];for(var h in this.count){var p={};p.omsNo=this.count[h].omsno,p.labelNo=this.count[h].order,p.linkNode="25",p.scanPerson=a,p.cellphone=i,p.scanTime=this.count[h].time,p.supplierId=s,p.supplierName=o,p.longitude=n,p.latitude=r,p.address=c,p.city=d,p.districict=l,u.push(p)}for(var v in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[v].order);console.log(u),this.params={aviationLoadingInboundScanParam:u},e.httpRequest1("post","/kc-transport/tmsApp/aviationLoadingInboundScan",this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0),e.$emit("isLoading_",!1)}).catch(function(a){e.$emit("isLoading_",!1),a.code&&0!=a.code&&t.$emit("scanFun",!0)})}}},Ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n      ")]),t._v(" "),a("div",{staticClass:"top"},[t._v("\n        已扫描数量:"),a("i",[t._v(" "+t._s(t.historyLabelNo.length))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<1||1==t.orderListScanned.length&&"package"!=t.orderListScanned[0].flag?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("上次已扫描数量：")]),a("span",[t._v(t._s(t.BatchOrderLastNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var je={name:"PortScanning",components:{"v-scan":Dt,"v-footer":a("VU/8")(ze,Ve,!1,function(t){a("qsTf")},"data-v-6c5dd2dd",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{independentUploadImage:"/kc-transport/commonFile/fileUpload",activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length;for(var e=t.orderListScanned.length,a=0,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,bizCode:t.orderListScanned[i].order,fileType:"enter-port-20",labelNo:"10"}).then(function(i){++a===e&&t.finishUpload("图片上传成功")}).catch(function(i){++a===e&&t.finishUpload(i.detail)})}},SetCurrAddress:function(t){this.ReceivingLatitud(t)},closeScan:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="",e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1);console.log(e.orderListScanned)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,s=this;this.loadingData=!0,this.httpRequest1("post","/kc-transport/tmsApp/queryAviationInboundScan",t).then(function(t){console.log(t);var o=t.entity;for(var n in i.$refs.ch.code="",t.entity.notScanned&&(s.notScanned=s.notScanned.concat(t.entity.notScanned)),t.entity.scanned&&(s.scanned=s.scanned.concat(t.entity.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}o.scanned&&o.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(o.scanned[0].waybillNumber)),o.notScanned&&o.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1);console.log(i.orderListScanned)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}).catch(function(t){a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)}}},Xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("入港扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order))]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e))])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.independentUploadImage,limit:6,params:t.uploadParamsList[i],isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{ref:"child",attrs:{count:t.orderList,actualQty:t.actualQty,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Je=a("VU/8")(je,Xe,!1,function(t){a("YH8Z")},"data-v-29f93332",null).exports,Ye="/kc-transport/tmsApp/getImagesByOrderSFNoApp",Ge="/kc-transport/commonFile/fileUpload",Ke={name:"UploadReceipt",components:{"v-scan":he,"v-uploader":Ut},data:function(){return{fetchObj:p,dialogImageUrl:"",dialogVisible:!1,uploadParamsgoods:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,omsNo:"",PaperSheetimgDataList:[],tips_Msg:"",ifTips:!1,failText:"部分图片上传失败"}},mounted:function(){},created:function(){},methods:{goprev:function(){this.$router.push({name:"Index"})},updateimg:function(){var t=this;return ie()(ee.a.mark(function e(){var a,i,s;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,t.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.uploadTotalNum),t.omsNo){e.next=6;break}return a.$alert("请输入订单号/运单号，并点击确认按钮","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 6:if(!(Yt()("div.PaperSheet ul>li").length>0&&a.PaperSheetimgDataList.length+Yt()("div.PaperSheet ul>li").length>6)){e.next=9;break}return a.$alert("签收单最多上传六张图片","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 9:if(!(t.$refs.upload_refTransit.getImgNum()<=0)){e.next=12;break}return a.$alert("请上传照片","提示",{confirmButtonText:"确定"}),e.abrupt("return");case 12:return t.uploadParamsgoods.fileType="sign-order",t.uploadParamsgoods.bizCode=t.omsNo,t.uploadParamsgoods.orgnizationId=a.$store.state.userInfo.orgnizationId,t.uploadParamsgoods.cellphone=a.$store.state.userInfo.cellphone,i=a.$refs.upload_refTransit.submit(a),e.next=19,i.catch(function(t){a.$alert(t.detail,"提示",{confirmButtonText:"确定",callback:function(t){}})});case 19:(s=e.sent)&&0==s.code&&a.$alert("上传图片成功!","提示",{confirmButtonText:"确定",callback:function(t){a.selectimg()}});case 21:case"end":return e.stop()}},e,t)}))()},selectimg:function(){var t=this,e={orderSFNo:t.omsNo};console.log(e),this.httpRequest1("post",this.fetchObj.getImagesByOrderSFNoApp,e).then(function(e){console.log(e),e.entity?(t.$previewRefresh(),e.entity.ordNo&&(t.omsNo=e.entity.ordNo),t.PaperSheetimgDataList=e.entity.pics||[]):t.PaperSheetimgDataList=[]}).catch(function(e){t.omsNo="",t.PaperSheetimgDataList=[]})},switchScanFun:function(t){this.switchScan=!!t},scanData:function(t){},scanData_com:function(t){this.omsNo=t,this.selectimg()},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),e.uploadSuccessNum=0,e.uploadFailNum=0,e.uploadTotalNum=0,this.$refs.upload_refTransit.clearFiles(),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.selectimg()}})},uploadSuccessful:function(t,e,a){console.log(t),console.log(t.status);1==t.status?this.uploadSuccessNum++:(this.failText=t.Msg,this.uploadFailNum++),this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)!=parseInt(this.uploadTotalNum)||this.finishUpload(this.failText):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload(this.failText)},uploadOnChange:function(t){this.switchScanFun(!0)}}},Ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AirMasterScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("签收单")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData,textre:"手动输入订单号/运单号"},on:{scanData:t.scanData,scanData_com:t.scanData_com}})],1),t._v(" "),a("div",{staticClass:"order-level"},[t.omsNo?a("div",{staticClass:"orderinfo"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",[t._v(t._s(t.omsNo))])])]):t._e(),t._v(" "),t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPicture"},[t.PaperSheetimgDataList&&t.PaperSheetimgDataList.length?a("div",{staticClass:"UploadedPictureimg"},[a("div",{staticClass:"UploadedPicturehead"},[t._v("已上传照片： ")]),t._v(" "),t._l(t.PaperSheetimgDataList,function(e,i){return a("div",{key:i,staticClass:"UploadedPictureimgitem",attrs:{id:i}},[a("img",{attrs:{src:t.getImgUrl(e.fileName),preview:"99",alt:""}})])})],2):t._e()]):t._e(),t._v(" "),a("v-uploader",{ref:"upload_refTransit",attrs:{title:"签收单照片（限6张）",url:t.fetchObj.fileUpload,limit:6,name:"mainFile",isNotice:!1,params:t.uploadParamsgoods}})],1),t._v(" "),a("div",{staticClass:"submitBtn"},[a("div",{staticClass:"g_signBtn",on:{click:t.updateimg}},[t._v("上传")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ta=a("VU/8")(Ke,Ze,!1,function(t){a("Kqn+")},"data-v-28e9c573",null).exports,ea=a("bOdI"),aa=a.n(ea),ia={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","deliveryId","hideBitch","transportLinks","actualQty","orderId","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;window.onresize=function(){t.realHeight=document.body.clientHeight},this.onPlusReady("e")},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e=(this.$route.path,{omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"28",unloadPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName});console.log(e),this.httpRequest1("post","/kc-transport/tmsApp/batchSavePaitiScan",e).then(function(e){console.log(e),Yt()("div.uploadImg ul>li").length>0?t.$parent.updateimg():t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.BatchCommit_show=!1,t.AllCommitPopUp_show=!1,t.$emit("reflash",!0)}})}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("reflash",!0),t.$emit("scanFun",!0)})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum?this.$alert("批量提交数量不能超过总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber<this.BatchOrderNum?this.$alert("子母件分离请逐渐扫描","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1;this.$route.path;for(var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=[],h=0;h<e.orderListScanned.length;h++)for(var p=0;p<e.orderListScanned[h].waybillNumber.length;p++){var v=e.orderListScanned[h].waybillNumber[p];u.push(v)}console.log(u),this.params={labels:u,deliveryId:e.deliveryId,linkNode:"28",unloadPerson:a,cellphone:i,longitude:n,latitude:r,address:c,city:d,districict:l,supplierId:s,supplierName:o},this.httpRequest1("post","/kc-transport/tmsApp/savePaitiScans",this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(t){e.$emit("isLoading_",!1)})}}},sa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n         共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v(" "+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n       ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n         当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n       ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<=1?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var oa={name:"LeadWarehouseScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(ia,sa,!1,function(t){a("owtF")},"data-v-327224bd",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return aa()({independentUploadImage:"/kc-transport/commonFile/fileUpload",activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,latitude:"",longitude:"",CurrentCity:"",CurrentLocation:"",CurrentDistrict:""},"ifflash",!1)},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length;for(var e=t.orderListScanned.length,a=0,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,bizCode:t.orderListScanned[i].order,fileType:"front-warehouse"}).then(function(i){++a===e&&t.finishUpload("图片上传成功")}).catch(function(i){++a===e&&t.finishUpload(i.detail)})}},SetCurrAddress:function(t){this.ReceivingLatitud(t)},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="",e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",returnBillFlag:e.notScanned[i].returnBillFlag,returnOrderStatus:e.notScanned[i].returnOrderStatus,time:e.getTheTimeNow(),waybillNumber:[a]});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1);console.log(e.orderListScanned)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,s=this;this.httpRequest1("post","/kc-transport/tmsApp/queryPaitiInfo",t).then(function(t){console.log(t);var o=t.entity;for(var n in i.$refs.ch.code="",t.entity.notScanned&&(s.notScanned=s.notScanned.concat(t.entity.notScanned)),t.entity.scanned&&(s.scanned=s.scanned.concat(t.entity.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}o.scanned&&o.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(o.scanned[0].waybillNumber)),o.notScanned&&o.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(console.log(e),console.log(t),0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",returnBillFlag:i.notScanned[a].returnBillFlag,returnOrderStatus:i.notScanned[a].returnOrderStatus,time:i.getTheTimeNow(),waybillNumber:[t]});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1);console.log(i.orderListScanned)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order)}).catch(function(t){a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.BatchCommit_show=!1,e.AllCommitPopUp_show=!1,e.reflashData()}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)},toHistoryLeadWarehousingSign:function(){this.$router.push({name:"HistoryLeadWarehousingSign"})},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WarehousingSignScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("前置仓扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")]),a("i",{staticClass:"iconfont icon-lishijilu",on:{click:t.toHistoryLeadWarehousingSign}})]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i+"y",staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{key:i+"w",staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.independentUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i+"p",staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{key:i+"o",staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i+"l",staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{key:i+"k",staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var ra=a("VU/8")(oa,na,!1,function(t){a("9n+I")},"data-v-1052e1ed",null).exports,ca={name:"HistoryLeadWarehousingSign",data:function(){return{shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},created:function(){this.loadData()},methods:{loadData:function(t){var e=this,a={start:e.loadPage,pageSize:e.numberPerPage,driverPhone:this.$store.state.userInfo.cellphone};this.httpRequest1("post","/kc-transport/tmsApp/queryPaitiScans",a).then(function(a){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?e.shipmentListData=e.shipmentListData.concat(a.entity.list||[]):(e.shipmentListData=a.entity.list||[],a.entity.list.length?e.is_NoData=!1:(e.is_NoData_text="没有任务",e.is_NoData=!0)),a.entity.list&&a.entity.list.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,Yt()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))},goprev:function(){this.$router.go(-1)}}},la={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoryWarehousingSign"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("历史记录")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult"},[a("div",[a("span",[t._v("发货人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"   \n                "+t._s(e.issuePartyTel)+"   \n              ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("收货人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"   \n                "+t._s(e.receivePartyPhone)+"   \n              ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("\n          没有更多数据\n        ")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var da=a("VU/8")(ca,la,!1,function(t){a("ISAU")},"data-v-6de380a6",null).exports,ua={name:"PrintExpress",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],printData:[],is_NoData:!1,loadingData:!1,OrderInfo_show:!1,scanLabel:"",tips_Msg:"",ifTips:!1,ifflash:!1}},components:{"v-scan":Dt},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:t};this.httpRequest1("post","/kc-transport/tmsApp/queryOrderPrinting",a).then(function(t){for(var a in t.entity.length?e.is_NoData=!1:e.is_NoData=!0,t.entity[1])t.entity[0][a]=t.entity[1][a],console.log(t.entity[0][a]);for(var i in t.entity[0].bsOrderWt&&(t.entity[0].bsOrderWt=parseFloat(t.entity[0].bsOrderWt/1e3)),t.entity[0])0==t.entity[0][i]&&(t.entity[0][i]="-");e.OrderInfoData=t.entity[0],e.OrderInfoDataList=t.entity[2],e.printData=[],e.printData[0]=t.entity[0],e.printData[1]=t.entity[2],e.OrderInfo_show=!0}).catch(function(t){})},printBtn:function(t,e){var a=[];t&&"item"==t?(a[0]=this.OrderInfoData,a[1]=[this.OrderInfoDataList[e]],console.log(a),a=k()(a)):(console.log(this.printData),a=k()(this.printData));try{CallAndroidOrIOS.callAndroid("航空标签打印",a)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"航空标签打印",b:a})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ha={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PrintExpress"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("航空标签打印")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("货物名称：")]),a("span",[t._v(t._s(t.OrderInfoData.productName))])]),t._v(" "),a("div",[a("span",[t._v("发货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货城市：")]),a("span",[t._v(t._s(t.OrderInfoData.receivePartyCity))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),a("span",[t._v(t._s(t.OrderInfoData.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("实重：")]),a("span",[t._v(t._s(t.OrderInfoData.displayWt))])])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:t.printBtn}},[t._v("打印所有标签")])])]):t._e(),t._v(" "),t.OrderInfoDataList.length?a("div",{staticClass:"ExpressListHead"},[t._v("标签列表")]):t._e(),t._v(" "),t._l(t.OrderInfoDataList,function(e,i){return a("div",{key:i,staticClass:"AbnormalItem",attrs:{id:i}},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("标签号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.productNo)+"\n              "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.productNo,expression:"dataItem.productNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])])]),t._v(" "),a("div",{staticClass:"operateBtn"},[a("div",{on:{click:function(e){return t.printBtn("item",i)}}},[t._v("打印")])])])})],2),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[t._m(0)]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有数据")])])}]};var pa=a("VU/8")(ua,ha,!1,function(t){a("HrtS")},"data-v-e4ede508",null).exports,va="/kc-transport/tmsAppNew/queryShipmentData",ma="/kc-transport/tmsAppNew/queryDeliverDetailInfo",fa="/kc-transport/tmsAppNew/updateReceivingStatus",_a="/kc-transport/tmsAppNew/updateDeliveryScanNumberBatch ",ga={name:"WaybillInfo_template",data:function(){return{fetchObj:m,currentAddressInfo:{},address_listData:[],typeMShow:!1,Navigate_addressList:[],shipmentIdx:0,tips_Msg:"",ifTips:!1,ifWarehouse:"Y"}},props:{shipmentListData:{},LinkStatus:"",orderList:{type:Array,default:function(){return[]}}},created:function(){},watch:{orderList:function(t){for(var e=0;e<this.orderList.length;e++)if("Y"==this.orderList[e].whetherWarehouseBusiness){this.ifWarehouse="N";break}}},methods:{_ewm:function(t){event.stopPropagation();this.$route.query.LinkStatus=this.LinkStatus,console.log(this.$route.query.LinkStatus),this.$router.push({name:"QRCode",query:{shipmentCode:t,LinkStatus:this.LinkStatus}})},OrderReceiving:function(t,e){var a=this,i={shipmentID:a.shipmentListData[e].shipmentID,type:t};a.httpRequest1("post",this.fetchObj.updateReceivingStatus,i).then(function(t){a.$alert("成功","提示",{confirmButtonText:"确定",callback:function(){"Waybill"==a.$route.name?a.$emit("fatherMethodloadData"):a.$parent.loadData()}})})},toPickUpRandomScan:function(t){event.stopPropagation();var e=this;if(e.orderList&&e.orderList.length){for(var a=[],i=0;i<e.orderList.length;i++)a[a.length]=e.orderList[i].omsNo;console.log(a);var s={omsNo:a};console.log(s),e.httpRequest1("post",gt,s).then(function(a){e.$router.push({name:"PickUpRandomScan",query:{shipmentCode:e.shipmentListData[t].shipmentCode}})})}else this.$router.push({name:"PickUpRandomScan",query:{shipmentCode:e.shipmentListData[t].shipmentCode}})},toAirportPickUpRandomScan:function(t){event.stopPropagation();this.$router.push({name:"AirportPickUpRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toToSendRandomScan:function(t){event.stopPropagation();this.$store.state.ifNoMissionStowage?this.$router.push({name:"ToNoMissionSendRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}}):this.$router.push({name:"ToSendRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},oneTimeSubmit:function(t,e){event.stopPropagation();var a=this;if(a.$store.state.ifNoMissionStowage){var i={shipmentCode:a.shipmentListData[e].shipmentCode,transportLinks:t,driverName:a.$store.state.userInfo.userName,cellphone:a.$store.state.userInfo.cellphone};console.log(i),this.httpRequest1("post",this.fetchObj.updateDeliveryScanNumberBatch,i).then(function(t){a.$alert("成功","提示",{confirmButtonText:"确定",callback:function(){"Waybill"==a.$route.name?a.$emit("fatherMethodloadData"):a.$parent.loadData()}})})}else{i={shipmentCode:a.shipmentListData[e].shipmentCode,transportLinks:t,driverName:a.$store.state.userInfo.userName,cellphone:a.$store.state.userInfo.cellphone};console.log(i),this.httpRequest1("post",this.fetchObj.updateDeliveryScanNumberBatch,i).then(function(t){a.$alert("成功","提示",{confirmButtonText:"确定",callback:function(){"Waybill"==a.$route.name?a.$emit("fatherMethodloadData"):a.$parent.loadData()}})})}},toSignRandomScan:function(t){event.stopPropagation();for(var e=!1,a=!1,i=!1,s=0;s<this.orderList.length;s++){if("Y"==this.orderList[s].whetherWarehouseBusiness){a=!0;break}if(this.orderList[s].chargeTypes&&-1!=this.orderList[s].chargeTypes.indexOf("到付")&&"ZK"==this.orderList[s].reference10){e=!0;break}if("Y"==this.orderList[s].iN01Flag&&"ZK"==this.orderList[s].reference10){i=!0;break}}a?this.$alert("订单中包含入仓签收的单，你不能进行签收扫描","提示",{confirmButtonText:"确定"}):e?this.$alert("订单中包含直客的到付单，请使用订单上的签收扫描进行扫描操作","提示",{confirmButtonText:"确定"}):i?this.$alert("订单中包含需代收货款订单，请使用订单上的签收扫描进行扫描操作","提示",{confirmButtonText:"确定"}):this.$router.push({name:"SignRandomScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toDepartTakingPictures:function(t){event.stopPropagation();this.$router.push({name:"DepartTakingPictures",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toUnloadingTakingPictures:function(t){event.stopPropagation();this.$router.push({name:"UnloadingTakingPictures",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toDeliveryScanXH:function(t){event.stopPropagation();this.$router.push({name:"DeliveryScanXH",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toMassTransfer:function(t){event.stopPropagation();this.$router.push({name:"MassTransfer",query:{shipmentCode:this.shipmentListData[t].shipmentCode}})},toAbnormal:function(t){event.stopPropagation();this.$router.push({name:"Abnormal",query:{shipmentCode:this.shipmentListData[t].shipmentCode,linkno:"20"}})},toTrackOnTheWay:function(t){event.stopPropagation();this.$router.push({name:"TrackOnTheWay",query:{shipmentID:this.shipmentListData[t].shipmentID}})},Details_waybill:function(t,e){"WaybillInfo"!=this.$route.name&&10!=this.DriverError(e)&&(this.$store.state.Waybill.WaybillInfo.clickWaybillInfo=[this.shipmentListData[e]],this.$store.state.Waybill.WaybillInfo.clickShipmentId=t,this.$router.push({name:"WaybillInfo",query:{LinkStatus:this.LinkStatus}}))},DriverError:function(t){var e=this;if("F"==e.shipmentListData[t].countDelivery)return e.$alert("该配载单中没有运单，请与调度联系","提示",{confirmButtonText:"确定",callback:function(t){"Waybill"==e.$route.name?e.$emit("fatherMethodloadData"):e.$router.push({name:"WaybillInfo"})}}),10},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ba={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_template_WaybillInfo"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybill(e.shipmentID,i,t.LinkStatus)}}},[a("span",{staticClass:"Navigation",on:{click:function(e){return t.Navigation(i)}}},[t._v("导航")]),t._v(" "),e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v("配载单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.shipmentCode))]),t._v("  \n\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t\t"),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(a){return t._ewm(e.shipmentCode)}}})]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(e.countDelivery)+" 单   ")])]),t._v(" "),a("div",[a("div",[a("span",[t._v("物流公司：")]),t._v(" "),a("span",[t._v(t._s(e.transPartyName))])])]),t._v(" "),e.issueAddrLiat&&1==e.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),e.issueAddrLiat&&1==e.issueAddrLiat.length?a("div",[a("span",[t._v("联 系  人：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueUser)+"   \n\t\t\t\t\t\t"+t._s(e.issueAddrLiat[0].issuePhone))]),t._v("      "),e.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),e.issueAddrLiat&&e.issueAddrLiat.length>1?a("div",[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"},on:{click:function(e){return t.MultiAddress(i)}}},[t._v("查看多装货地址")])]):t._e()]),t._v(" "),a("p",["Link_PickUp"==t.LinkStatus&&"未接单"==e.receivingStatus?a("span",{on:{click:function(e){return t.OrderReceiving("接单",i)}}},[t._v("接单")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path?a("span",{on:{click:function(e){return t.toPickUpRandomScan(i)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path?a("span",{on:{click:function(e){return t.oneTimeSubmit("10",i)}}},[t._v("一键提交")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.toAirportPickUpRandomScan(i)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.oneTimeSubmit("27",i)}}},[t._v("一键装车")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.toToSendRandomScan(i)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"WEI"==e.loadFeeStatus?a("span",{on:{click:function(e){return t.oneTimeSubmit("30",i)}}},[t._v("一键装车")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"/WaybillInfo"==t.$route.path&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"==t.ifWarehouse?a("span",{on:{click:function(e){return t.toSignRandomScan(i)}}},[t._v("签收扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"未到达"==e.daoDaStatus?a("span",{on:{click:function(e){return t.OrderReceiving("到达",i)}}},[t._v("到场确认")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus?a("span",{on:{click:function(e){return t.toAbnormal(i)}}},[t._v("异常上报")]):t._e()])])}),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i)}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("      "),t.currentAddressInfo.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}}):t._e()])])])]),t._v(" "),t.typeMShow?a("div",{staticClass:"Navigate_MultiAddress"},[a("div",[a("div",{staticClass:"SelectTitle"},[t._v("请选择导航地址")]),t._v(" "),a("div",{staticClass:"SelectContent"},t._l(t.Navigate_addressList,function(e,i){return a("div",{key:i,staticClass:"addressContent",attrs:{id:i},on:{click:function(a){return t.Navigate_SelectComit(e.issueAddr1)}}},[a("div",[a("span",{staticClass:"ORFlag"},[t._v(t._s(e.ORFlag?e.ORFlag:"发"))]),a("span",[t._v(t._s(e.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v(t._s(e.issueUser)+"\n\t\t\t\t\t\t\t\t     ")]),a("span",[t._v(t._s(e.issuePhone))]),e.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(a){return t.callPhone(e.issuePhone)}}}):t._e()])])}),0),t._v(" "),a("div",{staticClass:"cancel",on:{click:function(e){return t.selectCancel("e")}}},[t._v("取消")])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])}]};var ya=a("VU/8")(ga,ba,!1,function(t){a("vi9z")},"data-v-5b0089b2",null).exports,La={name:"Waybill",data:function(){return{fetchObj:v,shipmentListData:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,LinkStatus:"Link_PickUp",searchSelectType:2}},components:{FooterIndex:tt,WaybillInfo_template:ya},mounted:function(){this.allLoaded=!1},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$store.state.Waybill.waybillLinkStatus&&(this.LinkStatus=this.$store.state.Waybill.waybillLinkStatus),this.loadData()},methods:{LinkChoose:function(t){this.loadPage=1,this.allLoaded=!1,this.LinkStatus=t,this.$store.state.Waybill.waybillLinkStatus=t,this.loadData()},loadData:function(t,e){var a=this,i={start:a.loadPage,pageSize:a.numberPerPage,startDate:null,endDate:null,deliveryNoinput:null,shipmentCodeinput:null,clientOrderNo:null,cellphone:a.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":"",searchNumberNo:a.$store.state.Waybill.Waybill_SearchData,searchType:a.$store.state.Waybill.Waybill_SearchType};a.httpRequest1("post",this.fetchObj.queryShipmentData,i).then(function(i){t&&("TopLoad"==t?a.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&a.$refs.loadmore.onBottomLoaded()),a.loadPage>1?a.shipmentListData=a.shipmentListData.concat(i.entity.list||[]):(a.shipmentListData=i.entity.list||[],a.shipmentListData.length>0?a.is_NoData=!1:(a.is_NoData_text="没有任务",a.is_NoData=!0)),a.shipmentListData.length&&"T"==e&&(a.$store.state.Waybill.WaybillInfo.clickWaybillInfo=[a.shipmentListData[0]],a.$store.state.Waybill.WaybillInfo.clickShipmentId=a.shipmentListData[0].shipmentID,a.$router.push({name:"WaybillInfo",query:{LinkStatus:a.LinkStatus,Waybill_SearchData:a.$store.state.Waybill.Waybill_SearchData,Waybill_SearchType:a.$store.state.Waybill.Waybill_SearchType}})),i.entity.list&&i.entity.list.length<a.numberPerPage?a.allLoaded=!0:a.allLoaded=!1})},SearchSelect:function(t){"order"==t?(this.$store.state.Waybill.Waybill_SearchType=1,this.searchSelectType=1):(this.$store.state.Waybill.Waybill_SearchType=2,this.searchSelectType=2)},SearchWaybill:function(){0==this.$store.state.Waybill.Waybill_SearchType&&(this.$store.state.Waybill.Waybill_SearchType=2),""==this.$store.state.Waybill.Waybill_SearchData&&(this.$store.state.Waybill.Waybill_SearchType=0),this.loadData(null,"T")},searchLabel_close:function(){this.$store.state.Waybill.Waybill_SearchData="",this.$store.state.Waybill.Waybill_SearchType=0,this.loadData()},fatherMethodloadData:function(){this.loadData()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},historyTask:function(){this.$router.push({name:"historyList"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},Ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Waybill"},[a("header",[a("div",{staticClass:"currentTask"},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask",on:{click:t.historyTask}},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{class:{selected_head:"Link_PickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_PickUp")}}},[a("span",[t._v("提货")])]),t._v(" "),a("div",{class:{selected_head:"Link_Transit"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_Transit")}}},[a("span",[t._v("中转")])]),t._v(" "),a("div",{class:{selected_head:"Link_AirportPickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_AirportPickUp")}}},[a("span",[t._v("派提")])]),t._v(" "),a("div",{class:{selected_head:"Link_ToSend"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_ToSend")}}},[a("span",[t._v("派件")])])]),t._v(" "),a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.Waybill.Waybill_SearchData,expression:"$store.state.Waybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.Waybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.Waybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{class:["search-box-line",1==t.searchSelectType?"active":""],on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{class:["search-box-line",2==t.searchSelectType?"active":""],on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),a("div",{staticClass:"SearchBoxBtn"},[a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.Waybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.Waybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.Waybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,LinkStatus:t.LinkStatus},on:{fatherMethodloadData:t.fatherMethodloadData,isLoading_:t.fullscreenLoading}}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],1)])],1),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[]};var Sa=a("VU/8")(La,Ca,!1,function(t){a("5KeO")},"data-v-2a7f2a60",null).exports,Na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",t._l(t.footList,function(e,i){return a("div",{key:i,class:{active:t.active==e.title},attrs:{id:i},on:{click:function(e){return t.toggle(i)}}},[a("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),a("p",[t._v(t._s(e.title))])])}),0)])},staticRenderFns:[]};var wa=a("VU/8")({name:"FooterIndex",data:function(){return{footList:[{path:"Index",title:"首页",icon:"icon-shouye-blue"},{path:"AviationWaybill",title:"航空任务",icon:"icon-woderenwu"}],active:"航空任务"}},created:function(){for(var t=0;t<this.footList.length;t++){if("historyList"==this.$route.name)return void(this.active="航空任务");if(this.$route.name==this.footList[t].path)return void(this.active=this.footList[t].title)}this.$route.query.active&&(this.active=this.$route.query.active)},methods:{toggle:function(t){this.$store.state.Waybill_needRefresh=!1,this.active=this.footList[t].title,this.$router.push({name:this.footList[t].path,query:{active:this.footList[t].title}})}}},Na,!1,function(t){a("MLBd")},"data-v-46272bc2",null).exports,Ia={name:"Aviation_template_WaybillInfo",data:function(){return{currentAddressInfo:{},address_listData:[],typeMShow:!1,Navigate_addressList:[],shipmentIdx:0,tips_Msg:"",ifTips:!1}},props:{shipmentListData:{},packageArray:{}},created:function(){},methods:{Details_waybillPackage:function(t){this.$router.push({name:"PackageDetail",query:{contnrCode:t}})},Details_waybill:function(t){this.$router.push({name:"AviationWaybillInfo",query:{deliveryId:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ka={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Aviation_template_WaybillInfo"},[t._l(t.packageArray,function(e,i){return a("div",{key:i+"w",staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybillPackage(e.contnrCode)}}},[e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v("包 号 ：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.contnrCode))]),t._v("  \n\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t")]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedDepartureTime))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(e.createOrderContactName))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])])])])}),t._v(" "),t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"listHead",on:{click:function(a){return t.Details_waybill(e.deliveryId,i)}}},[e.status?a("span",{staticClass:"LicensePlate"},[t._v(t._s(e.status))]):t._e(),t._v(" "),t._m(1,!0),t._v(" "),e.aviationScanNum<e.orderQty&&e.aviationScanNum>0?a("div",{staticClass:"unfinished"},[a("span",[t._v("未扫完")])]):t._e(),t._v(" "),a("div",{staticClass:"codestyle"},[a("span",[t._v("订 单 号 ：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.omsNo))]),t._v("  \n\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF"}],staticClass:"codestyle"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],on:{click:t.stopevent}},[t._v(t._s(e.deliveryNoSF))]),t._v("  \n\t\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t")]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(e.createOrderContactName))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",[a("span",[t._v("已扫描件数：")]),t._v(" "),a("span",[t._v(t._s(e.aviationScanNum))])])])])}),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"firstLine"},[e("i",{staticClass:"iconfont"})])}]};var Da={name:"AviationWaybill",data:function(){return{tips_Msg:"",ifTips:!1,shipmentListData:[],packageArray:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:10,loadPage:1,allLoaded:!0,autoFill:!1}},components:{AviationFooter:wa,WaybillInfo_template:a("VU/8")(Ia,ka,!1,function(t){a("fbFv")},"data-v-3c7c9270",null).exports},mounted:function(){this.allLoaded=!1,1==this.$store.state.AviationWaybill.Waybill_SearchType?Yt()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000"):Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},created:function(){},methods:{QRScanAjax:function(t){this.$store.state.AviationWaybill.Waybill_SearchData=t,this.SearchWaybill()},storeAndroidScan:function(){window.QRScanAjax=this.QRScanAjax,window.TellVue_QRScanResult_Ajax=this.QRScanAjax;try{CallAndroidOrIOS.VueSCAN()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生扫描二维码/条码"})}catch(t){}},loadData:function(t){var e=this;return ie()(ee.a.mark(function a(){var i,s,o,n,r,c;return ee.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=e,""==e.$store.state.AviationWaybill.Waybill_SearchData&&(e.$store.state.AviationWaybill.Waybill_SearchType=0),s={start:i.loadPage,pageSize:i.numberPerPage,aviationIsLoaded:"WEI",transporterId:i.$store.state.userInfo.orgnizationId,searchNumberNo:i.$store.state.AviationWaybill.Waybill_SearchData,searchType:i.$store.state.AviationWaybill.Waybill_SearchType,flightDepcode:i.$store.state.userInfo.aiportCode},o=i.httpRequest1("post","/kc-transport/tmsApp/queryAviationDeliveryData",s),n=i.httpRequest1("post","/kc-transport/tmsApp/queryAviationPackageData",s),a.next=7,o;case 7:return r=a.sent,a.next=10,n;case 10:c=a.sent,t&&("TopLoad"==t?i.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&i.$refs.loadmore.onBottomLoaded()),r.entity.list=r.entity.list||[],c.entity.list=c.entity.list||[],i.loadPage>1?(i.shipmentListData=i.shipmentListData.concat(r.entity.list||[]),i.packageArray=i.packageArray.concat(c.entity.list||[])):(i.shipmentListData=r.entity.list||[],i.packageArray=c.entity.list||[],r.entity.list.length||c.entity.list.length?i.is_NoData=!1:(i.is_NoData_text="没有任务",i.is_NoData=!0)),r.entity.list.length<i.numberPerPage||c.entity.list.length<i.numberPerPage?i.allLoaded=!0:i.allLoaded=!1;case 16:case"end":return a.stop()}},a,e)}))()},SearchSelect:function(t){"order"==t?(this.$store.state.AviationWaybill.Waybill_SearchType=1,Yt()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.AviationWaybill.Waybill_SearchType=2,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},BatchLoading:function(){var t=this;this.$confirm("确认要一键提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={transporterId:t.$store.state.userInfo.orgnizationId,appFlightDepcode:t.$store.state.userInfo.aiportCode,driverPhone:t.$store.state.userInfo.cellphone,driverName:t.$store.state.userInfo.userName};t.httpRequest1("post","/kc-transport/tmsApp/aviationUpdateDeliveryScanNumberBatch",e).then(function(e){t.ifTips=!0,t.tips_Msg=e.detail,setTimeout(function(){t.ifTips=!1,t.loadData()},1500)})}).catch(function(){})},SearchWaybill:function(){0==this.$store.state.AviationWaybill.Waybill_SearchType&&(this.$store.state.AviationWaybill.Waybill_SearchType=2),""==this.$store.state.AviationWaybill.Waybill_SearchData&&(this.$store.state.AviationWaybill.Waybill_SearchType=0),this.loadData()},searchLabel_close:function(){this.$store.state.AviationWaybill.Waybill_SearchData="",this.$store.state.AviationWaybill.Waybill_SearchType=0,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},fatherMethodloadData:function(){this.loadData()},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},historyTask:function(){this.$router.push({name:"AviationHistoryList"})},toAviationAllTransitScan:function(){this.$router.push({name:"AviationAllTransitScan"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},Ta={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationWaybill"},[a("header",[a("div",{staticClass:"currentTask"},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask",on:{click:t.historyTask}},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{on:{click:t.toAviationAllTransitScan}},[a("span",[t._v("航空出港扫描")]),a("i",{staticClass:"iconfont icon-sousuoxiawu-"})])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.AviationWaybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.AviationWaybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.AviationWaybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.AviationWaybill.Waybill_SearchData,expression:"$store.state.AviationWaybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.AviationWaybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.AviationWaybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{staticClass:"SearchBoxOrder",on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{staticClass:"SearchBoxSFOrder",on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),a("div",{staticClass:"SearchBoxBtn",on:{click:t.storeAndroidScan}},[a("i",{staticClass:"iconfont icon-sousuoxiawu-"})])]),t._v(" "),a("div",{staticClass:"SearchBoxBtnquery"},[t.shipmentListData.length||t.packageArray.length?a("div",{on:{click:t.BatchLoading}},[t._v("一键提交")]):t._e(),t._v(" "),a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])]),t._v(" "),a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,packageArray:t.packageArray},on:{fatherMethodloadData:t.fatherMethodloadData,isLoading_:t.fullscreenLoading}}),t._v(" "),t.allLoaded&&(t.shipmentListData.length||t.packageArray.length)?a("div",{staticClass:"nodata_label"},[t._v("\n\t\t\t\t\t没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],1)])],1),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("AviationFooter")],1)},staticRenderFns:[]};var xa=a("VU/8")(Da,Ta,!1,function(t){a("PiNF")},"data-v-70a82245",null).exports,$a={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,deliveryMethod_crru:"",forwardSupplier_crru:"",forwardSupplierId_crru:"",CarrierList:[],CarrierSelection_show:!1,CarrierSelecteditem:0,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","deliveryMethod","forwardSupplier","forwardSupplierId","reference10","chargeTypes","shipmentNum"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),this.deliveryMethod_crru=this.deliveryMethod,this.forwardSupplier_crru=this.forwardSupplier,this.forwardSupplierId_crru=this.forwardSupplierId,window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1,"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=this.deliveryMethod_crru,h=this.forwardSupplier_crru,p=this.forwardSupplierId_crru;console.log(this.count);var v=[];for(var m in this.count){var f={};f.omsNo=this.count[m].omsno,f.labelNo=this.count[m].order,f.linkNode="10",f.scanPerson=a,f.cellphone=i,f.scanTime=this.count[m].time,f.supplierId=s,f.supplierName=o,f.longitude=n,f.latitude=r,f.address=c,f.city=d,f.districict=l,f.deliveryMethod=u,f.forwardSupplier=h,f.forwardSupplierId=p,v.push(f)}var _=[];for(var g in this.cacheResponseData){var b={},y=this.cacheResponseData[g];b.omsNo=y.omsNo,b.displayWt=y.displayWt,b.linkNode="10",_.push(b)}for(var L in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[L].order);this.params={params:v,labelNo:this.cleanOrderList},console.log(this.params),this.httpRequest1("post",Qt,this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}}),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$emit("isLoading_",!1)}).catch(function(e){t.$emit("scanFun",!0),t.$emit("isLoading_",!1)})}}},Pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ba={name:"PickUpRandomScan",components:{"v-scan":Dt,"v-footer":a("VU/8")($a,Pa,!1,function(t){a("zH73")},"data-v-30f36d24",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"10"};console.log(e),this.httpRequest1("post","/kc-transport/tmsAppNew/shipmentCodeSelectInfo",e).then(function(e){console.log(e),e.entity.notScanned?t.notScanned=e.entity.notScanned:t.notScanned=[],e.entity.scanned?t.scanned=e.entity.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length),console.log(t.shipmentNum),console.log(t.historyLabelNo),console.log(t.notScanLabelNo)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.orderListScanned);for(var e=0,a=t.orderListScanned.length,i=0;i<t.orderListScanned.length;i++){var s=t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,omsNo:t.orderListScanned[i].order,fileType:"装车扫描",labelNo:"10"});console.log(s),s.then(function(i){++e===a&&t.finishUpload("图片上传成功")}).catch(function(i){++e===a&&t.finishUpload(i.detail)})}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){var i=!1;e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})),console.log(e.orderListScanned)}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),a.loadingData=!1,a.responseData=t.entity,a.dealConfirmData(a.propScanData)}).catch(function(t){a.loadingData=!1})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(console.log("qww1"),e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):(console.log("qww2"),a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}))})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Oa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PickUpRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("提货扫描-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"\n                "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+"\n              ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.abnormalUploadImage,limit:6,name:"file",isNotice:!1}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v("\n                "+t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+"\n              ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Aa=a("VU/8")(Ba,Oa,!1,function(t){a("RAVx")},"data-v-1063dc43",null).exports,Fa={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","reference10","chargeTypes","shipmentNum"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;window.onresize=function(){t.realHeight=document.body.clientHeight},this.onPlusReady("e")},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;e.$emit("isLoading_",!0,"拼命加载中"),this.commitPopUp_show=!1,this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=[];for(var h in this.count){var p={};p.omsNo=this.count[h].omsno,p.labelNo=this.count[h].order,p.linkNode="27",p.scanPerson=a,p.cellphone=i,p.scanTime=this.count[h].time,p.supplierId=s,p.supplierName=o,p.longitude=n,p.latitude=r,p.address=c,p.city=d,p.districict=l,u.push(p)}var v=[];for(var m in this.cacheResponseData){var f={},_=this.cacheResponseData[m];f.omsNo=_.omsNo,f.displayWt=_.displayWt,f.linkNode="27",v.push(f)}for(var g in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[g].order);this.params={params:u,labelNo:this.cleanOrderList},console.log(this.params),this.httpRequest1("post",Qt,this.params).then(function(a){t.$emit("isLoading_",!1),Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("scanFun",!0)})}}},Ua={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("\n        订单未扫描完，是否提交？\n      ")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("\n        请确认地址是否正确？\n      ")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("\n        不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity)+"\n        ")]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation)+"\n        ")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("\n        请确认地址是否正确？\n      ")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("\n        不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity)+"\n        ")]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation)+"\n        ")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Wa={name:"AirportPickUpRandomScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(Fa,Ua,!1,function(t){a("hYnK")},"data-v-7985c4fb",null).exports,"v-confirm":ne,"v-uploader":Ut},watch:{},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"27"};console.log(e),this.httpRequest1("post","/kc-transport/tmsAppNew/shipmentCodeSelectInfo",e).then(function(e){console.log(e),e.entity.notScanned?t.notScanned=e.entity.notScanned:t.notScanned=[],e.entity.scanned?t.scanned=e.entity.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.orderListScanned);for(var e=t.orderListScanned.length,a=0,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,omsNo:t.orderListScanned[i].order,fileType:"装车扫描",labelNo:"27"}).then(function(i){++a===e&&t.finishUpload("图片上传成功")}).catch(function(i){++a===e&&t.finishUpload(i.detail)})}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){for(var i=!1,s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})),console.log(e.orderListScanned)}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(console.log("qww1"),e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):(console.log("qww2"),a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}))})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Ra={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ToSendRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派提装车-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"ToSendRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.abnormalUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var qa=a("VU/8")(Wa,Ra,!1,function(t){a("BRZt")},"data-v-658cc513",null).exports,Ma={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","HasLoading","AbHasScanNum","reference10","chargeTypes","shipmentNum"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1;var a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=[];for(var h in this.count){var p={};p.omsNo=this.count[h].omsno,p.labelNo=this.count[h].order,p.linkNode="30",p.scanPerson=a,p.cellphone=i,p.scanTime=this.count[h].time,p.supplierId=s,p.supplierName=o,p.longitude=n,p.latitude=r,p.address=c,p.city=d,p.districict=l,u.push(p)}var v=[];for(var m in this.cacheResponseData){var f={},_=this.cacheResponseData[m];f.omsNo=_.omsNo,f.displayWt=_.displayWt,f.linkNode="30",v.push(f)}for(var g in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[g].order);this.params={params:u,labelNo:this.cleanOrderList},console.log(this.params),this.httpRequest1("post",Qt,this.params).then(function(a){t.$emit("isLoading_",!1),Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(e){t.$emit("isLoading_",!1),t.$emit("scanFun",!0)})}}},Ea={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n\t\t\t\t配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n\t\t\t")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ha={name:"ToSendRandomScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(Ma,Ea,!1,function(t){a("7Khc")},"data-v-d3dabd92",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadParamsListOne:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}if(this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode){this.shipmentCode=this.$route.query.shipmentCode;var e={shipmentCode:this.shipmentCode,linkNode:"30"};console.log(e),this.httpRequest1("post","/kc-transport/tmsAppNew/shipmentCodeSelectInfo",e).then(function(e){e.entity.notScanned?t.notScanned=e.entity.notScanned:t.notScanned=[],e.entity.scanned?t.scanned=e.entity.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length)})}},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.orderListScanned);for(var e=0,a=t.orderListScanned.length,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,omsNo:t.orderListScanned[i].order,fileType:"装车扫描",labelNo:"30"}).then(function(i){++e===a&&t.finishUpload("图片上传成功")}).catch(function(i){++e===a&&t.finishUpload(i.detail)})}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.$refs.ch.code="";for(var i=!1,s=0;s<e.notScanned.length;s++)e.notScanned[s].waybillNumber=e.notScanned[s].waybillNumber.filter(function(a){if(a==t){if("N"==e.notScanned[s].LanJianFlag)return i=!0,e.$refs.message.show("该订单没有寄件时间，不能扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a==t;if(e.orderList.push({order:t,omsno:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var o=!1,n=0;n<e.orderListScanned.length;n++)e.orderListScanned[n].order==e.notScanned[s].omsNo&&(e.orderListScanned[n].waybillNumber.push(a),o=!0);o||e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}else e.orderListScanned.push({order:e.notScanned[s].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[s].flag})}return a!==t}),!i&&e.notScanned[s].waybillNumber.length<=0&&e.notScanned.splice(s,1);i||(e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})),console.log(e.orderListScanned)}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),a.loadingData=!1,a.responseData=t.entity,a.dealConfirmData(a.propScanData)}).catch(function(t){a.loadingData=!1})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(console.log("qww1"),e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):(console.log("qww2"),a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}))})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Qa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ToSendRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派件装车-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"ToSendRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.abnormalUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var za=a("VU/8")(Ha,Qa,!1,function(t){a("yMhG")},"data-v-42876db8",null).exports,Va={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","hideBitch","transportLinks","actualQty","shipmentNum","orderListScanned"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},CarrierSelected:function(t){this.CarrierSelecteditem=t},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitPopUp_show=!1,this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.AllCommitPopUp_show=!1,this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0)},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1;for(var a=0;a<e.orderListScanned.length;a++)if("XY"==e.orderListScanned[a].iN91Flag&&Yt()(".order-list_item:eq("+a+") .uploadImg ul>li").length<1)return void e.$alert("客户要求电子验收，请拍照上传后再妥投！","提示",{confirmButtonText:"确定"});e.$emit("isLoading_",!0,"拼命加载中"),e.AllCommitPopUp_show=!1;var i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,l=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity;console.log(this.count);var h=[];for(var p in this.count){var v={};v.omsNo=this.count[p].omsno,v.labelNo=this.count[p].order,v.linkNode="40",v.scanPerson=i,v.cellphone=s,v.scanTime=this.count[p].time,v.supplierId=o,v.supplierName=n,v.longitude=r,v.latitude=c,v.address=l,v.city=u,v.districict=d,h.push(v)}var m=[];for(var f in this.cacheResponseData){var _={},g=this.cacheResponseData[f];_.omsNo=g.omsNo,_.displayWt=g.displayWt,_.linkNode="40",m.push(_)}for(var b in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[b].order);this.params={params:h,labelNo:this.cleanOrderList},console.log(this.params),this.httpRequest1("post",Qt,this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}}),t.$emit("reflash",!0),t.$emit("scanFun",!0),e.$emit("isLoading_",!1)}).catch(function(t){e.$emit("scanFun",!0),e.$emit("isLoading_",!1)})}}},ja={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox "},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n        配载总件数:"),a("i",[t._v(t._s(t.shipmentNum))]),t._v("件\n      ")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n        当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n      ")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Xa={name:"SignRandomScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(Va,ja,!1,function(t){a("Ae3X")},"data-v-a86985a4",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadParamsListOne:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",transportLinks:"",scanNumber:0,actualQty:0,notScanned:[],scanned:[],orderListScanned:[],shipmentNum:0,ifflash:!1}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode,this.querylabellist())},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{querylabellist:function(){var t=this,e={shipmentCode:this.shipmentCode,linkNode:"40"};console.log(e),this.httpRequest1("post","/kc-transport/tmsAppNew/shipmentCodeSelectInfo",e).then(function(e){console.log(e),e.entity.notScanned?t.notScanned=e.entity.notScanned:t.notScanned=[],e.entity.scanned?t.scanned=e.entity.scanned:t.scanned=[],t.historyLabelNo=[],t.notScanLabelNo=[];for(var a=0;a<t.scanned.length;a++)t.historyLabelNo=t.historyLabelNo.concat(t.scanned[a].waybillNumber);for(var i=0;i<t.notScanned.length;i++)t.notScanLabelNo=t.notScanLabelNo.concat(t.notScanned[i].waybillNumber);t.shipmentNum=parseInt(t.historyLabelNo.length)+parseInt(t.notScanLabelNo.length),console.log(t.shipmentNum),console.log(t.historyLabelNo),console.log(t.notScanLabelNo)})},updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.orderListScanned);for(var e=t.orderListScanned.length,a=0,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,omsNo:t.orderListScanned[i].order,fileType:"签收",labelNo:"40"}).then(function(i){++a===e&&t.finishUpload("图片上传成功")}).catch(function(i){++a===e&&t.finishUpload(i.detail)})}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),iN91Flag:e.notScanned[i].iN91Flag}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],iN91Flag:e.notScanned[i].iN91Flag,flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],iN91Flag:e.notScanned[i].iN91Flag,flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1);console.log(e.orderListScanned)}else e.$refs.message.show("该标签号不属于该配载:"+e.shipmentCode,{type:"alert",confirmText:"确定",titleText:"请注意"})})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.finishUpload("图片上传失败");parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Ja={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SignRandomScan"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("签收扫描-配载")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"SignRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.abnormalUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+"  "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v(t._s("package"==e.flag?"包号:":"订单号:")+" "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderListScanned:t.orderListScanned,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,actualQty:t.actualQty,shipmentNum:t.shipmentNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ya=a("VU/8")(Xa,Ja,!1,function(t){a("LvoK")},"data-v-f9ce9f88",null).exports,Ga={name:"DepartTakingPictures",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.onPlusReady("isLoading_")},methods:{submit:function(){this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.uploadTotalNum<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.shipmentCode=this.shipmentCode,this.uploadParams.fileType="发车拍照",this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.longitude=this.longitude,this.uploadParams.latitude=this.latitude,this.uploadParams.city=this.CurrentCity,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.address=this.CurrentLocation,console.log(this.uploadParams),this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refDepart.submit())},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Ka={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DepartTakingPictures"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("提货-发车拍照")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("配载单号：")]),a("span",[t._v(t._s(t.shipmentCode))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refDepart",attrs:{action:t.HOST+"shipmentCodeUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Za=a("VU/8")(Ga,Ka,!1,function(t){a("ywwO")},"data-v-937f9004",null).exports,ti={name:"DepartTakingPictures",data:function(){return{dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.onPlusReady("isLoading_")},methods:{submit:function(){this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.uploadTotalNum<=0?this.$alert("请上传照片","提示",{confirmButtonText:"确定"}):(this.uploadParams.shipmentCode=this.shipmentCode,this.uploadParams.fileType="卸车拍照",this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.orgnizationId=this.$store.state.userInfo.orgnizationId,this.uploadParams.longitude=this.longitude,this.uploadParams.latitude=this.latitude,this.uploadParams.city=this.CurrentCity,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.address=this.CurrentLocation,console.log(this.uploadParams),this.$emit("isLoading",!0,"拼命加载中"),this.$refs.upload_refUnload.submit())},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){var e=this;e.$emit("isLoading",!1),this.$alert(t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("图片上传成功")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},ei={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DepartTakingPictures"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("提货-卸车拍照")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("配载单号：")]),a("span",[t._v(t._s(t.shipmentCode))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),a("div",[a("el-upload",{ref:"upload_refUnload",attrs:{action:t.HOST+"shipmentCodeUploadImage.do",limit:6,multiple:!0,data:t.uploadParams,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadErr,"on-success":t.uploadSuccessful,"on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ai=a("VU/8")(ti,ei,!1,function(t){a("gEVO")},"data-v-3d09cc0d",null).exports,ii={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,BatchCommit_show:!1,BatchCommitNumber:"",latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,crruentconfirm:"",deliveryMethod_crru:"",forwardSupplier_crru:"",forwardSupplierId_crru:"",CarrierList:[],CarrierSelection_show:!1,CarrierSelecteditem:0,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","transportLinks","actualQty","omsNo","orderId","HasLoading","abnormalscan","AbHasScanNum","deliveryMethod","forwardSupplier","forwardSupplierId","reference10","chargeTypes","iN91Flag","iN01Flag"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),this.deliveryMethod_crru=this.deliveryMethod,this.forwardSupplier_crru=this.forwardSupplier,console.log(this.forwardSupplier_crru),this.forwardSupplierId_crru=this.forwardSupplierId,window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},CarrierSelected:function(t){this.CarrierSelecteditem=t},CarrierSelectionCancel:function(){this.CarrierSelection_show=!1},CarrierSelectionConfirm:function(){this.CarrierList.length&&(this.forwardSupplier_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplier,this.forwardSupplierId_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplierId),this.CarrierSelection_show=!1},SetCurrAddress:function(t){this.ReceivingLatitud(t)},DeliverySelect:function(t){this.deliveryMethod_crru=t},SelectCarrier:function(){var t=this;if("ZK"!=t.reference10){if(this.CarrierList.length){for(var e=0;e<t.CarrierList.length;e++)if(t.CarrierList[e].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=e;break}}else{t.httpRequest1("post","/kc-transport/tmsAppNew/getForwardSupplier",{}).then(function(e){t.CarrierList=e.entity;for(var a=0;a<t.CarrierList.length;a++)if(t.CarrierList[a].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=a;break}})}this.CarrierSelection_show=!0}else t.$alert("该订单的转寄承运商只能为SF","提示",{confirmButtonText:"确定"})},DeliveryBoxCancel:function(){this.SelectDelivery_show=!1},DeliveryBoxConfirm:function(){var t=this;if("ZK"==t.reference10&&("到付现结"==t.chargeTypes||"到付"==t.chargeTypes||"到付月结"==t.chargeTypes)&&Yt()("div.uploadImg ul>li").length<1)t.$alert("请拍摄接收货物的顺丰小哥工牌照片","提示",{confirmButtonText:"确定"});else if("XY"==t.iN91Flag&&Yt()("div.uploadImg ul>li").length<1)t.$alert("客户要求电子验证，请拍照上传后再妥投！","提示",{confirmButtonText:"确定"});else if("批量"==t.crruentconfirm){"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var e=this.$route.path,a="",i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,l=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=this.deliveryMethod_crru,p=this.forwardSupplier_crru,v=this.forwardSupplierId_crru;switch(e){case"/DeliveryScanXH":case"/DeliveryScan":a="10";break;case"/TransitScan":a="20";break;case"/AirportPickUpScan":a="27";break;case"/DeliveryOrderPickScan":a="30";break;case"/AbnormalScan":case"/ReceiptScan":a="40";break;default:a="10"}var m=[];for(var f in this.count){var _={};_.omsNo=t.omsNo,_.orderId=t.orderId,t.abnormalscan&&(_.abnormalscan="T",_.ifbatch="T"),_.labelNo=this.count[f].order,_.linkNode=a,_.scanPerson=i,_.cellphone=s,_.scanTime=this.count[f].time,_.supplierId=o,_.supplierName=n,_.longitude=r,_.latitude=c,_.address=l,_.city=u,_.districict=d,_.deliveryMethod=h,_.forwardSupplier=p,_.forwardSupplierId=v,m.push(_)}for(var g in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[g].order);this.params={params:m,labelNo:this.cleanOrderList,deliveryId:t.deliveryId},t.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.httpRequest1("post","/kc-transport/tmsAppNew/commitScan",this.params).then(function(e){t.BatchCommitConfirmitem()}).catch(function(e){e.code&&0!=e.code&&t.$emit("scanFun",!0)})}else this.commitData()},BatchCommit:function(){0!==this.count.length&&(this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1))},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":e="10";break;case"/TransitScan":e="20";break;case"/AirportPickUpScan":e="27";break;case"/DeliveryOrderPickScan":e="30";break;case"/AbnormalScan":case"/ReceiptScan":e="40";break;default:e="10"}"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var a={};a=t.abnormalscan?{deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,abnormalscan:"T",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru}:{deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru},t.httpRequest1("post","/kc-transport/tmsAppNew/batchScanLabel",a).then(function(e){Yt()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.ifTips=!0,t.tips_Msg="批量提交成功",setTimeout(function(){t.ifTips=!1,t.$router.back(-1)},1500))}).catch(function(e){t.$emit("reflash",!0),t.$emit("scanFun",!0)})},BatchCommitConfirmbefore:function(){if(this.BatchCommitNumber)if("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber))this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}});else{var t="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":t="10";break;case"/TransitScan":t="20";break;case"/AirportPickUpScan":t="27";break;case"/DeliveryOrderPickScan":t="30";break;case"/AbnormalScan":case"/ReceiptScan":t="40";break;default:t="10"}if(console.log(this.BatchCommitNumber),console.log(this.actualQty),("30"==t||"27"==t)&&this.BatchCommitNumber<this.actualQty)this.$alert("派件装车子母件分离时不允许批量提交，请逐件扫描后使用提交功能","提示",{confirmButtonText:"确定",callback:function(){}});else{if(this.HasLoading){if(this.BatchCommitNumber>this.HasLoading)return void this.$alert("批量扫描件数不能超过已装车件数","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.abnormalscan){if(this.BatchCommitNumber>this.actualQty-this.AbHasScanNum)return void this.$alert("批量扫描件数不能超过剩余待签收数量","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.BatchCommitNumber>this.actualQty)return void this.$alert("批量提交数量不能超过订单总件数","提示",{confirmButtonText:"确定",callback:function(){}});this.AllCommitPopUp_show=!0}}},BatchCommitConfirm:function(){"直送"==this.deliveryMethod_crru&&(this.forwardSupplier_crru="",this.forwardSupplierId_crru="");var t=this.$route.path,e="",a=this.$store.state.userInfo.userName,i=this.$store.state.userInfo.cellphone,s=this.$store.state.userInfo.orgnizationId,o=this.$store.state.userInfo.orgnizationName,n=this.longitude,r=this.latitude,c=this.CurrentLocation,l=this.CurrentDistrict,d=this.CurrentCity,u=this.deliveryMethod_crru,h=this.forwardSupplier_crru,p=this.forwardSupplierId_crru;switch(t){case"/DeliveryScanXH":case"/DeliveryScan":e="10";break;case"/TransitScan":e="20";break;case"/AirportPickUpScan":e="27";break;case"/DeliveryOrderPickScan":e="30";break;case"/AbnormalScan":case"/ReceiptScan":e="40";break;default:e="10"}var v=[];for(var m in this.count){var f={};f.omsNo=this.omsNo,f.orderId=this.orderId,this.abnormalscan&&(f.abnormalscan="T",f.ifbatch="T"),f.labelNo=this.count[m].order,f.linkNode=e,f.scanPerson=a,f.cellphone=i,f.scanTime=this.count[m].time,f.supplierId=s,f.supplierName=o,f.longitude=n,f.latitude=r,f.address=c,f.city=d,f.districict=l,f.deliveryMethod=u,f.forwardSupplier=h,f.forwardSupplierId=p,v.push(f)}for(var _ in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[_].order);this.params={params:v,labelNo:this.cleanOrderList,deliveryId:this.deliveryId},this.BatchCommitConfirmitem(),this.uploadTotalNum=Yt()("div.uploadImg ul>li").length},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.commitPopUp_show=!1,this.SelectDelivery_show=!0):this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.AllCommitPopUp_show=!1,this.SelectDelivery_show=!0):"批量"==this.crruentconfirm?this.BatchCommitConfirm():this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.crruentconfirm="提交","/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path)return void(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0);if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1,"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,l=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=this.deliveryMethod_crru,v=this.forwardSupplier_crru,m=this.forwardSupplierId_crru;switch(a){case"/DeliveryScanXH":case"/DeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/AirportPickUpScan":i="27";break;case"/DeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":i="40";break;default:i="10"}var f=[];for(var _ in this.count){var g={};g.omsNo=e.omsNo,g.orderId=e.orderId,e.abnormalscan&&(g.abnormalscan="T"),g.labelNo=this.count[_].order,g.linkNode=i,g.scanPerson=s,g.cellphone=o,g.scanTime=this.count[_].time,g.supplierId=n,g.supplierName=r,g.longitude=c,g.latitude=l,g.address=d,g.city=h,g.districict=u,g.deliveryMethod=p,g.forwardSupplier=v,g.forwardSupplierId=m,f.push(g)}for(var b in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[b].order);this.params={params:f,labelNo:this.cleanOrderList,deliveryId:e.deliveryId},this.httpRequest1("post","/kc-transport/tmsAppNew/commitScan",this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(e){t.$emit("scanFun",!0)})}}},si={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n\t\t\t\t订单总件数:"),a("i",[t._v(t._s(t.actualQty))]),t._v("件\n\t\t\t")]),t._v(" "),t.abnormalscan?a("div",{staticClass:"top"},[t._v("\n\t\t\t\t已签收数量:"),a("i",[t._v(t._s(t.AbHasScanNum))]),t._v("件\n\t\t\t")]):t._e(),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),t.abnormalscan?a("div",{staticClass:"commit-button-box commitAbnormal"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button-box"},[t.HasLoading&&t.HasLoading==t.actualQty||!t.HasLoading?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.actualQty))])]),t._v(" "),t.HasLoading?a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("已装车件数：")]),a("span",[t._v(t._s(t.HasLoading))])]):t._e(),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.SelectDelivery_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head"},[t._v("请选择派件方式")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content"},["ZK"!=t.reference10||"到付现结"!=t.chargeTypes&&"到付"!=t.chargeTypes&&"到付月结"!=t.chargeTypes&&"Y"!=t.iN01Flag?a("div",{class:{DeliveryBox_content_active:"直送"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("直送")}}},[a("span",[t._v("直送")]),"直送"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()]):t._e(),t._v(" "),a("div",{class:{DeliveryBox_content_active:"转寄"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("转寄")}}},[a("span",[t._v("转寄")]),"转寄"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()])]),t._v(" "),"转寄"==t.deliveryMethod_crru?a("div",{staticClass:"DeliveryBox_input",on:{click:t.SelectCarrier}},[a("span",[t._v("转寄承运商：")]),t._v(" "),a("span",[t._v(t._s(t.forwardSupplier_crru))]),t._v(" "),a("i",{staticClass:"iconfont icon-xiangshang"})]):t._e(),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.DeliveryBoxCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.DeliveryBoxConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.CarrierSelection_show?a("div",{staticClass:"CarrierSelection"},[a("div",{staticClass:"CarrierSelectionBox"},[a("div",{staticClass:"CarrierSelection_head"},[t._v("请选择转寄承运商")]),t._v(" "),a("div",{staticClass:"CarrierSelection_content"},t._l(t.CarrierList,function(e,i){return a("div",{key:i,class:{CarrierSelection_active:t.CarrierSelecteditem==i},attrs:{id:i},on:{click:function(e){return t.CarrierSelected(i)}}},[t._v(t._s(e.forwardSupplier)+"\n\t\t\t\t")])}),0),t._v(" "),a("div",{staticClass:"CarrierSelection_bottom"},[a("div",[a("span",{on:{click:t.CarrierSelectionCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.CarrierSelectionConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var oi=a("VU/8")(ii,si,!1,function(t){a("Csmu")},"data-v-0d72cd7c",null).exports,ni={name:"delivery-scan",components:{"v-scan":Dt,"v-footer":oi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",headerName:"提货扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"10",propScanData:"",responseData:{},switchScan:!0,cacheResponseData:[],shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:10,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};console.log(e),t.httpRequest1("post",Vt,e).then(function(t){console.log(t)}).catch(function(e){t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="10",this.$refs.upload_refXH.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),a.loadingData=!1,a.responseData=t.entity,a.dealConfirmData(a.propScanData)}).catch(function(t){a.loadingData=!1})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},ri={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("提货扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,isNotice:!1,name:"file",params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var ci=a("VU/8")(ni,ri,!1,function(t){a("7h8G")},"data-v-570d58a6",null).exports,li={name:"delivery-scan",components:{"v-header":le,"v-scan":ht,"v-footer":oi,"v-confirm":ne},watch:{},data:function(){return{test:"",activeName:"first",headerName:"提货扫描(拍照)",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,scanResult:{issuePartyAddr:"--",receivePartyAddr1:"--",orderQty:"--",orderWt:"--",displayWt:"--"},propScanData:"",responseData:{},switchScan:!0,testData:{},cacheResponseData:[]}},mounted:function(){switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":this.linkNode="10";break;case"/TransitScan":this.linkNode="20";break;case"/DeliveryOrderPickScan":this.linkNode="30";break;case"/ReceiptScan":this.linkNode="40";break;default:this.linkNode="10"}},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode)},methods:{switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData?this.showSliderData=!1:this.showSliderData=!0},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,shipmentCode:a.shipmentCode};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length){for(var s in a.cacheResponseData)-1!==a.cacheResponseData[s].allOrder.indexOf(t)&&(a.scanResult=a.cacheResponseData[s]);e.showSliderData01=!0,e.switchScan=!1,e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})}else{var o={scanLabel:t,linkNode:e.linkNode,shipmentCode:a.shipmentCode};e.getTheOrderNum(o,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){if(console.log(t),i.loadingData=!1,a.responseData=t.entity,a.scanResult=a.responseData.orderSF,a.scanResult.allOrder=a.responseData.historySubmitLabelNo.concat(a.responseData.notScanLabelNo),a.showSearchResult(),0!==a.cacheResponseData.length)for(var e in a.cacheResponseData)a.scanResult.omsNo===a.cacheResponseData[e].omsNo&&(a.scanResult.omsNo=a.cacheResponseData[e].displayWt);else a.cacheResponseData.push(a.scanResult)}).catch(function(t){i.loadingData=!1})},confirmResult:function(){var t=this;this.showSearchResult(),this.dealConfirmData(this.propScanData),this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},confirmResult01:function(){var t=this;this.showSliderData01=!1,this.switchScan=!0,this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)}}},di={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList},on:{reflash:t.reflashData,scanFun:t.switchScanFun}}),t._v(" "),a("v-confirm",{ref:"message"}),t._v(" "),a("el-dialog",{staticClass:"search-side",attrs:{title:"扫描结果",visible:t.showSliderData,"close-on-click-modal":!1,"show-close":!1,width:"90%"},on:{"update:visible":function(e){t.showSliderData=e}}},[a("el-form",{ref:"form",attrs:{model:t.scanResult,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"寄件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"寄件地址"},model:{value:t.scanResult.issuePartyAddr,callback:function(e){t.$set(t.scanResult,"issuePartyAddr",e)},expression:"scanResult.issuePartyAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"收件地址"},model:{value:t.scanResult.receivePartyAddr1,callback:function(e){t.$set(t.scanResult,"receivePartyAddr1",e)},expression:"scanResult.receivePartyAddr1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"件数"}},[a("el-input",{attrs:{disabled:!0,placeholder:"件数"},model:{value:t.scanResult.orderQty,callback:function(e){t.$set(t.scanResult,"orderQty",e)},expression:"scanResult.orderQty"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{attrs:{disabled:!0,placeholder:"重量"},model:{value:t.scanResult.orderWt,callback:function(e){t.$set(t.scanResult,"orderWt",e)},expression:"scanResult.orderWt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"实际重量"}},[a("el-input",{attrs:{placeholder:"实际重量"},model:{value:t.scanResult.displayWt,callback:function(e){t.$set(t.scanResult,"displayWt",e)},expression:"scanResult.displayWt"}},[a("template",{slot:"append"},[t._v("KG")])],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.showSearchResult}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmResult}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"search-side",attrs:{title:"扫描结果",visible:t.showSliderData01,"close-on-click-modal":!1,"show-close":!1,width:"90%"},on:{"update:visible":function(e){t.showSliderData01=e}}},[a("el-form",{ref:"form",attrs:{model:t.scanResult,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"寄件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"寄件地址"},model:{value:t.scanResult.issuePartyAddr,callback:function(e){t.$set(t.scanResult,"issuePartyAddr",e)},expression:"scanResult.issuePartyAddr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收件地址"}},[a("el-input",{attrs:{disabled:!0,placeholder:"收件地址"},model:{value:t.scanResult.receivePartyAddr1,callback:function(e){t.$set(t.scanResult,"receivePartyAddr1",e)},expression:"scanResult.receivePartyAddr1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"件数"}},[a("el-input",{attrs:{disabled:!0,placeholder:"件数"},model:{value:t.scanResult.orderQty,callback:function(e){t.$set(t.scanResult,"orderQty",e)},expression:"scanResult.orderQty"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{attrs:{disabled:!0,placeholder:"重量"},model:{value:t.scanResult.orderWt,callback:function(e){t.$set(t.scanResult,"orderWt",e)},expression:"scanResult.orderWt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"实际重量"}},[a("el-input",{attrs:{placeholder:"实际重量"},model:{value:t.scanResult.displayWt,callback:function(e){t.$set(t.scanResult,"displayWt",e)},expression:"scanResult.displayWt"}},[a("template",{slot:"append"},[t._v("KG")])],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmResult01}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ui=a("VU/8")(li,di,!1,function(t){a("g/Ld")},"data-v-a2908c00",null).exports,hi={name:"PackageCommitFooter",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,latitude:"",longitude:"",tips_Msg:"",ifTips:!1,crruentconfirm:"",commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","transportLinks","actualQty","omsNo","orderId","HasLoading","abnormalscan","AbHasScanNum"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){this.commitPopUp_show=!1,this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){this.AllCommitPopUp_show=!1,this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.crruentconfirm="提交","/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path)return void(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0);if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,e.$emit("isLoading_",!0,"拼命加载中"),e.AllCommitPopUp_show=!1;var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,l=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity;switch(a){case"/DeliveryScanXH":case"/PackageDeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/DeliveryOrderPickScan":case"/PackageDeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":case"/PackageReceiptScan":i="40";break;default:i="10"}var p=[];for(var v in this.count){var m={};m.omsNo=e.omsNo,e.abnormalscan&&(m.abnormalscan="T"),m.labelNo=this.count[v].order,m.linkNode=i,m.scanPerson=s,m.cellphone=o,m.scanTime=this.count[v].time,m.supplierId=n,m.supplierName=r,m.longitude=c,m.latitude=l,m.address=d,m.city=h,m.districict=u,p.push(m)}var f=[];for(var _ in this.cacheResponseData){var g={},b=this.cacheResponseData[_];g.omsNo=b.omsNo,g.displayWt=b.displayWt,g.linkNode=i,f.push(g)}for(var y in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[y].order);this.params={params:p,labelNo:this.cleanOrderList},this.httpRequest1("post",Qt,this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$emit("isLoading_",!1)}).catch(function(e){t.$emit("scanFun",!0),t.$emit("isLoading_",!1)})}}},pi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),t.abnormalscan?a("div",{staticClass:"commit-button-box commitAbnormal"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button-box"},[t.abnormalscan?t._e():a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var vi=a("VU/8")(hi,pi,!1,function(t){a("SVyD")},"data-v-2a3d2f3e",null).exports,mi={name:"PackageDeliveryScan",components:{"v-header":le,"v-scan":ht,"v-footer":vi,"v-confirm":ne,"v-uploader":Ut},watch:{},data:function(){return{abnormalUploadImage:zt,test:"",activeName:"first",headerName:"提货扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",showSliderData:!1,showSliderData01:!1,scanResult:{issuePartyAddr:"--",receivePartyAddr1:"--",orderQty:"--",orderWt:"--",displayWt:"--"},propScanData:"",responseData:{},switchScan:!0,testData:{},cacheResponseData:[],omsNo:"",transportLinks:"",scanNumber:0}},mounted:function(){this.linkNode="10"},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks)},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="10",this.$refs.upload_refXH.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},showSearchResult:function(){this.switchScan?this.switchScan=!1:this.switchScan=!0,this.showSliderData&&(this.showSliderData=!1)},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length){for(var s in a.cacheResponseData)-1!==a.cacheResponseData[s].allOrder.indexOf(t)&&(a.scanResult=a.cacheResponseData[s]);e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t})}else{var o={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(o,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),a.loadingData=!1,a.responseData=t.entity,a.dealConfirmData(a.propScanData)}).catch(function(t){a.loadingData=!1})},confirmResult:function(){var t=this;this.dealConfirmData(this.propScanData),this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},confirmResult01:function(){var t=this;this.showSliderData01=!1,this.switchScan=!0,this.$refs.form.validate(function(e){if(e)for(var a in t.cacheResponseData)t.cacheResponseData[a].omsNo===t.scanResult.omsNo&&(t.cacheResponseData[a].displayWt=t.scanResult.displayWt)})},dealConfirmData:function(t){var e=this,a=this,i=this.responseData;for(var s in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}a.historyLabelNo=a.historyLabelNo.concat(i.historySubmitLabelNo),a.notScanLabelNo=a.notScanLabelNo.concat(i.notScanLabelNo),a.historyLabelNo=e(a.historyLabelNo),a.notScanLabelNo=e(a.notScanLabelNo),t(!0)}).then(function(s){s&&a.step1(t).then(function(s){0!==s.length?(a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):a.step2(t).then(function(s){0!==s.length?(console.log("qww1"),e.orderList.push({order:t,orderBooting:i.omsNo,time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t}),e.orderCodeList=e.distinct(e.orderCodeList,i.omsNo)):(console.log("qww2"),a.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"}))})})}),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},fi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coc"},[a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,cacheResponseData:t.cacheResponseData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,omsNo:t.omsNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var _i=a("VU/8")(mi,fi,!1,function(t){a("UeTi")},"data-v-0c4869b8",null).exports,gi={name:"delivery-scan",components:{"v-header":le,"v-scan":Dt,"v-footer":oi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",headerName:"装车扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",transportLinks:"",hideBitch:!1,scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){this.linkNode="20"},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.pagetype&&"air"==this.$route.query.pagetype&&(this.headerName="航空出港扫描",this.hideBitch=!0),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:20,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};console.log(e),t.httpRequest1("post",Vt,e).then(function(t){console.log(t)}).catch(function(e){t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="20",this.$refs.upload_refTransit.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){if(1==this.hideBitch)var i={scanLabel:t,linkNode:this.linkNode};else i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{if(1==e.hideBitch)var s={scanLabel:t,linkNode:e.linkNode};else s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),i.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},bi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("中转扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refTransit",attrs:{title:"拍照上传(限6张)",url:t.abnormalUploadImage,limit:6,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,hideBitch:t.hideBitch,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var yi=a("VU/8")(gi,bi,!1,function(t){a("lwCU")},"data-v-ce799dba",null).exports,Li={name:"delivery-scan",components:{"v-scan":Dt,"v-footer":oi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"27",switchScan:!0,shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:27,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};console.log(e),t.httpRequest1("post",Vt,e).then(function(t){console.log(t)}).catch(function(t){})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="27",this.$refs.upload_refDePick.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,console.log(t),this.httpRequest1("post",Et,t).then(function(t){console.log(t),a.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){console.log(t);1==t.status&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},Ci={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派提装车扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refDePick",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,isNotice:!1,name:"file",params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Si=a("VU/8")(Li,Ci,!1,function(t){a("YJF4")},"data-v-7e609689",null).exports,Ni={name:"delivery-scan",components:{"v-header":le,"v-scan":Dt,"v-footer":oi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",omsNo:"",orderId:"",deliveryId:"",transportLinks:"",scanNumber:0,actualQty:0,ifflash:!1}},mounted:function(){this.linkNode="30"},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.scanNumber&&(this.scanNumber=this.$route.query.scanNumber,t.scanNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:30,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};console.log(e),t.httpRequest1("post",Vt,e).then(function(t){}).catch(function(e){t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="30",this.$refs.upload_refDePick.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)a.$refs.ch.code="",e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),i.loadingData=!1,i.$refs.ch.code="";var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},wi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("派件装车扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{ref:"ch",attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refDePick",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ii=a("VU/8")(Ni,wi,!1,function(t){a("UJy4")},"data-v-9c7b00a8",null).exports,ki={name:"delivery-scan",components:{"v-header":le,"v-scan":ht,"v-footer":vi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",headerName:"派件装车扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,omsNo:"",transportLinks:"30"}},mounted:function(){this.linkNode="30"},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="装车扫描",this.uploadParams.labelNo="30",this.$refs.upload_refDePick.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),i.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},Di={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refDePick",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,transportLinks:t.transportLinks,omsNo:t.omsNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ti=a("VU/8")(ki,Di,!1,function(t){a("LK59")},"data-v-3c2466ff",null).exports,xi={name:"delivery-scan",components:{"v-scan":Dt,"v-footer":oi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"40",switchScan:!0,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",transportLinks:"",deliveryNumber:0,actualQty:0,HasLoading:0,deliveryMethod:"",forwardSupplier:"",forwardSupplierId:"",reference10:"",chargeTypes:"",iN01Flag:"",iN91Flag:"",ifflash:!1}},mounted:function(){},created:function(){var t=this;if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.HasLoading&&(this.HasLoading=this.$route.query.HasLoading),this.$route.query.deliveryMethod&&(this.deliveryMethod=this.$route.query.deliveryMethod),this.$route.query.forwardSupplier&&(this.forwardSupplier=this.$route.query.forwardSupplier),this.$route.query.forwardSupplierId&&(this.forwardSupplierId=this.$route.query.forwardSupplierId),this.$route.query.reference10&&(this.reference10=this.$route.query.reference10),this.$route.query.chargeTypes&&(this.chargeTypes=this.$route.query.chargeTypes),this.$route.query.iN01Flag&&(this.iN01Flag=this.$route.query.iN01Flag),this.$route.query.iN91Flag&&(this.iN91Flag=this.$route.query.iN91Flag),this.$route.query.deliveryNumber&&(this.deliveryNumber=this.$route.query.deliveryNumber,t.deliveryNumber>0&&t.$confirm("该订单历史扫描记录将被删除、重新扫描,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={omsNo:t.omsNo,linkNode:40,driverName:t.$store.state.userInfo.userName,cellphone:t.$store.state.userInfo.cellphone};console.log(e,"32233222"),t.$emit("isLoading",!0,"拼命加载中"),t.httpRequest1("post",Vt,e).then(function(t){console.log(t)}).catch(function(e){t.$router.back(-1)})}).catch(function(){t.$router.back(-1)}))},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.$refs.upload_refReceipt.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),i.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}}}},$i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("签收扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e,i){return a("div",{key:i,staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("div",{staticClass:"LoadImg_head"},[t._v("拍照上传")]),t._v(" "),"ZK"!=t.reference10||"到付现结"!=t.chargeTypes&&"到付"!=t.chargeTypes&&"到付月结"!=t.chargeTypes?t._e():a("div",{staticClass:"LoadImg_head",staticStyle:{color:"red"}},[t._v("请拍摄接收货物的顺丰小哥工牌照片")]),t._v(" "),"ZK"==t.reference10&&"Y"==t.iN01Flag?a("div",{staticClass:"LoadImg_head",staticStyle:{color:"red"}},[t._v("此单需代收货款，请转寄给SF")]):t._e(),t._v(" "),a("v-uploader",{ref:"upload_refReceipt",attrs:{url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,omsNo:t.omsNo,orderId:t.orderId,loadingData:t.loadingData,HasLoading:t.HasLoading,deliveryMethod:t.deliveryMethod,forwardSupplier:t.forwardSupplier,forwardSupplierId:t.forwardSupplierId,reference10:t.reference10,chargeTypes:t.chargeTypes,iN91Flag:t.iN91Flag,iN01Flag:t.iN01Flag},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Pi=a("VU/8")(xi,$i,!1,function(t){a("+fNJ")},"data-v-d932dd7e",null).exports,Bi={name:"delivery-scan",components:{"v-header":le,"v-scan":ht,"v-footer":vi,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",headerName:"签收扫描（包）",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],loadingData:!1,linkNode:"40",switchScan:!0,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,omsNo:""}},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo)},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.$refs.upload_refReceipt.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo,flag:"package"};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo,flag:"package"};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post",Et,t).then(function(t){console.log(t),i.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){console.log(t),this.switchScanFun(!0)}}},Oi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          包号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refReceipt",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,omsNo:t.omsNo,loadingData:t.loadingData},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var Ai=a("VU/8")(Bi,Oi,!1,function(t){a("wrvk")},"data-v-10794da5",null).exports,Fi={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",cleanOrderList:[],commitImgDialog:!1,imageUrl:null,imgObj:null,BatchCommit_show:!1,BatchCommitNumber:"",latitude:"",longitude:"",tips_Msg:"",ifTips:!1,SelectDelivery_show:!1,crruentconfirm:"",deliveryMethod_crru:"",forwardSupplier_crru:"",forwardSupplierId_crru:"",CarrierList:[],CarrierSelection_show:!1,CarrierSelecteditem:0,commitPopUp_show:!1,AllCommitPopUp_show:!1}},props:["count","orderCount","countData","orderList","cacheResponseData","deliveryId","transportLinks","actualQty","omsNo","orderId","HasLoading","abnormalscan","AbHasScanNum","deliveryMethod","forwardSupplier","forwardSupplierId","reference10","chargeTypes","iN91Flag"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),this.deliveryMethod_crru=this.deliveryMethod,this.forwardSupplier_crru=this.forwardSupplier,this.forwardSupplierId_crru=this.forwardSupplierId,window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},CarrierSelected:function(t){this.CarrierSelecteditem=t},CarrierSelectionCancel:function(){this.CarrierSelection_show=!1},CarrierSelectionConfirm:function(){this.CarrierList.length&&(this.forwardSupplier_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplier,this.forwardSupplierId_crru=this.CarrierList[this.CarrierSelecteditem].forwardSupplierId),this.CarrierSelection_show=!1},SetCurrAddress:function(t){this.ReceivingLatitud(t)},DeliverySelect:function(t){this.deliveryMethod_crru=t},SelectCarrier:function(){var t=this;if("ZK"!=t.reference10){if(this.CarrierList.length){for(var e=0;e<t.CarrierList.length;e++)if(t.CarrierList[e].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=e;break}}else{t.httpRequest1("post","/kc-transport/tmsAppNew/getForwardSupplier",{}).then(function(e){t.CarrierList=e.entity;for(var a=0;a<t.CarrierList.length;a++)if(t.CarrierList[a].forwardSupplierId==t.forwardSupplierId_crru){t.CarrierSelecteditem=a;break}})}this.CarrierSelection_show=!0}else alert("该订单的转寄承运商只能为SF")},DeliveryBoxCancel:function(){this.SelectDelivery_show=!1},DeliveryBoxConfirm:function(){var t=this;if("ZK"==t.reference10&&("到付现结"==t.chargeTypes||"到付"==t.chargeTypes||"到付月结"==t.chargeTypes)&&Yt()("div.uploadImg ul>li").length<1)t.$alert("请拍摄接收货物的顺丰小哥工牌照片","提示",{confirmButtonText:"确定"});else if("XY"==t.iN91Flag&&Yt()("div.uploadImg ul>li").length<1)t.$alert("客户要求电子验证，请拍照上传后再妥投！","提示",{confirmButtonText:"确定"});else if("批量"==t.crruentconfirm){"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var e=this.$route.path,a="",i=this.$store.state.userInfo.userName,s=this.$store.state.userInfo.cellphone,o=this.$store.state.userInfo.orgnizationId,n=this.$store.state.userInfo.orgnizationName,r=this.longitude,c=this.latitude,l=this.CurrentLocation,d=this.CurrentDistrict,u=this.CurrentCity,h=this.deliveryMethod_crru,p=this.forwardSupplier_crru,v=this.forwardSupplierId_crru;switch(e){case"/DeliveryScanXH":case"/DeliveryScan":a="10";break;case"/TransitScan":a="20";break;case"/DeliveryOrderPickScan":a="30";break;case"/AbnormalScan":case"/ReceiptScan":a="40";break;default:a="10"}var m=[];for(var f in this.count){var _={};_.omsNo=t.omsNo,_.orderId=t.orderId,t.abnormalscan&&(_.abnormalscan="T",_.ifbatch="T"),_.labelNo=this.count[f].order,_.linkNode=a,_.scanPerson=i,_.cellphone=s,_.scanTime=this.count[f].time,_.supplierId=o,_.supplierName=n,_.longitude=r,_.latitude=c,_.address=l,_.city=u,_.districict=d,_.deliveryMethod=h,_.forwardSupplier=p,_.forwardSupplierId=v,m.push(_)}var g=[];for(var b in this.cacheResponseData){var y={},L=this.cacheResponseData[b];y.omsNo=L.omsNo,y.displayWt=L.displayWt,y.linkNode=a,g.push(y)}for(var C in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[C].order);this.params=Ot()({},m[0],{labelNoList:this.cleanOrderList,deliveryId:t.deliveryId}),t.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.httpRequest1("post",Ht,this.params).then(function(e){t.BatchCommitConfirmitem()}).catch(function(e){e.code&&0!=e.code&&t.$emit("scanFun",!0)})}else this.commitData()},BatchCommit:function(){0!==this.count.length&&(this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1))},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":e="10";break;case"/TransitScan":e="20";break;case"/DeliveryOrderPickScan":e="30";break;case"/AbnormalScan":case"/ReceiptScan":e="40";break;default:e="10"}"直送"==t.deliveryMethod_crru&&(t.forwardSupplier_crru="",t.forwardSupplierId_crru="");var a={};a=t.abnormalscan?{deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,abnormalscan:"T",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru}:{deliveryId:t.deliveryId,labelNumber:t.BatchCommitNumber,transportLinks:e,scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,deliveryMethod:t.deliveryMethod_crru,forwardSupplier:t.forwardSupplier_crru,forwardSupplierId:t.forwardSupplierId_crru},t.httpRequest1("post","/kc-transport/tmsAppNew/batchScanLabel",a).then(function(e){Yt()("div.uploadImg ul>li").length>0?t.$parent.updateimg():(t.ifTips=!0,t.tips_Msg="批量提交成功",setTimeout(function(){t.ifTips=!1,t.$router.back(-1)},1500))}).catch(function(e){t.$emit("reflash",!0),t.$emit("scanFun",!0)})},BatchCommitConfirmbefore:function(){if(this.BatchCommitNumber)if("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber))this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}});else{var t="";switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":t="10";break;case"/TransitScan":t="20";break;case"/DeliveryOrderPickScan":t="30";break;case"/AbnormalScan":case"/ReceiptScan":t="40";break;default:t="10"}if(console.log(this.BatchCommitNumber),console.log(this.actualQty),"30"==t&&this.BatchCommitNumber<this.actualQty)this.$alert("派件装车子母件分离时不允许批量提交，请逐件扫描后使用提交功能","提示",{confirmButtonText:"确定",callback:function(){}});else{if(this.HasLoading){if(this.BatchCommitNumber>this.HasLoading)return void this.$alert("批量扫描件数不能超过已装车件数","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.abnormalscan){if(this.BatchCommitNumber>this.actualQty-this.AbHasScanNum)return void this.$alert("批量扫描件数不能超过剩余待签收数量","提示",{confirmButtonText:"确定",callback:function(){}})}else if(this.BatchCommitNumber>this.actualQty)return void this.$alert("批量提交数量不能超过订单总件数","提示",{confirmButtonText:"确定",callback:function(){}});this.AllCommitPopUp_show=!0}}},BatchCommitConfirm:function(){var t=this,e=this;"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,l=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=this.deliveryMethod_crru,v=this.forwardSupplier_crru,m=this.forwardSupplierId_crru;switch(a){case"/DeliveryScanXH":case"/DeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/DeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":i="40";break;default:i="10"}var f=[];for(var _ in this.count){var g={};g.omsNo=e.omsNo,g.orderId=e.orderId,e.abnormalscan&&(g.abnormalscan="T",g.ifbatch="T"),g.labelNo=this.count[_].order,g.linkNode=i,g.scanPerson=s,g.cellphone=o,g.scanTime=this.count[_].time,g.supplierId=n,g.supplierName=r,g.longitude=c,g.latitude=l,g.address=d,g.city=h,g.districict=u,g.deliveryMethod=p,g.forwardSupplier=v,g.forwardSupplierId=m,f.push(g)}var b=[];for(var y in this.cacheResponseData){var L={},C=this.cacheResponseData[y];L.omsNo=C.omsNo,L.displayWt=C.displayWt,L.linkNode=i,b.push(L)}for(var S in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[S].order);this.params=Ot()({},f[0],{labelNoList:this.cleanOrderList,deliveryId:e.deliveryId}),e.uploadTotalNum=Yt()("div.uploadImg ul>li").length,this.httpRequest1("post",Ht,this.params).then(function(t){console.log("是否调用了这个接口咧"),e.BatchCommitConfirmitem()}).catch(function(a){a.code&&0!=a.code&&(e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))})},getTheFile:function(t){console.log(t),console.log(this.params),this.imageUrl=t.url},beforeAvatarUpload:function(t){var e=t.size/1024/1024<10;return e||this.$message.error("上传图片大小不能超过 10MB!"),e},closeImgInput:function(){this.commitImgDialog=!1,this.$emit("scanFun",!0)},commitImg:function(){this.commitImgDialog=!1,this.$refs.myConfirm.show("是否提交数据？",{type:"confirm",cancelText:"取消",confirmText:"确定",titleText:"消息提示",data:this.count})},selectFile:function(t){this.imgUrl=t,this.setTheFormData()},setTheFormData:function(){var t=this,e=new FormData;e.append("data",this.imgUrl.srcElement.files[0]),this.imgObj=e.get("data");var a=new FileReader;a.readAsDataURL(e.get("data")),a.onload=function(e){t.$refs.img.src=e.target.result}},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},commitPopUpCancel:function(){this.commitPopUp_show=!1},commitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.commitPopUp_show=!1,this.SelectDelivery_show=!0):this.commitData()},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path?(this.AllCommitPopUp_show=!1,this.SelectDelivery_show=!0):"批量"==this.crruentconfirm?this.BatchCommitConfirm():this.commitData()},checkForCommit:function(){if(0!==this.count.length){if(this.crruentconfirm="提交","/ReceiptScan"==this.$route.path||"/AbnormalScan"==this.$route.path)return void(this.count.length<this.actualQty?this.commitPopUp_show=!0:this.AllCommitPopUp_show=!0);if(this.count.length<this.actualQty)return void(this.commitPopUp_show=!0);this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1)}},commitData:function(){var t=this,e=this;this.commitPopUp_show=!1,this.SelectDelivery_show=!1,e.AllCommitPopUp_show=!1,"直送"==e.deliveryMethod_crru&&(e.forwardSupplier_crru="",e.forwardSupplierId_crru="");var a=this.$route.path,i="",s=this.$store.state.userInfo.userName,o=this.$store.state.userInfo.cellphone,n=this.$store.state.userInfo.orgnizationId,r=this.$store.state.userInfo.orgnizationName,c=this.longitude,l=this.latitude,d=this.CurrentLocation,u=this.CurrentDistrict,h=this.CurrentCity,p=this.deliveryMethod_crru,v=this.forwardSupplier_crru,m=this.forwardSupplierId_crru;switch(a){case"/DeliveryScanXH":case"/DeliveryScan":i="10";break;case"/TransitScan":i="20";break;case"/DeliveryOrderPickScan":i="30";break;case"/AbnormalScan":case"/ReceiptScan":i="40";break;default:i="10"}var f=[];for(var _ in this.count){var g={};g.omsNo=e.omsNo,g.orderId=e.orderId,e.abnormalscan&&(g.abnormalscan="T"),g.labelNo=this.count[_].order,g.linkNode=i,g.scanPerson=s,g.cellphone=o,g.scanTime=this.count[_].time,g.supplierId=n,g.supplierName=r,g.longitude=c,g.latitude=l,g.address=d,g.city=h,g.districict=u,g.deliveryMethod=p,g.forwardSupplier=v,g.forwardSupplierId=m,f.push(g)}var b=[];for(var y in this.cacheResponseData){var L={},C=this.cacheResponseData[y];L.omsNo=C.omsNo,L.displayWt=C.displayWt,L.linkNode=i,b.push(L)}for(var S in this.cleanOrderList=[],this.count)this.cleanOrderList.push(this.count[S].order);this.params=Ot()({},f[0],{labelNoList:this.cleanOrderList,deliveryId:e.deliveryId}),this.httpRequest1("post",Ht,this.params).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(a){a.code&&0!=a.code&&(e.$alert(a.detail,"提示",{confirmButtonText:"确定"}),t.$emit("scanFun",!0))})}}},Ui={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n\t\t\t\t订单总件数:"),a("i",[t._v(t._s(t.actualQty))]),t._v("件\n\t\t\t")]),t._v(" "),t.abnormalscan?a("div",{staticClass:"top"},[t._v("\n\t\t\t\t已签收数量:"),a("i",[t._v(t._s(t.AbHasScanNum))]),t._v("件\n\t\t\t")]):t._e(),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),t.abnormalscan?a("div",{staticClass:"commit-button-box commitAbnormal"},[a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button-box"},[t.HasLoading&&t.HasLoading==t.actualQty||!t.HasLoading?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),t.abnormalscan?t._e():a("div",{staticClass:"commit-button",on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.actualQty))])]),t._v(" "),t.HasLoading?a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("已装车件数：")]),a("span",[t._v(t._s(t.HasLoading))])]):t._e(),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.SelectDelivery_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head"},[t._v("请选择派件方式")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content"},["ZK"!=t.reference10||"到付现结"!=t.chargeTypes&&"到付"!=t.chargeTypes&&"到付月结"!=t.chargeTypes?a("div",{class:{DeliveryBox_content_active:"直送"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("直送")}}},[a("span",[t._v("直送")]),"直送"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()]):t._e(),t._v(" "),a("div",{class:{DeliveryBox_content_active:"转寄"==t.deliveryMethod_crru},on:{click:function(e){return t.DeliverySelect("转寄")}}},[a("span",[t._v("转寄")]),"转寄"==t.deliveryMethod_crru?a("i",{staticClass:"iconfont icon-duigou"}):t._e()])]),t._v(" "),"转寄"==t.deliveryMethod_crru?a("div",{staticClass:"DeliveryBox_input",on:{click:t.SelectCarrier}},[a("span",[t._v("转寄承运商：")]),t._v(" "),a("span",[t._v(t._s(t.forwardSupplier_crru))]),t._v(" "),a("i",{staticClass:"iconfont icon-xiangshang"})]):t._e(),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.DeliveryBoxCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.DeliveryBoxConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.CarrierSelection_show?a("div",{staticClass:"CarrierSelection"},[a("div",{staticClass:"CarrierSelectionBox"},[a("div",{staticClass:"CarrierSelection_head"},[t._v("请选择转寄承运商")]),t._v(" "),a("div",{staticClass:"CarrierSelection_content"},t._l(t.CarrierList,function(e,i){return a("div",{key:i,class:{CarrierSelection_active:t.CarrierSelecteditem==i},attrs:{id:i},on:{click:function(e){return t.CarrierSelected(i)}}},[t._v(t._s(e.forwardSupplier)+"\n\t\t\t\t")])}),0),t._v(" "),a("div",{staticClass:"CarrierSelection_bottom"},[a("div",[a("span",{on:{click:t.CarrierSelectionCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.CarrierSelectionConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.commitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("订单未扫描完，是否提交？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("订单总件数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.actualQty))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前提交数：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.count.length))])])]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.commitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.commitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Wi={name:"AbnormalScan",components:{"v-header":le,"v-scan":ht,"v-footer":a("VU/8")(Fi,Ui,!1,function(t){a("7TPc")},"data-v-7d52486e",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,activeName:"first",headerName:"异常单签收",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],scanLabelNo:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadTotalNew:0,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,linkNode:"",switchScan:!0,shipmentCode:"",deliveryId:"",omsNo:"",orderId:"",LocateAbnormalScanLabel:"",transportLinks:"",actualQty:0,abnormalscan:!0,AbHasScanNum:0}},mounted:function(){switch(this.$route.path){case"/DeliveryScanXH":case"/DeliveryScan":this.linkNode="10";break;case"/TransitScan":this.linkNode="20";break;case"/DeliveryOrderPickScan":this.linkNode="30";break;case"/ReceiptScan":case"/AbnormalScan":this.linkNode="40";break;default:this.linkNode="10"}var t=this;Yt()(".LoadImg_conentul ul.el-upload-list+div").click(function(e){event.stopPropagation(),t.switchScanFun(!1)})},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="wxReceipt",this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.transportLinks&&(this.transportLinks=this.$route.query.transportLinks),this.$route.query.actualQty&&(this.actualQty=this.$route.query.actualQty),this.$route.query.AbHasScanNum&&(this.AbHasScanNum=this.$route.query.AbHasScanNum),this.$route.query.LocateAbnormalScanLabel&&(this.LocateAbnormalScanLabel=this.$route.query.LocateAbnormalScanLabel)},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(this.uploadTotalNum),this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="签收",this.uploadParams.labelNo="40",this.$refs.upload_refAbScan.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")})},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},goprev:function(){this.LocateAbnormalScanLabel?this.$router.push({name:"ScanQueryOrderInfo",query:{LocateAbnormalScanLabel:this.LocateAbnormalScanLabel}}):this.$router.back(-1)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e,a=[];for(var i in this.orderList)a.push(this.orderList[i].orderBooting);for(var s in this.orderCodeList=(e=a,Fe()(new Oe.a(e))),this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[s].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.scanLabelNo=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this,a=this;if(0===this.historyLabelNo.length&&0===this.notScanLabelNo.length&&0===this.orderList.length){var i={scanLabel:t,linkNode:this.linkNode,omsNo:a.omsNo};this.getTheOrderNum(i,t)}else a.step0(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step1(t).then(function(i){0!==i.length?a.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):a.step2(t).then(function(i){if(0!==i.length)e.orderList.push({order:t,orderBooting:"",time:e.getTheTimeNow()}),e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});else{var s={scanLabel:t,linkNode:e.linkNode,omsNo:a.omsNo};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this;this.loadingData=!0,this.propScanData=e,this.httpRequest1("post","/kc-transport/tmsApp/verificationLabel",t).then(function(t){console.log(t),i.loadingData=!1;var s=t.entity;for(var o in new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}i.historyLabelNo=i.historyLabelNo.concat(s.historySubmitLabelNo),i.notScanLabelNo=i.notScanLabelNo.concat(s.notScanLabelNo),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?(i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.step2(e).then(function(t){0!==t.length?(a.orderList.push({order:e,orderBooting:s.omsNo,time:a.getTheTimeNow()}),a.notScanLabelNo=a.notScanLabelNo.filter(function(t){return t!==e}),a.orderCodeList=a.distinct(a.orderCodeList,s.omsNo)):i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[o].order)}).catch(function(t){i.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){this.switchScanFun(!0)}}},Ri={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-box AbnormalScan"},[a("v-header",{attrs:{headerName:t.headerName,orderList:t.orderList}}),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-header"},[t._v("\n          运单号("+t._s(t.orderList.length)+")\n        ")]),t._v(" "),a("div",{staticClass:"order-list"},t._l(t.orderList,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e.order)+"\n            ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.historyLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanLabelNo,function(e){return a("div",{staticClass:"list-item"},[t._v("\n            "+t._s(e)+"\n          ")])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refAbScan",attrs:{title:"拍照上传(限4张)",url:t.abnormalUploadImage,limit:4,name:"file",isNotice:!1,params:t.uploadParams}})],1)])],1),t._v(" "),a("v-footer",{attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,transportLinks:t.transportLinks,actualQty:t.actualQty,abnormalscan:t.abnormalscan,omsNo:t.omsNo,orderId:t.orderId,AbHasScanNum:t.AbHasScanNum},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var qi=a("VU/8")(Wi,Ri,!1,function(t){a("SWo7")},"data-v-4ed6428a",null).exports,Mi="/kc-transport/tmsAppNew/verificationOmsNo",Ei="/kc-opms/tmsAbnormal/addAbnormal",Hi="/kc-opms/tmsAbnormal/abnormalUploadImage",Qi={name:"Abnormal",components:{"v-scan":ht,"v-header":le,"v-uploader":Ut},data:function(){return{fetchObj:f,headerName:"上报异常",responseData:{},OMS:{},aboType:"",typeOptions:[],aboReason:"",reasonOptions:[],localtttOptions:[],aboLink:"",linkOptions:[],aboPer:"",perOptions:[],aboText:"",allData:{},dialogImageUrl:"",dialogVisible:!1,imgUrl:null,imgObj:null,uploadParams:{},imageUrl:"",switchScan:!0,uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,shipmentCode:"",omsNo:"",deliveryNoSF:"",linkno:"10",CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",longitude:"",latitude:"",labelList:[],selectedLabelList:[],labelInput:""}},watch:{aboType:function(t,e){if(t!=e){this.aboReason="";for(var a=0;a<this.allData.newAbnormalType.length;a++)this.allData.newAbnormalType[a].abnormalType==t&&(this.reasonOptions=this.allData.newAbnormalType[a].abnormalReason)}}},mounted:function(){this.getAboList();var t=this;Yt()(".LoadImg_conentul ul.el-upload-list+div").click(function(e){event.stopPropagation(),t.switchScanFun(!1)})},created:function(){if(this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo,this.OMS.omsNo=this.omsNo),this.$route.query.deliveryNoSF?(this.deliveryNoSF=this.$route.query.deliveryNoSF,this.OMS.deliveryNoSF=this.deliveryNoSF):this.OMS.deliveryNoSF="",this.$route.query.linkno&&(this.linkno=this.$route.query.linkno,console.log(this.linkno)),this.$route.query.labelList){this.labelList=this.$route.query.labelList;for(var t=[],e=0;e<this.labelList.length;e++)t[e]={ifSelect:!1,productNo:this.labelList[e]};this.labelList=S()([],t),console.log(this.labelList)}},methods:{QRScanAjax:function(t){this[this.$store.state.ScanQRCodeInputName]=t,this.confirmLabelInput()},SetCurrAddress:function(t){this.ReceivingLatitud(t)},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code?this.uploadSuccessNum++:this.uploadFailNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败"):this.finishUpload("图片上传失败"):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},finishUpload:function(t){var e=this;e.$emit("isLoading",!1);var a="";t&&(a=t?","+t:""),this.$alert("异常上报成功"+a,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},commitAbo:function(){var t=this,e=this;if(e.selectedLabelList.length){this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="异常",this.uploadParams.labelNo=this.linkno,e.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(e.uploadParams),"40"==this.linkno&&(this.linkno="30");var a={omsNo:this.OMS.omsNo,deliveryNoSF:this.OMS.deliveryNoSF,transporterId:this.$store.state.userInfo.orgnizationId,transporterName:this.$store.state.userInfo.orgnizationName,sponsorName:this.$store.state.userInfo.userName,cellphone:e.$store.state.userInfo.cellphone,abnormalType:this.aboType,abnormalReason:this.aboReason,abnormalLink:this.linkno,responsibleParty:this.aboPer,abnormalExplain:this.aboText,city:e.CurrentCity,labelNoArr:e.selectedLabelList};console.log(a),this.httpRequest1("post",this.fetchObj.abnormalAdd,a).then(function(a){console.log(a),e.$alert("异常上报成功","提示",{confirmButtonText:"确定",callback:function(i){var s=e.$refs.uploadAb.getImgNum();e.uploadParams.abnormalId=a.entity?a.entity.id:0,s>0&&e.$refs.uploadAb.submit(t)}})})}else e.$alert("请选择运单号","提示",{confirmButtonText:"确定"})},onSuccess:function(){this.$router.back(-1)},onErr:function(){this.$router.back(-1)},selectLabel:function(t){var e=this;e.labelList[t].ifSelect=!e.labelList[t].ifSelect;var a=Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont");a.hasClass("icon-xuanzhong")?(e.selectedLabelList=e.selectedLabelList.filter(function(a){return a!==e.labelList[t].productNo}),a.removeClass("icon-xuanzhong").addClass("icon-weixuanzhong")):a.hasClass("icon-weixuanzhong")&&(e.selectedLabelList.push(e.labelList[t].productNo),a.removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"))},deleteLabel:function(t){for(var e=0;e<this.labelList.length;e++)if(this.labelList[e].productNo==this.selectedLabelList[t]){this.labelList[e].ifSelect=!1,this.selectedLabelList.splice(t,1),Yt()(".SingleLatitudeBox_box>div").eq(e).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong"),console.log(this.labelList);break}},confirmLabelInput:function(){var t=this;console.log(t.labelList),t.labelList.forEach(function(e,a){t.labelInput==e.productNo&&(e.ifSelect=!0,Yt()(".SingleLatitudeBox_box>div").eq(a).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong"),t.selectedLabelList=t.selectedLabelList.filter(function(t){return t!==e.productNo}),t.selectedLabelList.push(e.productNo))})},checkAllLabel:function(){this.selectedLabelList=[];for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!0,this.selectedLabelList[t]=this.labelList[t].productNo,Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-weixuanzhong").addClass("icon-xuanzhong")},UnselectAllLabel:function(){for(var t=0;t<this.labelList.length;t++)this.labelList[t].ifSelect=!1,Yt()(".SingleLatitudeBox_box>div").eq(t).children("span.iconfont").removeClass("icon-xuanzhong").addClass("icon-weixuanzhong");this.selectedLabelList=[]},getAboList:function(){var t=this;this.httpRequest1("post","/kc-opms/tmsAbnormal/abnormalSelectData",{}).then(function(e){console.log(e),t.typeOptions=[],t.reasonOptions=[],t.linkOptions=[],t.perOptions=[];var a=e.entity;for(var i in t.allData=a,a.abnormalLink){var s=a.abnormalLink[i],o={};o.value=s,o.label=s,t.linkOptions.push(o)}for(var n in t.typeOptions=a.newAbnormalType,a.responsibleParty){var r=a.responsibleParty[n],c={};c.value=r,c.label=r,t.perOptions.push(c)}})},scanData:function(t){var e=this,a={scanLabel:t,shipmentCode:e.shipmentCode};console.log(a),this.httpRequest1("post",this.fetchObj.reportAbnormalQuery,a).then(function(t){console.log(t),e.OMS={omsNo:t.entity.omsNo,deliveryNoSF:t.entity.deliveryNoSF}})},goPrev:function(){this.$router.go(-1)},switchScanFun:function(t){this.switchScan=!!t},uploadOnChange:function(t){this.switchScanFun(!0)}}},zi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body Abnormal"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("异常上报")])]),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),a("div",{staticClass:"common-box"},[t.omsNo?t._e():a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"form-content"},[a("div",{staticClass:"form-item"},[a("label",[t._v("订单号")]),t._v(" "),a("el-input",{staticClass:"form-input",attrs:{type:"text",disabled:!0},model:{value:t.OMS.omsNo,callback:function(e){t.$set(t.OMS,"omsNo",e)},expression:"OMS.omsNo"}})],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常类型")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常类型选择"},model:{value:t.aboType,callback:function(e){t.aboType=e},expression:"aboType"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.abnormalType,attrs:{label:t.abnormalType,value:t.abnormalType}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常原因")]),a("br"),t._v(" "),a("el-select",{attrs:{placeholder:"异常原因选择"},model:{value:t.aboReason,callback:function(e){t.aboReason=e},expression:"aboReason"}},t._l(t.reasonOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"form-item"},[a("label",[t._v("异常描述")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.aboText,callback:function(e){t.aboText=e},expression:"aboText"}})],1)]),t._v(" "),a("div",{staticClass:"SingleLatitude"},[a("div",{staticClass:"SingleLatitudeScan"},[a("div",[a("span",{staticClass:"iconfont icon-saomiao",on:{click:function(e){return t.androidScan("labelInput")}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.labelInput,expression:"labelInput"}],attrs:{type:"text",placeholder:"输入要异常上报的运单"},domProps:{value:t.labelInput},on:{input:function(e){e.target.composing||(t.labelInput=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.confirmLabelInput}},[t._v("确定")])])]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox"},[a("div",{staticClass:"SingleLatitudeBox_head"},[t._v("请选择要异常上报的运单")]),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_box"},t._l(t.labelList,function(e,i){return a("div",{key:i,attrs:{id:i},on:{click:function(e){return t.selectLabel(i)}}},[a("span",[t._v(t._s(e.productNo))]),t._v(" "),a("span",{staticClass:"iconfont icon-weixuanzhong"})])}),0),t._v(" "),a("div",{staticClass:"SingleLatitudeBox_btn"},[a("span",{staticClass:"checkAll",on:{click:t.checkAllLabel}},[t._v("全选")]),t._v(" "),a("span",{staticClass:"UnselectAll",on:{click:t.UnselectAllLabel}},[t._v("全不选")])]),t._v(" "),t.selectedLabelList.length?a("div",{staticClass:"SelectedWaybill"},[a("div",{staticClass:"SelectedWaybill_head"},[t._v("已选择的运单")]),t._v(" "),a("div",{staticClass:"SelectedWaybill_box"},t._l(t.selectedLabelList,function(e,i){return a("div",{key:i,attrs:{id:i}},[a("span",[t._v(t._s(e))]),t._v(" "),a("span",{staticClass:"iconfont icon-jian",on:{click:function(e){return t.deleteLabel(i)}}})])}),0)]):t._e()])]),t._v(" "),a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"uploadAb",attrs:{title:"上传图片(限3张)",url:t.fetchObj.abnormalImg,limit:3,name:"file",params:t.uploadParams},on:{onErr:t.onErr,onSuccess:t.onSuccess}})],1),t._v(" "),a("div",{staticClass:"footer-commit"},[a("div",{staticClass:"commit",on:{click:t.commitAbo}},[t._v("提交")])])])},staticRenderFns:[]};var Vi=a("VU/8")(Qi,zi,!1,function(t){a("Mlcx")},"data-v-4b20fe14",null).exports,ji={data:function(){return{headerText:"途中轨迹",shipmentID:"",pointsArray:[],lngLats:[],lineArr:[],map_g:"",myInterval:"",myInterval_onComplete:"",myInterval_onError:"",geoShopList:[],geoTotalQty:0,geoOkQty:0,ifTips:!1,tips_Msg:""}},mounted:function(){var t=this;if(this.$route.query.head&&(this.headerText=this.$route.query.head),this.$route.query.shipmentID){this.shipmentID=this.$route.query.shipmentID;var e=new AMap.Map("container",{resizeEnable:!0});t.map_g=e}else t.$alert("运单id为空","提示",{confirmButtonText:"确定",callback:function(){t.$router.back(-1)}})},created:function(){},methods:{}},Xi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"TrackOnTheWay"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v(t._s(t.headerText))])]),t._v(" "),a("div",{staticClass:"container",attrs:{id:"container"}}),t._v(" "),a("div",{attrs:{id:"panel"}}),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips_text"},[a("div",{staticClass:"tips_content"},[a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ji=a("VU/8")(ji,Xi,!1,function(t){a("Zj4f")},"data-v-14cd255a",null).exports,Yi={name:"MassTransfer",data:function(){return{abnormalUploadImage:zt,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,shipmentCode:"",omsNo:"",deliveryId:"",CurrentLocation:"",CurrentDistrict:"",CurrentCity:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0}},components:{"v-uploader":Ut},created:function(){this.$route.query.shipmentCode&&(this.shipmentCode=this.$route.query.shipmentCode),this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.onPlusReady("isLoading_"),this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.driverName=this.$store.state.userInfo.userName,this.uploadParams.city=this.CurrentCity,this.uploadParams.address=this.CurrentLocation,this.uploadParams.district=this.CurrentDistrict,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="回单",this.uploadParams.labelNo="40",this.uploadParams.returnFlag="T"},methods:{SetCurrAddress:function(t){this.ReceivingLatitud(t)},submit:function(){var t=this;t.$refs.upload_refMass.getImgNum()>0?t.$refs.upload_refMass.submit(this).then(function(e){t.finishUpload("图片上传成功")}).catch(function(){t.finishUpload("图片上传失败")}):t.$alert("请上传图片","提示",{confirmButtonText:"确定"})},finishUpload:function(t){t=t?","+t:"";var e=this;this.$alert("签单上传成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},onSuccess:function(){this.$router.back(-1)},onErr:function(){this.$router.back(-1)},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Gi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MassTransfer"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("签单上传")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.omsNo))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refMass",attrs:{title:"拍照上传(限6张)",url:t.abnormalUploadImage,limit:6,name:"file",isNotice:!1,params:t.uploadParams}})],1)])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Ki=a("VU/8")(Yi,Gi,!1,function(t){a("0rMw")},"data-v-c7d1f73e",null).exports,Zi={name:"CollectCustomerNum",data:function(){return{OrderInfoData:{},OrderInfoDataList:[],tips_Msg:"",ifTips:!1,printData:[],loadingData:!1,OrderInfo_show:!1,scanLabel:"",omsNo:""}},components:{"v-scan":ht},mounted:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo)},created:function(){},methods:{scanData:function(t){this.is_NoData=!1;var e=this;this.scanLabel=t;var a={scanLabel:this.omsNo,clientOrderNo:t};alert("系统维护中，请联系管理员..."),console.log(a),e.$emit("isLoading",!0,"拼命加载中"),a=e.PublicEncryption(a),Ct.a.post(e.HOST+"saveClientOrderNo.do",{params:a}).then(function(t){if(console.log(t),e.$emit("isLoading",!1),1==t.data.status)e.ifTips=!0,e.tips_Msg="操作成功",setTimeout(function(){e.ifTips=!1,e.$router.back(-1)},1500);else if(301==t.data.status)e.ReturnToLogin();else{var a;a=t.data.Msg?t.data.Msg:"请求失败",e.$alert(a,"提示",{confirmButtonText:"确定"})}}).catch(function(t){e.$emit("isLoading",!1),e.$alert("请求失败","提示",{confirmButtonText:"确定"})})},goprev:function(){this.$router.push({name:"Index"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ts={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CollectCustomerNum"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("采集客户单号")])]),t._v(" "),a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{textre:"手动输入客户单号",loadingData:t.loadingData},on:{scanData:t.scanData}})],1),t._v(" "),a("div",{staticClass:"order-level"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.OrderInfo_show,expression:"OrderInfo_show"}],staticClass:"orderInfo"},[t.OrderInfoData?a("div",{staticClass:"ExpressListHead"},[t._v("订单信息")]):t._e(),t._v(" "),t.OrderInfoData?a("div",{staticClass:"AbnormalItem"},[a("div",{staticClass:"nomalList"},[a("div",[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.OrderInfoData.omsNo)+"\n\t\t\t\t\t\t      "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.OrderInfoData.omsNo,expression:"OrderInfoData.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})])]),t._v(" "),a("div",[a("span",[t._v("月结卡号：")]),a("span",[t._v(t._s(t.OrderInfoData.monthCardNumber))])])])]):t._e()])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var es=a("VU/8")(Zi,ts,!1,function(t){a("cpHv")},"data-v-51269d74",null).exports,as={name:"UnloadDelivery",components:{"v-uploader":Ut},data:function(){return{abnormalUploadImage:zt,dialogImageUrl:"",dialogVisible:!1,uploadParams:{},tips_Msg:"",ifTips:!1,omsNo:"",orderId:"",CurrentLocation:"",CurrentCity:"",CurrentDistrict:"",latitude:"",longitude:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,Package:"",contnrCode:""}},created:function(){this.$route.query.omsNo&&(this.omsNo=this.$route.query.omsNo),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.$route.query.Package&&(this.Package=this.$route.query.Package,this.$route.query.contnrCode&&(this.contnrCode=this.$route.query.contnrCode)),this.onPlusReady("isLoading_"),this.uploadParams.cellphone=this.$store.state.userInfo.cellphone,this.uploadParams.driverName=this.$store.state.userInfo.userName,this.uploadParams.omsNo=this.omsNo,this.uploadParams.fileType="卸车扫描",this.uploadParams.labelNo="10"},methods:{submit:function(){var t=this,e=this;e.uploadTotalNum=Yt()("div.uploadImg ul>li").length,e.$emit("isLoading",!0,"拼命加载中");var a,i={linkNode:"10",supplierId:e.$store.state.userInfo.orgnizationId,supplierName:e.$store.state.userInfo.orgnizationName,unloadPlace:e.CurrentLocation,district:e.CurrentDistrict,city:e.CurrentCity,longitude:e.longitude,latitude:e.latitude,unloadPerson:e.$store.state.userInfo.userName,cellphone:e.$store.state.userInfo.cellphone};e.Package&&"Package"==e.Package?(i.labelNo=e.contnrCode,a="/kc-transport/tmsAppNew/savePickupDataContainer"):(i.omsNo=e.omsNo,i.orderId=e.orderId,a="/kc-transport/tmsAppNew/savePickupData"),e.httpRequest1("post",a,i).then(function(a){(console.log(a),e.uploadTotalNum>0)?e.$refs.upload_refMass.submit(t).then(function(t){e.finishUpload("图片上传成功")}).catch(function(){e.finishUpload("图片上传失败")}):(e.ifTips=!0,e.tips_Msg=a.detail,setTimeout(function(){e.ifTips=!1,e.$router.back(-1)},1500))}).catch(function(t){})},SetCurrAddress:function(t){this.ReceivingLatitud(t)},finishUpload:function(t){t=t?","+t:"";var e=this;e.$emit("isLoading",!1),this.$alert("卸货交付成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.$emit("isLoading_",!1),this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},is={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"UnloadDelivery"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("卸车交付")])]),t._v(" "),a("div",{staticClass:"container borderLine"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.Package&&"Package"==t.Package,expression:'Package && Package == "Package"'}]},[a("span",[t._v("包号：")]),a("span",[t._v(t._s(t.contnrCode))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.Package,expression:"!Package"}]},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.omsNo))])]),t._v(" "),a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前位置：")]),a("span",[t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refMass",attrs:{title:"拍照上传(限6张)",url:t.abnormalUploadImage,limit:6,name:"file",isNotice:!1,params:t.uploadParams}})],1)])]),t._v(" "),a("div",{staticClass:"submitBtn"},[a("p",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ss=a("VU/8")(as,is,!1,function(t){a("rt3k")},"data-v-6d0ee48a",null).exports,os={name:"commit-footer",components:{"v-confirm":ne},data:function(){return{docmHeight:document.documentElement.clientHeight,realHeight:0,showFooter:!0,params:{params:[],longitude:"",latitude:""},CurrentCity:"",CurrentLocation:"",CurrentDistrict:"",BatchCommit_show:!1,BatchCommitNumber:"",longitude:"",latitude:"",crruentconfirm:"",AllCommitPopUp_show:!1,BatchOrderNum:0,BatchOrderLastNum:0}},props:["count","orderCount","countData","orderList","deliveryId","hideBitch","transportLinks","actualQty","orderId","AbHasScanNum","yiScanNumber","scanned","notScanned","orderListScanned","OMSNum","historyLabelNo","notScanLabelNo"],watch:{realHeight:function(){this.docmHeight>this.realHeight?this.showFooter=!1:this.showFooter=!0}},mounted:function(){var t=this;this.onPlusReady("e"),window.onresize=function(){t.realHeight=document.body.clientHeight}},methods:{RefreshPositioning:function(){this.onPlusReady("e")},SetCurrAddress:function(t){this.ReceivingLatitud(t)},BatchCommit:function(){var t=0,e=0;if(0!==this.count.length&&!(this.orderListScanned.length>1)){for(var a=0;a<this.scanned.length;a++)this.scanned[a].omsNo==this.orderListScanned[0].order&&(t=this.scanned[a].waybillNumber.length);for(var i=0;i<this.notScanned.length;i++)this.notScanned[i].omsNo==this.orderListScanned[0].order&&(e=this.notScanned[i].waybillNumber.length);this.BatchOrderNum=this.orderListScanned[0].waybillNumber.length+t+e,this.BatchOrderLastNum=t,this.BatchCommit_show=!0,this.crruentconfirm="批量",this.$emit("scanFun",!1)}},BatchCommitCancel:function(){this.BatchCommit_show=!1,this.$emit("scanFun",!0)},BatchCommitConfirmitem:function(){var t=this,e=(this.$route.path,{omsNo:t.count[0].omsno,scanLabelNo:t.count[0].order,labelNumber:t.BatchCommitNumber,linkNode:"20",scanPerson:t.$store.state.userInfo.userName,address:t.CurrentLocation,latitude:t.latitude,longitude:t.longitude,city:t.CurrentCity,districict:t.CurrentDistrict,cellphone:t.$store.state.userInfo.cellphone,supplierId:t.$store.state.userInfo.orgnizationId,supplierName:t.$store.state.userInfo.orgnizationName,appFlightDepcode:t.$store.state.userInfo.aiportCode});this.httpRequest1("post","/kc-transport/tmsApp/aviationLoadingCommitScanBatch",e).then(function(e){Yt()("div.uploadImg ul>li").length>0?t.$parent.updateimg():t.$alert("批量提交成功","提示",{confirmButtonText:"确定",callback:function(){t.$router.go(-1)}})}).catch(function(e){t.$emit("reflash",!0),t.$emit("scanFun",!0),t.$alert("批量提交失败","提示",{confirmButtonText:"确定"})})},BatchCommitConfirmbefore:function(){this.BatchCommitNumber&&("NaN"==parseInt(this.BatchCommitNumber).toString()||parseInt(this.BatchCommitNumber)<0||this.BatchCommitNumber!=parseInt(this.BatchCommitNumber)?this.$alert("请输入正整数","提示",{confirmButtonText:"确定",callback:function(){}}):this.BatchCommitNumber>this.BatchOrderNum-this.BatchOrderLastNum?this.$alert("批量提交数量不能超过剩余未扫描总件数","提示",{confirmButtonText:"确定",callback:function(){}}):this.AllCommitPopUp_show=!0)},userBehaviorFun:function(t,e){"clickCancel"!==t?this.commitData():this.$emit("scanFun",!0)},AllCcommitPopUpCancel:function(){this.AllCommitPopUp_show=!1},AllCcommitPopUpConfirm:function(){"批量"==this.crruentconfirm?this.BatchCommitConfirmitem():this.commitData()},checkForCommit:function(){0!==this.count.length&&(this.crruentconfirm="提交",this.AllCommitPopUp_show=!0,this.$emit("scanFun",!1))},commitData:function(){var t=this,e=this;e.AllCommitPopUp_show=!1;var a={};this.$route.path;for(var i in a.linkNode="20",a.scanPerson=this.$store.state.userInfo.userName,a.cellphone=this.$store.state.userInfo.cellphone,a.supplierId=this.$store.state.userInfo.orgnizationId,a.supplierName=this.$store.state.userInfo.orgnizationName,a.longitude=this.longitude,a.latitude=this.latitude,a.address=this.CurrentLocation,a.districict=this.CurrentDistrict,a.city=this.CurrentCity,a.omsNo=this.count[0].omsno,a.scanTime=this.count[0].time,a.labelNoList=[],a.appFlightDepcode=e.$store.state.userInfo.aiportCode,this.cleanOrderList=[],this.count)a.labelNoList.push(this.count[i].order),this.cleanOrderList.push(this.count[i].order);e.httpRequest1("post","/kc-transport/tmsApp/aviationLoadingCommitScan",a).then(function(a){Yt()("div.uploadImg ul>li").length>0?e.$parent.updateimg():(e.$emit("isLoading_",!1),e.$alert(a.detail,"提示",{confirmButtonText:"确定"})),t.$emit("reflash",!0),t.$emit("scanFun",!0)}).catch(function(e){e.code&&0!=e.code&&t.$emit("scanFun",!0)})}}},ns={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit-footer"},[t.showFooter?a("div",{staticClass:"addr_foot"},[a("div",{staticClass:"addr_foot_f"},[a("div",[a("span",[t._v("当前城市：")]),a("span",[t._v(t._s(t.CurrentCity))])]),t._v(" "),a("div",[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",[a("span",[t._v("当前地址：")]),a("span",[t._v(t._s(t.CurrentLocation))])])]),t._v(" "),a("div",{staticClass:"addr_foot_s"},[a("div",{on:{click:t.RefreshPositioning}},[t._v("刷新定位")])])]):t._e(),t._v(" "),t.showFooter?a("div",{staticClass:"left-countbox"},[a("div",{staticClass:"left-count"},[a("div",{staticClass:"top"},[t._v("\n\t\t\t\t共 "),a("i",[t._v(" "+t._s(t.OMSNum))]),t._v(" 票   "),a("i",[t._v("\n\t\t\t\t\t"+t._s(t.historyLabelNo.length+t.notScanLabelNo.length+t.count.length))]),t._v(" 件\n\t\t\t")]),t._v(" "),a("div",{staticClass:"top"},[t._v("\n\t\t\t\t已扫描数量:"),a("i",[t._v(" "+t._s(t.historyLabelNo.length))]),t._v("件\n\t\t\t")]),t._v(" "),a("div",{staticClass:"bottom"},[t._v("\n\t\t\t\t当前扫描:"),a("i",[t._v(t._s(t.count.length))]),t._v("件\n\t\t\t")])]),t._v(" "),a("div",{staticClass:"commit-button-box"},[t.orderListScanned.length<1||1==t.orderListScanned.length&&"package"!=t.orderListScanned[0].flag?a("div",{staticClass:"commit-button BatchCommit",on:{click:t.BatchCommit}},[t._v("批量提交")]):t._e(),t._v(" "),a("div",{staticClass:"commit-button",class:{checkForCommit:t.hideBitch},on:{click:t.checkForCommit}},[t._v("提交")])]),t._v(" "),a("v-confirm",{ref:"myConfirm",on:{userBehavior:t.userBehaviorFun}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.BatchCommit_show,expression:"BatchCommit_show"}],staticClass:"BatchCommitPopBox"},[a("div",{staticClass:"BatchCommit_"},[a("div",{staticClass:"BatchCommit_head"},[t._v("请填写要批量提交的数量")]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单号：")]),a("span",[t._v(t._s(t.orderListScanned.length?t.orderListScanned[0].order:0))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("订单总件数：")]),a("span",[t._v(t._s(t.BatchOrderNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_info"},[a("span",[t._v("上次已扫描数量：")]),a("span",[t._v(t._s(t.BatchOrderLastNum))])]),t._v(" "),a("div",{staticClass:"BatchCommit_content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BatchCommitNumber,expression:"BatchCommitNumber"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:t.BatchCommitNumber},on:{input:function(e){e.target.composing||(t.BatchCommitNumber=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"BatchCommit_btn"},[a("div",{staticClass:"commit-button",on:{click:t.BatchCommitCancel}},[t._v("取消")]),t._v(" "),a("div",{staticClass:"commit-button",on:{click:t.BatchCommitConfirmbefore}},[t._v("批量提交")])])])]),t._v(" "),t.AllCommitPopUp_show?a("div",{staticClass:"SelectDelivery"},[a("div",{staticClass:"DeliveryBox"},[a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("请确认地址是否正确？")]),t._v(" "),a("div",{staticClass:"DeliveryBox_head commitPopUp_head",staticStyle:{color:"red",border:"none"}},[t._v("不正确请刷新定位"),a("span",{staticClass:"addr_foot_sl",on:{click:t.RefreshPositioning}},[t._v("刷新定位")])]),t._v(" "),a("div",{staticClass:"DeliveryBox_content commitPopUp_content"},[a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前城市：")]),t._v(t._s(t.CurrentCity))]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前区县：")]),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.CurrentDistrict))])]),t._v(" "),a("div",{staticStyle:{border:"none"}},[a("span",[t._v("当前地址：")]),t._v(t._s(t.CurrentLocation))])]),t._v(" "),a("div",{staticClass:"DeliveryBox_bottom"},[a("div",[a("span",{on:{click:t.AllCcommitPopUpCancel}},[t._v("取消")])]),t._v(" "),a("div",[a("span",{on:{click:t.AllCcommitPopUpConfirm}},[t._v("确定")])])])])]):t._e()])},staticRenderFns:[]};var rs={name:"AviationAllTransitScan",components:{"v-scan":Dt,"v-footer":a("VU/8")(os,ns,!1,function(t){a("hDXG")},"data-v-5a083af6",null).exports,"v-confirm":ne,"v-uploader":Ut},data:function(){return{independentUploadImage:"/kc-transport/commonFile/fileUpload",activeName:"first",headerName:"航空出港扫描",orderCount:0,countData:[],orderList:[],orderCodeList:[],cleanOrderList:[],orderListScanned:[],historyLabelNo:[],notScanLabelNo:[],dialogImageUrl:"",dialogVisible:!1,uploadParamsList:[{}],uploadParamsListOne:[{}],uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,loadingData:!1,switchScan:!0,deliveryId:"",orderId:"",actualQty:0,yiScanNumber:0,notScanned:[],scanned:[],OMSNum:0,ifflash:!1,vfooterflag:!0}},mounted:function(){},created:function(){if(!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.ContinuousScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生半屏扫描二维码/条码"})}catch(t){}this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.$route.query.orderId&&(this.orderId=this.$route.query.orderId)},beforeDestroy:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},methods:{updateimg:function(){var t=this;this.uploadTotalNum=Yt()("div.uploadImg ul>li").length,console.log(t.orderListScanned);for(var e=0,a=t.orderListScanned.length,i=0;i<t.orderListScanned.length;i++){t.$refs.upload_refXH[i].submit(this,{cellphone:t.$store.state.userInfo.cellphone,bizCode:t.orderListScanned[i].order,fileType:"out-port-20",labelNo:"20"}).then(function(i){++e===a&&t.finishUpload("图片上传成功")}).catch(function(i){++e===a&&t.finishUpload(i.detail)})}},closeScan:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},flashOpenOrClose:function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},CloseScanBox:function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},fullscreenLoading:function(t,e){this.$emit("isLoading",t,e)},switchScanFun:function(t){this.switchScan=!!t},userBehaviorFun:function(){},deleteItem:function(t){this.orderList=this.orderList.filter(function(e){return e.order!==t});var e=[];for(var a in this.orderList)e.push(this.orderList[a].orderBooting);for(var i in this.cleanOrderList=[],this.orderList)this.cleanOrderList.push(this.orderList[i].order)},reflashData:function(){this.countData=[],this.orderList=[],this.orderCodeList=[],this.cleanOrderList=[],this.OMSNum=0,this.notScanned=[],this.scanned=[],this.orderListScanned=[],this.historyLabelNo=[],this.notScanLabelNo=[]},scanData:function(t){var e=this;if(0===e.historyLabelNo.length&&0===e.notScanLabelNo.length&&0===e.orderList.length){var a={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(a,t)}else e.step0(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step1(t).then(function(a){0!==a.length?e.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):e.step2(t).then(function(a){if(0!==a.length){e.notScanLabelNo=e.notScanLabelNo.filter(function(e){return e!==t});for(var i=0;i<e.notScanned.length;i++)e.notScanned[i].waybillNumber=e.notScanned[i].waybillNumber.filter(function(a){if(a==t)if(e.orderList.push({order:t,omsno:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow()}),e.orderListScanned.length){for(var s=!1,o=0;o<e.orderListScanned.length;o++)e.orderListScanned[o].order==e.notScanned[i].omsNo&&(e.orderListScanned[o].waybillNumber.push(a),s=!0);s||e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag})}else e.orderListScanned.push({order:e.notScanned[i].omsNo,orderBooting:"",time:e.getTheTimeNow(),waybillNumber:[a],flag:e.notScanned[i].flag});return a!==t}),e.notScanned[i].waybillNumber.length<=0&&e.notScanned.splice(i,1);console.log(e.orderListScanned)}else{var s={labelNo:t,transporterId:e.$store.state.userInfo.orgnizationId};e.getTheOrderNum(s,t)}})})})},getTheTimeNow:function(){var t=new Date;function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDay())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},distinct:function(t,e){var a=t.concat(e),i=[],s={},o=!0,n=!1,r=void 0;try{for(var c,l=Pe()(a);!(o=(c=l.next()).done);o=!0){var d=c.value;s[d]||(i.push(d),s[d]=1)}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}return i},step0:function(t){var e=this;return new w.a(function(a){a(e.orderList.filter(function(e){return e.order==t}))})},step1:function(t){var e=this;return new w.a(function(a,i){a(e.historyLabelNo.filter(function(e){return e==t}))})},step2:function(t){var e=this;return new w.a(function(a,i){a(e.notScanLabelNo.filter(function(e){return e==t}))})},getTheOrderNum:function(t,e){var a=this,i=this,s=this;this.loadingData=!0,this.httpRequest1("post","/kc-transport/tmsApp/queryAviationOmsNoSelectInfo",t).then(function(t){var o=t.entity;for(var n in t.entity.notScanned&&(s.notScanned=s.notScanned.concat(t.entity.notScanned)),t.entity.scanned&&(s.scanned=s.scanned.concat(t.entity.scanned)),i.loadingData=!1,i.OMSNum=parseInt(i.OMSNum)+1,new w.a(function(t){function e(t){return Fe()(new Oe.a(t))}o.scanned&&o.scanned.length&&(i.historyLabelNo=i.historyLabelNo.concat(o.scanned[0].waybillNumber)),o.notScanned&&o.notScanned.length&&(i.notScanLabelNo=i.notScanLabelNo.concat(o.notScanned[0].waybillNumber)),i.historyLabelNo=e(i.historyLabelNo),i.notScanLabelNo=e(i.notScanLabelNo),t(!0)}).then(function(t){t&&i.step1(e).then(function(t){0!==t.length?i.$refs.message.show("该标签号已扫描保存过!",{type:"alert",confirmText:"确定",titleText:"请注意"}):i.step2(e).then(function(t){if(0!==t.length){i.notScanLabelNo=i.notScanLabelNo.filter(function(t){return t!==e});for(var a=0;a<i.notScanned.length;a++)i.notScanned[a].waybillNumber=i.notScanned[a].waybillNumber.filter(function(t){if(t==e)if(i.orderList.push({order:e,omsno:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow()}),i.orderListScanned.length){for(var s=!1,o=0;o<i.orderListScanned.length;o++)i.orderListScanned[o].order==i.notScanned[a].omsNo&&(i.orderListScanned[o].waybillNumber.push(t),s=!0);s||i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag})}else i.orderListScanned.push({order:i.notScanned[a].omsNo,orderBooting:"",time:i.getTheTimeNow(),waybillNumber:[t],flag:i.notScanned[a].flag});return t!==e}),i.notScanned[a].waybillNumber.length<=0&&i.notScanned.splice(a,1)}else i.$refs.message.show("标签号错误，请重新扫描!",{type:"alert",confirmText:"确定",titleText:"请注意"})})})}),a.cleanOrderList=[],a.orderList)a.cleanOrderList.push(a.orderList[n].order);a.loadingData=!1}).catch(function(t){a.loadingData=!1})},finishUpload:function(t){var e=this;e.$emit("isLoading_",!1),t=t?","+t:"",this.$alert("扫描保存成功"+t,"提示",{confirmButtonText:"确定",callback:function(){e.$router.back(-1)}})},uploadSuccessful:function(t,e,a){var i=JSON.parse(F(t.result));console.log(i),0==i.code&&this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)?this.finishUpload("部分图片上传失败"):this.finishUpload(t.Msg):this.finishUpload("")},uploadErr:function(t,e,a){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.finishUpload("部分图片上传失败")},uploadOnChange:function(t){try{window.webkit.messageHandlers.messageSend.postMessage({a:"拍照完成"})}catch(t){}this.switchScanFun(!0)},goPrev:function(){this.$router.go(-1)}}},cs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationAllTransitScan"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("航空出港扫描")]),a("i",{staticClass:"iconfont icon-shanguangdeng",on:{click:t.flashOpenOrClose}}),a("i",{staticClass:"iconfont closeScan",on:{click:t.closeScan}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"common-box"},[a("div",{staticClass:"content-box"},[a("v-scan",{attrs:{switchScan:t.switchScan,loadingData:t.loadingData},on:{scanData:t.scanData}})],1)]),t._v(" "),a("div",{staticClass:"PickUpRandomScan_orderbox"},[a("div",{staticClass:"order-level level2"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{stretch:!0},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"扫描标签("+t.orderList.length+")",name:"first"}},[a("div",{staticClass:"order-list"},t._l(t.orderListScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("\n                "+t._s("package"==e.flag?"包号:":"订单号:")+t._s(e.order)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e))])}),t._v(" "),a("div",{staticClass:"Upload"},[a("div",{staticClass:"uploadImg"},[a("v-uploader",{ref:"upload_refXH",refInFor:!0,attrs:{url:t.independentUploadImage,limit:6,isNotice:!1,name:"file"}})],1)])],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"no-data"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史标签("+t.historyLabelNo.length+")",name:"second"}},[a("div",{staticClass:"order-list"},t._l(t.scanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v("\n                "+t._s(e)+"\n              ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.historyLabelNo.length,expression:"historyLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])]),t._v(" "),a("el-tab-pane",{attrs:{label:"未扫描标签("+t.notScanLabelNo.length+")",name:"third"}},[a("div",{staticClass:"order-list"},t._l(t.notScanned,function(e,i){return a("div",{key:i,staticClass:"order-list_item",attrs:{id:i}},[a("div",{staticClass:"order-list_item_order"},[t._v("订单号: "+t._s(e.omsNo)+" ")]),t._v(" "),t._l(e.waybillNumber,function(e,i){return a("div",{staticClass:"order-list_item_item"},[t._v(t._s(e)+" ")])})],2)}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.notScanLabelNo.length,expression:"notScanLabelNo.length == 0"}],staticClass:"no-data no-data2"},[a("div",{staticClass:"right-bg"})])])],1)],1)]),t._v(" "),a("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.vfooterflag,expression:"vfooterflag"}],attrs:{count:t.orderList,orderCount:t.orderCodeList.filter(function(t){return""!==t}).length,countData:t.countData,orderList:t.cleanOrderList,deliveryId:t.deliveryId,actualQty:t.actualQty,orderId:t.orderId,yiScanNumber:t.yiScanNumber,scanned:t.scanned,notScanned:t.notScanned,orderListScanned:t.orderListScanned,OMSNum:t.OMSNum,historyLabelNo:t.historyLabelNo,notScanLabelNo:t.notScanLabelNo},on:{reflash:t.reflashData,scanFun:t.switchScanFun,isLoading_:t.fullscreenLoading}}),t._v(" "),a("v-confirm",{ref:"message"})],1)},staticRenderFns:[]};var ls=a("VU/8")(rs,cs,!1,function(t){a("+ZpJ")},"data-v-043dc84a",null).exports,ds="/kc-transport/tmsAppNew/updateDeliveryScanNumber",us=a("MJLE"),hs=a.n(us),ps=(a("TwlK"),{name:"OrderInfo_template",props:{_orderInfo:{type:Array,default:function(){return[]}},packageList:{type:Array,default:function(){return[]}},shipmentID:0,shipStatus:"",selectAddr:!1,historyList:!1,LinkStatus:"",receivingStatus:"",daoDaStatus:""},data:function(){return{fetchObj:_,tips_Msg:"",ifTips:!1,qrcodePayment_show:!1,wxqrcodePayment_show:!1,selectPaymentmeng:!1,queryPaySetInterval:"",queryPayMsg:"",payOmsNo:""}},components:{QRCode:hs.a},mounted:function(){},created:function(){},beforeDestroy:function(){clearInterval(this.queryPaySetInterval)},methods:{PrintExpress:function(t){var e=this;if("CP"==e._orderInfo[t].reference10){var a={omsNo:[e._orderInfo[t].omsNo]};console.log(a),e.httpRequest1("post",gt,a).then(function(a){var i={omsNo:e._orderInfo[t].omsNo};e.httpRequest1("post","/kc-transport/tmsApp/surfacePrint",i).then(function(t){for(var e in console.log(t),t.entity.bsOrderWt&&(t.entity.bsOrderWt=parseFloat(t.entity.bsOrderWt/1e3)),t.entity[0])0==t.entity[0][e]&&(t.entity[0][e]="-"),null==t.entity[0][e]&&(t.entity[0][e]="");for(var a in t.entity[1])null==t.entity[1][a]&&(t.entity[1][a]="");console.log(t.entity);var i=k()(t.entity);try{CallAndroidOrIOS.callAndroid("打印",i)}catch(t){}try{console.log(i),window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:i})}catch(t){}})}).catch(function(t){e.$alert("请先在app首页揽收扫码打印页面确定件数重量，再打印面单","提示",{confirmButtonText:"确定",callback:function(t){}})})}else{var i={omsNo:e._orderInfo[t].omsNo};console.log(i),e.httpRequest1("post","/kc-transport/tmsApp/surfacePrint",i).then(function(t){for(var e in console.log(t),t.entity.bsOrderWt&&(t.entity.bsOrderWt=parseFloat(t.data.bsOrderWt/1e3)),t.entity)0==t.entity[e]&&(t.entity[e]="-");console.log(t.entity);var a=k()(t.entity);try{CallAndroidOrIOS.callAndroid("打印",a)}catch(t){}try{console.log(a),window.webkit.messageHandlers.messageSend.postMessage({a:"打印",b:a})}catch(t){}})}},toPackageDeliveryScan:function(t){event.stopPropagation();this.$router.push({name:"PackageDeliveryScan",query:{omsNo:this.packageList[t].contnrCode,transportLinks:this.LinkStatus}})},toDeliveryScanXH:function(t){event.stopPropagation();var e=this;if("CP"==e._orderInfo[t].reference10){var a={omsNo:[e._orderInfo[t].omsNo]};console.log(a),e.httpRequest1("post",gt,a).then(function(a){e.$router.push({name:"DeliveryScanXH",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,transportLinks:e.LinkStatus,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}})}).catch(function(t){e.$alert("请先在app首页揽收扫码打印页面确定件数重量，再提货扫描","提示",{confirmButtonText:"确定",callback:function(t){}})})}else this.$router.push({name:"DeliveryScanXH",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,transportLinks:e.LinkStatus,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}})},CollectCustomerNum:function(t){event.stopPropagation();this.$router.push({name:"CollectCustomerNum",query:{omsNo:this._orderInfo[t].omsNo}})},refreshBtn:function(){this.$parent.loadData()},qrcodeClose:function(){clearInterval(this.queryPaySetInterval),this.qrcodePayment_show=!1,this.wxqrcodePayment_show=!1,this.$parent.loadData()},selectPayClose:function(){this.selectPaymentmeng=!1},toSelectQrCodePay:function(t){this.payOmsNo=this._orderInfo[t].omsNo,this.selectPaymentmeng=!0},toWXQrCodePayment:function(){var t=this;console.log(t.payOmsNo),this.selectPaymentmeng=!1;var e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};this.httpRequest("getFeeWithSecondCodeFromWeiXin.do",e,function(e){console.log(e),t.wxqrcodePayment_show=!0,t.$nextTick(function(){t.qrcode(e.Msg)}),clearInterval(t.queryPaySetInterval),t.queryPaySetInterval=setInterval(t.queryPayResults,1500)},"isLoading_")},toQrCodePayment:function(){var t=this;console.log(t.payOmsN),this.selectPaymentmeng=!1;var e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};this.httpRequest("getFeeWithSecondCodeFromZhiFuBao.do",e,function(e){console.log(e),t.qrcodePayment_show=!0,t.$nextTick(function(){t.qrcode(e.Msg)}),clearInterval(t.queryPaySetInterval),t.queryPaySetInterval=setInterval(t.queryPayResults,1500)},"isLoading_")},queryPayResults:function(){var t=this,e={omsNo:t.payOmsNo,user:t.$store.state.userInfo.userName,tel:t.$store.state.userInfo.cellphone};e=t.PublicEncryption(e),Ct.a.post(t.HOST+"getFeeStatusWithOrderSF.do",{params:e}).then(function(e){if(console.log(e),"1"==e.data.status)clearInterval(t.queryPaySetInterval),t.queryPayMsg=e.data.Msg;else if(301==e.data.status)t.ReturnToLogin();else{var a;a=e.data.Msg?e.data.Msg:"提交失败",alert(a)}}).catch(function(e){clearInterval(t.queryPaySetInterval),t.$alert("查询支付结果失败","提示",{confirmButtonText:"确定"})})},qrcode:function(t){new hs.a("qrcode",{width:200,height:200,text:t})},submitOrders:function(t,e,a){event.stopPropagation();var i,s=this;i=a&&"package"==a?"确认要提交"+e+"吗？ 包号："+s.packageList[t].contnrCode:"确认要提交"+e+"吗？ 订单号："+s._orderInfo[t].omsNo,this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i="";"Link_PickUp"==s.LinkStatus&&(i="10"),"Link_Transit"==s.LinkStatus&&(i="20"),"Link_AirportPickUp"==s.LinkStatus&&(i="27"),a&&"package"==a?("Link_ToSend"==s.LinkStatus&&"WEI"==s.packageList[t].updateStatus&&(i="30"),"Link_ToSend"==s.LinkStatus&&"YI"==s.packageList[t].updateStatus&&(i="40")):("Link_ToSend"==s.LinkStatus&&"WEI"==s._orderInfo[t].loadingStatus&&(i="30"),"Link_ToSend"==s.LinkStatus&&"YI"==s._orderInfo[t].loadingStatus&&(i="40"));var o={transportLinks:i,driverName:s.$store.state.userInfo.userName,cellphone:s.$store.state.userInfo.cellphone};a&&"package"==a?(o.flag="package",o.labelNo=s.packageList[t].contnrCode):(o.deliveryId=s._orderInfo[t].deliveryId,o.deliveryMethod=s._orderInfo[t].deliveryMethod,o.forwardSupplier=s._orderInfo[t].forwardSupplier,o.forwardSupplierId=s._orderInfo[t].forwardSupplierId),s.httpRequest1("post",s.fetchObj.updateDeliveryScanNumber,o).then(function(t){s.ifTips=!0,s.tips_Msg="提交"+e+"成功",setTimeout(function(){s.ifTips=!1,s.$parent.loadData()},1500)})}).catch(function(){})},toPackageDetail:function(t){this.$router.push({name:"PackageDetail",query:{contnrCode:this.packageList[t].contnrCode}})},UnloadDelivery:function(t,e){event.stopPropagation();e&&"Package"==e?this.$router.push({name:"UnloadDelivery",query:{contnrCode:this.packageList[t].contnrCode,Package:"Package"}}):this.$router.push({name:"UnloadDelivery",query:{omsNo:this._orderInfo[t].omsNo,orderId:this._orderInfo[t].orderId}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toPackageDeliveryOrderPickScan:function(t){event.stopPropagation();this.$router.push({name:"PackageDeliveryOrderPickScan",query:{omsNo:this.packageList[t].contnrCode}})},toAirportPickUpScan:function(t){event.stopPropagation();this.$router.push({name:"AirportPickUpScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toDeliveryOrderPickScan:function(t){event.stopPropagation();var e=this;"ZK"!=e._orderInfo[t].reference10||"到付现结"!=e._orderInfo[t].chargeTypes&&"到付"!=e._orderInfo[t].chargeTypes&&"到付月结"!=e._orderInfo[t].chargeTypes?e.$router.push({name:"DeliveryOrderPickScan",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}}):e.$alert("到付件需转送大网派送","提示",{confirmButtonText:"确定",callback:function(){e.$router.push({name:"DeliveryOrderPickScan",query:{omsNo:e._orderInfo[t].omsNo,deliveryId:e._orderInfo[t].deliveryId,orderId:e._orderInfo[t].orderId,scanNumber:e._orderInfo[t].scanNumber,actualQty:e._orderInfo[t].actualQty}})}})},toAbnormal:function(t,e){event.stopPropagation();var a;"Link_PickUp"==this.LinkStatus?a="10":"Link_Transit"==this.LinkStatus?a="20":"Link_AirportPickUp"==this.LinkStatus?a="27":"Link_ToSend"==this.LinkStatus&&(a="WEI"==e?"30":"40"),this.$router.push({name:"Abnormal",query:{omsNo:this._orderInfo[t].omsNo,deliveryNoSF:this._orderInfo[t].clientOrderNo,linkno:a,labelList:this._orderInfo[t].deliveryDetailList}})},toReceiptScan:function(t){event.stopPropagation();this.$router.push({name:"ReceiptScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,deliveryNumber:this._orderInfo[t].deliveryNumber,actualQty:this._orderInfo[t].actualQty,HasLoading:this._orderInfo[t].scanNumber,returnBillFlag:this._orderInfo[t].returnBillFlag,deliveryMethod:this._orderInfo[t].deliveryMethod,forwardSupplier:this._orderInfo[t].forwardSupplier,forwardSupplierId:this._orderInfo[t].forwardSupplierId,reference10:this._orderInfo[t].reference10,chargeTypes:this._orderInfo[t].chargeTypes,iN91Flag:this._orderInfo[t].iN91Flag,iN01Flag:this._orderInfo[t].iN01Flag}})},toPackageReceiptScan:function(t){event.stopPropagation();this.$router.push({name:"PackageReceiptScan",query:{omsNo:this.packageList[t].contnrCode}})},toMassTransfer:function(t){event.stopPropagation();this.$router.push({name:"MassTransfer",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId}})},detail_takaUp:function(t){event.stopPropagation();var e=Yt()(".goodsInfoOrder").eq(t).find(".TakeUp").find("span"),a=Yt()(".goodsInfoOrder").eq(t).find(".TakeUp").find("i");"查看货物信息"==e.html()?(Yt()(".goodsInfoOrder").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(Yt()(".goodsInfoOrder").eq(t).find(".goodsContent").hide(),e.html("查看货物信息"),a.css("transform","rotate(0deg)"))},_ewm:function(t){this.$router.push({name:"QRCode",query:{omsNo:t}})},onCopy:function(){event.stopPropagation();var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}}),vs={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"OrderInfo_template"},[i("div",{staticClass:"orderHead"},[t._v("订单信息")]),t._v(" "),t._l(t.packageList,function(e,a){return i("div",{key:a+"w",staticClass:"goodsInfo",attrs:{id:a},on:{click:function(e){return t.toPackageDetail(a)}}},[i("div",{staticClass:"goodsHead"},[t._m(0,!0),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("包号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packageItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.contnrCode)+"\n        ")]),t._v(" "),i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packageItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),i("div",[i("span",[t._v("计划发件时间：")]),t._v(" "),i("span",[t._v(t._s(e.requiredIssueDte))])]),t._v(" "),i("div",[i("div",[i("span",[t._v("件数：")]),t._v(" "),i("span",[t._v(t._s(e.actualQty))])]),t._v(" "),i("div",[i("span",[t._v("重量：")]),t._v(" "),i("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus?i("div",[i("span",[t._v("航班号：")]),t._v(" "),i("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("起飞机场：")]),t._v(" "),i("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("扫描状态：")]),t._v(" "),i("span",[t._v(t._s("YI"==e.scanStatus?"已扫描":"未扫描"))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("div",[i("span",[t._v("扫描状态：")]),t._v(" "),i("span",[t._v(t._s("YI"==e.scanStatus?"装车已扫描":"装车未扫描"))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus?i("div",[i("span",[t._v("状态：")]),t._v(" "),"YI"!=e.updateStatus40?i("span",[t._v(t._s("YI"==e.scanStatus40?"签收已扫描":"签收未扫描"))]):i("span",[t._v("已签收")])]):t._e()]),t._v(" "),t.historyList?t._e():i("div",{staticClass:"_btn"},["Link_PickUp"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageDeliveryScan(a)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toTransitScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageDeliveryOrderPickScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.updateStatus40&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toPackageReceiptScan(a)}}},[t._v("签收扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.updateStatus40&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"签收","package")}}},[t._v("提交签收")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.updateStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车","package")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_PickUp"!=t.LinkStatus&&"Link_Transit"!=t.LinkStatus||"WEI"!=e.updateStatus?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"订单","package")}}},[t._v("提交订单")]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"YI"==e.updateStatus&&"WEI"==e.unloadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.UnloadDelivery(a,"Package")}}},[t._v("卸车交付")]):t._e()])])}),t._v(" "),t._l(t._orderInfo,function(e,a){return i("div",{key:a,staticClass:"goodsInfo goodsInfoOrder",attrs:{id:a}},[i("div",{staticClass:"goodsHead"},["Link_PickUp"==t.LinkStatus?i("span",{staticClass:"iconfont icon-dayin KeyInfoGroup",on:{click:function(e){return t.PrintExpress(a)}}},[i("span",[t._v("打印")])]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"Y"!=e.iN01Flag&&"T"!=e.returnBillFlag?t._e():i("div",{staticClass:"KeyInfoGroup"},["T"==e.returnBillFlag?i("div",[i("span",[t._v("签回单")])]):t._e(),t._v(" "),"Y"==e.iN01Flag?i("div",[i("span",[t._v("代收货款")])]):t._e()]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"XY"==e.IN91Flag?i("div",{staticClass:"KeyInfoGroup"},[t._m(1,!0)]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?i("div",{staticClass:"KeyInfoGroup"},["到付现结"==e.chargeTypes||"到付"==e.chargeTypes||"到付月结"==e.chargeTypes?i("div",[i("span",[t._v(t._s(e.chargeTypes))])]):t._e()]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes?i("div",{staticClass:"KeyInfoGroup"},[t._m(2,!0)]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"Y"==e.iN01Flag&&"ZK"==e.reference10?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("此单需代收货款，请转寄给SF")])]):t._e(),t._v(" "),"WEI"==e.loadingStatus&&e.scanNumber<e.actualQty&&e.scanNumber>0?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("装车未扫完")])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&e.deliveryNumber<e.actualQty&&e.deliveryNumber>0?i("div",{staticClass:"YourSynths"},[i("i",{staticClass:"iconfont icon-tishi"}),i("span",[t._v("签收未扫完")])]):t._e(),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("订单号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n        ")]),t._v(" "),i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),i("div",{staticClass:"ordernum"},[i("span",[t._v("SF运单号：")]),t._v(" "),i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n        ")]),t._v(" "),e.clientOrderNo?i("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),i("div",{staticClass:"orderContact"},[i("span",[t._v("卸货联系人：")]),t._v(" "),i("span",[t._v(t._s(e.receivePartyContactName)+"   \n          "+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?i("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),i("div",{staticClass:"PartyAddr"},[i("span",[t._v("卸货地址：")]),t._v(" "),i("span",[t._v(t._s(e.receivePartyAddr1))])]),t._v(" "),i("div",[i("span",[t._v("装货联系人：")]),t._v(" "),i("span",[t._v(t._s(e.issuePartyContact)+"    "+t._s(e.issuePartyTel)+"   \n        ")]),t._v(" "),e.issuePartyTel?i("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),i("div",{staticClass:"PartyAddr"},[i("span",[t._v("装货地址：")]),t._v(" "),i("span",[t._v(t._s(e.issuePartyAddr))])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_Transit"==t.LinkStatus?i("div",[i("span",[t._v("计划发件时间：")]),t._v(" "),i("span",[t._v(t._s(e.requiredIssueDte))])]):t._e(),t._v(" "),i("div",[i("div",[i("span",[t._v("件数：")]),t._v(" "),i("span",[t._v(t._s(e.actualQty))])]),t._v(" "),i("div",[i("span",[t._v("重量：")]),t._v(" "),i("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("航班号：")]),t._v(" "),i("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("主单号：")]),t._v(" "),i("span",[t._v(t._s(e.aviationMasterNumber))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?i("div",[i("span",[t._v("起飞机场：")]),t._v(" "),i("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("实际起飞时间：")]),t._v(" "),i("span",[t._v(t._s(e.actualDepartureTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("计划落地时间：")]),t._v(" "),i("span",[t._v(t._s(e.plannedLandingTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus||"Link_AirportPickUp"==t.LinkStatus?i("div",[i("span",[t._v("落地机场：")]),t._v(" "),i("span",[t._v(t._s(e.arriveAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?i("div",[i("span",[t._v("期望到达时间：")]),t._v(" "),i("span",[t._v(t._s(e.requestedDeliveryDte))])]):t._e(),t._v(" "),e.deliveryMethod&&"Link_ToSend"==t.LinkStatus?i("div",[i("div",[i("span",[t._v("派件方式：")]),t._v(" "),i("span",[t._v(t._s(e.deliveryMethod))])]),t._v(" "),e.forwardSupplier&&"转寄"==e.deliveryMethod?i("div",[i("span",[t._v("转寄承应商：")]),t._v(" "),i("span",[t._v(t._s(e.forwardSupplier))])]):t._e()]):t._e(),t._v(" "),e.valuationMoney?i("div",[i("span",[t._v("保价金额：")]),i("span",[t._v(t._s(e.valuationMoney)+"  元")])]):t._e(),t._v(" "),"WEI"==e.loadingStatus&&e.scanNumber?i("div",[i("span",[t._v("已扫描：")]),i("span",[t._v(t._s(e.scanNumber)+"  件")])]):t._e(),t._v(" "),i("div",["Link_ToSend"!=t.LinkStatus&&"Link_AirportPickUp"!=t.LinkStatus||"YI"!=e.loadingStatus?t._e():i("div",[i("span",[t._v("已装车：")]),i("span",[t._v(t._s(e.scanNumber)+"  件")])]),t._v(" "),"YI"==e.loadingStatus&&"WEI"==e.signStatus&&e.deliveryNumber?i("div",[i("span",[t._v("已扫描：")]),i("span",[t._v(t._s(e.deliveryNumber)+"  件")])]):t._e(),t._v(" "),"YI"==e.loadingStatus&&"YI"==e.signStatus?i("div",[i("span",[t._v("已签收：")]),i("span",[t._v(t._s(e.deliveryNumber)+"  件")])]):t._e()]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes&&"ZK"!=e.reference10?i("div",[i("span",[t._v("支付状态：")]),i("span",{style:{color:"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?"red":"green"}},[t._v(t._s(e.payeeStatus))]),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:t.refreshBtn}},[t._v("刷新支付状态")]):t._e(),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:function(e){return t.toSelectQrCodePay(a)}}},[t._v("收款二维码")]):t._e()]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"YI"!=e.loadingStatus||"到付现结"!=e.chargeTypes&&"到付"!=e.chargeTypes&&"到付月结"!=e.chargeTypes||"ZK"==e.reference10?t._e():i("div",[i("span",[t._v("支付状态：")]),i("span",{style:{color:"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?"red":"green"}},[t._v(t._s(e.payeeStatus))]),t._v(" "),"未收款"==e.payeeStatus||""==e.payeeStatus||"待付款"==e.payeeStatus?i("span",{staticClass:"refreshBtn",on:{click:t.refreshBtn}},[t._v("刷新支付状态")]):t._e()]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag?i("div",[i("span",[t._v("是否上传回单：")]),i("span",[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.remark,expression:"dataItem.remark"}]},[i("span",[t._v("客户特殊要求："+t._s(e.remark))]),i("span")])]),t._v(" "),t.historyList?t._e():i("div",{staticClass:"_btn"},["Link_PickUp"==t.LinkStatus&&"T"==e.vipshop?i("span",{staticClass:"g_btn",on:{click:function(e){return t.CollectCustomerNum(a)}}},[t._v("采集单号")]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toDeliveryScanXH(a)}}},[t._v("提货扫描")]):t._e(),t._v(" "),"Link_Transit"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toTransitScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toAirportPickUpScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toDeliveryOrderPickScan(a)}}},[t._v("装车扫描")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toReceiptScan(a)}}},[t._v("签收扫描")]):t._e(),t._v(" "),i("span",{staticClass:"g_btn",on:{click:function(i){return t.toAbnormal(a,e.loadingStatus)}}},[t._v("异常上报")]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.toMassTransfer(a)}}},[t._v("签单上传")]):t._e(),t._v(" "),"Link_ToSend"!=t.LinkStatus||"YI"!=e.loadingStatus||"到付现结"!=e.chargeTypes&&"到付"!=e.chargeTypes&&"到付月结"!=e.chargeTypes||"未收款"!=e.payeeStatus&&""!=e.payeeStatus&&"待付款"!=e.payeeStatus||"ZK"==e.reference10?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.toSelectQrCodePay(a)}}},[t._v("收款二维码")]),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"WEI"==e.signStatus&&"Y"!=e.whetherWarehouseBusiness?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"签收")}}},[t._v("提交签收")]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_AirportPickUp"==t.LinkStatus&&"WEI"==e.loadingStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"装车")}}},[t._v("提交装车")]):t._e(),t._v(" "),"Link_PickUp"!=t.LinkStatus&&"Link_Transit"!=t.LinkStatus||"WEI"!=e.loadingStatus?t._e():i("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(a,"订单")}}},[t._v("提交订单")]),t._v(" "),"Link_PickUp"==t.LinkStatus&&"YI"==e.loadingStatus&&"0"==e.unloadStatus?i("span",{staticClass:"g_btn",on:{click:function(e){return t.UnloadDelivery(a)}}},[t._v("卸车交付")]):t._e()]),t._v(" "),i("div",{staticClass:"goodsContent",staticStyle:{display:"none"},on:{click:function(e){return t.detail_takaUp(a)}}},t._l(e.deliveryDetailList,function(e,a){return i("div",{key:a,attrs:{id:a}},[t._v(t._s(e))])}),0),t._v(" "),e.deliveryDetailList.length?i("div",{staticClass:"goodsBtn"},[i("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(a)}}},[t._m(3,!0)])]):t._e()])}),t._v(" "),t.ifTips?i("div",{staticClass:"msg_tips msg_tips1"},[i("div",{staticClass:"tips_content"},[i("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),i("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.selectPaymentmeng?i("div",{staticClass:"selectPaymentmeng"},[i("div",{staticClass:"selectPayment"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.selectPayClose}}),t._v(" "),i("div",{staticClass:"selectPaymentimg",on:{click:t.toWXQrCodePayment}},[i("img",{attrs:{src:a("NHJI")}})]),t._v(" "),i("div",{staticClass:"selectPaymentimg",on:{click:t.toQrCodePayment}},[i("img",{staticClass:"zfbimg",attrs:{src:a("Ro8Z")}})]),t._v(" "),i("div",{staticClass:"selectPaymenttext"},[t._v("请选择支付方式")])])]):t._e(),t._v(" "),t.wxqrcodePayment_show?i("div",{staticClass:"qrcodePaymentMeng"},[i("div",{staticClass:"_qrcode"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.qrcodeClose}}),t._v(" "),i("img",{attrs:{src:a("NHJI")}}),t._v(" "),i("div",{staticClass:"qrcodebox"},[i("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})]),t._v(" "),i("div",{staticClass:"payStatus"},[t._v(t._s(t.queryPayMsg))])])]):t._e(),t._v(" "),t.qrcodePayment_show?i("div",{staticClass:"qrcodePaymentMeng"},[i("div",{staticClass:"_qrcode"},[i("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.qrcodeClose}}),t._v(" "),i("img",{staticClass:"zfbimg",attrs:{src:a("Ro8Z")}}),t._v(" "),i("div",{staticClass:"qrcodebox"},[i("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})]),t._v(" "),i("div",{staticClass:"payStatus"},[t._v(t._s(t.queryPayMsg))])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"KeyInfoGroup"},[e("div",[e("span",[this._v("包")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("签单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("寄付现结")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("查看货物信息")]),e("i",{staticClass:"iconfont icon-up",staticStyle:{transform:"rotate(0deg)"}})])}]};var ms=a("VU/8")(ps,vs,!1,function(t){a("2ZT8")},"data-v-8f103908",null).exports,fs={name:"WaybillInfo",data:function(){return{fetchObj:m,shipmentID:"",shipmentListData:[],orderList:[],shipStatus:"",LinkStatus:"Link_PickUp",receivingStatus:"",daoDaStatus:"",packageList:[]}},components:{OrderInfo_template:ms,WaybillInfo_template:ya},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.shipmentID=this.$store.state.Waybill.WaybillInfo.clickShipmentId,this.loadData()},methods:{goprev:function(){this.$router.push({name:"Waybill",query:{LinkStatus:this.LinkStatus}})},loadData:function(){var t=this,e=null;"Link_PickUp"==t.LinkStatus?e="10":"Link_Transit"==t.LinkStatus?e="20":"Link_AirportPickUp"==t.LinkStatus?e="27":"Link_ToSend"==t.LinkStatus&&(e="30");var a={shipmentId:t.shipmentID,transportLinks:e};console.log(a),this.httpRequest1("post",this.fetchObj.queryDeliverDetailInfo,a).then(function(a){if(null!=a.entity){if(t.shipmentListData=[a.entity],t.$store.state.Waybill.WaybillInfo.clickWaybillInfo=t.shipmentListData,t.shipStatus=t.shipmentListData[0].status,t.receivingStatus=t.shipmentListData[0].receivingStatus,t.daoDaStatus=t.shipmentListData[0].daoDaStatus,t.orderList=a.entity.orderList||[],t.packageList=a.entity.packageArray||[],t.orderList.length){for(var i=0;i<t.orderList.length;i++)"ZK"!=t.orderList[i].reference10||"到付现结"!=t.orderList[i].chargeTypes&&"到付"!=t.orderList[i].chargeTypes&&"到付月结"!=t.orderList[i].chargeTypes||(t.orderList[i].deliveryMethod="转寄"),"ZK"==t.orderList[i].reference10&&"Y"==t.orderList[i].iN01Flag&&(t.orderList[i].deliveryMethod="转寄");"10"==e&&t.orderList.sort(function(t,e){t.issuePartyContact,e.issuePartyTel,e.issuePartyAddr;return t.issuePartyContact==e.issuePartyContact&&t.issuePartyTel==e.issuePartyTel&&t.issuePartyAddr==e.issuePartyAddr?-1:0});for(var s=[],o=0;o<t.orderList.length-1;o++)for(var n=o+1;n<t.orderList.length;n++)t.orderList[o].loadingStatus>t.orderList[n].loadingStatus?(s=t.orderList[o],t.orderList[o]=t.orderList[n],t.orderList[n]=s):t.orderList[o].loadingStatus==t.orderList[n].loadingStatus&&"YI"==t.orderList[n].loadingStatus&&t.orderList[o].signStatus>t.orderList[n].signStatus&&(s=t.orderList[o],t.orderList[o]=t.orderList[n],t.orderList[n]=s)}if(t.$route.query.Waybill_SearchType){for(var r={},c=0;c<t.orderList.length;c++)if((2==t.$route.query.Waybill_SearchType&&t.orderList[c].clientOrderNo?t.orderList[c].clientOrderNo:t.orderList[c].omsNo)==t.$route.query.Waybill_SearchData){r=t.orderList[c],t.orderList.splice(c,1),console.log(t.orderList);break}r&&t.orderList.unshift(r),console.log(t.orderList),t.$nextTick(function(){document.getElementById("OrderInfo_template_p").scrollIntoView()})}}else t.shipmentListData=t.$store.state.Waybill.WaybillInfo.clickWaybillInfo,t.shipStatus=t.shipmentListData[0].status,t.receivingStatus=t.shipmentListData[0].receivingStatus,t.daoDaStatus=t.shipmentListData[0].daoDaStatus})},fullscreenLoading:function(t,e){console.log(t,e),this.$emit("isLoading",t,e)},Navigation:function(t){event.stopPropagation();this.Navigate_addressList=[];for(var e=this.bigListData[t].issueAddrLiat,a=this.bigListData[t].deliveryList,i=[],s=0;s<a.length;s++)i[s]={issueAddr1:a[s].recAddr1,issuePhone:a[s].recPhone,issueUser:a[s].recName};this.Navigate_addressList=e.concat(i),this.Navigate_addressList.length?this.typeMShow=!0:this.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})},Navigate_SelectComit:function(t){t=t;console.log(t),this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}},_departTaking:function(){var t={shipmentId:that.shipmentID};console.log(t)}}},_s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillInfo"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("配载单信息")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"bigListBox"},[a("WaybillInfo_template",{attrs:{shipmentListData:t.shipmentListData,orderList:t.orderList,LinkStatus:t.LinkStatus},on:{isLoading_:t.fullscreenLoading}}),t._v(" "),a("div",{attrs:{id:"OrderInfo_template_p"}}),t._v(" "),t.orderList.length||t.packageList.length?a("OrderInfo_template",{attrs:{_orderInfo:t.orderList,packageList:t.packageList,shipmentID:t.shipmentID,shipStatus:t.shipStatus,receivingStatus:t.receivingStatus,daoDaStatus:t.daoDaStatus,LinkStatus:t.LinkStatus},on:{isLoading_:t.fullscreenLoading}}):t._e()],1)])]),t._v(" "),t.$store.state.ifNoMissionStowage&&t.orderList.length?a("div",{staticClass:"DepartTakingBtn"},[a("div",{on:{click:t._departTaking}},[t._v("发车")])]):t._e()])},staticRenderFns:[]};var gs=a("VU/8")(fs,_s,!1,function(t){a("jIxs")},"data-v-3ee1ff96",null).exports,bs={name:"AviationOrderInfo_template",props:{_orderInfo:{type:Object,default:function(){return[]}},shipmentID:0,shipStatus:"",selectAddr:!1,AviationHistory:!1,LinkStatus:"",receivingStatus:"",daoDaStatus:"",deliveryId:""},data:function(){return{tips_Msg:"",ifTips:!1,SubmitOrderPopUpBox_show:!1,AbnormalDescription:""}},mounted:function(){},created:function(){},methods:{submitOrders:function(t,e,a){var i=this;event.stopPropagation();var s=this;e<a?s.SubmitOrderPopUpBox_show=!0:this.$confirm("确认要提交装车吗？ 订单号："+t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={deliveryId:s.deliveryId,transporterId:s.$store.state.userInfo.orgnizationId,driverPhone:s.$store.state.userInfo.cellphone,driverName:s.$store.state.userInfo.userName};i.httpRequest1("post","/kc-transport/tmsApp/aviationUpdateDeliveryScanNumber",t).then(function(t){s.ifTips=!0,s.tips_Msg="提交订单成功",setTimeout(function(){s.ifTips=!1,s.$router.push({name:"AviationWaybill"})},1500)})}).catch(function(){})},SubmitOrderPopUpBox_cancel:function(){this.SubmitOrderPopUpBox_show=!1},SubmitOrderPopUpBox_confirm:function(){var t=this;if(t.AbnormalDescription){t.SubmitOrderPopUpBox_show=!1;var e={deliveryId:t.deliveryId,transporterId:t.$store.state.userInfo.orgnizationId,driverPhone:t.$store.state.userInfo.cellphone,driverName:t.$store.state.userInfo.userName,AbnormalDescription:t.AbnormalDescription};this.httpRequest1("post","/kc-transport/tmsApp/aviationUpdateDeliveryScanNumber",e).then(function(e){t.ifTips=!0,t.tips_Msg="提交订单成功",setTimeout(function(){t.ifTips=!1,t.$router.push({name:"AviationWaybill"})},1500)})}else t.$alert("请填写异常描述","提示",{confirmButtonText:"确定",callback:function(){}})},toTransitScan:function(t){event.stopPropagation();this.$router.push({name:"TransitScan",query:{omsNo:this._orderInfo[t].omsNo,deliveryId:this._orderInfo[t].deliveryId,orderId:this._orderInfo[t].orderId,scanNumber:this._orderInfo[t].scanNumber,actualQty:this._orderInfo[t].actualQty}})},toAbnormal:function(t,e){event.stopPropagation();for(var a=this._orderInfo.notScanned?this._orderInfo.notScanned:[],i=this._orderInfo.scanned?this._orderInfo.scanned:[],s=a.concat(i),o=[],n=0;n<s.length;n++)o[n]={},o[n].productNo=s[n];this.$router.push({name:"Abnormal",query:{omsNo:t,deliveryNoSF:e,linkno:"20",labelList:o}})},detail_takaUp:function(t){event.stopPropagation();var e=Yt()(".goodsInfo").eq(t).find(".TakeUp").find("span"),a=Yt()(".goodsInfo").eq(t).find(".TakeUp").find("i");"查看标签列表"==e.html()?(Yt()(".goodsInfo").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(Yt()(".goodsInfo").eq(t).find(".goodsContent").hide(),e.html("查看标签列表"),a.css("transform","rotate(0deg)"))},_ewm:function(t){this.$router.push({name:"QRCode",query:{omsNo:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},ys={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationOrderInfo_template"},[a("div",{staticClass:"goodsInfo"},[a("div",{staticClass:"goodsHead"},[a("div",{staticClass:"ordernum"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.omsNo,expression:"_orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t._orderInfo.omsNo)+"\n\t\t\t\t")]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.omsNo,expression:"_orderInfo.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF"}],staticClass:"ordernum"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t._orderInfo.deliveryNoSF)+"\n\t\t\t\t")]),t._v(" "),t._orderInfo.deliveryNoSF?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t._orderInfo.deliveryNoSF,expression:"_orderInfo.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("提货司机：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.driverName)+"    "+t._s(t._orderInfo.driverPhone)+"   \n\t\t\t\t")]),t._v(" "),t._orderInfo.driverPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t._orderInfo.driverPhone)}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("司机车牌：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.vehicleCodeCar))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.orderWt)+"   KG")])])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("落地机场：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.actualFlightLandAirportName))])]),t._v(" "),a("div",[a("span",[t._v("开单联系人：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.createOrderContactName))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.plannedDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("发货城市：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.issuePartyCity))])]),t._v(" "),a("div",[a("span",[t._v("收货城市：")]),t._v(" "),a("span",[t._v(t._s(t._orderInfo.receivePartyCity))])])]),t._v(" "),t._orderInfo.scannedNum||t.AviationHistory?a("div",[a("span",[t._v("已扫描：")]),a("span",[t._v(t._s(t._orderInfo.scannedNum)+"  件")])]):t._e(),t._v(" "),t._orderInfo.scannedNum<t._orderInfo.orderQty&&t._orderInfo.scannedNum>0?a("div",{staticClass:"YourSynths"},[a("i",{staticClass:"iconfont icon-tishi"}),a("span",[t._v("该订单未扫描完")])]):t._e()]),t._v(" "),t.AviationHistory?t._e():a("div",{staticClass:"_btn"},[a("span",{staticClass:"g_btn",on:{click:function(e){return t.toAbnormal(t._orderInfo.omsNo,t._orderInfo.deliveryNoSF)}}},[t._v("异常上报")]),t._v(" "),a("span",{staticClass:"g_btn",on:{click:function(e){return t.submitOrders(t._orderInfo.omsNo,t._orderInfo.scannedNum,t._orderInfo.orderQty)}}},[t._v("提交订单")])]),t._v(" "),a("div",{staticClass:"goodsBtnBox"},[t._orderInfo.scanned&&t._orderInfo.scanned.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(0)}}},[a("div",[a("span",[t._v("已扫描标签（"+t._s(t._orderInfo.scanned.length)+"）")])])]),t._v(" "),t._orderInfo.scanned&&t._orderInfo.scanned.length?a("div",{staticClass:"goodsContent"},t._l(t._orderInfo.scanned,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v(t._s(e)+"    \n\t\t\t\t\t\t"+t._s(e.productName)+"    "+t._s(e.poOrderQty)+t._s(e.poUom))])}),0):t._e()]):t._e(),t._v(" "),t._orderInfo.notScanned&&t._orderInfo.notScanned.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp"},[a("div",{staticStyle:{color:"red"}},[a("span",[t._v("未扫描标签（"+t._s(t._orderInfo.notScanned.length)+"）")])])]),t._v(" "),t._orderInfo.notScanned&&t._orderInfo.notScanned.length?a("div",{staticClass:"goodsContent"},t._l(t._orderInfo.notScanned,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v(t._s(e)+"\n\t\t\t\t\t\t    "+t._s(e.productName)+"    "+t._s(e.poOrderQty)+t._s(e.poUom)+"\n\t\t\t\t\t")])}),0):t._e()]):t._e()])]),t._v(" "),t.SubmitOrderPopUpBox_show?a("div",{staticClass:"unfinishScan"},[a("div",{staticClass:"unfinishScan_box"},[a("div",{staticClass:"unfinishScan_head"},[t._v("该订单未扫描完，确定提交订单吗？")]),t._v(" "),a("div",{staticClass:"unfinishScan_content"},[t._m(0),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.AbnormalDescription,expression:"AbnormalDescription"}],attrs:{placeholder:"请填写未扫描完的原因"},domProps:{value:t.AbnormalDescription},on:{input:function(e){e.target.composing||(t.AbnormalDescription=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"unfinishScan_botm"},[a("span",{on:{click:t.SubmitOrderPopUpBox_cancel}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.SubmitOrderPopUpBox_confirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("请填写未扫描完的原因")])])}]};var Ls=a("VU/8")(bs,ys,!1,function(t){a("18x3")},"data-v-0532d9e0",null).exports,Cs={name:"AviationWaybillInfo",data:function(){return{deliveryId:"",orderList:{}}},components:{OrderInfo_template:Ls},created:function(){this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId),this.loadData()},methods:{goprev:function(){this.$router.push({name:"AviationWaybill",query:{}})},loadData:function(){var t=this,e={deliveryId:t.deliveryId};this.httpRequest1("post","/kc-transport/tmsApp/queryAviationOrderDetailData",e).then(function(e){t.orderList=e.entity||{}})},fullscreenLoading:function(t,e){console.log(t,e),this.$emit("isLoading",t,e)}}},Ss={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"AviationWaybillInfo"},[e("header",[e("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:this.goprev}}),e("span",[this._v("订单信息")])]),this._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"waybillContainer"},[e("div",{staticClass:"bigListBox"},[e("OrderInfo_template",{attrs:{_orderInfo:this.orderList,deliveryId:this.deliveryId},on:{isLoading_:this.fullscreenLoading}})],1)])])])},staticRenderFns:[]};var Ns=a("VU/8")(Cs,Ss,!1,function(t){a("lP8a")},"data-v-6bde7c94",null).exports,ws={name:"PackageDetail",data:function(){return{contnrCode:"",orderList:[],LinkStatus:"Link_PickUp",historyList:!1,tips_Msg:"",ifTips:!1}},components:{OrderInfo_template:ms,WaybillInfo_template:ya},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$route.query.contnrCode&&(this.contnrCode=this.$route.query.contnrCode),this.loadData()},methods:{loadData:function(){var t=this;"Link_PickUp"==t.LinkStatus||("Link_Transit"==t.LinkStatus||t.LinkStatus);var e={contnrCode:t.contnrCode};this.httpRequest1("post","/kc-transport/tmsApp/selectPackageDetails",e).then(function(e){t.orderList=e.entity||[]})},fullscreenLoading:function(t,e){console.log(t,e),this.$emit("isLoading",t,e)},Navigation:function(t){event.stopPropagation();this.Navigate_addressList=[];for(var e=this.bigListData[t].issueAddrLiat,a=this.bigListData[t].deliveryList,i=[],s=0;s<a.length;s++)i[s]={issueAddr1:a[s].recAddr1,issuePhone:a[s].recPhone,issueUser:a[s].recName};this.Navigate_addressList=e.concat(i),this.Navigate_addressList.length?this.typeMShow=!0:this.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})},Navigate_SelectComit:function(t){t=t;console.log(t),this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}},detail_takaUp:function(t){event.stopPropagation();var e=Yt()(".goodsInfoOrder").eq(t).find(".TakeUp").find("span"),a=Yt()(".goodsInfoOrder").eq(t).find(".TakeUp").find("i");"查看货物信息"==e.html()?(Yt()(".goodsInfoOrder").eq(t).find(".goodsContent").show(),e.html("收起明细"),a.css("transform","rotate(180deg)")):(Yt()(".goodsInfoOrder").eq(t).find(".goodsContent").hide(),e.html("查看货物信息"),a.css("transform","rotate(0deg)"))},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Is={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PackageDetail OrderInfo_template"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("包明细")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"packageInfo"},[a("div",[a("span",[t._v("包号：")]),t._v(" "),a("span",[t._v(t._s(t.contnrCode))])])]),t._v(" "),a("div",{staticClass:"bigListBox"},t._l(t.orderList,function(e,i){return a("div",{key:i,staticClass:"goodsInfo goodsInfoOrder",attrs:{id:i}},[a("div",{staticClass:"goodsHead"},["Link_ToSend"==t.LinkStatus?a("div",{staticClass:"KeyInfoGroup"},["到付现结"==e.chargeTypes||"到付"==e.chargeTypes||"到付月结"==e.chargeTypes?a("div",[a("span",[t._v(t._s(e.chargeTypesOld))])]):t._e(),t._v(" "),"T"==e.returnBillFlag?a("div",[a("span",[t._v("签回单")])]):t._e()]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus&&"寄付现结"==e.chargeTypes?a("div",{staticClass:"KeyInfoGroup"},[t._m(0,!0)]):t._e(),t._v(" "),a("div",{staticClass:"ordernum"},[a("span",[t._v("订单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.omsNo)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"ordernum"},[a("span",[t._v("SF运单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(e.clientOrderNo)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e.clientOrderNo?a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.clientOrderNo,expression:"dataItem.clientOrderNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}):t._e()]),t._v(" "),a("div",[a("span",[t._v("卸货联系人：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyContactName)+"   \n\t\t\t\t\t\t\t\t"+t._s(e.receivePartyPhone)+"    ")]),t._v(" "),e.receivePartyPhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.receivePartyPhone)}}}):t._e()]),t._v(" "),a("div",{staticClass:"PartyAddr"},[a("span",[t._v("卸货地址：")]),t._v(" "),a("span",[t._v(t._s(e.receivePartyAddr1))])]),t._v(" "),a("div",[a("span",[t._v("装货联系人：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyContact)+"   \n\t\t\t\t\t\t\t\t"+t._s(e.issuePartyTel)+"    ")]),t._v(" "),e.issuePartyTel?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issuePartyTel)}}}):t._e()]),t._v(" "),a("div",{staticClass:"PartyAddr"},[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issuePartyAddr))])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_Transit"==t.LinkStatus?a("div",[a("span",[t._v("计划发件时间：")]),t._v(" "),a("span",[t._v(t._s(e.requiredIssueDte))])]):t._e(),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.actualQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.actualWt)+"   KG")])])]),t._v(" "),"Link_PickUp"==t.LinkStatus||"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("航班号：")]),t._v(" "),a("span",[t._v(t._s(e.flightNo))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("主单号：")]),t._v(" "),a("span",[t._v(t._s(e.aviationMasterNumber))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedDepartureTime))])]):t._e(),t._v(" "),"Link_PickUp"==t.LinkStatus?a("div",[a("span",[t._v("起飞机场：")]),t._v(" "),a("span",[t._v(t._s(e.departureAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("实际起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("计划落地时间：")]),t._v(" "),a("span",[t._v(t._s(e.plannedLandingTime))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("落地机场：")]),t._v(" "),a("span",[t._v(t._s(e.arriveAirport))])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus?a("div",[a("span",[t._v("期望到达时间：")]),t._v(" "),a("span",[t._v(t._s(e.requestedDeliveryDte))])]):t._e(),t._v(" "),e.valuationMoney?a("div",[a("span",[t._v("保价金额：")]),a("span",[t._v(t._s(e.valuationMoney)+"\n\t\t\t\t\t\t\t\t 元")])]):t._e(),t._v(" "),"Link_ToSend"==t.LinkStatus&&"YI"==e.loadingStatus&&"T"==e.returnBillFlag?a("div",[a("span",[t._v("是否上传回单：")]),a("span",[t._v(t._s("已签收"==e.returnOrderStatus?"已上传":"未上传"))])]):t._e()]),t._v(" "),a("div",{staticClass:"goodsContent",staticStyle:{display:"none"},on:{click:function(e){return t.detail_takaUp(i)}}},t._l(e.deliveryDetailList,function(e,i){return a("div",{key:i,attrs:{id:i}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.productNo)+"     "+t._s(e.productName)+"   \n\t\t\t\t\t\t\t"+t._s(e.poOrderQty)+t._s(e.poUom))])}),0),t._v(" "),e.deliveryDetailList&&e.deliveryDetailList.length?a("div",{staticClass:"goodsBtn"},[a("div",{staticClass:"TakeUp",on:{click:function(e){return t.detail_takaUp(i)}}},[t._m(1,!0)])]):t._e()])}),0)])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("寄付现结")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("查看货物信息")]),e("i",{staticClass:"iconfont icon-up",staticStyle:{transform:"rotate(0deg)"}})])}]};var ks=a("VU/8")(ws,Is,!1,function(t){a("CSxH")},"data-v-034ad282",null).exports,Ds=a("TwlK"),Ts={name:"QRCode",data:function(){return{title:""}},components:{QRCode:hs.a},mounted:function(){var t=this,e="";this.$route.query.omsNo?(e=this.$route.query.omsNo,this.title="订单号"):this.$route.query.shipmentCode&&(e=this.$route.query.shipmentCode,this.title="配载单号"),this.$nextTick(function(){t.qrcode(e);var a=document.getElementById("canvascode");Ds(a,e,{format:"CODE128",displayValue:1,fontSize:22,lineColor:"#000"})})},created:function(){},methods:{qrcode:function(t){new hs.a("qrcode",{width:200,height:200,text:t})}}},xs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QRCode"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v(t._s(t.title)+"二维码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"_qrcode"},[a("canvas",{attrs:{id:"canvascode"}}),t._v(" "),a("div",{ref:"qrcode",staticClass:"qrcode",attrs:{id:"qrcode"}})])])])},staticRenderFns:[]};var $s=a("VU/8")(Ts,xs,!1,function(t){a("K1CS")},"data-v-11fe0e65",null).exports,Ps="/kc-transport/tmsAppNew/queryOldShipmentData",Bs={name:"historyList",data:function(){return{fetchObj:g,LinkStatus:"Link_PickUp",shipmentListData:[],address_listData:[],currentAddressInfo:[],history_NoSearchFrom:!0,is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,history_SearchData:{startDate:null,endDate:null,orderNoinput:null,shipmentCodeinput:null,TransportLink:null},thisMonth:"",tips_Msg:"",ifTips:!1}},components:{FooterIndex:tt},created:function(){this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus),this.$store.state.history_LinkStatus&&(this.LinkStatus=this.$store.state.history_LinkStatus),this.history_NoSearchFrom=this.$store.state.history_NoSearchFrom,this.$store.state.history_NoSearchFrom||(this.history_SearchData=this.$store.state.history_SearchData),this.loadData()},methods:{LinkChoose:function(t){this.loadPage=1,this.allLoaded=!1,this.LinkStatus=t,this.$store.state.history_LinkStatus=t,this.loadData()},loadData:function(t){var e,a=this;a.$store.state.history_Data;a.$store.state.history_NoSearchFrom?e={startDate:null,endDate:null,orderNoinput:null,shipmentCodeinput:null,TransportLink:null,cellphone:a.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":""}:(e=a.$store.state.history_SearchData).transportLinks="Link_PickUp"==a.LinkStatus?"提货":"Link_Transit"==a.LinkStatus?"中转":"Link_ToSend"==a.LinkStatus?"派件":"Link_AirportPickUp"==a.LinkStatus?"目的HUB承运商":"",e.start=a.loadPage,e.pageSize=a.numberPerPage,this.httpRequest1("post",this.fetchObj.queryOldShipmentData,e).then(function(e){t&&("TopLoad"==t?a.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&a.$refs.loadmore.onBottomLoaded()),a.loadPage>1?a.shipmentListData=a.shipmentListData.concat(e.entity.list||[]):(a.shipmentListData=e.entity.list||[],e.entity.list.length?a.is_NoData=!1:(a.is_NoData_text="没有任务",a.is_NoData=!0)),a.$store.state.history_Data=a.shipmentListData,e.entity.list&&e.entity.list.length<a.numberPerPage?a.allLoaded=!0:a.allLoaded=!1})},currentTask:function(){this.$router.push({name:"Waybill"})},searchLabel_close:function(t){this.$store.state.history_SearchData[t]=null,this.loadData()},ViewTrajectory:function(t){event.stopPropagation(),t+="",console.log(t);try{CallAndroidOrIOS.callAndroid("查看路线",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"查看路线",b:t})}catch(t){}},toOrderDeliver:function(t){this.$store.state.search_WaybillDetail=t;this.$router.push({name:"WaybillDetail",query:{shipmentID:t.shipmentID,LinkStatus:this.LinkStatus}})},_ewm:function(t){event.stopPropagation(),this.$router.push({name:"QRCode",query:{shipmentCode:t}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.$store.state.history_needRefresh=!0,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.$store.state.history_needRefresh=!0,this.loadData("BottomLoad"))}}},Os={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historyList"},[a("header",[a("div",{staticClass:"currentTask",on:{click:t.currentTask}},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask"},[t._v("历史任务"),a("i",{staticClass:"iconfont icon-huabanfuben",on:{click:function(e){return t.search("History")}}})])]),t._v(" "),a("div",{staticClass:"SwitchTab"},[a("div",{class:{selected_head:"Link_PickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_PickUp")}}},[a("span",[t._v("提货")])]),t._v(" "),a("div",{class:{selected_head:"Link_Transit"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_Transit")}}},[a("span",[t._v("中转")])]),t._v(" "),a("div",{class:{selected_head:"Link_AirportPickUp"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_AirportPickUp")}}},[a("span",[t._v("派提")])]),t._v(" "),a("div",{class:{selected_head:"Link_ToSend"==t.LinkStatus},on:{click:function(e){return t.LinkChoose("Link_ToSend")}}},[a("span",[t._v("派件")])])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.history_SearchData.startDate||t.history_SearchData.endDate||t.history_SearchData.orderNoinput||t.history_SearchData.shipmentCodeinput||t.history_SearchData.TransportLink?a("div",{staticClass:"search_Label"},[t.history_SearchData.startDate?a("div",{on:{click:function(e){return t.searchLabel_close("startDate")}}},[a("span",[t._v("开始日期")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.endDate?a("div",{on:{click:function(e){return t.searchLabel_close("endDate")}}},[a("span",[t._v("结束日期")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.orderNoinput?a("div",{on:{click:function(e){return t.searchLabel_close("orderNoinput")}}},[a("span",[t._v("订单号")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.shipmentCodeinput?a("div",{on:{click:function(e){return t.searchLabel_close("shipmentCodeinput")}}},[a("span",[t._v("配载单号")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e(),t._v(" "),t.history_SearchData.TransportLink?a("div",{on:{click:function(e){return t.searchLabel_close("TransportLink")}}},[a("span",[t._v("运输环节")]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("配载单号："+t._s(e.shipmentCode))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.shipmentCode,expression:"dataItem.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"}),t._v(" "),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(a){return t._ewm(e.shipmentCode)}}})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliver(e)}}},[a("div",[a("span",[t._v("创建时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.addDate))])]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(e.countDelivery)+" 单   ")])]),t._v(" "),e.deliveryTime?a("div",[a("span",[t._v("交付时间：")]),t._v(" "),a("span",[t._v(t._s(e.deliveryTime))])]):t._e(),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),1==e.issueAddrLiat.length?a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(e.issueAddrLiat[0].issueUser)+"   \n\t\t\t\t\t\t\t\t"+t._s(e.issueAddrLiat[0].issuePhone))]),t._v("      "),e.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(a){return t.callPhone(e.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),1!=e.issueAddrLiat.length&&0!=e.issueAddrLiat.length?a("div",{on:{click:function(e){return t.MultiAddress(i)}}},[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"}},[t._v("查看多装货地址")])]):t._e(),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliver(e)}}},[t._v("详情")]),t._v(" "),a("span",{staticClass:"g_btn",on:{click:function(a){return t.ViewTrajectory(e.shipmentID)}}},[t._v("查看路线")])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e(),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i)}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("      "),t.currentAddressInfo.issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}}):t._e()]),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.phoneAppointTime))])]):t._e(),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.appointLoadingStatus))])]):t._e()])])])],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[]};var As=a("VU/8")(Bs,Os,!1,function(t){a("RZOs")},"data-v-241a3918",null).exports,Fs="/kc-transport/tmsAppNew/queryDeliverDetailInfo",Us={name:"WaybillDetail",data:function(){return{fetchObj:b,LinkStatus:"Link_PickUp",shipmentListData:[],orderList:[],address_listData:[],shipmentID:"",currentAddressInfo:[],historyList:!0,tips_Msg:"",ifTips:!1,packageList:[]}},components:{OrderInfo_template:ms},created:function(){var t=this;this.$route.query.shipmentID?this.shipmentID=this.$route.query.shipmentID:this.shipmentID=this.$store.state.Waybill.WaybillInfo.clickShipmentId,this.$route.query.LinkStatus&&(this.LinkStatus=this.$route.query.LinkStatus);var e=null;"Link_PickUp"==t.LinkStatus?e="10":"Link_Transit"==t.LinkStatus?e="20":"Link_AirportPickUp"==t.LinkStatus?e="27":"Link_ToSend"==t.LinkStatus&&(e="30");var a={shipmentId:t.shipmentID,appointLoadingSite:"YI",transportLinks:e};this.httpRequest1("post",this.fetchObj.queryDeliverDetailInfo,a).then(function(e){if(null!=e.entity){t.shipmentListData=e.entity,t.orderList=e.entity.orderList||[],t.packageList=e.entity.packageArray||[];for(var a=0;a<t.orderList.length;a++)t.orderList[a].ifDeliver=!1}else t.shipmentListData=t.$store.state.search_WaybillDetail})},methods:{goprev:function(){this.$router.push({name:"historyList",query:{LinkStatus:this.LinkStatus}})},_ewm:function(t){event.stopPropagation(),this.$router.push({name:"QRCode",query:{shipmentCode:t}})},toRoutingInfo:function(){this.$router.push({name:"RoutingInfo",query:{shipmentCode:this.shipmentListData.shipmentCode}})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Ws={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillDetail"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillHead",staticStyle:{"margin-top":"0"}},[t._v("配载单信息")]),t._v(" "),a("div",{staticClass:"listHead"},[a("div",[a("span",[t._v("配载单号：")]),t._v(" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shipmentListData.shipmentCode,expression:"shipmentListData.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}]},[t._v(t._s(t.shipmentListData.shipmentCode))]),t._v("\n\t\t\t\t  \n\t\t\t\t"),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shipmentListData.shipmentCode,expression:"shipmentListData.shipmentCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi",on:{click:t.stopevent}}),t._v("  \n\t\t\t\t"),a("i",{staticClass:"iconfont icon-iconfonterweima",on:{click:function(e){return t._ewm(t.shipmentListData.shipmentCode)}}})]),t._v(" "),a("div",[a("span",[t._v("创建时间：")]),a("span",[t._v(t._s(t.shipmentListData.addDate))])]),t._v(" "),a("div",[a("span",[t._v("货   量：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.countDelivery)+" 单   ")])]),t._v(" "),a("div",[a("span",[t._v("物流公司：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.transPartyName))])]),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length?a("div",[a("span",[t._v("联 系  人：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].issueUser)+"   \n\t\t\t\t\t"+t._s(t.shipmentListData.issueAddrLiat[0].issuePhone))]),t._v("      "),t.shipmentListData.issueAddrLiat[0].issuePhone?a("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.shipmentListData.issueAddrLiat[0].issuePhone)}}}):t._e()]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length?a("div",[a("span",[t._v("装货地址：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].issueAddr1))])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1!=t.shipmentListData.issueAddrLiat.length&&0!=t.shipmentListData.issueAddrLiat.length?a("div",{on:{click:function(e){return t.MultiAddress(null)}}},[a("i",{staticClass:"iconfont icon-tishi"}),t._v(" "),a("span",{staticStyle:{color:"#038EEA"}},[t._v("查看多装货地址")])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length&&t.shipmentListData.issueAddrLiat[0].phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.shipmentListData.issueAddrLiat[0].phoneAppointTime))])]):t._e(),t._v(" "),void 0!==t.shipmentListData.issueAddrLiat&&null!==t.shipmentListData.issueAddrLiat&&1==t.shipmentListData.issueAddrLiat.length&&t.shipmentListData.issueAddrLiat[0].phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s("NEW"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"新预约":"YI"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"已确定":"REFUSE"==t.shipmentListData.issueAddrLiat[0].appointLoadingStatus?"已拒绝":""))])]):t._e()]),t._v(" "),t.orderList.length||t.packageList.length?a("OrderInfo_template",{attrs:{_orderInfo:t.orderList,packageList:t.packageList,historyList:t.historyList,LinkStatus:t.LinkStatus}}):t._e()],1),t._v(" "),a("div",{staticClass:"MultiAddress"},[a("div",[a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:t.closeAddress}}),t._v(" "),a("div",{staticClass:"addressHead"},t._l(t.address_listData,function(e,i){return a("span",{key:i,attrs:{id:i},on:{click:function(e){return t.address_SwitchView(i,"usedtemplate")}}},[t._v("地址"+t._s(i+1))])}),0),t._v(" "),a("div",{staticClass:"addressContent"},[a("div",[a("span",[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueAddr1))])]),t._v(" "),a("div",[a("span",[t._v("联系人：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issueUser))])]),t._v(" "),a("div",[a("span",[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.issuePhone))]),t._v("      "),a("i",{staticClass:"iconfont icon-dianhua-copy",staticStyle:{color:"#038EEA"},on:{click:function(e){return t.callPhone(t.currentAddressInfo.issuePhone)}}})]),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约时间：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.phoneAppointTime))])]):t._e(),t._v(" "),t.currentAddressInfo.phoneAppointTime?a("div",[a("span",[t._v("预约状态：")]),t._v(" "),a("span",[t._v(t._s(t.currentAddressInfo.appointLoadingStatus))])]):t._e()])])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var Rs=a("VU/8")(Us,Ws,!1,function(t){a("7A0F")},"data-v-6f54eb7e",null).exports,qs={data:function(){return{orderNum:"",orderSF:{},WaybillTrackList:[],code:"",carShow:!1}},created:function(){var t=this;if(this.$route.query.shipmentCode&&(this.orderNum=this.$route.query.shipmentCode),t.orderNum.length){var e={omsNo:t.orderNum};console.log(e),this.httpRequest("getOrderRoute.do",postData,function(e){console.log(e),t.orderSF=e.data.orderSF;for(var a=e.data.orderTrack,i=0;i<a.length;i++)a[i].dataTime=a[i].operateTime.substring(0,10),a[i].detailTime=a[i].operateTime.substring(11,16);t.WaybillTrackList=a.sort(function(t,e){return Date.parse(e.operateTime)-Date.parse(t.operateTime)})})}else t.$alert("未获取到订单号,请稍后重试","异常提示",{confirmButtonText:"确定",callback:function(e){t.$router.back(-1)}})},methods:{}},Ms={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WaybillTrack"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:function(e){return t.$router.back(-1)}}}),a("span",[t._v("路由详情")])]),t._v(" "),a("div",{staticClass:"container"},[t.orderNum?a("div",{staticClass:"orderInfo"},[a("div",[a("span",[t._v("配载单号：")]),t._v(" "),a("span",[t._v(t._s(t.orderNum))]),t._v(" "),t.orderNum?a("icon",{staticClass:"iconfont icon-fuzhi",on:{click:function(e){return e.stopPropagation(),t.CopyNum(t.orderNum)}}}):t._e()],1)]):t._e(),t._v(" "),a("div",{staticClass:"TrackingInfo"},t._l(t.WaybillTrackList,function(e,i){return a("div",{key:i,staticClass:"TrackDetailList",attrs:{id:i}},[a("div",{staticClass:"TrackOfTime"},[a("div",[t._v(t._s(e.dataTime))]),t._v(" "),a("div",[t._v(t._s(e.detailTime))])]),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"TrackProgress"},[a("span",[t._v(t._s(e.routeDescribe))])])])}),0)]),t._v(" "),t.WaybillTrackList.length?t._e():a("div",{staticClass:"noData"},[a("i",{staticClass:"iconfont icon-rBEhWVIxcboIAAAAAAHkLwWBmsAADFGgISYAAeRHjpg"}),t._v(" "),a("div",[t._v("该单号暂无物流进展")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"TraceListStyle_outter"},[e("div",{staticClass:"TraceListStyle"},[e("div",{staticClass:"TraceListStyle_lineTop"}),this._v(" "),e("div",{staticClass:"TraceListStyle_dot"},[e("div"),this._v(" "),e("img",{attrs:{src:"/static/images/TrackLine_Up.png"}})]),this._v(" "),e("div",{staticClass:"TraceListStyle_lineBottom"})])])}]};var Es=a("VU/8")(qs,Ms,!1,function(t){a("kB+v")},"data-v-eb0635dc",null).exports,Hs={name:"AviationWaybillDetail",data:function(){return{shipmentListData:{},deliveryId:"",orderList:[],tips_Msg:"",ifTips:!1,AviationHistory:!0}},components:{OrderInfo_template:Ls},created:function(){var t=this;this.$route.query.deliveryId&&(this.deliveryId=this.$route.query.deliveryId);var e={deliveryId:t.deliveryId};this.httpRequest1("post","/kc-transport/tmsApp/queryAviationOrderDetailData",e).then(function(e){t.shipmentListData=e.entity||{}})},methods:{goprev:function(){this.$router.push({name:"AviationHistoryList"})},onCopy:function(){var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)}}},Qs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationWaybillDetail"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goprev}}),a("span",[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"waybillContainer"},[a("div",{staticClass:"bigListBox"},[a("OrderInfo_template",{attrs:{AviationHistory:t.AviationHistory,_orderInfo:t.shipmentListData,deliveryId:t.deliveryId}})],1)])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var zs=a("VU/8")(Hs,Qs,!1,function(t){a("ScQ2")},"data-v-1acd659f",null).exports,Vs={name:"AviationHistoryList",data:function(){return{shipmentListData:[],packageArray:[],is_NoData:!1,is_NoData_text:"没有任务",numberPerPage:15,loadPage:1,allLoaded:!1,autoFill:!1,tips_Msg:"",ifTips:!1}},components:{FooterIndex:wa},created:function(){this.loadData()},methods:{loadData:function(t){var e=this;return ie()(ee.a.mark(function a(){var i,s,o,n,r,c;return ee.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={start:(i=e).loadPage,pageSize:i.numberPerPage,aviationIsLoaded:"YI",transporterId:i.$store.state.userInfo.orgnizationId,searchNumberNo:i.$store.state.Aviation_HistoryWaybill.Waybill_SearchData,searchType:i.$store.state.Aviation_HistoryWaybill.Waybill_SearchType,flightDepcode:i.$store.state.userInfo.aiportCode},o=i.httpRequest1("post","/kc-transport/tmsApp/queryAviationDeliveryData",s),n=i.httpRequest1("post","/kc-transport/tmsApp/queryAviationPackageData",s),a.next=6,o;case 6:return r=a.sent,a.next=9,n;case 9:c=a.sent,t&&("TopLoad"==t?i.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&i.$refs.loadmore.onBottomLoaded()),r.entity.list=r.entity.list||[],c.entity.list=c.entity.list||[],i.loadPage>1?(i.shipmentListData=i.shipmentListData.concat(r.entity.list),i.packageArray=i.packageArray.concat(c.entity.list)):(i.shipmentListData=r.entity.list,i.packageArray=c.entity.list,r.entity.list.length||c.entity.list.length?i.is_NoData=!1:(i.is_NoData_text="没有任务",i.is_NoData=!0)),r.entity.list.length<i.numberPerPage||c.entity.list.length<i.numberPerPage?i.allLoaded=!0:i.allLoaded=!1;case 15:case"end":return a.stop()}},a,e)}))()},currentTask:function(){this.$router.push({name:"AviationWaybill"})},searchLabel_close:function(){this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"),this.loadData()},SearchSelect:function(t){"order"==t?(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=1,Yt()(".SearchBoxOrder").css("color","#038EEA").siblings().css("color","#000")):(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2,Yt()(".SearchBoxSFOrder").css("color","#038EEA").siblings().css("color","#000"))},SearchWaybill:function(){0==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=2),""==this.$store.state.Aviation_HistoryWaybill.Waybill_SearchData&&(this.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0),this.loadData()},toOrderDeliverPackage:function(t){this.$router.push({name:"PackageDetail",query:{contnrCode:t}})},toOrderDeliver:function(t){this.$router.push({name:"AviationWaybillDetail",query:{deliveryId:t}})},toAviationSearch:function(t){this.$router.push({name:"AviationSearch",query:{thisPage:t}})},onCopy:function(){event.stopPropagation();var t=this;t.ifTips=!0,t.tips_Msg="复制成功",setTimeout(function(){t.ifTips=!1},1e3)},loadTop_history:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom_history:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},js={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AviationHistoryList"},[a("header",[a("div",{staticClass:"currentTask",on:{click:t.currentTask}},[t._v("当前任务")]),t._v(" "),a("div",{staticClass:"historyTask"},[t._v("历史任务")])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{overflow:"scroll"}},[a("div",{staticClass:"topKong"}),t._v(" "),t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData?a("div",{staticClass:"search_Label"},[t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData?a("div",{on:{click:t.searchLabel_close}},[a("span",[t._v(t._s(t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData))]),a("i",{staticClass:"iconfont icon-guanbi"})]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"SearchBox"},[a("div",[a("div",{staticClass:"SearchBoxInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData,expression:"$store.state.Aviation_HistoryWaybill.Waybill_SearchData"}],attrs:{type:"text",placeholder:"支持模糊查询"},domProps:{value:t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData},on:{input:function(e){e.target.composing||t.$set(t.$store.state.Aviation_HistoryWaybill,"Waybill_SearchData",e.target.value)}}}),t._v(" "),a("div",[a("span",{staticClass:"SearchBoxOrder",on:{click:function(e){return t.SearchSelect("order")}}},[t._v("订单号")]),t._v(" "),a("span",{staticClass:"SearchBoxSFOrder",on:{click:function(e){return t.SearchSelect("SFOrder")}}},[t._v("SF运单号")])])]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"SearchBoxBtnquery"},[a("div",{on:{click:t.SearchWaybill}},[t._v("查询")])])]),t._v(" "),a("mt-loadmore",{ref:"loadmore",staticStyle:{"text-align":"center"},attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop_history,"bottom-method":t.loadBottom_history,autoFill:t.autoFill}},[a("div",{staticClass:"waybillContainer"},[t._l(t.packageArray,function(e,i){return a("div",{key:i+"r",staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("包号："+t._s(e.contnrCode))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.contnrCode,expression:"packItem.contnrCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliverPackage(e.contnrCode)}}},[a("div",[a("span",[t._v("派单时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliverPackage(e.contnrCode)}}},[t._v("详情")])])])])}),t._v(" "),t._l(t.shipmentListData,function(e,i){return a("div",{key:i,staticClass:"bigList",attrs:{id:i}},[a("div",{staticClass:"place"},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("订单号："+t._s(e.omsNo))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.omsNo,expression:"dataItem.omsNo",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",{staticClass:"searchResult",on:{click:function(a){return t.toOrderDeliver(e.deliveryId)}}},[a("div",[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"OrderNum"},[t._v("运单号："+t._s(e.deliveryNoSF))]),t._v(" "),a("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.deliveryNoSF,expression:"dataItem.deliveryNoSF",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"iconfont icon-fuzhi"})]),t._v(" "),a("div",[a("span",[t._v("派单时间：")]),a("span",{staticClass:"dateLoading"},[t._v(t._s(e.assignmentDate))])]),t._v(" "),a("div",[a("span",[t._v("航 班 号 ：")]),t._v(" "),a("span",[t._v(t._s(e.vehicleCode))])]),t._v(" "),a("div",[a("span",[t._v("计划起飞时间：")]),t._v(" "),a("span",[t._v(t._s(e.actualDepartureTime))])]),t._v(" "),a("div",[a("div",[a("span",[t._v("件数：")]),t._v(" "),a("span",[t._v(t._s(e.orderQty))])]),t._v(" "),a("div",[a("span",[t._v("重量：")]),t._v(" "),a("span",[t._v(t._s(e.orderWt)+"   KG")])])]),t._v(" "),a("div",{staticClass:"detailBtn"},[a("span",{staticClass:"g_btn",on:{click:function(a){return t.toOrderDeliver(e.deliveryId)}}},[t._v("详情")])])])])}),t._v(" "),t.allLoaded&&t.shipmentListData.length?a("div",{staticClass:"nodata_label"},[t._v("没有更多数据")]):t._e(),t._v(" "),a("div",{staticClass:"kong"}),t._v(" "),t.is_NoData?a("div",{staticClass:"nodata_kong"}):t._e()],2)]),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],1),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips msg_tips1"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("span",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),a("FooterIndex")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"SearchBoxBtn"},[e("i",{staticClass:"iconfont icon-sousuoxiawu-"})])}]};var Xs=a("VU/8")(Vs,js,!1,function(t){a("wRQb")},"data-v-7fa2940b",null).exports,Js={name:"Search",data:function(){return{startvalue:null,endValue:null,orderNum:null,order_WaybillNum:null,TsptLinkList:[{value:"提货",label:"提货"},{value:"中转",label:"中转"},{value:"派件",label:"派件"},{value:"签收",label:"签收"}],TransportLink:""}},created:function(){this.startvalue=this.$store.state.history_SearchData.startDate,this.endValue=this.$store.state.history_SearchData.endDate,this.orderNum=this.$store.state.history_SearchData.orderNoinput,this.order_WaybillNum=this.$store.state.history_SearchData.shipmentCodeinput,this.TransportLink=this.$store.state.history_SearchData.TransportLink},methods:{goPrev:function(){this.$store.state.history_needRefresh=!1,this.$router.push({name:"historyList",query:{}})},sureScreen:function(){var t,e;t=Yt()("#startvalue").val()?Yt()("#startvalue").val():null,e=Yt()("#endValue").val()?Yt()("#endValue").val():null;var a=this.$store.state.history_LinkStatus;this.$store.state.history_SearchData={startDate:t,endDate:e,orderNoinput:this.orderNum,shipmentCodeinput:this.order_WaybillNum,TransportLink:this.TransportLink,cellphone:this.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a?"提货":"Link_Transit"==a?"中转":"Link_ToSend"==a?"派件":""},console.log(this.$store.state.history_SearchData),this.$store.state.history_NoSearchFrom=!1,this.$router.push({name:"historyList",query:{}})},reset:function(){this.startvalue=null,this.endValue=null,this.orderNum=null,this.order_WaybillNum=null,this.TransportLink=null}}},Ys={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Search"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"CompetitionScreen"},[a("div",{staticClass:"screen"},[a("div",[a("span",[t._v("开始日期")]),a("el-date-picker",{attrs:{id:"startvalue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.startvalue,callback:function(e){t.startvalue=e},expression:"startvalue"}})],1),t._v(" "),a("div",[a("span",[t._v("结束日期")]),a("el-date-picker",{attrs:{id:"endValue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1),t._v(" "),a("div",[a("span",[t._v(" 订 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNum,expression:"orderNum"}],attrs:{placeholder:"请输入订单号"},domProps:{value:t.orderNum},on:{input:function(e){e.target.composing||(t.orderNum=e.target.value)}}}),t._v(" "),t.orderNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("orderNum")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("配载单号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order_WaybillNum,expression:"order_WaybillNum"}],attrs:{placeholder:"请输入配载单号"},domProps:{value:t.order_WaybillNum},on:{input:function(e){e.target.composing||(t.order_WaybillNum=e.target.value)}}}),t._v(" "),t.order_WaybillNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("order_WaybillNum")}}}):t._e()])]),t._v(" "),a("div",{staticClass:"g_doubleBtn"},[a("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{on:{click:t.sureScreen}},[t._v("搜索")])])])])])},staticRenderFns:[]};var Gs=a("VU/8")(Js,Ys,!1,function(t){a("vdeg")},"data-v-bb8d472e",null).exports,Ks={name:"Search",data:function(){return{startvalue:null,endValue:null,orderNum:"",deliveryNoSF:"",order_WaybillNum:null,TransportLink:""}},created:function(){this.startvalue=this.$store.state.history_SearchData.startDate,this.endValue=this.$store.state.history_SearchData.endDate,this.orderNum=this.$store.state.history_SearchData.orderNoinput},methods:{goPrev:function(){this.$store.state.history_needRefresh=!1,this.$router.push({name:"AviationHistoryList",query:{}})},sureScreen:function(){var t,e;t=Yt()("#startvalue").val()?Yt()("#startvalue").val():null,e=Yt()("#endValue").val()?Yt()("#endValue").val():null;var a=this.$store.state.history_LinkStatus;this.$store.state.history_SearchData={startDate:t,endDate:e,orderNoinput:this.orderNum,cellphone:this.$store.state.userInfo.cellphone,transportLinks:"Link_PickUp"==a?"提货":"Link_Transit"==a?"中转":"Link_ToSend"==a?"派件":""},console.log(this.$store.state.history_SearchData),this.$store.state.history_NoSearchFrom=!1,this.$router.push({name:"AviationHistoryList",query:{}})},reset:function(){this.startvalue=null,this.endValue=null,this.orderNum=null}}},Zs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Search"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"CompetitionScreen"},[a("div",{staticClass:"screen"},[a("div",[a("span",[t._v("开始日期")]),a("el-date-picker",{attrs:{id:"startvalue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.startvalue,callback:function(e){t.startvalue=e},expression:"startvalue"}})],1),t._v(" "),a("div",[a("span",[t._v("结束日期")]),a("el-date-picker",{attrs:{id:"endValue",editable:!1,type:"date",placeholder:"选择日期"},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1),t._v(" "),a("div",[a("span",[t._v(" 订 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNum,expression:"orderNum"}],attrs:{placeholder:"请输入订单号"},domProps:{value:t.orderNum},on:{input:function(e){e.target.composing||(t.orderNum=e.target.value)}}}),t._v(" "),t.orderNum?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("orderNum")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v(" 运 单 号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deliveryNoSF,expression:"deliveryNoSF"}],attrs:{placeholder:"请输入运单号"},domProps:{value:t.deliveryNoSF},on:{input:function(e){e.target.composing||(t.deliveryNoSF=e.target.value)}}}),t._v(" "),t.deliveryNoSF?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("deliveryNoSF")}}}):t._e()])]),t._v(" "),a("div",{staticClass:"g_doubleBtn"},[a("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("div",{on:{click:t.sureScreen}},[t._v("搜索")])])])])])},staticRenderFns:[]};var to=a("VU/8")(Ks,Zs,!1,function(t){a("A5uk")},"data-v-2c221eb1",null).exports,eo={name:"HomeIndex",data:function(){return{userName:"",cellphone:"",VersionNum:"",iosorandroid:"android",ifShowDisableScan:!1,ifDisableScan:"否"}},components:{FooterIndex:tt},created:function(){console.log(this.$store.state.userInfo),this.userName=this.$store.state.userInfo.userName,this.cellphone=this.$store.state.userInfo.cellphone,this.VersionNum=this.$store.state.App_Version},mounted:function(){this.iosorandroid=this.$store.state.Device,this.ifDisableScan=this.getItem("SXJF_ifScan")||"否"},methods:{updateapp:function(){try{CallAndroidOrIOS.updateAPP()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"检查版本更新"})}catch(t){}},show_DisableScan:function(){this.ifShowDisableScan=!0},selectDisableScan:function(t){this.ifDisableScan=t,this.setItem({name:"SXJF_ifScan",value:t}),this.ifShowDisableScan=!1},toPassword:function(){this.$router.push({name:"RePassword",query:{}})},toHistoricalTrack:function(){this.$router.push({name:"HistoricalTrack",query:{}})},exit:function(){var t=this;this.$confirm("确定要退出登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){localStorage.removeItem("SXJF_USERDATA"),localStorage.removeItem("SXJF_pwd"),t.pluginGetUser("",""),t.$store.state.AviationWaybill.Waybill_SearchData="",t.$store.state.AviationWaybill.Waybill_SearchType=0,t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",t.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,t.$store.state.Waybill.Waybill_SearchData="",t.$store.state.Waybill.Waybill_SearchType=0,t.$router.push({name:"Login",query:{}})}).catch(function(){})},pluginGetUser:function(t,e){try{CallAndroidOrIOS.callAndroidTrack(t,e)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:t,c:e})}catch(t){}}}},ao={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"HomeIndex"},[i("div",{staticClass:"container"},[i("div",{staticClass:"headImg"},[i("div",{staticClass:"background"}),t._v(" "),i("div",{staticClass:"background_blank"}),t._v(" "),i("div",{staticClass:"head"},[i("div",{staticClass:"image"}),t._v(" "),i("img",{staticClass:"userinfo-avatar",attrs:{src:a("7ADV")}}),t._v(" "),i("div",{staticClass:"userName"},[t._v(t._s(t.userName))]),t._v(" "),i("div",{staticClass:"userName"},[t._v(t._s(t.cellphone))])]),t._v(" "),i("div",{staticClass:"stripInfo"},[t.$store.state.userInfo.aiportName?i("div",[i("i",{staticClass:"iconfont icon-jiesongjifuwu"}),i("span",[t._v("所属机场："+t._s(t.$store.state.userInfo.aiportName))])]):t._e(),t._v(" "),i("div",{on:{click:t.toHistoricalTrack}},[i("i",{staticClass:"iconfont icon-lishiguiji"}),i("span",[t._v("历史轨迹")]),i("i",{staticClass:"iconfont icon-xiangshang"})]),t._v(" "),i("div",{on:{click:t.toPassword}},[i("i",{staticClass:"iconfont icon-xiugaimima"}),i("span",[t._v("修改密码")]),i("i",{staticClass:"iconfont icon-xiangshang"})]),t._v(" "),i("div",{on:{click:t.show_DisableScan}},[i("i",{staticClass:"iconfont icon-xiugaimima"}),i("span",[t._v("扫描方式")]),i("i",{staticClass:"iconfont icon-xiangshang"}),i("span",[t._v(t._s("是"==t.ifDisableScan?"巴枪扫描":"手机扫描"))])]),t._v(" "),i("div",{on:{click:t.updateapp}},[i("i",{staticClass:"iconfont icon-guanyu"}),i("span",[t._v("版本更新")]),i("i",{staticClass:"iconfont icon-xiangshang"}),i("span",[t._v(t._s(t.VersionNum))])])]),t._v(" "),i("div",{staticClass:"Exit_logon"},[i("i",{staticClass:"iconfont icon-icon-yxj-switch-account",on:{click:t.exit}}),t._v(" "),i("div",[i("span",{on:{click:t.exit}},[t._v("退出登录")])])])])]),t._v(" "),t.ifShowDisableScan?i("div",{staticClass:"SelectDelivery"},[i("div",{staticClass:"DeliveryBox"},[i("div",{staticClass:"DeliveryBox_head"},[t._v("请选择扫描方式")]),t._v(" "),i("div",{staticClass:"DeliveryBox_content"},[i("div",{class:{DeliveryBox_content_active:"是"==t.ifDisableScan},on:{click:function(e){return t.selectDisableScan("是")}}},[i("span",[t._v("巴枪扫描")]),"是"==t.ifDisableScan?i("i",{staticClass:"iconfont icon-duigou"}):t._e()]),t._v(" "),i("div",{class:{DeliveryBox_content_active:"否"==t.ifDisableScan},on:{click:function(e){return t.selectDisableScan("否")}}},[i("span",[t._v("手机扫描")]),"否"==t.ifDisableScan?i("i",{staticClass:"iconfont icon-duigou"}):t._e()])])])]):t._e(),t._v(" "),i("FooterIndex")],1)},staticRenderFns:[]};var io=a("VU/8")(eo,ao,!1,function(t){a("Yoff")},"data-v-3e8da679",null).exports,so="/kc-transport/tmsApp/queryTrajectoryData",oo={name:"HistoricalTrack",data:function(){return{fetchObj:y,TrackListData:[],is_NoData:!1,is_NoData_text:"没有任务"}},created:function(){var t=this,e={cellphone:t.$store.state.userInfo.cellphone};this.httpRequest1("post",this.fetchObj.historData,e).then(function(e){t.TrackListData=e.entity||[],0==t.TrackListData.length&&(t.is_NoData_text="没有结果",t.is_NoData=!0)})},methods:{goPrev:function(){this.$router.push({name:"HomeIndex",query:{}})}}},no={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HistoricalTrack"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("历史轨迹")])]),t._v(" "),a("div",{staticClass:"container"},[t._l(t.TrackListData,function(e,i){return a("div",{key:i,staticClass:"TrackList",attrs:{id:i}},[a("div",[t._v(t._s(e.trackingTime))]),t._v(" "),a("div",[t._v(t._s(e.vehicleLocation))])])}),t._v(" "),t.is_NoData?a("div",{staticClass:"NoData"},[a("div",[a("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),t._v(" "),a("div",[t._v(t._s(t.is_NoData_text))])])]):t._e()],2)])},staticRenderFns:[]};var ro=a("VU/8")(oo,no,!1,function(t){a("rxgG")},"data-v-16ca87e4",null).exports,co="/leaguer/tmsApp/updateUserPassword",lo={name:"RePassword",data:function(){return{fetchObj:L,oldpwd:"",newpwd:"",reNewpwd:"",tips_Msg:"",ifTips:!1}},created:function(){},methods:{goPrev:function(){this.$router.push({name:"HomeIndex",query:{}})},submit:function(){var t=this,e=t.$store.state.userInfo.cellphone;if(this.oldpwd)if(this.newpwd)if(this.reNewpwd)if(this.reNewpwd==this.newpwd)if(this.newpwd.length<6)t.$alert("密码不能小于6位数！","提示",{confirmButtonText:"确定"});else if(this.oldpwd!=this.newpwd){var a={cellphone:e,next_page:"xiugaimima",oldPassword:t.oldpwd,password:t.newpwd};t.httpRequest1("post",this.fetchObj.upadtePassword,a).then(function(e){t.ifTips=!0,t.tips_Msg="修改成功",setTimeout(function(){t.ifTips=!1,localStorage.removeItem("SXJF_USERDATA"),t.pluginGetUser("",""),t.$router.push({name:"Login",query:{}})},1500)})}else t.$alert("新密码不能与原密码相同！","提示",{confirmButtonText:"确定"});else t.$alert("两次新密码不一致！","提示",{confirmButtonText:"确定"});else t.$alert("请确认新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入原密码！","提示",{confirmButtonText:"确定"})},pluginGetUser:function(t,e){try{plus.plugintest.PluginGetUserFunction(t,e,function(t){},function(t){})}catch(t){}}}},uo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"RePassword"},[a("header",[a("i",{staticClass:"iconfont icon-xiangzuo1",on:{click:t.goPrev}}),a("span",[t._v("修改密码")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",[a("span",[t._v("原密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpwd,expression:"oldpwd"}],ref:"oldpwd",attrs:{placeholder:"请输入原密码"},domProps:{value:t.oldpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("newpwd")},input:function(e){e.target.composing||(t.oldpwd=e.target.value)}}}),t._v(" "),t.oldpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("oldpwd")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("新密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newpwd,expression:"newpwd"}],ref:"newpwd",attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:t.newpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("reNewpwd")},input:function(e){e.target.composing||(t.newpwd=e.target.value)}}}),t._v(" "),t.newpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("newpwd")}}}):t._e()]),t._v(" "),a("div",[a("span",[t._v("确认密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.reNewpwd,expression:"reNewpwd"}],ref:"reNewpwd",attrs:{type:"password",placeholder:"请再次输入新密码"},domProps:{value:t.reNewpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.reNewpwd=e.target.value)}}}),t._v(" "),t.reNewpwd?a("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("reNewpwd")}}}):t._e()]),t._v(" "),a("div",{staticClass:"g_signBtn",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),t.ifTips?a("div",{staticClass:"msg_tips"},[a("div",{staticClass:"tips_content"},[a("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),a("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])},staticRenderFns:[]};var ho=a("VU/8")(lo,uo,!1,function(t){a("ucMm")},"data-v-3291343a",null).exports;D.default.use($.a);var po=new $.a({routes:[{path:"/",name:"Login",component:q},{path:"/ForgotPwd",name:"ForgotPwd",component:j},{path:"/Reg",name:"Reg",component:H},{path:"/Identifying",name:"Identifying",component:K},{path:"/Search",name:"Search",component:Gs},{path:"/AviationSearch",name:"AviationSearch",component:to},{path:"/Index",name:"Index",component:st},{path:"/ExceptionList",name:"ExceptionList",component:ct},{path:"/ScanQueryOrderInfo",name:"ScanQueryOrderInfo",component:mt},{path:"/PrintExpress",name:"PrintExpress",component:wt},{path:"/PrintExpressShein",name:"PrintExpressShein",component:Pt},{path:"/AuditWeight",name:"AuditWeight",component:Zt},{path:"/AirMasterScan",name:"AirMasterScan",component:ge},{path:"/SweepCodePrinting",name:"SweepCodePrinting",component:Le},{path:"/LightBehind",name:"LightBehind",component:Ne},{path:"/ReportAbnormal",name:"ReportAbnormal",component:xe},{path:"/WarehousingSignScan",name:"WarehousingSignScan",component:Me},{path:"/HistoryWarehousingSign",name:"HistoryWarehousingSign",component:Qe},{path:"/PortScanning",name:"PortScanning",component:Je},{path:"/UploadReceipt",name:"UploadReceipt",component:ta},{path:"/LeadWarehouseScan",name:"LeadWarehouseScan",component:ra},{path:"/HistoryLeadWarehousingSign",name:"HistoryLeadWarehousingSign",component:da},{path:"/AirLabelPrinting",name:"AirLabelPrinting",component:pa},{path:"/Waybill",name:"Waybill",component:Sa},{path:"/AviationWaybill",name:"AviationWaybill",component:xa},{path:"/PickUpRandomScan",name:"PickUpRandomScan",component:Aa},{path:"/AirportPickUpRandomScan",name:"AirportPickUpRandomScan",component:qa},{path:"/ToSendRandomScan",name:"ToSendRandomScan",component:za},{path:"/SignRandomScan",name:"SignRandomScan",component:Ya},{path:"/DepartTakingPictures",name:"DepartTakingPictures",component:Za},{path:"/UnloadingTakingPictures",name:"UnloadingTakingPictures",component:ai},{path:"/WaybillInfo",name:"WaybillInfo",component:gs},{path:"/AviationWaybillInfo",name:"AviationWaybillInfo",component:Ns},{path:"/PackageDetail",name:"PackageDetail",component:ks},{path:"/DeliveryScanXH",name:"DeliveryScanXH",component:ci},{path:"/DeliveryScan",name:"DeliveryScan",component:ui},{path:"/PackageDeliveryScan",name:"PackageDeliveryScan",component:_i},{path:"/TransitScan",name:"TransitScan",component:yi},{path:"/AirportPickUpScan",name:"AirportPickUpScan",component:Si},{path:"/AviationAllTransitScan",name:"AviationAllTransitScan",component:ls},{path:"/DeliveryOrderPickScan",name:"DeliveryOrderPickScan",component:Ii},{path:"/PackageDeliveryOrderPickScan",name:"PackageDeliveryOrderPickScan",component:Ti},{path:"/ReceiptScan",name:"ReceiptScan",component:Pi},{path:"/PackageReceiptScan",name:"PackageReceiptScan",component:Ai},{path:"/AbnormalScan",name:"AbnormalScan",component:qi},{path:"/Abnormal",name:"Abnormal",component:Vi},{path:"/TrackOnTheWay",name:"TrackOnTheWay",component:Ji},{path:"/MassTransfer",name:"MassTransfer",component:Ki},{path:"/CollectCustomerNum",name:"CollectCustomerNum",component:es},{path:"/UnloadDelivery",name:"UnloadDelivery",component:ss},{path:"/WaybillDetail",name:"WaybillDetail",component:Rs},{path:"/AviationWaybillDetail",name:"AviationWaybillDetail",component:zs},{path:"/RoutingInfo",name:"RoutingInfo",component:Es},{path:"/QRCode",name:"QRCode",component:$s},{path:"/historyList",name:"historyList",component:As},{path:"/AviationHistoryList",name:"AviationHistoryList",component:Xs},{path:"/HomeIndex",name:"HomeIndex",component:io},{path:"/HistoricalTrack",name:"HistoricalTrack",component:ro},{path:"/RePassword",name:"RePassword",component:ho}]}),vo=(a("uKUT"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.Loading,expression:"Loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app",type:"primary","element-loading-text":this.loadingText,"element-loading-background":"rgba(0, 0, 0, 0)"}},[e("router-view",{on:{isLoading:this.fullscreenLoading}})],1)},staticRenderFns:[]});var mo=a("VU/8")({name:"App",data:function(){return{Loading:!1,loadingText:"拼命加载中"}},mounted:function(){},methods:{fullscreenLoading:function(t,e){this.Loading=t,e&&(this.loadingText=e)}}},vo,!1,function(t){a("/HEB")},null,null).exports,fo=a("8+8L"),_o=(a("mw3O"),a("6q5P"),a("U7mS")),go=a.n(_o),bo=a("wvfG"),yo=a.n(bo),Lo=a("Fd2+"),Co=a("ibnl"),So=a.n(Co),No=(a("tOCg"),a("Au9i"));a("d8/S");D.default.use(yo.a),D.default.use(Lo.c).use(Lo.a).use(Lo.b),D.default.use(So.a),D.default.component(No.Loadmore.name,No.Loadmore),D.default.prototype.BaiDuMap="http://api.map.baidu.com/geocoder/v2/",D.default.use(fo.a),D.default.use(x.a),D.default.use(T.DatePicker),D.default.use(T.Upload),D.default.use(T.Loading),D.default.use(T.Image),D.default.prototype.$notify=T.Notification,D.default.prototype.$msgbox=T.MessageBox,D.default.prototype.$alert=T.MessageBox.alert,D.default.prototype.$confirm=T.MessageBox.confirm,D.default.prototype.$prompt=T.MessageBox.prompt,D.default.config.productionTip=!1,D.default.prototype.HOST=Rt.state.RequestLink,D.default.prototype.HOSTimg=Rt.state.RequestLinkimg,D.default.prototype.HOST1=Rt.state.RequestLink1,D.default.prototype.HOSTimg1=Rt.state.RequestLinkimg1,"Login"!=po.name&&po.push({name:"Login",query:{}}),po.afterEach(function(t,e,a){window.scrollTo(0,0)}),D.default.prototype.TelliOSORAndroidVueMounted=function(t){try{CallAndroidOrIOS.callAndroid("获取当前位置页面已加载","")}catch(t){}},D.default.prototype.androidScan=function(t){if(window.QRScanAjax=this.QRScanAjax,window.TellVue_QRScanResult_Ajax=this.QRScanAjax,this.$store.state.ScanQRCodeInputName=t,!this.getItem("SXJF_ifScan")||"是"!=this.getItem("SXJF_ifScan"))try{CallAndroidOrIOS.VueSCAN()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"调用app原生扫描二维码/条码",b:t})}catch(t){}},D.default.prototype.encryption=function(t){var e=Mt.a.enc.Utf8.parse("l5TJHfZrmY38Hf2e2H1h0Q=="),a=Mt.a.enc.Utf8.parse(t);return Mt.a.AES.encrypt(a,e,{mode:Mt.a.mode.ECB,padding:Mt.a.pad.Pkcs7}).toString()},D.default.prototype.decryption=function(t){var e=Mt.a.enc.Utf8.parse("l5TJHfZrmY38Hf2e2H1h0Q=="),a=Mt.a.AES.decrypt(t,e,{mode:Mt.a.mode.ECB,padding:Mt.a.pad.Pkcs7});return Mt.a.enc.Utf8.stringify(a).toString()},D.default.prototype.httpRequest=function(t,e,a,i){var s=this;i&&"isLoading_"==i?s.$emit("isLoading_",!0,"拼命加载中"):s.$emit("isLoading",!0,"拼命加载中"),s.$store.state.userInfo.userToken&&(e.userToken=s.$store.state.userInfo.userToken),e.cellphone||(e.cellphone=s.$store.state.userInfo.cellphone),e=k()(e),console.log(e),e=s.encryption(e),Ct.a.post(s.HOST+t,{params:e}).then(function(t){if(console.log(t),i&&"isLoading_"==i?s.$emit("isLoading_",!1):s.$emit("isLoading",!1),1==t.data.status||1==t.data.type){if(t.data.data)try{t.data.data=JSON.parse(s.decryption(t.data.data))}catch(e){t.data.data=s.decryption(t.data.data)}console.log(t.data),a(t.data)}else if(301==t.data.status)s.ReturnToLogin();else if(501==t.data.status){e=t.data.Msg?t.data.Msg:"请求失败",s.$alert(e,"提示",{confirmButtonText:"确定",callback:function(t){try{CallAndroidOrIOS.updateAPP()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"检查版本更新"})}catch(t){}}})}else{var e;e=t.data.Msg?t.data.Msg:"请求失败",s.$alert(e,"提示",{confirmButtonText:"确定",callback:function(t){}})}}).catch(function(t){i&&"isLoading_"==i?s.$emit("isLoading_",!1):s.$emit("isLoading",!1),s.$alert("请求失败","提示",{confirmButtonText:"确定"})})},D.default.prototype.httpRequest1=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",e=arguments[1],a=arguments[2],i=this;return new w.a(function(s,o){i.$emit("isLoading",!0,"拼命加载中"),i.$store.state.userInfo.userToken&&(a.userToken=i.$store.state.userInfo.userToken),a.cellphone||(a.cellphone=i.$store.state.userInfo.cellphone);var n={method:t,url:i.HOST1+e};localStorage.getItem("jwt")&&(n.headers={Authorization:"Bearer"+localStorage.getItem("jwt")});var r={param:A(k()({entity:a}))};"get"===t?n.params=r:"post"===t&&(n.data=function(t,e){var a=Object.prototype.hasOwnProperty;e=e||"";var i=[];for(var s in"string"!=typeof e&&(e="?"),t)a.call(t,s)&&i.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return i.length?e+i.join("&"):""}(r)),Ct()(n).then(function(t){i.$emit("isLoading",!1);var n=JSON.parse(F(t.data.result));console.log("请求url: ",i.HOST1+e,"请求参数： ",a,"返回参数：",n);var r=n.code;if(0==r)s(n);else if(5==r)i.ReturnToLogin();else{var c=n.detail;c||(c="请求失败"),i.$alert(c,"提示",{confirmButtonText:"确定",callback:function(t){}}),o(n)}}).catch(function(t){i.$emit("isLoading",!1),i.$alert("请求失败","提示",{confirmButtonText:"确定"}),o(t)})})},D.default.prototype.getImgUrl=function(t){return this.HOSTimg1+"?param="+A(k()({entity:{path:t}}))},D.default.prototype.onPlusReady=function(t){"e"!=t&&this.$emit(t,!0,"正在获取当前位置"),"android"==this.$store.state.Device?(this.TelliOSORAndroidVueMounted("获取当前位置页面已加载"),window.SetCurrAddress=this.SetCurrAddress):this.Geolocation(t)},D.default.prototype.Geolocation=function(t){var e=this;(new BMap.Geolocation).getCurrentPosition(function(a){if(a.point){e.longitude=parseFloat(a.point.lng),e.latitude=parseFloat(a.point.lat);var i={longitude:e.longitude,latitude:e.latitude};e.httpRequest1("post","/kc-transport/tmsAppNew/getAddressFromFT",i).then(function(a){"e"!=t&&e.$emit(t,!1),0!=a.code&&1!=a.type||(e.CurrentCity=a.entity[0].city,e.CurrentLocation=a.entity[0].province+a.entity[0].city+a.entity[0].county+a.entity[0].town,e.CurrentDistrict=a.entity[0].county)}).catch(function(a){"e"!=t&&e.$emit(t,!1),e.$alert("位置信息解析失败","提示",{confirmButtonText:"确定"})})}},{enableHighAccuracy:!0})},D.default.prototype.ReceivingLatitud=function(t){var e=this,a=JSON.parse(t);if(e.longitude=parseFloat(a.lng),e.latitude=parseFloat(a.lat),"0"==a.lng)this.$alert("未获取到app位置权限，如果已打开权限，将app从手机后台程序中关闭重新启动","提示",{confirmButtonText:"确定",callback:function(t){e.$router.go(-1)}});else try{var i={longitude:e.longitude,latitude:e.latitude,userToken:e.$store.state.userInfo.userToken,cellphone:e.$store.state.userInfo.cellphone};console.log(i),e.httpRequest1("post","/kc-transport/tmsAppNew/getAddressFromFT",i).then(function(t){console.log(t),0!=t.code&&1!=t.type||(e.CurrentCity=t.entity[0].city,e.CurrentLocation=t.entity[0].province+t.entity[0].city+t.entity[0].county+t.entity[0].town,e.CurrentDistrict=t.entity[0].county)}).catch(function(t){e.$alert("位置信息解析失败","提示",{confirmButtonText:"确定"})})}catch(t){e.$alert(t,"提示",{confirmButtonText:"确定"})}},D.default.prototype.PublicEncryption=function(t){return this.$store.state.userInfo.userToken&&(t.userToken=this.$store.state.userInfo.userToken),t.cellphone||(t.cellphone=this.$store.state.userInfo.cellphone),t=k()(t),console.log(t),this.encryption(t)},D.default.prototype.ReturnToLogin=function(){var t=this;t.$alert("登录失效或接口验证不通过、请重新登录！","提示",{confirmButtonText:"确定",callback:function(e){localStorage.removeItem("SXJF_USERDATA"),localStorage.removeItem("SXJF_pwd");try{CallAndroidOrIOS.callAndroidTrack("","")}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"记住帐号密码",b:"",c:""})}catch(t){}t.$store.state.AviationWaybill.Waybill_SearchData="",t.$store.state.AviationWaybill.Waybill_SearchType=0,t.$store.state.Aviation_HistoryWaybill.Waybill_SearchData="",t.$store.state.Aviation_HistoryWaybill.Waybill_SearchType=0,t.$store.state.Waybill.Waybill_SearchData="",t.$store.state.Waybill.Waybill_SearchType=0,po.push({name:"Login",query:{}})}})},D.default.prototype.closeScan=function(){try{CallAndroidOrIOS.CancelScan()}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"离开app原生半屏扫描二维码/条码"})}catch(t){}},D.default.prototype.flashOpenOrClose=function(){try{this.ifflash?(CallAndroidOrIOS.setTorchEnabled_false(),this.ifflash=!1):(CallAndroidOrIOS.setTorchEnabled_true(),this.ifflash=!0)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"打开或关闭闪光灯"})}catch(t){}},D.default.prototype.beforeUpload=function(t){if(console.log(t),0==t.size)return this.$alert("上传失败，图片大小为0，请检查照片或重新拍照!","提示",{confirmButtonText:"确定",callback:function(t){Yt()(".el-loading-mask.is-fullscreen").css("display","none")}}),!1;try{return go()(t).then(function(t){return t.file}).catch(function(e){return t})}catch(a){console.log(a);var e=t.size/1024/1024<10;return e||this.$alert("上传图片大小不能超过 10MB!","提示",{confirmButtonText:"确定",callback:function(t){Yt()(".el-loading-mask.is-fullscreen").css("display","none")}}),e}},D.default.prototype.uploadSuccess=function(t,e,a){console.log(t)},D.default.prototype.uploadError=function(t,e,a){alert(t)},D.default.prototype.callPhone=function(t){event.stopPropagation(),window.location.href="tel://"+t},D.default.prototype.BubbleSort=function(t){for(var e=[],a=0;a<t.length-1;a++)for(var i=a+1;i<t.length;i++)t[a]>t[i]&&(e=t[a],t[a]=t[i],t[i]=e);return console.log(t),t},D.default.prototype.getFocus=function(t){this.$refs[t].focus()},D.default.prototype.clearInput=function(t){this[t]=""},D.default.prototype.toWaybill=function(){Rt.state.Waybill_needRefresh=!0,po.push({name:"Waybill",query:{}})},D.default.prototype.toLogin=function(){po.push({name:"Login",query:{}})},D.default.prototype.search=function(t){po.push({name:"Search",query:{thisPage:t}})},D.default.prototype.typeSelect=function(t){this.typeMShow=!0},D.default.prototype.selectCancel=function(t){this.typeMShow=!1},D.default.prototype.Navigation=function(t){event.stopPropagation();var e=this;this.Navigate_addressList=[];var a=e.shipmentListData[t].issueAddrLiat,i=[];e.$emit("isLoading_",!0,"拼命加载中");var s={shipmentId:e.shipmentListData[t].shipmentID};this.httpRequest1("post","/kc-transport/tmsAppNew/queryDeliverReceiveAddrInfo",s).then(function(t){if(e.$emit("isLoading_",!1),t.entity.length){for(var s=0;s<t.entity.length;s++)i[s]={issueAddr1:t.entity[s].receivePartyAddr1,issuePhone:t.entity[s].receivePartyPhone,issueUser:t.entity[s].receivePartyContactName,ORFlag:"收"};e.Navigate_addressList=a.concat(i),e.Navigate_addressList.length?e.typeMShow=!0:e.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})}else e.Navigate_addressList=a,e.Navigate_addressList.length?e.typeMShow=!0:e.$alert("没有要导航的地址信息","提示",{confirmButtonText:"确定",callback:function(t){}})})},D.default.prototype.Navigate_SelectComit=function(t){t=t;console.log(t),this.typeMShow=!1;try{CallAndroidOrIOS.callAndroid("导航",t)}catch(t){}try{window.webkit.messageHandlers.messageSend.postMessage({a:"导航",b:t})}catch(t){}},D.default.prototype.MultiAddress=function(t){event.stopPropagation(),null==t?(this.address_listData=this.shipmentListData.issueAddrLiat,this.currentAddressInfo=this.shipmentListData.issueAddrLiat[0]):(this.addressWaybill_Idx=t,this.address_listData=this.shipmentListData[t].issueAddrLiat,this.currentAddressInfo=this.shipmentListData[this.addressWaybill_Idx].issueAddrLiat[0]),"NEW"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="新预约":"YI"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="已确定":"REFUSE"==this.currentAddressInfo.appointLoadingStatus&&(this.currentAddressInfo.appointLoadingStatus="已拒绝"),Yt()(".MultiAddress").css("display","block"),Yt()(".addressHead>span").eq(0).css("border-bottom-color","#5965D8").siblings().css("border-bottom-color","#eee")},D.default.prototype.closeAddress=function(){event.stopPropagation(),Yt()(".MultiAddress").css("display","none")},D.default.prototype.address_SwitchView=function(t,e){event.stopPropagation(),this.currentAddressInfo=e?this.shipmentListData.issueAddrLiat[t]:this.shipmentListData[this.addressWaybill_Idx].issueAddrLiat[t],"NEW"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="新预约":"YI"==this.currentAddressInfo.appointLoadingStatus?this.currentAddressInfo.appointLoadingStatus="已确定":"REFUSE"==this.currentAddressInfo.appointLoadingStatus&&(this.currentAddressInfo.appointLoadingStatus="已拒绝"),Yt()(".addressHead>span").eq(t).css("border-bottom-color","#5965D8").siblings().css("border-bottom-color","#eee")},D.default.prototype.goPrev=function(){po.go(-1)},D.default.prototype.setItem=function(t){var e={name:"",value:"",expires:"",startTime:(new Date).getTime()},a={};if(S()(a,e,t),a.expires)localStorage.setItem(a.name,k()(a));else{Object.prototype.toString.call(a.value);"[object Object]"==Object.prototype.toString.call(a.value)&&(a.value=k()(a.value)),"[object Array]"==Object.prototype.toString.call(a.value)&&(a.value=k()(a.value)),localStorage.setItem(a.name,a.value)}},D.default.prototype.getItem=function(t){var e=localStorage.getItem(t);try{e=JSON.parse(e)}catch(t){e=e}return e&&e.startTime?(new Date).getTime()-e.startTime>e.expires?(localStorage.removeItem(t),!1):e.value:e},D.default.prototype.onError=function(t){console.log(t)},D.default.prototype.stopevent=function(){event.stopPropagation()},new D.default({el:"#app",router:po,Axios:Ct.a,store:Rt,$:Yt.a,components:{App:mo},template:"<App/>"})},PiNF:function(t,e){},Q7Lr:function(t,e){},QDfD:function(t,e){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},QPdl:function(t,e){},RAVx:function(t,e){},RZOs:function(t,e){},Ro8Z:function(t,e,a){t.exports=a.p+"img/zfb_logo.7ae63c4.jpg"},SVyD:function(t,e){},SWo7:function(t,e){},ScQ2:function(t,e){},UJy4:function(t,e){},UeTi:function(t,e){},Ugt3:function(t,e){},VmtA:function(t,e){},W3GH:function(t,e){},YH8Z:function(t,e){},YJF4:function(t,e){},Yoff:function(t,e){},Zj4f:function(t,e){},ap4A:function(t,e){},b2XV:function(t,e,a){t.exports=a.p+"img/flash.77b5eb7.png"},cjNq:function(t,e){},cpHv:function(t,e){},"d8/S":function(t,e){},ejIc:function(t,e){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},fbFv:function(t,e){},"g/Ld":function(t,e){},gEVO:function(t,e){},hDXG:function(t,e){},hYnK:function(t,e){},i1Yn:function(t,e,a){t.exports=a.p+"img/input.1ac59c7.png"},i5pW:function(t,e){document.addEventListener("plusready",function(){var t="plugintest",e=window.plus.bridge,a={PluginScanFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginScanFunction",[callbackID])},PluginUpdateAPPFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginUpdateAPPFunction",[callbackID])},PluginGetUserFunction:function(a,i,s,o){var n="function"!=typeof s?null:function(t){s(t)},r="function"!=typeof o?null:function(t){o(t)};return callbackID=e.callbackId(n,r),e.exec(t,"PluginGetUserFunction",[callbackID,a,i])},PluginSetUserFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginSetUserFunction",[callbackID])},PluginPrintIosFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginPrintIosFunction",[callbackID,a])},PluginNavigationFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginNavigationFunction",[callbackID,a])},PluginTrackIosFunction:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginTrackIosFunction",[callbackID,a])},PluginWXLoginFunction:function(a,i){var s="function"!=typeof a?null:function(t){a(t)},o="function"!=typeof i?null:function(t){i(t)};return callbackID=e.callbackId(s,o),e.exec(t,"PluginWXLoginFunction",[callbackID])},PluginTestFunctionArrayArgu:function(a,i,s){var o="function"!=typeof i?null:function(t){i(t)},n="function"!=typeof s?null:function(t){s(t)};return callbackID=e.callbackId(o,n),e.exec(t,"PluginTestFunctionArrayArgu",[callbackID,a])},PluginTestFunctionSync:function(a,i,s,o){return e.execSync(t,"PluginTestFunctionSync",[a,i,s,o])},PluginTestFunctionSyncArrayArgu:function(a){return e.execSync(t,"PluginTestFunctionSyncArrayArgu",[a])}};window.plus.plugintest=a},!0)},iQH9:function(t,e,a){t.exports=a.p+"img/logo.4b30c76.png"},jIxs:function(t,e){},"kB+v":function(t,e){},l9IN:function(t,e,a){t.exports=a.p+"img/ad_pic_2.aa96f5f.jpg"},lP8a:function(t,e){},lvNd:function(t,e){},lwCU:function(t,e){},n55d:function(t,e,a){t.exports=a.p+"img/ad_pic_1.45c1b81.png"},nWsP:function(t,e){},ohFQ:function(t,e){},owtF:function(t,e){},"p/yQ":function(t,e){},p479:function(t,e){},qsTf:function(t,e){},rt3k:function(t,e){},rxgG:function(t,e){},tOCg:function(t,e){},tsvS:function(t,e){},tvR6:function(t,e){},uKUT:function(t,e){},ucMm:function(t,e){},vdeg:function(t,e){},vi9z:function(t,e){},wRQb:function(t,e){},wpeQ:function(t,e){},wrvk:function(t,e){},x9LW:function(t,e){},xWlY:function(t,e){},yMhG:function(t,e){},ywwO:function(t,e){},zH73:function(t,e){}},["NHnr"]);